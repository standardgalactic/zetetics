FUNCTORIAL SEMANTICS FOR PARTIAL THEORIES
IVAN DI LIBERTI, FOSCO LOREGIAN, CHAD NESTER, AND PAWEL SOBOCIÅƒSKI
Abstract. We provide a Lawvere-style deï¬nition for partial theories, extending the classical notion
of equational theory by allowing partially deï¬ned operations. As in the classical case, our deï¬nition
is syntactic: we use an appropriate class of string diagrams as terms. This allows for equational
reasoning about the class of models deï¬ned by a partial theory. We demonstrate the expressivity
of such equational theories by considering a number of examples, including partial combinatory
algebras and cartesian closed categories. Moreover, despite the increase in expressivity of the syntax
we retain a well-behaved notion of semantics: we show that our categories of models are precisely
locally ï¬nitely presentable categories, and that free models exist.
Acknowledgements. Di Liberti was supported by the Grant Agency of the Czech Republic project
EXPRO 20-31529X and RVO: 67985840. Loregian, Nester and SobociÅ„ski were supported by the
ESF funded Estonian IT Academy research measure (project 2014-2020.4.05.19-0001).
1. Introduction
Mathematicians interested in, say, the theory of monoids or the theory of groups work in an
axiomatic setting, asserting the presence of a collection of ğ‘›-ary operations on an ambient set ğ´â€”
i.e. (total) functions ğ´ğ‘›â†’ğ´for some ğ‘›: N â€” that satisfy a number of axioms. This data can
be packaged up into an equational theory: a pair (Î£, ğ¸) where Î£ is the signature, consisting of
operation symbols, each with a speciï¬ed arity, and ğ¸is a collection of equations â€” i.e. pairs of
terms built up from the signature Î£ and auxiliary variables â€” that provide the axioms. An ambient
equational theory is thus the bread and butter of an algebraist, that together with the principles of
equational reasoning provides the basic calculus of mathematical investigation into the structure of
interest.
Birkhoï¬€[Bir35] discovered that a substantial amount of mathematics can be done at the level of
generality of an equational theory. Given an equational theory (Î£, ğ¸), a model is a set together with
an interpretation of the function symbols Î£ that satisï¬es the equations ğ¸. A monoid is nothing
but a model of the equational theory of monoids, a group is a model of the equational theory of
groups, and so on. The semantics of an equational theory, i.e. its class of models, is called a variety.
Birkhoï¬€showed that certain results (e.g. the so-called isomorphism theorems, existence of free
models) can be derived uniformly for generic varieties, independent of the equational theory at hand.
Most spectacularly, a class of sets-with-structure can be determined to be a variety through purely
structural means; this is often referred to as Birkhoï¬€â€™s Variety Theorem or the HSP Theorem.
The resulting ï¬eld is known as universal algebra. Its mathematical objects of study are equational
theories and varieties. Given its goal of uncovering methodological and technical similarities of a
large swathe of contemporary algebra, universal algebra is in the intersection of mathematics and
mathematical logic. It has inï¬‚uenced computer science, especially programming language theory,
as a formal and generic treatment of syntax, terms, equational reasoning, etc.
Lawvere [Law63], and the subsequent development of categorical universal algebra, addressed
some of the perceived shortcomings of the classical account. It is well known that a single variety
can have many diï¬€erent axiomatic presentations, and in this sense the choice of a particular
Key words and phrases. Lawvere theory, categories of partial maps, syntax, semantics, variety theorem.
1
arXiv:2011.06644v1  [cs.LO]  12 Nov 2020

2
IVAN DI LIBERTI, FOSCO LOREGIAN, CHAD NESTER, AND PAWEL SOBOCIÅƒSKI
commutative comonoids
F op
Lawvere theory
classical terms
Varieties
Finite Ã— categories
Â§2.4
2.26
2.9
Â§2.5
Adjunction 2.35
Â§2.22
2.24
2.21
Algebraic structure
Free c. on 1
Speciï¬cation
Syntax
Semantics
Universal property
partial Frobenius algebras
Par(F op)
partial Lawvere theory
string diagrams
LFP categories
DCR categories
Â§4.2
Â§5
Â§6
4.6
Adjunction Â§7
3.11
Â§4.1
4.4
Algebraic structure
Free c. on 1
Speciï¬cation
Syntax
Semantics
Universal property
Figure 1. Elements of classical functorial semantics on the left, and our contribu-
tion on the right.
presentation may seem ad hoc. The requirement that models be sets-with-structure is also restrictive,
since algebraic structures appear in other mathematical contexts as well. A Lawvere theory is a
category L that serves as a presentation-independent way of capturing the speciï¬cation of a variety.
A central conceptual role is played by cartesian categories, i.e. categories with ï¬nite products.
The free cartesian category on one object often appears in the very deï¬nition of a Lawvere theory
â€“ the â€œone objectâ€ here capturing single-sortedness. Finite products track arities and ensure that
operations are total functions. Functorial semantics gives us the correct generalisation of varieties:
a model is cartesian functor L â†’Set. This point of view is ï¬‚exible (e.g. Set can be replaced with
another cartesian category) and leads to a rich theory [HP07, Law63, ALR03], where the study of
varieties and their speciï¬cations can take place at a high level of generality.
The beautiful abstract picture painted by Lawvere can be used to give a post-hoc explanation of
the elements of classical equational theories. Every equational theory yields a Lawvere theory. Free
equational theories, i.e. those where ğ¸= âˆ…, are Lawvere theories whose arrows can be concretely
described as (tuples of) terms. Indeed, it is well-known that terms are closely connected to the
universal property of products. The abstract mathematics, therefore, explains the structure of terms
and justiï¬es the use of ordinary equational reasoning. The elements of Lawvereâ€™s approach to
universal algebra are illustrated in the left side of Fig. 1.
In this paper we are concerned with partial algebraic structures, i.e. those where the operations
are not, in general, deï¬ned on their whole domain. Partiality is important in mathematics: the very
notion of category itself is a partial algebraic structure, since only compatible pairs of arrows can be
composed. Even more so, partiality is an essential property of computation, and partial functions
play a role in many diï¬€erent parts of computer science, starting with initial forays into recursion
theory at the birth of the subject, and being ever present in more recent developments, for example
arising as an essential ingredient in the study of ï¬xpoints [BÃ‰93]. From the start it was clear that
additional care is necessary for partial operations, the terms built up from them, and the associated
principles of (partial) equational reasoning. An example is the principle of Kleene equality: using
ğ‘ = ğ‘¡to assert that whenever one side is deï¬ned, so is the other, and they are equal, or the use of
notation âˆ’|ğ‘‹to restrict the domain of deï¬nition of a function. In general, reasoning about partially
deï¬ned terms can be quite subtle.
Our contribution is summarised on the right hand side of Fig. 1 and follows Lawvereâ€™s approach
closely. A key question that we address is what replaces the central notion of cartesian category.

FUNCTORIAL SEMANTICS FOR PARTIAL THEORIES
3
This turns out to be the notion of discrete cartesian restriction (DCR) category, which arose from
research on the structure of partiality [CGH12]. Just as the free cartesian category on one object
plays a central role in the deï¬nition of Lawvere theory, the free DCR category on one object plays a
central role in the deï¬nition of partial Lawvere theory that we propose. In our development, the
category of sets and partial functions Par replaces Set as the universe of models. Much of the
richness of the classical picture is unchanged: e.g. we obtain free models just as in the classical
setting. Moreover, we prove a variety theorem that characterises partial varieties as locally ï¬nitely
presentable (LFP) categories.
Props [ML65, Lac04] and their associated string diagrams, play a crucial technical role. Props
are a convenient categorical structure that capture generic monoidal theories. Monoidal theories
diï¬€er from equational theories in that, roughly speaking, in that we are able to consider more general
monoidal structures other than the cartesian one. String diagrams are the syntax of props, and they
are a bona ï¬de syntax not far removed from traditional terms. For example, they can be recursively
deï¬ned and enjoy similar properties as free objects, e.g. the principle of structural induction. The
connective tissue between the classical story and string diagrams is Foxâ€™s Theorem [Fox76], which
states that the structure of cartesian categories can be captured by the presence of local algebraic
structure: a coherent and natural commutative comonoid structure on each object. This implies
several things: (i) that classical terms can be seen as particular kinds of string diagrams, (ii) that
classical equational reasoning can be seen as diagrammatic reasoning on these string diagrams and
(iii) that the prop induced from the monoidal theory of commutative comonoids â€” well-known
to coincide with F op, the opposite of the prop of ï¬nite sets and functions â€” is the free cartesian
category on one object. The correspondence goes further: as shown in [BSZ18], Lawvere theories
are particular kinds of monoidal theories.
We are able to identify the nature of the free DCR category on one object by proving a result
similar to Foxâ€™s Theorem, but for DCR categories instead of cartesian categories. Instead of
commutative comonoids, we identify the algebraic structure of interest as partial Frobenius algebras.
The free DCR category on one object is the prop induced from this monoidal theory, and it can be
characterised as Par(F op): the prop of partial functions in F op. This informs our deï¬nition of partial
Lawvere theory. Crucially, just as the mathematics of ordinary Lawvere theories serves as a post
hoc justiï¬cation for equational theories, we identify the precise class of string diagrams that serve as
partial terms, which lets us deï¬ne a partial equational theory in a familiar way as pair of signature
and equations. We give several examples, from partial commutative monoids, to several examples
important in computer science, notably the theory of partial combinatory algebras [Bet88], the
theory of pairing functions, and the theory of cartesian closed categories.
To summarise, the original contributions of this paper are:
â€¢ A â€œFox theoremâ€ for DCR categories, which uses the notion of partial Frobenius algebra
and leads to the characterisation of the free DCR category on one object as Par(F op);
â€¢ The deï¬nitions of partial Lawvere theory and partial equational theory, which use string
diagrammatic syntax informed by the aforementioned Fox theorem;
â€¢ The coupling of these notions into a comprehensive framework for partial algebraic theories,
analogous to the work of Lawvere on classical algebraic theories, as illustrated in Fig. 1;
â€¢ The existence of free models, andâ€”more generallyâ€“a variety theorem, building on known
results about DCR categories, and the Gabriel-Ulmer duality.
Related work. There are a number of formalisms in the literature that aim at providing a rigorous
way of specifying partial algebraic structure. Freydâ€™s essentially algebraic theories [Fre72] were
introduced informally, but were subsequently formalised and generalised in various ways [AR94,
PV07, ARV11]. A diï¬€erent, but equally expressive approach is via ï¬nite limit sketches [AR94].
Nevertheless, none of these approaches can claim to have the foundational status of classical

4
IVAN DI LIBERTI, FOSCO LOREGIAN, CHAD NESTER, AND PAWEL SOBOCIÅƒSKI
equational theories - e.g. they do not, per se, provide a canonical notion of syntax to replace classical
terms, nor a calculus for (partial) equational reasoning about the categories of models they deï¬ne.
Tout court, none of them can claim to be equational. Interestingly, the semantic landscape (i.e.
the corresponding notion of partial variety) is better understood than the syntax. The class of
models of essentially algebraic theories and ï¬nite limit sketches are closely related to Gabriel-Ulmer
duality [Cen04], which asserts a contravariant (bi)equivalence between the category of categories
with ï¬nite limits and the category of locally ï¬nitely presentable (LFP) categories.
Partial Frobenius algebras, which arise in our characterisation of DCR categories, are spe-
cial/separable Frobenius algebras without units. The version with units was originally studied
in [CW87], is deeply connected to the relational algebra [FS90], characterises 2-dimensional
TQFTs [Koc03], and has been used extensively in categorical approaches to the study of quantum
information and quantum computing, such as the ZX calculus [CD08]. In a similar way to the
use of partial Frobenius algebras in this paper, they are used in the recently proposed Frobenius
theories [BPS17], which are algebraic theories that take their models in the category of relations
Rel, and are guided by the structure of cartesian bicategories of relations [CW87].
Restriction categories were introduced in [CL02] as a general framework for reasoning about
categories of partial maps. Cartesian restriction (CR) categories are those with a certain sort
of formal ï¬nite product structure â€“ restriction products â€“ introduced in [CL07]. Notably, the
p-categories of [RR88] arise as restriction categories with restriction products. Discrete cartesian
restriction (DCR) categories â€“ named for a similarity to categories of discrete topological spaces â€“
arise in [CGH12] as the restriction categories with ï¬nite latent limits â€“ again a sort of formal limit.
DCR categories are closely connected to the discrete inverse categories considered in [Gil14] which
are presentable in terms of semi-Frobenius algebras, being those special/separable commutative
Frobenius algebras with neither a unit nor a counit.
Structure of the paper. In Â§2 we lay the foundations by recalling the basic concepts of universal
algebra, props and string diagrams, Foxâ€™s theorem, and functorial semantics. In Â§3, after recalling
the basics of restriction category theory, we prove Theorem 3.6, which is to DCR categories what
Foxâ€™s theorem is to cartesian categories. In Â§4 we propose our original deï¬nitions: partial Lawvere
theories and their varieties. Next, Â§5 is devoted to the associated notion of partial equational theory,
and several examples, continued in Â§6 with multi-sorted examples. Our variety theorem is in Â§7
where we also treat other semantic aspects, e.g. the existence of free models.
2. Background material
2.1. Overview of classical universal algebra. Universal algebra is the study of equational theories
and of their semantics, varieties. In this section we recall the basic concepts and deï¬nitions.
Deï¬nition 2.1. A signature is a pair (Î£, ğ›¼) where Î£ is a set and ğ›¼a function Î£ â†’N that assigns to
every element ğ‘¡: Î£ a natural number ğ›¼(ğ‘›) : N called the arity of the function symbol ğ‘¡.
Notation 2.2. The arity â€œslicesâ€ the set Î£ of function symbols. The slice Î£ğ‘›âŠ†Î£ contains operations
of arity ğ‘›, and ğ‘¡: Î£ğ‘›is a synonym for â€œğ‘¡is a ğ‘›-ary operationâ€. We will sometimes write ğ‘¡ğ‘›for a
generic element of Î£ğ‘›. We shall refer to the signature as just Î£ if the arity function is understood
from the context. For example the signature Î£M of monoids is {ğ‘š, ğ‘’}, with ğ›¼(ğ‘š) = 2 and ğ›¼(ğ‘’) = 0.
Deï¬nition 2.3. A Î£-algebra is a pair (ğ´, âŸ¦âˆ’âŸ§ğ´) where ğ´is a set and âŸ¦âˆ’âŸ§ğ´is a function sending
function symbols ğ‘¡: Î£ğ‘›to functions âŸ¦ğ‘¡âŸ§ğ´: ğ´ğ‘›â†’ğ´. The function âŸ¦ğ‘¡âŸ§ğ´is called the ğ‘›-ary
operation on ğ´associated to the function symbol ğ‘¡: Î£ğ‘›. We refer to ğ´as the carrier of the
Î£-algebra. A Î£-algebra homomorphism from (ğ´, âŸ¦âˆ’âŸ§ğ´) to (ğµ, âŸ¦âˆ’âŸ§ğµ) is a function ğ‘“: ğ´â†’ğµthat

FUNCTORIAL SEMANTICS FOR PARTIAL THEORIES
5
respects the Î£ structure: i.e. for every ğ‘›âˆˆN and ğ‘¡: Î£ğ‘›, the following diagram commutes:
ğ´ğ‘›
ğµğ‘›
ğ´
ğµ.
âŸ¦ğ‘¡âŸ§ğ´
ğ‘“ğ‘›
âŸ¦ğ‘¡âŸ§ğµ
ğ‘“
Remark 2.4. Î£-algebras and their homomorphisms deï¬ne a category VÎ£.
Of course, an algebraic structure isnâ€™t just about operations, but also about properties enjoyed by
those operations. To express this we ï¬rst need the notion of term. Fixing a signature Î£, we recall
the usual recursive construction of the set of terms ğ‘‡ğ‘‰
Î£ , for some set of variables ğ‘‰:
ğ‘‡ğ‘‰
Î£
::= ğ‘‰| ğ‘¡0 | ğ‘¡1(ğ‘‡ğ‘‰
Î£ ) | ğ‘¡2(ğ‘‡ğ‘‰
Î£ ,ğ‘‡ğ‘‰
Î£ ) | . . . | ğ‘¡ğ‘›(ğ‘‡ğ‘‰
Î£ , . . . ,ğ‘‡ğ‘‰
Î£ ) | . . .
In the above, each ğ‘¡ğ‘–ranges over the function symbols in Î£ğ‘–. For any ğ‘‰, ğ‘‡ğ‘‰
Î£ carries a canonical
Î£-algebra structure: âŸ¦ğ‘¡âŸ§(ğ‘¡1, ğ‘¡2, . . . , ğ‘¡ğ‘›ğ‘¡)
def= ğ‘¡(ğ‘¡1, ğ‘¡2, . . . , ğ‘¡ğ‘›ğ‘¡). We call this the term Î£-algebra over ğ‘‰.
Observation 2.5. The term Î£-algebra ğ‘‡ğ‘‰
Î£ enjoys a universal property: given a Î£-algebra (ğ´, âŸ¦âˆ’âŸ§ğ´)
and function ğ‘£: ğ‘‰â†’ğ´, there is a unique extension to a homomorphism of algebras Â¯ğ‘£: ğ‘‡ğ‘‰
Î£ â†’ğ´.
This is just the induction principle associated to the recursive deï¬nition of terms.
Deï¬nition 2.6 (Î£-equation). Fixing ğ‘‰, a Î£-equation is a pair (ğ‘ , ğ‘¡) âˆˆğ‘‡ğ‘‰
Î£ Ã— ğ‘‡ğ‘‰
Î£ ; we usually write
â€˜ğ‘ = ğ‘¡â€™. A Î£-equation ğ‘ = ğ‘¡holds in Î£-algebra (ğ´, âŸ¦âˆ’âŸ§ğ´) if for all ğ‘£: ğ‘‰â†’ğ´we have Â¯ğ‘£(ğ‘ ) = Â¯ğ‘£(ğ‘¡)
in ğ´.
Given the signature of monoids, we can express properties such as associativity: ğ‘š(ğ‘¥, ğ‘š(ğ‘¦, ğ‘§)) =
ğ‘š(ğ‘š(ğ‘¥, ğ‘¦), ğ‘§); or commutativity: ğ‘š(ğ‘¥, ğ‘¦) = ğ‘š(ğ‘¦, ğ‘¥); etc. The idea is that a set of Î£-equations
constrains the choice of algebras (ğ´, âŸ¦âˆ’âŸ§ğ´) to those where every equation holds.
Deï¬nition 2.7 (Equational Theory and Variety). A pair (Î£, ğ¸) where Î£ is a signature and ğ¸a set
of Î£-equations is called an equational theory. A model of (Î£, ğ¸) is a Î£-algebra where every ğ‘’: ğ¸
holds. The class of models for an equational theory is called a variety.
Example 2.8. The equational theory of commutative monoids is
( {ğ‘š, ğ‘’}, { ğ‘š(ğ‘š(ğ‘¥, ğ‘¦), ğ‘§) = ğ‘š(ğ‘¥, ğ‘š(ğ‘¦, ğ‘§)), ğ‘š(ğ‘¥, ğ‘¦) = ğ‘š(ğ‘¦, ğ‘¥), ğ‘š(ğ‘’, ğ‘¥) = ğ‘¥} ).
The corresponding variety is the class of commutative monoids.
Some of the most famous results of universal algebra characterise varieties. For example:
Theorem 2.9 (Birkhoï¬€[Bir35]). A class of Î£-algebras is a variety if and only if it is closed under
homomorphic images, subalgebras and products.
2.2. Props and monoidal theories. Our development is informed by the diï¬€erences between the
algebraic structure of total functions and partial functions. Given the focus on algebra, the notion
of prop is useful as a categorical gadget on which to hang an algebraic structure. Moreover, the
associated notion of string diagram will lead us to a syntax with which to express partial equational
theories by appropriately generalising classical terms. Here we recall the basic deï¬nitions of props
[Lac04], string diagrams and some of the algebraic structures that are prominent in subsequent
sections.
Deï¬nition 2.10 (Prop [ML65, Ch. 5]). A prop is a symmetric strict monoidal category with set of
objects the natural numbers N, where the monoidal product on objects is addition: ğ‘šâŠ—ğ‘›:= ğ‘š+ ğ‘›.
A homomorphism of props is an identity-on-objects symmetric strict monoidal functor.

6
IVAN DI LIBERTI, FOSCO LOREGIAN, CHAD NESTER, AND PAWEL SOBOCIÅƒSKI
Example 2.11. An important example is the prop F of ï¬nite ordinal numbers. In the following,
[ğ‘š]
def= {1, 2, . . . , ğ‘š}. The F -arrows ğ‘šâ†’ğ‘›are all functions [ğ‘š] â†’[ğ‘›]: composition is function
composition, and the monoidal product is â€œdisjoint unionâ€; i.e. for ğ‘“1 : ğ‘š1 â†’ğ‘›1 and ğ‘“2 : ğ‘š2 â†’ğ‘›2,
( ğ‘“1 âŠ—ğ‘“2)(ğ‘–) : ğ‘š1 + ğ‘š2 â†’ğ‘›1 + ğ‘›2
def=
(
ğ‘“1(ğ‘–)
if ğ‘–â‰¤ğ‘š1
ğ‘“2(ğ‘–âˆ’ğ‘š1) + ğ‘›1
otherwise.
Free props generated from some signature of operations are of particular importance.
Deï¬nition 2.12 (Monoidal signature). A monoidal signature Î“ is a collection of generators ğ›¾: Î“,
each with an arity ar(ğ›¾) : N and coarity coar(ğ›¾) : N.
Concrete terms can be given a BNF description, as follows:
(1)
ğ‘::= ğ›¾âˆˆÎ“ |
|
|
| ğ‘âŠ—ğ‘| ğ‘# ğ‘
Arities and coarities are not handled in the BNF but with an associated sorting discipline, shown
below. We only consider terms that have a sort, which is unique if it exists.
ğ›¾: (ar(ğ›¾), coar(ğ›¾))
: (0, 0)
: (1, 1)
: (2, 2)
ğ‘: (ğ‘›, ğ‘§)
ğ‘‘: (ğ‘§, ğ‘š)
ğ‘# ğ‘‘: (ğ‘›, ğ‘š)
ğ‘: (ğ‘›, ğ‘š)
ğ‘‘: (ğ‘Ÿ, ğ‘§)
ğ‘âŠ—ğ‘‘: (ğ‘›+ğ‘Ÿ, ğ‘š+ğ‘§)
The idea is that the sort ğ‘: (ğ‘š, ğ‘›) counts the number of â€œdangling wiresâ€ of each term. Every
sortable term generated from (1) has a diagrammatic representation. The convention for ğ›¾: Î“ is to
draw it as a box with ar(ğ›¾) â€œdangling wiresâ€ on the left and coar(ğ›¾) on the right:
ar(ğ›¾)
n
ğ›¾
...
...
o
coar(ğ›¾)
The conventions for the (1) operations are: ğ‘# ğ‘â€² is drawn
c
c0
...
...
...
and ğ‘âŠ—ğ‘â€² is drawn
c
c0
...
...
...
...
.
The sorting discipline ensures that the convention for # makes sense.
Example 2.13. Consider the following signature, where the (co)arities are apparent from the
(CMG)
Î“
def=
n
,
o
glyphs. The term (
âŠ—(
âŠ—
)) #((
âŠ—
) #
) has sort (3, 2) and diagram:
where the â€œdotted lineâ€ boxes serve the role of parentheses.
Terms of (1) are quotiented by the laws of symmetric strict monoidal categories. We do not go
into the details here, but these are closely connected with the diagrammatic conventions. Indeed,

FUNCTORIAL SEMANTICS FOR PARTIAL THEORIES
7
they allow us to discard the â€œdotted lineâ€ boxes and focus only on the connectivity between the
generators. For example the following two diagrams are in the same equivalence class of terms:
=
We refer to equivalence classes [ğ‘] : ğ‘šâ†’ğ‘›as string diagrams.
Deï¬nition 2.14. The free prop XÎ“ on Î“ has as arrows ğ‘šâ†’ğ‘›string diagrams [ğ‘] : (ğ‘š, ğ‘›).
String diagrams can be used to specify additional equations that specify algebraic structure.
Deï¬nition 2.15 (Monoidal theory [Lac04]). For a monoidal signature Î“, a Î“-equation is a pair
([ğ‘], [ğ‘‘]) of equally-sorted string diagrams; we usually write â€˜[ğ‘] = [ğ‘‘]â€™. A monoidal theory is a
pair (Î“, ğ¹) where ğ¹is a set of Î“-equations.
Given a monoidal theory (Î“, ğ¹), the induced prop X(Î“,ğ¹) can be obtained by taking a coequaliser
in Cat. It can alternatively be given an explicit description as follows: as arrows [ğ‘š] â†’[ğ‘›] it has
arrows of XÎ“ quotiented by the smallest congruence containing ğ¹.
Example 2.16. Consider the signature (CMG) and the following set of equations:
(CM)
ğ¸
def=
n
=
,
=
,
=
o
.
The resulting prop CM is the prop of commutative monoids. The equations, from left to right,
express associativity, commutativity and unitality.
Remark 2.17. String diagrams in X(Î“,ğ¹) are amenable to equational reasoning, often referred to
as diagrammatic reasoning in this context: if ([ğ‘], [ğ‘‘]) âˆˆğ¹then substituting ğ‘for ğ‘‘inside any
context is sound. For example in CM the set of equations contains only one of the unit laws. The
other may be derived:
=
=
=
=
=
=
=
We typically omit the â€œdotted lineâ€ boxes in such chains of reasoning.
Interestingly, CM can be seen as the algebraic characterisation of F .
Observation 2.18 ([Lac04]). As props, F  CM.
Remark 2.19. In fact, arrows of CM can be intuitively understood as â€œpictures of functionsâ€. For
example, the function ğ‘“: 2 â†’2 where ğ‘“(1) = ğ‘“(2) = 1 is drawn
Example 2.20. The theory of commutative comonoids plays an important role for us. The data is:
(CCMG)
(CCM)
=
=
=
Let CC be the prop induced from the monoidal theory ((CCMG),(CCM)).

8
IVAN DI LIBERTI, FOSCO LOREGIAN, CHAD NESTER, AND PAWEL SOBOCIÅƒSKI
Given that (CCMG) and (CCM) are mirrored (CMG) and (CM), Observation 2.18 gives:
Observation 2.21. As props, F op  CC.
While we have specialised our discussion of string diagrams as the syntax of props, it is
well-known that they can be used as a sound calculus in any symmetric (strict) monoidal category.
Roughly speaking, objects are represented by wires, and morphisms by boxes.
2.3. Foxâ€™s theorem. Equational and monoidal theories are linked by Foxâ€™s theorem ([Fox76]),
recalled here â€“ this will be explained in Â§2.6. Cartesian categories are categories with ï¬nite
products, and cartesian functors preserve them. Fox showed that cartesian categories are exactly
those that have a certain algebraic structure.
A commutative comonoid on an object ğ‘‹of a symmetric monoidal category X is a triple
(ğ‘‹, ğ›¿ğ‘‹, ğœ€ğ‘‹) s.t. ğ›¿ğ‘‹: ğ‘‹â†’ğ‘‹âŠ—ğ‘‹and ğœ€ğ‘‹: ğ‘‹â†’ğ¼, depicted as
and
respectively, and these
satisfy (CCM). If all objects are so equipped, then the structures are coherent if for all objects ğ‘‹,ğ‘Œ:
(coherent)
ğ‘‹âŠ—ğ‘Œ
ğ‘‹âŠ—ğ‘Œ
ğ‘‹âŠ—ğ‘Œ
ğ‘‹
ğ‘Œ
ğ‘‹
ğ‘‹
ğ‘Œ
ğ‘Œ
=
ğ‘‹âŠ—ğ‘Œ
ğ‘‹
ğ‘Œ
=
Further, we say that the ğ›¿and ğœ€are natural if for any arrow ğ‘“: ğ‘‹â†’ğ‘Œof X, we have:
(natural)
ğ‘“
ğ‘‹
ğ‘Œ
ğ‘Œ
ğ‘“
ğ‘“
ğ‘‹
ğ‘Œ
ğ‘Œ
=
ğ‘“
ğ‘‹
=
Theorem 2.22 ([Fox76]). A cartesian category is the same thing as a symmetric monoidal category
where every object is equipped with a (coherent) and (natural) commutative comonoid structure.
In light of Observation 2.21, we know that a commutative comonoid structure on ğ‘‹is equivalently
a cartesian functor X : F op â†’X where X[1] = ğ‘‹. The action of X on objects is determined by its
action on 1, and the generators give arrows X(
) = ğ›¿ğ‘‹: ğ‘‹â†’ğ‘‹âŠ—ğ‘‹and X(ğ‘‹
) = ğœ€ğ‘‹: ğ‘‹â†’ğ¼
of X which satisfy (CCM). Thus we may specialize Theorem 2.22, to props as follows:
Corollary 2.23. A prop X is cartesian (with categorical product the monoidal product) if and only
if there is a homomorphism of props F op â†’X and the picked out comonoid structure is (natural).
It is easy to show that a coherent and natural commutative comonoid structure, if it exists, is
unique. An easy consequence of Theorem 2.22 is that a cartesian functor is precisely a symmetric
monoidal functor that preserves the comonoid structure. This, combined with Corollary 2.23, gives:
Proposition 2.24. The prop F op is the free cartesian category on a single object.
2.4. Lawvere theories. We recall Lawvereâ€™s approach [Law63] of functorial semantics of algebraic
theories in the rest of the section. Lawvereâ€™s approach is centered on the theory of cartesian categories.
Deï¬nition 2.25 (Lawvere theory). A Lawvere theory is a cartesian prop. A morphism of Lawvere
theories is a cartesian prop homomorphism. Lawvere theories and homomorphisms deï¬ne the
category Law.
Finite products do two jobs: they keep track of arities of operations, andâ€”less obviouslyâ€”they
ensure the totality and single-valuedness of the interpretation of function symbols in any model.
Free categories with products play a leading role. Recall from Proposition 2.24 that F op is the
free category with products on one object. Spelled out, a Lawvere theory is a cartesian category

FUNCTORIAL SEMANTICS FOR PARTIAL THEORIES
9
L and an identity-on-objects cartesian functor F op â†’L. A morphism of Lawvere theories is a
functor â„: L â†’M s.t. the following triangle commutes:
F op
L
M.
ğ‘
ğ‘
â„
Remark 2.26. Every equational theory gives rise to a Lawvere theory. For the case of no equations
(Î£, âˆ…), this Lawvere theory LÎ£ is the free category with products on Î£. It also has a simple,
concrete description that uses Î£-terms. An arrow ğ‘šâ†’ğ‘›is an ğ‘›-tuple
(2)
(ğ‘¡1, ğ‘¡2, . . . , ğ‘¡ğ‘›)
where each
ğ‘¡ğ‘–: ğ‘‡[ğ‘š]
Î£
i.e. where each term in the tuple may use formal variables from the set {1, . . . , ğ‘š}. Composition of
(ğ‘ 1, . . . , ğ‘ ğ‘˜) : ğ‘šâ†’ğ‘˜with (ğ‘¡1, . . . , ğ‘¡ğ‘›) : ğ‘˜â†’ğ‘›is via substitution:
(ğ‘¡1[ğ‘ 1/1, . . . ğ‘ ğ‘˜/ğ‘˜], . . . , ğ‘¡ğ‘›[ğ‘ 1/1, . . . , ğ‘ ğ‘˜/ğ‘˜]) : ğ‘šâ†’ğ‘›.
Given a set of equations ğ¸, ordering the variables in each ğ‘ = ğ‘¡: ğ¸induces pairs of arrows
ğ‘ , ğ‘¡: ğ‘šâ†’1 (where ğ‘šis the number of variables appearing in ğ‘ and ğ‘¡). Then L(Î£,ğ¸) is obtained by
â€œequatingâ€ ğ‘ and ğ‘¡â€“this can be computed via a coequaliser, or directly as in (2) where terms are
taken modulo the smallest congruence containing the required equations. We omit the details.
The Lawvere theory induced from the empty equational theory (âˆ…, âˆ…) is F op.
2.5. Semantics for algebraic theories. Here we recall some of the basic elements of functorial
semantics.
Deï¬nition 2.27 (Model of a Lawvere theory). A model for a Lawvere theory L is a cartesian
functor ğ¿: L â†’Set. A model homomorphism ğ¿â†’ğ¿â€² is a natural transformation ğ›¼: ğ¿â‡’ğ¿â€².
This deï¬nes the category of models ModL of a Lawvere theory L.
Remark 2.28. There are forgetful functors ğ‘ˆ: ModL â†’Set, given by evaluating on the terminal
object ğ¹â†¦â†’ğ¹(1). Intuitively, ğ‘ˆforgets the algebraic structure, returning the underlying carrier set.
Deï¬nition 2.27 is compatible with its classical counterpart: the data required to give a model of
(Î£, ğ¸), in the sense of Deï¬nition 2.7, is precisely that required to give a functor L(Î£, ğ¸) â†’Set.
The functorial approach lends itself to generalisations: e.g. replacing Set with another cartesian
category. Moreover, it allows for further structural analysis.
Observation 2.29. ModL is closed under limits computed in the category of all functors [L, Set],
because limits commute with limits. For a similar reason it is closed under sifted colimits. Thus the
inclusion ModL â†©â†’[L, Set] creates limits and sifted colimits1.
Remark 2.30 (Multi-sorted, unsorted). The codomain of ğ‘ˆ: ModL â†’Set betrays that our
presentation is single sorted. Indeed when L is ğ‘†-sorted we obtain a functor ğ‘ˆ: ModL â†’[ğ‘†, Set].
Historically, syntactic aspects are single sorted, while categorical variety theorems are most crisp in
the unsorted case. It is thus worthwhile to focus on these concepts in more detail.
An ğ‘†-sorted Lawvere theory is a cartesian ğ‘†-coloured prop. Spelled out, it is an identity-on-objects
cartesian functor F (ğ‘†) â†’L, where F (ğ‘†) is the free cartesian category on ğ‘†.
An unsorted Lawvere theory is simply a (small) category with products.
1Sifted J-indexed colimits satisfy the following property: given a functor ğ¸: ğ¼Ã— J â†’Set, s.t. the category ğ¼is
discrete (namely, it is just a set), the following isomorphism holds:
colimJ limğ¼ğ¸(ğ¼, ğ½)  limğ¼colimJ ğ¸(ğ¼, ğ½).
In other words, sifted colimits are those that commute with ï¬nite products in Set.

10
IVAN DI LIBERTI, FOSCO LOREGIAN, CHAD NESTER, AND PAWEL SOBOCIÅƒSKI
In the remainder of this section we focus on the unsorted version, because the treatment is
notationally and technically simpliï¬ed. Nevertheless, much of the following is sort-agnostic.
Observation 2.31. A theory morphism â„: L â†’Lâ€² induces a (contravariant) functor
Modâ„: ModLâ€² â†’ModL
taking ğ¹: Lâ€² â†’Set to ğ¹Â· â„: L â†’Set. The functor Modâ„always admits a left adjoint: Modâ„
preserves limits and sifted colimits because they are computed in the underlying functor category.
The special adjoint functor theorem can now be used to obtain a left adjoint ğ¿â„: ModL â†’ModLâ€².
Example 2.32. For intuition, we consider a concrete example. Consider the inclusion ğ‘–of the
theory of monoids in commutative monoids. Then Modğ‘–is the functor that â€œforgetsâ€ commutativity.
Its left adjoint takes a monoid and â€œforcesâ€ commutativity by quotienting the underlying carrier set.
Observation 2.33. Lawvere theories have free models. Let ğ‘: F op â†’L be a Lawvere theory.
Observation 2.31 gives an adjunction
ğ¹: ModF op â‡†ModL : Modğ‘.
Then Modğ‘coincides with the forgetful functor of Remark 2.28. The left adjoint ğ¹gives free
objects.
Because of Observation 2.31, it is natural to take adjunctions as the notion of variety morphism.
Below, by unsorted-variety we mean a category equivalent to ModL for L with ï¬nite products.
Deï¬nition 2.34. Let V, W be two (unsorted) varieties; a morphism of varieties is a functor
ğ‘…: V â†’W satisfying the following:
mv1) ğ‘…admits a left adjoint ğ¿: W â†’V;
mv2) ğ‘…commutes with sifted colimits.
Given that adjunctions compose, this data yields a category Var.
Let Prod be the 2-category whose objects are small cartesian categories, morphisms are cartesian
functors and 2-cells are natural transformations. Then Observation 2.31 boils down to deï¬ning a
2-functor Mod: Prodop â†’Var. The following captures the relationship between Law and Var.
Theorem 2.35 ([ALR03, Theorem 4.1]). There exists a 2-adjunction whose unit is an equivalence:
Th : Var â‡†Prodop : Mod
Remark 2.36. One obtains the ğ‘†-sorted version of Theorem 2.35 by slicing on both sides over the
free category with products on ğ‘†. This is given in more detail for partial Lawvere theories in Â§7.1.
2.6. Equational theories as monoidal theories. Given that Lawvere theories are cartesian props,
Theorem 2.22 suggests how to consider them as monoidal theories.
We recall the recipe
from [BSZ18]: the idea is to characterise Î£-terms as certain string diagrams, and thenâ€”through
this lensâ€”turn any equational theory into a monoidal theory.
Recipe 2.37. Fix a signature Î£. A Î£-term ğ‘¡: ğ‘‡[ğ‘›]
Î£
is the same thing as a string diagram ğ‘›â†’1 in
the prop induced by the monoidal theory with
â€¢ generators Î“
def= Î£ + (CCMG)
â€¢ (CCM) together with equations that ensure naturality with respect to the comonoid structure.
The latter can be easily added as two additional equations for each ğœ: Î£:
(SNğœ)
ğœ
ğœ
ğœ
=
ğœ
ğ‘š
ğ‘š
ğ‘š
ğ‘š
=

FUNCTORIAL SEMANTICS FOR PARTIAL THEORIES
11
The Lawvere theory induced by equational theory (Î£, ğ¸) can now be seen as the prop induced by
the monoidal theory (Î“, ğ¹) where ğ¹is the set of equations obtained by translating the equations in
ğ¸to string diagrams, together with (CCM), and (SNğœ) for each ğœ: Î£.
It is important to build an intuition behind this translation. An obvious diï¬€erence between terms
and string diagrams is that the latter do not have named variables. The translation ensures that wires
play the role of variables, and the comonoid structure plays the role of â€œvariable managementâ€. We
illustrate this with an example below.
Example 2.38. The prop corresponding to the Lawvere theory induced by the equational theory
of commutative monoids (Example 2.8) is the same as the prop of commutative bialgebra. For
example, the term ğ‘š(ğ‘š(ğ‘¥, ğ‘¥), ğ‘¦) in the theory of commutative monoids can be depicted as
ğ‘š
ğ‘š
In the term we have considered, the variable ğ‘¥appears twice. In the corresponding diagram, the
wire corresponding to ğ‘¥starts with a comultiplication that witnesses the â€œcopying of ğ‘¥â€.
3. Algebra of partial maps
We have seen that ï¬nite products are central in classical universal algebra. It is therefore
natural to begin our development of its partial analogue by identifying the corresponding universal
property in the partial setting. We will see that this amounts to replacing the class of cartesian
categories with the class of discrete cartesian restriction categories (DCR categories) [CGH12].
Next, we characterise DCR categories in terms of algebraic structure, analogous to 2.22 for cartesian
categories.
3.1. Partial functions. The starting point of our journey is the (2-)category Par of sets and partial
functions. Just as Set was the semantic universe for ordinary equational theories, Par is the semantic
universe for partial equational theories. We ï¬rst recall an elementary, set theoretic presentation:
Deï¬nition 3.1. Par has sets as objects and partial functions ğ‘“: ğ‘‹â‡€ğ‘Œas arrows, where a
partial function ğ‘“is a pair (dom ğ‘“, def ğ‘“) where dom ğ‘“âŠ†ğ‘‹is the domain of deï¬nition of ğ‘“and
def ğ‘“: dom ğ‘“â†’ğ‘Œis a (total) function. Given a partial function ğ‘“: ğ‘‹â‡€ğ‘Œ, and some ğ‘‹â€² âŠ†ğ‘‹we
write ğ‘“|ğ‘‹â€² for the partial function (dom ğ‘“âˆ©ğ‘‹â€², ğ‘“â€²) where ğ‘“â€²: dom ğ‘“âˆ©ğ‘‹â€² â†’ğ‘Œis def ğ‘“restricted
to the (potentially smaller) domain of deï¬nition dom ğ‘“âˆ©ğ‘‹â€². Similarly, given ğ‘Œâ€² âŠ†ğ‘Œ, write
ğ‘“âˆ’1(ğ‘Œâ€²) = {ğ‘¥âˆˆdom ğ‘“
| def ğ‘“(ğ‘¥) âˆˆğ‘Œâ€²}. Given ğ‘“: ğ‘‹â‡€ğ‘Œand ğ‘”: ğ‘Œâ‡€ğ‘, their composite is
deï¬ned by ğ‘“# ğ‘”= ( ğ‘“âˆ’1(domğ‘”), (def ğ‘“| ğ‘“âˆ’1(domğ‘”) # defğ‘”). The identity on ğ‘‹is (ğ‘‹, idğ‘‹).
There is a natural partial order between partial functions ğ‘‹â‡€ğ‘Œ:
ğ‘“â‰¤ğ‘”
def=
dom ğ‘“âŠ†domğ‘”âˆ§ğ‘”|dom ğ‘“= ğ‘“.
It is straightforward to verify that this data makes Par a category, and with â‰¤, a 2-category.
Categorifying partiality has long history (see e.g., [RR88, CL02]). We recall a classical approach:
Deï¬nition 3.2. Suppose that C has ï¬nite limits. Its 2-category of partial maps, Par(C) has:
1) objects are objects of C.
2) arrows are equivalence classes [ğ‘š, ğ‘“] : ğ‘‹â†’ğ‘Œof spans ğ‘‹
ğ‘š
â†âˆ’ğ´
ğ‘“âˆ’â†’ğ‘Œwhere ğ‘šis monic.
We equate (ğ‘š, ğ‘“) âˆ¼(ğ‘šâ€², ğ‘“â€²) iï¬€there is an isomorphism ğ›¼s.t. the following diagram
commutes:
ğ´
ğ´â€²
ğ‘‹
ğ‘Œ.
ğ‘š
ğ‘“
ğ›¼
ğ‘šâ€²
ğ‘“â€²

12
IVAN DI LIBERTI, FOSCO LOREGIAN, CHAD NESTER, AND PAWEL SOBOCIÅƒSKI
3) 2-cells: [ğ‘š, ğ‘“] â‰¤[ğ‘šâ€², ğ‘“â€²] when there exists any ğ›¼that makes the diagram commute.
4) composition is deï¬ned by pullback. Explicitly, the composite of (ğ‘š, ğ‘“) : ğ´â†’ğµand
(ğ‘šâ€², ğ‘”) : ğµâ†’ğ¶is the outer span of the diagram on the left
ğ‘‹âˆ§ğ‘‹â€²
ğ‘‹
ğ‘‹â€²
ğ´
ğµ
ğ¶
ğœ‹0
ğœ‹1
ğ‘š
ğ‘“
ğ‘šâ€²
ğ‘”
where the square with top ğ‘‹âˆ§ğ‘‹â€² is a pullback in C. Note that it doesnâ€™t matter which
pullback, since any two choices will give isomorphic spans, and therefore equal morphisms.
5) Identities are diagonal spans (1ğ´, 1ğ´) : ğ´â†’ğ´.
Given a morphism (ğ‘š, ğ‘“) : ğ´â†’ğµin Par(C), we think of the monic ğ‘š: ğ‘‹â†’ğ´as a subobject,
specifying which part of ğ´the morphism is deï¬ned on, and then ğ‘“: ğ‘‹â†’ğµtells us what it does.
The following is a straightforward sanity check:
Observation 3.3. There is an isomorphism of (2-)categories Par  Par(Set).
Just as a model of a total operation of arity ğ‘›is a function ğ´ğ‘›â†’ğ´(an arrow in Set), a model of
a partial operation ought to be a partial function ğ´ğ‘›â‡€ğ´(an arrow in Par). For this reason, it is
important to understand the mathematical status of the cartesian product in Par. Interestingly, Par
has categorical products, but these do not correspond to the cartesian product of sets.2
3.2. Cartesian Restriction Categories. It is by focusing on the universal property of the cartesian
product in Par that we are able to identify a generalisation of Lawvereâ€™s approach to partial
operations. This is the goal of this section.
Restriction categories were devised to study partial phenomena in an axiomatic setting. Here
we give a whirlwind tour, more details can be found in [CL02, CL07, CGH12]. In a restriction
category, every arrow ğ‘“: ğ´â†’ğµhas an associated idempotent ğ‘“: ğ´â†’ğ´, thought of as the
identity function restricted to the domain of deï¬nition of ğ‘“. We call them domain idempotents.
Arrows where ğ‘“= 1ğ´are called total, and form a subcategory. Further, we have:
Remark 3.4. Any restriction category is poset-enriched, with the ordering deï¬ned by
ğ‘“â‰¤ğ‘”â‡”ğ‘“# ğ‘”= ğ‘“
Functors ğ¹that preserve domain idempotents (ğ¹ğ‘“= ğ¹ğ‘“) are called restriction functors.
Restriction categories and restriction functors form a category. This extends to a 2-category in
which the 2-cells are lax transformations. A lax transformation ğ›¼: ğ¹â†’ğºof restriction functors
ğ¹, ğº: X â†’Y consists of a family of total maps ğ›¼ğ´: ğ¹ğ´â†’ğºğ´in Y indexed by the objects ğ´of
X s.t. for every ğ‘“: ğ´â†’ğµof X the usual naturality square commutes up to inequality:
ğ¹ğ´
ğºğ´
ğ¹ğµ
ğºğµ
ğ¹ğ‘“
ğ›¼ğ´
ğºğ‘“
ğ›¼ğµ
â‰¤
where â‰¤is the ordering introduced above. Call this 2-category RCatâ‰¤. Just as categories with ï¬nite
products enjoy a universal property in the 2-category Cat, those with ï¬nite restriction products
have a universal property in RCatâ‰¤. In general, formal limits in RCatâ‰¤are called restriction
2The categorical product of ğ´and ğµin Par is (ğ´+ {â˜…}) Ã— (ğµ+ {â˜…}) âˆ’{(â˜…, â˜…)}. This can be seen via the equivalence
1/Set â‰ƒPar. Limits in the coslice category 1/Set are calculated pointwise, and the functor 1/Set â†’Par removes the
point

FUNCTORIAL SEMANTICS FOR PARTIAL THEORIES
13
limits [CL07]. A cartesian restriction (CR) category is a restriction category with ï¬nite restriction
products.
Observation 3.5 ([CL02]). Par is a CR category, with the cartesian product as restriction product.
CR categories have appeared in the literature under a variety of diï¬€erent names, including
p-category with a one-element object [RR88] and partially cartesian category [CO89]. For our
development, it is crucial that the data of CR categories can be equivalently captured as follows:
Theorem 3.6 ([CL07]). A CR category is the same thing as a symmetric monoidal category
where every object is equipped with a commutative comonoid structure that is (coherent) and the
comultiplication is natural. That is, for any ğ‘“: ğ´â†’ğµwe have ğ‘“# ğ›¿ğµ= ğ›¿ğ´#( ğ‘“âŠ—ğ‘“).
From this perspective a CR category is very close to a cartesian category viewed as a monoidal
category through 2.22. The diï¬€erence is that we do not ask for the counit of the comonoid to be
natural. This has profound consequences: for instance, the same symmetric monoidal category may
have more than one such chosen comonoid structure, thus deï¬nining diï¬€erent CR categories.
Given the algebraic data, the domain idempotent ğ‘“: ğ´â†’ğ´of an arrow ğ‘“: ğ´â†’ğµin a CR
category is recovered as:
ğ‘“
ğ‘“
=
and so in particular the subcategory of X for which the counit is natural is precisely the subcategory
of total maps. Notice that this means the subcategory of total maps of a CR category is cartesian.
Deï¬nition 3.7. A CR functor between two CR categories ğ¹: X â†’Y is a functor that preserves
the algebraic structure. That is, ğ¹(ğ´âŠ—ğµ) = ğ¹ğ´âŠ—ğ¹ğµ, ğ¹1 = 1, ğ¹ğ›¿ğ´= ğ›¿ğ¹ğ´and ğ¹ğœ€ğ´= ğœ€ğ¹ğ´.
Remark 3.8. A lax transformation of CR functors may be equivalently speciï¬ed as a family of maps
ğ›¼ğ´: ğ¹ğ´â†’ğºğ´indexed by the objects ğ´of X s.t. for every ğ‘“: ğ´â†’ğµwe have ğ¹ğ‘“# ğ›¼ğµâ‰¤ğ›¼ğ´# ğºğ‘“.
We do not need to ask that each ğ›¼ğ´is total, since if ğ¹and ğºpreserve the cartesian restriction
structure, then they are automatically total. In particular the diagram on the left gives the inequality
on the right, which gives that ğ›¼ğ´is total:
ğ¹ğ´
ğºğ´
ğ¹ğ¼
ğºğ¼
ğ¹ğœ€ğ´
ğ›¼ğ´
ğºğœ€ğ´
ğ›¼ğ¼
â‰¤
FA
â‰¤
â†µA
FA
GA
3.3. Discrete Cartesian Restriction Categories. Restriction products do not quite capture all the
properties of Par needed for partial universal algebra. In particular, we require CR categories with
the following extra structure:
Deï¬nition 3.9. A CR category is said to be discrete (DCR category [CGH12]) if for each object ğ´
there is an arrow ğœ‡ğ´: ğ´âŠ—ğ´â†’ğ´that is partial inverse to ğ›¿ğ´. That is, ğ›¿ğ´# ğœ‡ğ´= ğ›¿ğ´= 1ğ´and
ğœ‡ğ´# ğ›¿ğ´= ğœ‡ğ´.
We give a novel presentation of DCR categories, inspired by the work of [Gil14]. Central to our
presentation is the notion of a commutative special Frobenius algebra in which the monoid does not
have a unit, which we call a partial Frobenius algebra. More precisely:
Deï¬nition 3.10. A partial Frobenius algebra (ğ´, ğ›¿ğ´, ğœ‡ğ´, ğœ€ğ´) in a symmetric monoidal category
consists of a commutative comonoid (ğ´, ğ›¿ğ´, ğœ€ğ´) and a commutative semigroup (ğ´, ğœ‡ğ´) s.t.
(ğ´, ğ›¿ğ´, ğœ‡ğ´) is a semi-Frobenius algebra. Diagramatically, this is the comonoid structure we have

14
IVAN DI LIBERTI, FOSCO LOREGIAN, CHAD NESTER, AND PAWEL SOBOCIÅƒSKI
already seen together ğœ‡ğ´, which we depict as
in our string diagrams, subject to the following
equations:
(MCA)
=
=
(SFROB)
=
=
=
Note that there is some redundancy in the equational presentation above, as discussed in [Car91].
We now extend the characterisation of CR categories given in Theorem 3.6 to DCR categories:
Theorem 3.11. A DCR category is the same thing as a symmetric monoidal category where every
object ğ´is equipped with a coherent partial Frobenius algebra structure (ğ´, ğ›¿ğ´, ğœ€ğ´, ğœ‡ğ´) s.t. the
comultiplication is natural. That is, for any ğ‘“: ğ´â†’ğµwe have ğ‘“# ğ›¿ğµ= ğ›¿ğ´#( ğ‘“âŠ—ğ‘“).
DCR categories are intimately connected to categories with ï¬nite limits [CGH12]. In particular:
Proposition 3.12. If C is a category with ï¬nite limits, Par(C) is a DCR category.
Deï¬nition 3.13 (the 2-category DCRCâ‰¤). It follows that for any CR functor ğ¹: X â†’Y between
DCR categories, we have ğ¹ğœ‡ğ´= ğœ‡ğ¹ğ´. CR functors therefore give the notion of morphism between
DCR categories. We consider the strict 2-category of DCR categories, restriction functors, and lax
transformations, which we call DCRCâ‰¤.
4. Partial Lawvere theories
In this section we develop a Lawvere-style approach to partial algebraic theories, where operations
may be partial. Ordinary Lawvere theories are determined by the free cartesian category on a single
object F op; we are thus interested in the analogue of F op in the world of DCR categories.
4.1. The free DCR category on one object. Given Theorem 3.11, we have an explicit description
for the DCR category on one object: it is the prop PF induced from the monoidal theory of partial
Frobenius algebras. That is, it has generators {
,
,
} and equations (MCA), (CCM)
and (SFROB).
It turns out that one can gain a precise intuition on what PF looks like by mimicking the way in
which the props F and its opposite F op describe familiar algebraic structures. In fact, the prop CM
of commutative monoids is isomorphic to the prop F (see Observation 2.18), and similarly, the prop
CC of commutative comonoids is isomorphic to F op (Observation 2.21).
The prop PF of partial Frobenius algebras that we want to describe here can be given a similar
â€œcombinatorialâ€ characterisation relying on the insights of Lack [Lac04]. First, we note that the prop
CAM induced by the monoidal theory of commutative semigroups ({
} and equations (MCA))
is isomorphic to sub-prop Fğ‘ âŠ‚F of ï¬nite sets and surjective functions.
Observation 4.1. As props, CAM  Fğ‘ .
This is intuitive: as observed in Remark 2.19, string diagrams of CM allow one to â€œdrawâ€ all
functions [ğ‘š] â†’[ğ‘›]. Doing without the unit means that we can express exactly the surjective ones.
Next, we know from [Lac04] that the prop F ROB induced by the monoidal theory of special
Frobenius algebras with generators {
,
,
,
} and equations (CM), (CCM) and

FUNCTORIAL SEMANTICS FOR PARTIAL THEORIES
15
(SFROB) is isomorphic to the prop of cospans of ï¬nite sets Cospan(F ). An arrow ğ‘šâ†’ğ‘›here is
(an isomorphism class of) a cospan of functions [ğ‘š]
ğ‘“âˆ’â†’[ğ‘˜]
ğ‘”â†âˆ’[ğ‘›], and composition is by pushout.
Proposition 4.2 ([Lac04]). As props, F ROB  Cospan(F ).
Given that surjective functions are closed under composition and pushouts in F , we can consider
the subprop Cospanğ‘ (F ) of Cospan(F ) with arrows those cospans where the left leg is surjective.
Now, combining Observation 4.1 and Proposition 4.2 yields:
Proposition 4.3. As props, PF  Cospanğ‘ (F ).
This gives us a combinatorial characterisation of PF . But there is a more familiar and satisfactory
way of describing Cospanğ‘ (F ). Given that cospans in C are spans in Cop, and epimorphisms in C
are monomorphisms in Cop, we see that Cospanğ‘ (F ) = Par(F op), since a cospan in F with left leg
surjective is the same thing as a span in F op with left leg a monomorphism. Therefore, we obtain:
Proposition 4.4. As props, PF  Par(F op).
4.2. Partial Lawvere theories. We have seen that F op is central to the deï¬nition of Lawvere
theories, being the free cartesian category on one object. The prop Par(F op), being the free DCR
on one object, plays the corresponding role in the deï¬nition of partial Lawvere theories.
Deï¬nition 4.5. A partial Lawvere theory L is a DCR prop.
Spelled out, a partial Lawvere theory is a DCR category L for which there is an identity-on-objects
CR functor Par(F op) â†’L. A morphism of partial Lawvere theories is a functor â„: L â†’M s.t.
the following triangle commutes:
Par(F op)
L
M.
ğ‘
ğ‘
â„
This deï¬nes the category pLaw of partial Lawvere theories.
Mimicking also the deï¬nition of model of a Lawvere theory, we obtain at once the notion of
model of a partial Lawvere theory:
Deï¬nition 4.6 (Model of a partial Lawvere theory). A model for a partial Lawvere theory L is a
CR functor ğ¿: L â†’Par. A homomorphism ğ¿â†’ğ¿â€² is a lax natural transformation ğ›¼: ğ¿â‡’ğ¿â€².
Deï¬nition 4.7. The category of models and homomorphisms of a partial Lawvere theory L is
denoted pModL. As explained in Remark 3.8, the homomorphisms are total functions.
5. Partial equational theories
In order to consider interesting examples of partial Lawvere theories, we need to introduce the
notion of partial equational theory. For partial structures, these are the syntactic analogue of
equational theories, and yield partial Lawvere theories in a similar way to how equational theories
yield Lawvere theories.
Monoidal signatures (Deï¬nition 2.12) Î“ have unrestricted arities and coarities. Instead, a
signature Î£ of an equational theory (Deï¬nition 2.1) has function symbols of arbitrary arities,
butâ€”considered as a monoidal signatureâ€”all coarities are 1. Partial signatures are an intermediate
concept: as for equational theories, coarities > 1 are redundant, but we need to admit symbols of
coarity 0.
Deï¬nition 5.1. A partial signature Î”
def= Î”0 + Î”1, where Î”0 is the set of operations of coarity 0,
and Î”1 is the set of operations of coarity 1. Each ğ›¿: Î”ğ‘–comes with an arity ar(ğ›¿) : N.

16
IVAN DI LIBERTI, FOSCO LOREGIAN, CHAD NESTER, AND PAWEL SOBOCIÅƒSKI
Diï¬€erently from ordinary equational theories, we cannot use classical terms, whichâ€”as discussed
in Remark 2.26â€”are tied to an underlying cartesian structure. Instead, we adapt Recipe 2.37 to
DCR categories, obtaining partial terms as particular string diagrams. Before we launch into formal
deï¬nitions, and illustrate them with a variety of examples, let us establish some intuitions for how
to read the string diagrams.
â€¢ string diagrams represent partial terms, obtained through composing partial operations,
â€¢ equalities and inequalities between them are understood in the sense of Kleene,
â€¢ the comonoid structure {
,
} plays a similar role to that described Â§2
Recipe 5.2. Given a partial signature Î”, the free DCR prop LÎ” on Î” is the prop induced from the
monoidal theory with
â€¢ generators (Î” + {
,
,
})
â€¢ equations (MCA), (CCM) and (SFROB), together with
ğ›¿
ğ›¿
ğ›¿
ğ‘š
ğ‘š
=
for each ğ›¿: Î”1, where ar(ğ›¿) = ğ‘š.
Deï¬nition 5.3 (Partial Equational Theory). A partial equation is a pair (ğ‘ , ğ‘¡) where ğ‘ , ğ‘¡: LÎ”(ğ‘š, ğ‘›)
for some ğ‘š, ğ‘›: N; we usually write â€˜ğ‘ = ğ‘¡â€™. A partial equational theory is a pair (Î”, ğº) where Î” is
a partial signature and ğºis a set of partial equations.
We ï¬rst return to a familiar example.
Example 5.4 ((Partial) Commutative Monoids). We start with the monoidal theory of commutative
monoids (Example 2.16), where the multiplication and unit generators are re-coloured to red to
avoid a clash. In models, the multiplication operation may be partially deï¬ned and the unit may be
undeï¬ned. To deï¬ne the partial theory of total commutative monoids, weâ€™d need to add equations:
(3)
=
=
Example 5.5 (Equational Theories). Any equational theory (Î£, ğ¸) is an example. One follows
Recipe 5.2, adding equations analogous to (3) to specify that every generator in Î£ is total. The
category of models of this partial theory then agrees with that of the Lawvere theory L(Î£,ğ¸).
The following elementary examples illustrate the novel features of partial Lawvere theories,
highlighting the way in which they diï¬€er from classical (i.e., total) Lawvere theories.
Example 5.6 (Equivalence Relations). Consider the partial Lawvere theory consisting of a single
binary operation ğ‘…with coarity 0, together with equations expressing symmetry and reï¬‚exivity:
ğ‘…:
ğ‘…
ğ‘…
=
ğ‘…
=
Note that inequations of terms, as in Remark 3.4, do not add expressivity. As such, we may use
them freely when specifying partial Lawvere theories. Transitivity is intuitively captured by the
inequation on the left, which, unfolding the deï¬nition of â‰¤, is precisely the equation on the right:
ğ‘…
ğ‘…
ğ‘…
â‰¤
ğ‘…
ğ‘…
ğ‘…
ğ‘…
ğ‘…
=

FUNCTORIAL SEMANTICS FOR PARTIAL THEORIES
17
A model A of this theory consists of a set ğ´together with an equivalence relation =ğ´âŠ†ğ´Ã— ğ´
corresponding to the domain of deï¬nition of A(ğ‘…). A morphism ğ¹: A â†’B is a function
ğ¹: ğ´â†’ğµwith ğ‘=ğ´ğ‘â‡’ğ¹ğ‘=ğµğ¹ğ‘, which arises from the requirement that ğ¹is a lax
transformation:
ğ‘…
ğ´
ğ´
ğ¹
ğ¹
ğ´
ğ´
ğ‘…
â‰¤
Thus, the variety corresponding to this theory is the category of Bishop sets (setoids) [Pal09].
Example 5.7 (Partial Combinatory Algebras). A partial combinatory algebra (PCA) is a set ğ´
with a binary partial operation _ â€¢ _ : ğ´Ã— ğ´â†’ğ´, and elements s, k âˆˆğ´s.t. for any ğ‘¥, ğ‘¦, ğ‘§âˆˆğ´:
(i) (k â€¢ ğ‘¥) â€¢ ğ‘¦= ğ‘¥
(ii) ((s â€¢ ğ‘¥) â€¢ ğ‘¦) â€¢ ğ‘§= (ğ‘¥â€¢ ğ‘§) â€¢ (ğ‘¦â€¢ ğ‘§)
(iii) (s â€¢ ğ‘¥) â€¢ ğ‘¦is deï¬ned
where â€œ=â€ is Kleene equality. The partial Lawvere theory of PCAs has three generators:
ğ‘˜
ğ‘ 
and equations that ensure the totality of ğ‘˜, ğ‘ , i.e. they deï¬ne elements of the carrier, and (ğ‘–ğ‘–ğ‘–):
ğ‘˜
=
ğ‘ 
=
ğ‘ 
=
as well as equations for (ğ‘–) and (ğ‘–ğ‘–):
ğ‘˜
=
ğ‘ 
=
The variety here is the category of PCAs and homomorphisms preserving the applicative structure.
Example 5.8 (Pairing Functions). Consider the partial Lawvere theory with two operations which
we think of as pairing and unpairing respectively, subject to the equation on the right:
=
Models are sets equipped with a pairing function, and model morphisms map pairs to pairs. For
example, N and Cantorâ€™s pairing function, or Î› â€“ the set of untyped ğœ†-terms â€“ with the usual pairing
and projection functions. Note that our equation makes pairing a section, and so it is total.
6. Multi-Sorted Equational Theories
In this section we present a progression of multi-sorted partial Lawvere theories for categories
with diï¬€erent kinds of structure. While our development of partial Lawvere theories has thus far
focused on the single-sorted case, the move to multi-sorted theories contains no surprises, so we
omit the details. The short version is that props are replaced with coloured props, and the sorting
discipline changes accordingly. The examples that follow are developed incrementally: Each step
adds more categorical structure to the models by adding the appropriate operations and equations to
the theory, culminating in the partial Lawvere theory of cartesian closed categories.

18
IVAN DI LIBERTI, FOSCO LOREGIAN, CHAD NESTER, AND PAWEL SOBOCIÅƒSKI
Example 6.1 (Directed Graphs). We begin with the partial Lawvere theory of directed graphs,
which has a sort ğ‘‚of vertices and a sort ğ´of edges, together with source and target operations:
ğ‘ 
ğ´
ğ‘‚
ğ‘¡
ğ´
ğ‘‚
ğ‘ 
=
ğ´
ğ´
ğ‘¡
=
ğ´
ğ´
The associated variety is the category of directed graphs, as model morphisms ğ¹must satisfy:
ğ‘ 
ğ¹
ğ¹
ğ‘ 
=
ğ‘¡
ğ¹
ğ¹
ğ‘¡
=
Example 6.2 (Reï¬‚exive Graphs). Extending Example 6.1, we ask that each vertex has a self-loop:
id
ğ‘‚
ğ´
id
=
ğ‘‚
ğ‘‚
id
ğ‘ 
ğ‘‚
ğ‘‚
ğ‘‚
ğ‘‚
=
=
id
ğ‘¡
ğ‘‚
ğ‘‚
then morphisms of models are required to preserve the self-loop, so the associated variety is the
category of reï¬‚exive graphs. Notice that along with Example 6.1, this could also be presented as a
(total) 2-sorted Lawvere theory, since all the operations are total.
Example 6.3 (Categories). To capture categories we extend Example 6.2 with a composition
operator, which is deï¬ned when the target of the ï¬rst arrow matches the source of the second:
ğ´
ğ´
ğ´
ğ‘¡
ğ‘ 
=
and equations insisting composition is associative and unital, with identities given by the self-loops:
ğ´
ğ´
ğ´
ğ´=
ğ´
ğ´
ğ´
ğ´
ğ‘ 
id
ğ‘¡
id
ğ´
ğ´
ğ´
ğ´
ğ´
ğ´
=
=
Model morphisms are precisely functors. It is worth noting that this involves an inequality:
ğ¹
ğ¹
ğ¹
â‰¤
This states that if ğ‘“and ğ‘”are composable then so are ğ¹ğ‘“and ğ¹ğ‘”, and in particular ğ¹( ğ‘“# ğ‘”) = ğ¹ğ‘“# ğ¹ğ‘”.
If this were an equality, it would insist also that if ğ¹ğ‘“and ğ¹ğ‘”are composable, then so are ğ‘“and ğ‘”,
which is not always the case. Of course, the associated variety is the category of small categories.
Example 6.4 (Strict Monoidal Categories). Next, we extend Example 6.3 by asking for a functorial
binary operation âŠ—on ğ‘‚and ğ´together with a unit constant âŠ¤of ğ‘‚:
âŠ¤
ğ‘‚:
âŠ¤
=
âŠ—
ğ‘‚
ğ‘‚
ğ‘‚:
âŠ—
ğ‘‚
ğ‘‚
ğ‘‚
ğ‘‚
=
âŠ—
ğ´
ğ´
ğ´
ğ´
=
âŠ—
ğ´
ğ´
ğ‘‚
ğ‘ 
ğ‘ 
ğ‘ 
âŠ—
ğ´
ğ´
ğ‘‚
=
âŠ—
ğ´
ğ´
ğ‘‚
ğ‘¡
ğ‘¡
ğ‘¡
âŠ—
ğ´
ğ´
ğ‘‚
=
âŠ—
âŠ—
âŠ—
ğ´
ğ´
ğ´
ğ´
ğ´
ğ´
ğ´
ğ´
ğ´
ğ´=
Additionally, we require equations to the eï¬€ect that âŠ—is associative and unital:
âŠ—âŠ—
ğ‘‚
ğ‘‚
ğ‘‚
ğ‘‚
âŠ—âŠ—
ğ‘‚
ğ‘‚
ğ‘‚
ğ‘‚
=
âŠ—âŠ—
ğ´
ğ´
ğ´
ğ´
âŠ—âŠ—
ğ´
ğ´
ğ´
ğ´
=

FUNCTORIAL SEMANTICS FOR PARTIAL THEORIES
19
âŠ¤
id âŠ—
ğ´
ğ´=
âŠ¤
id âŠ—
ğ´
ğ´
âŠ¤âŠ—
ğ‘‚
ğ‘‚
ğ‘‚
ğ‘‚
âŠ¤âŠ—
ğ‘‚
ğ‘‚
=
=
Now the associated variety is the category of strict monoidal categories and strict monoidal functors.
Example 6.5 (Symmetric Strict Monoidal Categories). To capture symmetric monoidal categories,
we extend Example 6.4 with a binary operation ğœ: ğ‘‚âŠ—ğ‘‚â†’ğ´for the braiding maps, subject to:
ğœ
ğ‘‚
ğ‘‚
ğ´:
ğœ
ğ‘‚
ğ‘‚
=
ğœ
ğ‘ 
ğ‘‚
ğ‘‚
ğ‘‚
âŠ—
ğ‘‚
ğ‘‚
ğ‘‚
=
ğœ
ğ‘¡
ğ‘‚
ğ‘‚
ğ‘‚
âŠ—
ğ‘‚
ğ‘‚
ğ‘‚
=
ğœ
ğœ
ğ‘‚
ğ‘‚
ğ´=
âŠ—
id
ğ‘‚
ğ‘‚
ğ´
âŠ—
ğ‘¡
ğ‘¡
ğœ
âŠ—
ğ‘ 
ğ‘ 
ğœ
=
ğ´
ğ´
ğ´
ğ´
ğ´
ğ´
This gives the variety of strict monoidal categories and symmetric strict monoidal functors.
Example 6.6 (Cartesian Restriction Categories). In light of 3.6, we can capture CR categories
by extending Example 6.5 with operations ğ›¿: ğ‘‚â†’ğ´and ğœ€: ğ‘‚â†’ğ´corresponding to the
comultiplication and counit of the comonoid structure:
ğ›¿
ğ‘‚
ğ´:
ğ›¿
=
ğ›¿
ğ‘ 
=
ğ›¿
ğ‘¡
âŠ—
=
ğœ€
ğ‘‚
ğ´:
ğœ€
=
ğœ€
ğ‘ 
=
ğœ€
ğ‘¡
âŠ¤
=
along with equations insisting that ğ›¿and ğœ€are coherent with respect to the monoidal structure:
âŠ—
ğ›¿
ğ›¿
ğ›¿
id
ğœ
id
âŠ—
âŠ—
âŠ—
=
âŠ—
ğœ€
ğœ€
ğœ€
âŠ—
=
And ï¬nally equations for the commutative comonoid axioms, and naturality of ğ›¿:
ğ›¿
ğ›¿
id âŠ—
ğ›¿
id
ğ›¿âŠ—
=
ğ›¿
ğœ
ğ›¿
=
ğ›¿
ğœ€
id âŠ—
ğ›¿
id
ğœ€âŠ—
=
ğ‘ 
âŠ—
ğ›¿
ğ‘¡
ğ›¿
=
The associated variety is the category of CR categories and CR functors.

20
IVAN DI LIBERTI, FOSCO LOREGIAN, CHAD NESTER, AND PAWEL SOBOCIÅƒSKI
Example 6.7 (Discrete Cartesian Restriction Categories). 3.11 makes it easy to capture DCR
categories by extending Example 6.6 with ğœ‡: ğ‘‚â†’ğ´satisfying the Frobenius and special equations:
there is a
ğœ‡
ğ‘‚
ğ´such that
ğœ‡
ğ‘‚
ğ‘‚
=
ğœ‡
ğ‘ 
ğ‘‚
ğ‘‚
âŠ—
ğ‘‚
ğ‘‚
=
ğœ‡
ğ‘¡
ğ‘‚
ğ‘‚
ğ‘‚
ğ‘‚
=
ğ›¿
ğœ‡
ğ‘‚
ğ´=
id
ğ‘‚
ğ´
ğœ‡
id
id
ğ›¿
âŠ—
âŠ—
ğ‘‚
ğ´
ğ›¿
ğœ‡
ğ‘‚
ğ´
id
ğœ‡
ğ›¿
id
âŠ—
âŠ—
ğ‘‚
ğ´
=
=
The variety is the category of strict DRC categories and strict CR functors (since they preserve ğœ‡).
Example 6.8 (Cartesian Categories). To capture cartesian categories instead, we can extend
Example 6.6 with one equation, ensuring that ğœ€is natural:
ğ‘¡
ğœ€
ğ´
ğ´
ğ‘ 
ğœ€
ğ´
ğ´
=
Then by Theorem 2.22, this gives the variety of strict cartesian categories and strict cartesian
functors.
Example 6.9 (Cartesian Closed Categories). Finally, to capture cartesian closed categories we
extend Example 6.8 with an operator exp : ğ‘‚âŠ—ğ‘‚â†’ğ‘‚, the idea being that exp(ğ´, ğµ) is the internal
hom [ğ´, ğµ], along with an operator ev : ğ‘‚âŠ—ğ‘‚â†’ğ‘‚that gives the corresponding evaluation map:
exp
ğ‘‚
ğ‘‚
ğ‘‚:
exp
=
ev
ğ‘‚
ğ‘‚
ğ´:
ev
=
ev
ğ‘ 
exp
âŠ—
=
ev
ğ‘¡
=
along with an operation ğœ†and equations stating, intuitively, that ğœ†(ğ‘‹, ğ´, ğµ, ğ‘“) is deï¬ned precisely
in case ğ‘“: ğ‘‹Ã— ğ´â†’ğµ, and yields a map ğœ†(ğ‘‹, ğ´, ğµ, ğ‘“) : ğ‘‹â†’[ğ´, ğµ] as in:
ğœ†
ğ´
ğ‘‚
ğ‘‚
ğ‘‚
ğ´
ğœ†
âŠ—
ğ‘ 
ğ‘¡
=
ğœ†
ğ‘ 
=
ğœ†
ğ‘¡
exp
=

FUNCTORIAL SEMANTICS FOR PARTIAL THEORIES
21
also equations insisting that if ğ‘“: ğ‘‹Ã— ğ´â†’ğµthen (ğœ†(ğ‘‹, ğ´, ğµ, ğ‘“) Ã— 1) # ev = ğ‘“holds:
id
ğœ†
ev
âŠ—
=
âŠ—
ğ‘ 
ğ‘¡
and that if ğ‘”: ğ‘‹â†’[ğ´, ğµ] then ğœ†(ğ‘‹, ğ´, ğµ, (ğ‘”Ã— 1) # ev) = ğ‘”holds:
exp
ğ‘ 
ğ‘¡
=
id
ev
âŠ—
ğœ†
Now the associated variety is the category of strict cartesian closed categories and strict carte-
sian closed functors: these preserve hom-objects and, when ğœ†(ğ‘‹, ğ´, ğµ, ğ‘“) is deï¬ned, satisfy
ğ¹ğœ†(ğ‘‹, ğ´, ğµ, ğ‘“) = ğœ†(ğ¹ğ‘‹, ğ¹ğ´, ğ¹ğµ, ğ¹ğ‘“). This presentation of cartesian closed categories is essen-
tially due to Freyd: a version of it is given immediately after the ï¬rst appearance of the notion of
essentially algebraic theory in [Fre72], albeit somewhat informally, and using very diï¬€erent syntax.
7. The Variety Theorem for Partial Theories
Here we classify the categories of models of partial Lawvere theories. These turn out to be exactly
the locally ï¬nitely presentable (LFP) categories [AR94, 1A]. LFP categories have an important
position in categorical algebra, due to deep connections with model theory [AR94, Ch. 5] and
[MP89], homotopy theory [Dug01], and universal algebra [AR94, Ch. 3].
Deï¬nition 7.1. In a category C, an object ğ¶is ï¬nitely presentable if the hom-functor C(ğ¶,
)
preserves directed colimits (see [AR94, 1.1] for the deï¬nition).
This notion might appear obscure to the reader unfamiliar with categorical logic; [AR94, 1.2]
contains lots of examples to help the reader build their intuition: for instance, an object of the
category of sets is ï¬nitely presentable if and only if it is ï¬nite, and a (commutative) monoid is
ï¬nitely presentable if and only if it admits a presentation âŸ¨ğº| ğ‘…âŸ©where both ğº(set of generators)
and ğ‘…(set of relations) are ï¬nite sets: this happens for many other algebraic structures, and thus
motivates the deï¬nition.
Deï¬nition 7.2 (Locally ï¬nitely presentable category). [AR94, Def. 1.9] A locally ï¬nitely presentable
(LFP) category K is a cocomplete category s.t. there is a small full subcategory A âŠ‚K of ï¬nitely
presentable objects, and such that every object of K is a directed colimit of objects of A.
As in the classical case (Remark 2.30), the most crisp statement of the variety theorem is for the
unsorted case. Just as an unsorted Lawvere theory is exactly a (small) cartesian category, we deï¬ne
an unsorted partial Lawvere theory to be a (small) DCR category, and the corresponding notion of
morphism to be a CR functor. Then:
Categories of models of partial theories are exactly LFP categories.

22
IVAN DI LIBERTI, FOSCO LOREGIAN, CHAD NESTER, AND PAWEL SOBOCIÅƒSKI
Indeed, we have a similar contravariant adjunction to that of Theorem 2.35, if LFP is a 2-category
having 1-cells ğ‘…: K â†’Kâ€² the right adjoint functors ğ‘…preserving directed colimits, and 2-cells all
natural transformations ğ›¼: ğ‘…â‡’ğ‘…â€². A motivation for this apparently peculiar choice of 1-cells can
be found in our Observation 2.31; it is exactly as our Deï¬nition 2.34, provided one replaces â€œsiftedâ€
colimit with â€œdirectedâ€.
Theorem 7.3. There is a 2-adjunction
(4)
Th : LFP â‡†(DCRCâ‰¤)op : Mod,
where DCRCâ‰¤is the 2-category of DCR categories of our Deï¬nition 3.13 and LFP is the 2-category
of LFP categories. Moreover, the unit of this adjunction is an equivalence, namely there is a
natural equivalence of categories between K âˆˆLFP and Mod(Th(K)), i.e. each LFP category is
equivalent to the category of models of its induced theory.
The proof of Theorem 7.3 is split into two parts, as illustrated below:
(5)
(DCRCâ‰¤)op
(Lex)op
LFP
1
2
1) we show that Lex â€“the 2-category of categories A with ï¬nite limits, functors A â†’Aâ€²
preserving ï¬nite limits, and natural transformationsâ€“ is reï¬‚ective in the 2-category DCRCâ‰¤.
This is the original, technical core of Theorem 7.3.
2) we connect Lexop and LFP with a contravariant biequivalence of 2-categories. This is a
classical result called Gabriel-Ulmer duality.
Composing the two, we obtain Theorem 7.3.
We will start from the ï¬rst of the two tasks, providing an adjunction of 2-categories as follows.
ğ¾ğ‘¡: DCRCâ‰¤â‡†Lex : Par
We ï¬rst describe the left adjoint ğ¾ğ‘¡, then the right adjoint Par, and conclude by showing that
they deï¬ne an adjunction.
Splitting Domain Idempotents. The functor ğ¾ğ‘¡arises via a modiï¬ed Karoubi envelope, also called
Cauchy completion in [BD86]. Recall that an idempotent ğ‘: ğ´â†’ğ´in a category splits if there is
a commutative diagram
ğ‘‹
ğ´
ğ‘‹
ğ´
ğ‘ 
ğ‘ 
1ğ‘‹
ğ‘Ÿ
ğ‘
Restriction categories in which all of the domain idempotents split are called split restriction
categories. An example is Par(C): for any arrow (ğ‘š, ğ‘“) : ğ´â†’ğµ, (ğ‘š, ğ‘“) = (ğ‘š, ğ‘š) : ğ´â†’ğ´
splits with ğ‘ = (1, ğ‘š) and ğ‘Ÿ= (ğ‘š, 1). Notice that this means the domain of deï¬nition of (ğ‘š, ğ‘“) is a
subobject of ğ´. This is a good way to think of split domain idempotents in general: for ğ‘“to be split
in a restriction category is for the domain of deï¬nition of ğ‘“: ğ´â†’ğµto be a subobject of ğ´.
For any restriction category X we can construct a split restriction category ğ¾(X) that contains X
as a subcategory. Its subcategory of total maps ğ¾ğ‘¡(X) is of particular interest.
Deï¬nition 7.4. Let X be a DCRC. Then ğ¾ğ‘¡(X) is the category where
1) objects are pairs (ğ´, ğ‘) with ğ´an object of X and ğ‘: ğ´â†’ğ´a domain idempotent in X;
2) arrows ğ‘“: (ğ´, ğ‘) â†’(ğµ, ğ‘) are arrows ğ‘“: ğ´â†’ğµof X such that ğ‘“= ğ‘and ğ‘“# ğ‘= ğ‘“;
3) composition is given by composition in X;

FUNCTORIAL SEMANTICS FOR PARTIAL THEORIES
23
4) The identity on (ğ´, ğ‘) is given by ğ‘.
It is routine to verify that this forms a category. Crucially, if X is a DCRC, then the subcategory
ğ¾ğ‘¡(X) of total maps of ğ¾(X) has ï¬nite limits [CGH12]:
Lemma 7.5. For any DCRC X, ğ¾ğ‘¡(X) has ï¬nite limits.
We now show that this extends to a 2-functor ğ¾ğ‘¡: DCRCâ‰¤â†’Lex. If X and Y are DCRCs
and ğ¹: X â†’Y is a CR functor, then there is a functor ğ¾ğ‘¡(ğ¹) : ğ¾ğ‘¡(X) â†’ğ¾ğ‘¡(Y ) deï¬ned
by ğ¾ğ‘¡(ğ¹)(ğ´, ğ‘) = (ğ¹ğ´, ğ¹ğ‘) on objects and ğ¾ğ‘¡(ğ¹)( ğ‘“) = ğ‘“on arrows.
It follows from our
characterization of CR functors in terms of the partial Frobenius algebra structure that ğ¾ğ‘¡(ğ¹)
preserves ï¬nite limits, giving the action of our 2-functor ğ¾ğ‘¡on 1-cells. The action of ğ¾ğ‘¡on 2-cells
is given as follows:
Lemma 7.6. If ğ¹, ğº: X â†’Y are CR functors between DCR categories and ğ›¼: ğ¹â†’ğºis a lax
transformation, deï¬ne ğ¾ğ‘¡(ğ›¼) : ğ¾ğ‘¡(ğ¹) â†’ğ¾ğ‘¡(ğº) by letting ğ¾ğ‘¡(ğ›¼) at (ğ´, ğ‘) in ğ¾ğ‘¡(X) be:
ğ¾ğ‘¡(ğ›¼)(ğ´,ğ‘) = ğ¹ğ‘# ğ›¼ğ´: (ğ¹ğ´, ğ¹ğ‘) â†’(ğºğ´, ğºğ‘)
Then ğ¾ğ‘¡(ğ›¼) is a natural transformation.
At this point we need only show that ğ¾ğ‘¡preserves composition and identities for 1-cells and
2-cells, which in both cases is straightforward.
Lemma 7.7. ğ¾ğ‘¡: DCRCâ‰¤â†’Lex is a 2-functor.
Partial Functions Revisited. Here we show that the Par construction (Â§3.1) also extends to a 2-functor
Par : Lex â†’DCRCâ‰¤. If C and D are categories with ï¬nite limits and ğ¹: C â†’D is a ï¬nite-limit
preserving functor, then we obtain a CR functor Par(ğ¹) : Par(C) â†’Par(D), deï¬ned on objects by
Par(ğ¹)(ğ´) = ğ¹(ğ´), and on arrows by
ğ‘‹
ğ´
ğµ
ğ‘š
ğ‘“
Par(ğ¹)
â†¦âˆ’â†’
ğ¹ğ‘‹
ğ¹ğ´
ğ¹ğµ
ğ¹ğ‘š
ğ¹ğ‘“
Since ğ¹preserves ï¬nite limits, we have that Par(ğ¹)(ğ›¿ğ´) = (ğ¹1ğ´, ğ¹Î”ğ´) = (1ğ¹ğ´, Î”ğ¹ğ´) = ğ›¿ğ¹ğ´=
ğ›¿Par(ğ¹) (ğ´) and Par(ğ¹)(ğœ€ğ´) = (ğ¹1ğ´, ğ¹!ğ´) = (1ğ¹ğ´, !ğ¹ğ´) = ğœ€Par(ğ¹) (ğ´), so Par(ğ¹) preserves the CR
structure. This deï¬nes the action of Par on 1-cells. We present the action of Par on 2-cells as a
lemma:
Lemma 7.8. If ğ¹, ğº: C â†’D are ï¬nite limit preserving functors between categories with ï¬nite
limits and ğ›¼: ğ¹â†’ğºis a natural transformation, deï¬ne Par(ğ›¼) : Par(ğ¹) â†’Par(ğº) by deï¬ning
the component of Par(ğ›¼) at ğ´in C to be:
ğ¹ğ´
ğ¹ğ´
ğºğ´
Par(ğ›¼)ğ´
1ğ¹ğ´
ğ›¼ğ´
Then Par(ğ›¼) : Par(ğ¹) â†’Par(ğº) is a lax transformation.
It remains only show that Par preserves composition and identities at the level of 1-cells and
2-cells, which is immediate in both cases. We therefore have:
Lemma 7.9. Par : Lex â†’DCRCâ‰¤is a 2-functor.

24
IVAN DI LIBERTI, FOSCO LOREGIAN, CHAD NESTER, AND PAWEL SOBOCIÅƒSKI
Adjointness. The following result is original, and builds on [CL02, Corollary 3.5]; however, there
the 2-cells of the categories involved are diï¬€erent.
Theorem 7.10. There is a 2-adjunction ğ¾ğ‘¡: DCRCâ‰¤â‡†Lex : Par.
It is worth describing the unit and counit of our adjunction. The unit ğœ‚: 1 â†’Par Â· ğ¾ğ‘¡is given by
the canonical inclusion ğœ‚X : X â†’Par(ğ¾ğ‘¡(X)) deï¬ned by
ğ´
ğ‘“â†’ğµ
ğœ‚X
â†¦âˆ’â†’
(ğ´, ğ‘“)
(ğ´, 1ğ´)
(ğµ, 1ğµ)
ğ‘“
ğ‘“
The counit ğœ€: ğ¾ğ‘¡Â· Par â†’1 is deï¬ned in terms of the equivalence of categories ğ¾(X) â‰ƒX between
any split restriction category X and the result of formally splitting its domain idempotents. In
particular, since Par(C) is always split, we obtain an equivalence of categories ğ¾(Par(C)) â‰ƒPar(C).
Restricting this to the subcategories of total maps gives deï¬nes our counit ğœ€C : ğ¾ğ‘¡(Par(C)) â‰ƒC.
In particular, the fact that the counit is a natural equivalence gives:
Lemma 7.11. Lex is a reï¬‚ective (2-)subcategory of DCRCâ‰¤.
Gabriel-Ulmer duality. To complete the triangle (5), we recall a theorem ï¬rst shown by P. Gabriel
and F. Ulmer [GU71], establishing a contravariant equivalence between the 2-category LFP of
locally ï¬nitely presentable categories and the 2-category Lex of categories with ï¬nite limits.
The duality asserts that a locally ï¬nitely presentable category K can be reconstructed from its
subcategory Kğœ”of ï¬nitely presentable objects. A good reference for the proof is [CV02, Th. 3.1].
Theorem 7.12 (Gabriel-Ulmer duality). There is a biequivalence of 2-categories
Lexop â‡†LFP
between Lex, the 2-category of small categories with ï¬nite limits, where 1-cells are functors
preserving ï¬nite limits and 2-cells are the natural transformations, and LFP, the 2-category of
locally ï¬nitely presentable categories, where 1-cells are right adjoints preserving directed colimits.
7.1. Sorted Gabriel-Ulmer duality. A similar version of the above theorem holds if, instead of
considering theories of all possible sorts, we ï¬x once and for all a single cardinality for the sorts ğ”–.
Such â€œrelativeâ€ version of Gabriel-Ulmer duality is useful to recover the classical Lawvere-style
approach of single- and many-sorted theories.
Deï¬nition 7.13. We call ğ¿ğ”–the free category with ï¬nite limits over the discrete set ğ”–. When ğ”–is
the singleton we will use the shortened notation ğ¿1.
Deï¬nition 7.14. A ğ”–-sorted category with ï¬nite limits (A, ğ‘) is an object in (Lex)op/ğ¿ğ”–whose
specifying functor ğ‘: ğ¿ğ”–â†’A is bÄ³ective on objects. (ğ”–-Lex)op is the full 2-subcategory of
ğ”–-sorted categories with ï¬nite limits.
Deï¬nition 7.15. Ağ”–-sorted locally ï¬nitely presentable category (K,ğ‘ˆ) is an object in LFP/[ğ”–, Set]
whose specifying functor ğ‘ˆ: K â†’[ğ”–, Set] is conservative. (ğ”–-LFP)op is the full 2-subcategory
of ğ”–-sorted locally ï¬nitely presentable categories.
Theorem 7.16 (Sorted Gabriel-Ulmer duality). There is a biequivalence of 2-categories
Modğ”–: (ğ”–-Lex)op â‡†ğ”–-LFP : Thğ”–.

FUNCTORIAL SEMANTICS FOR PARTIAL THEORIES
25
7.1.1. Sorted partial variety theorem. We can use the sorted version of Gabriel-Ulmer duality to
infer the sorted version of the syntax-semantics duality for multi-sorted partial Lawvere theories.
Theorem 7.17. There is an 2-adjunction, whose unit is an equivalence,
ğ”–-LFP â‡†(ğ”–-pLaw)op,
where ğ”–-pLaw is the 2-category of â€œğ”–-sorted partial Lawvere theoriesâ€, understood as the analogue
of Remark 2.30 for partial theories (see Deï¬nition 4.5), and ğ”–-LFP is the 2-category of ğ”–-sorted
locally ï¬nitely presentable categories.
Sketch of proof. The proof is divided into intermediate steps: each tag on the following two
diagrams indicates the section where the proof of the adjunction, or equivalence, is given.
(ğ”–-pLaw)op
(ğ”–-Lex)op
(DCRCâ‰¤)op
(Lex)op
ğ”–-LFP
LFP
â˜…
7.10
7.16
7.12
The claim in (â˜…) is the only one that needs to be proven. Yet it is also the most trivial one. We will
deduce it directly from 7.10. Indeed if Lex is reï¬‚ective in DCRCâ‰¤, (Lex)op/ğ¿ğ”–is coreï¬‚ective in
(DCRCâ‰¤)op/Par(ğ¿ğ”–), now observe that Par(ğ¿ğ”–) is precisely the free discrete cartesian restriction
category over ğ”–. The desired result follows passing to functors bÄ³ective on objects in the slice.
â–¡
Observation 7.18. In analogy with 2.33, we can show that sorted partial Lawvere theories have
free models. For the single-sorted case, let ğ‘: Par(F op) â†’L be a partial Lawvere theory. Indeed
we can look at it as a morphism in DCRCâ‰¤, then the previous theorem produces an adjunction
ğ¹âŠ£Modğ‘
ğ¹: ModPar(F op) â‡†ModL : Modğ‘.
The functor Modğ‘coincides with the forgetful functor. Its left adjoint ğ¹provides free objects.
8. Conclusions and future work
We introduced partial Lawvere theories and their associated notion of partial equational theory.
Our deï¬nitions are guided by the appropriate universal property, replacing cartesian categories
with discrete cartesian restriction categories. Knowing the right universal property determines our
choice of syntax, isolating the correct class of string diagrams that replace classical terms. This
enables the standard methodology of presenting a theory by means of a signature and equations,
while avoiding ad-hoc notations and eliminating the subtleties of reasoning about partial structures.
The extension is conservative: every equational theory yields a partial equational theory such
that the categories of models coincide, even though our models are in Par rather than in Set.
The recently proposed Frobenius theories [BPS17] take their models in the category of relations
Rel, and are guided by the structure of cartesian bicategories of relations [CW87]. Every partial
equational theory yields a Frobenius theory and again, the categories of models coincide. We feel
that our notion is a sweet-spot. First, we have shown that our notion of partial theories is expressive,
capturing a number of important examples. Second, we retain much of the richness of the semantic
picture, via a canonical variety theorem and existence of free models.
There is much future work. The fact that the syntax introduced here is inherently partial makes it
well-suited to applications in computing. In particular there is an evident notion of computable
model for partial Lawvere theories, namely those models valued in the category of sets and partial
recursive functions. The corresponding computable varieties seem to be interesting for programming
language semantics, and therefore worthy of study. A further step would be the lifting of this

26
IVAN DI LIBERTI, FOSCO LOREGIAN, CHAD NESTER, AND PAWEL SOBOCIÅƒSKI
situation to a more synthetic category of computable functions, such as a Turing category [CH08]
or monoidal computer [Pav13].
An important part of categorical universal algebra is played by monads, a point of view that we
have not considered here. Indeed, Lawvere theories can be seen as ï¬nitary monads [Lin66], with the
category of algebras giving the associated variety. This connection has been a fruitful one, relating
areas of research that are, on the surface, very diï¬€erent, see e.g. [Che20, LV12, MSS02]. A natural
question is whether there is an analogous approach for partial algebraic theories. We conjecture that
there is, with certain formal monads [Str72] in the 2-category DCRCâ‰¤playing the role of ï¬nitary
monads. We expect that other constructions of categorical universal algebra (e.g. [Fre66, Pow06])
will have corresponding partial accounts.
References
[ALR03] J. AdÃ¡mek, F.W. Lawvere, and J. Rosick`y, On the duality between varieties and algebraic theories, Algebra
universalis 49 (2003), no. 1, 35â€“49.
[AR94]
J. Adamek and J. Rosick`y, Locally presentable and accessible categories, London Mathematical Society
Lecture Note Series, Cambridge University Press, 1994.
[ARV11] J. AdÃ¡mek, J. Rosick`y, and E.M. Vitale, Algebraic theories, Cambridge Tracts in Mathematics 184 (2011), 1.
[BD86]
F. Borceux and D. Dejean, Cauchy completion in category theory, Cahiers de Topologie et GÃ©omÃ©trie
Diï¬€Ã©rentielle CatÃ©goriques 27 (1986), no. 2, 133â€“146.
[BÃ‰93]
S. L. Bloom and Z. Ã‰sik, Iteration theories: The equational logic of iterative processes, 1993.
[Bet88]
I. Bethke, Notes on partial combinatory algebras, Ph.D. thesis, Universiteit von Amsterdam, 1988.
[Bir35]
G. Birkhoï¬€, On the structure of abstract algebras, Mathematical proceedings of the Cambridge philosophical
society, vol. 31, Cambridge University Press, 1935, pp. 433â€“454.
[BPS17]
F. Bonchi, D. Pavlovic, and P. Sobocinski, Functorial semantics for relational theories, arXiv preprint
arXiv:1711.08699 (2017).
[BSZ18] F. Bonchi, P. SobociÅ„ski, and F. Zanasi, Deconstructing Lawvere with distributive laws, Journal of Logical
and Algebraic Methods in Programming 95 (2018), 128â€“146.
[Car91]
A. Carboni, Matrices, relations, and group representations, Journal of Algebra 136 (1991), no. 2, 497â€“529.
[CD08]
B. Coecke and R. Duncan, Interacting quantum observables, ICALPâ€˜08, 2008, pp. 298â€“310.
[Cen04]
C. Centazzo, Generalised algebraic models, Generalised algebraic models, Presses universitaires de Louvain,
2004.
[CGH12] J.R.B. Cockett, X. Guo, and J.W Hofstra, P, Range categories II: towards regularity, Theory and Applications
of Categories 26 (2012), 453â€“500.
[CH08]
J.R.B. Cockett and P.J.W. Hofstra, Introduction to Turing categories, Annals of Pure and Applied Logic 156
(2008), 183â€“209.
[Che20]
E. Cheng, Distributive laws for Lawvere theories, Compositionality 2 (2020), 1.
[CL02]
J.R.B. Cockett and S. Lack, Restriction categories I: categories of partial maps, Theoretical Computer Science
270 (2002), 223â€“259.
[CL07]
J.R.B. Cockett and S. Lack, Restriction categories III: colimits, partial limits, and extensivity, Mathematical
Structures in Computer Science 17 (2007), 775â€“817.
[CO89]
P.L. Curien and A. ObtuÅ‚owicz, Partiality, cartesian closedness, and toposes, Information and Computation
80 (1989), 50â€“95.
[CV02]
C. Centazzo and E.M. Vitale, A duality relative to a limit doctrine, Theory and Applications of Categories 10
(2002), 486â€“497.
[CW87]
A. Carboni and R.F.C. Walters, Cartesian bicategories I, Journal of Pure and Applied Algebra 49 (1987),
11â€“32.
[Dug01]
D. Dugger, Combinatorial model categories have presentations, Advances in Mathematics 164 (2001), no. 1,
177â€“201.
[Fox76]
T. Fox, Coalgebras and cartesian categories, Communications in Algebra 4 (1976), 665â€“667.
[Fre66]
P. Freyd, Algebra valued functors in general and tensor products in particular, Colloquium mathematicum,
vol. 14, Institute of Mathematics Polish Academy of Sciences, 1966, pp. 89â€“106.
[Fre72]
, Aspects of topoi, Bulletin of the Australian Mathematical Society 7 (1972), no. 1, 1â€“76.
[FS90]
P.J. Freyd and A. Scedrov, Categories, allegories, North-Holland, 1990.
[Gil14]
B. Giles, An investigation of some theoretical aspects of reversible computing, Ph.D. thesis, The University of
Calgary, 2014.

FUNCTORIAL SEMANTICS FOR PARTIAL THEORIES
27
[GU71]
P. Gabriel and F. Ulmer, Lokal prÃ¤sentierbare Kategorien, Lecture Notes in Mathematics, Vol. 221, Springer-
Verlag, Berlin, 1971.
[HP07]
M. Hyland and J. Power, The category theoretic understanding of universal algebra: Lawvere theories and
monads, Electronic Notes in Theoretical Computer Science 172 (2007), 437â€“458.
[Koc03]
J. Kock, Frobenius algebras and 2D topological quantum ï¬eld theories, Cambridge University Press, 2003.
[Lac04]
S. Lack, Composing PROPs, Theory and Applications of Categories 13 (2004), no. 9, 147â€“163.
[Law63]
F.W. Lawvere, Functorial semantics of algebraic theories, Proceedings of the National Academy of Sciences
of the United States of America 50 (1963), no. 5, 869.
[Lin66]
F.E.J. Linton, Some aspects of equational categories, Proceedings of the Conference on Categorical Algebra
(Berlin, Heidelberg) (S. Eilenberg, D. K. Harrison, S. MacLane, and H. RÃ¶hrl, eds.), Springer Berlin Heidelberg,
1966, pp. 84â€“94.
[LV12]
J.-L. Loday and B. Vallette, Algebraic operads, Grundlehren der Mathematischen Wissenschaften [Fundamental
Principles of Mathematical Sciences], vol. 346, Springer, Heidelberg, 2012.
[ML65]
S. Mac Lane, Categorical algebra, Bulletin of the American Mathematical Society 71 (1965), no. 1, 40â€“106.
[MP89]
M. Makkai and R. ParÃ©, Accessible categories: the foundations of categorical model theory, Contemporary
Mathematics, vol. 104, American Mathematical Society, Providence, RI, 1989.
[MSS02] M. Markl, S. Shnider, and J. Stasheï¬€, Operads in algebra, topology and physics, Mathematical Surveys and
Monographs, vol. 96, American Mathematical Society, Providence, RI, 2002.
[Pal09]
E. Palmgren, Constructivist and structuralist foundations: Bishopâ€™s and Lawvereâ€™s theories of sets, 2009.
[Pav13]
D. Pavlovic, Monoidal computer I: Basic computability by string diagrams, Information and Computation 226
(2013), 94â€“116.
[Pow06]
J. Power, Countable Lawvere theories and computational eï¬€ects, Electronic Notes in Theoretical Computer
Science 161 (2006), 59â€“71.
[PV07]
E. Palmgren and S.J. Vickers, Partial horn logic and cartesian categories, Annals of Pure and Applied Logic
145 (2007), 314â€“353.
[RR88]
E.P. Robinson and G. Rosolini, Categories of partial maps, Information and Computation 79 (1988), 94â€“130.
[Str72]
R. Street, The formal theory of monads, Journal of Pure and Applied Algebra 2 (1972), no. 2, 149â€“168.
Email address: diliberti.math@gmail.com
Institute of Mathematics,
Czech Academy of Sciences,
Prague, Czech Republic.
Email address: fosco.loregian@taltech.ee
Email address: chad.nester@taltech.ee
Email address: pawel.sobocinski@taltech.ee
Department of Software Science,
Tallinn University of Technology,
Tallinn, Estonia.

