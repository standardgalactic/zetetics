Decbd.on procedures lorna. and. Chettce
(Extended ab8traot)
Sarit Kraus and Daniel Lehmann
Institute of Mathematics and Computer Science,
Hebrew University. Jerusalem 9104 (lsrael)
Abstract;
Decision procedures
are
provided for
checking the
satistlabllity of a formula in each of the three systems
TCg. reb and Tet defined In [LS].. The procedures tor TCg
and Tel run in non-deterministic time 22"" where n is the
size of the formula and c is a constant. The procedure
for Teb runs in non-deterministic time 220ft •
A deter-
ministic exponential lower bound is proved for the three
systems.
All
three
syst.ems
are
also
shown
to
be
PSPACE-hard using results of [SC]. Those decision pro-
cedures are not ·as efficient as the deterministic (one or
tW'o)-exponential time procedures proposed in [BMP]and
[EH1] for different logics of branching time that are
weaker than ours in expressive power.
No elementary
decision procedure is known for a logic of branching
time that is as expressive as ours.
The decisi-on pro-
cedures of the probabilistic logics of [HS] run in deter-
ministic exponential time but their language is essen-
tially less expressive than ours.
1. Introduction
In [LS] an extension of the propositional logic of
linear time was described and claimed useful for reason-
ing in an uncertain world. Le. a world in which time floW's
and 1il. which the transition from one instant ot time to
the next is probabilistic in nature. Three logical systems
of axioms and rules of inference were proposed and
proved deductively complete with· respect to ditferent
classes of models.
One of these
systems.
Teb, was
clai~ed to be most adequate for stating and proving pro-
perties about a large interesting family of probabilistic
Il~~_~r:it~~•. ~_~ch ,as those of [CLP], [LR] and [Ra3].
All
three systems had impressive expressive power. since
they are similar. ~n. .expressive power to thesystemcrL-
described. tor branching time. in [~li2]. Tb.18 last system
is the most expressive of those defined in [EH2] and no
elementary decision procedure is known tor it. It is even
possible that methods similar to ours could yield efficient
decision procedure for CTL -. We assume familiarity with
the basic notions and notations of [LS] (see ICALP 83
Springer Verlag Leoture Notes in C.S. for an extended
abstract): the models. the language (I') and Validity.
2. The logical systems
In [LS] three different logical systelIUl: Teg. TCb and
Tef were proposed. each one of them corresponding to
one of the notions of ,.-validity defined there (7 is 9 . b or
J).
The symbol t- denotes provabllity in the system
d·
.,
correspon lng to 'Y.
The following completeness result
was proved.
202
0272-5428/83/0000/0202$01.00 @ 1983 IEEE
Theorem 1: For any 7EIg,blJ and for any a e:r,
1= m <c=:> t- II.
",
.,
3. The lower bounds
Our
tlrst
result
19 ,that
all three
systems
are
PSPACE-hard. In [Se] the temporal logic of linear time is
shown to be PSPACE-hard. Let II be a formula of the
temporal logic ot linear time. It Is also a formula of r. If
tI is valid in the logic of linear time then it holds lor
every path of a 9 -model and it is g-val1d.
Any 9 -valid
formulA 1s b -valid and any b -valid formula is f -valid. Let
us call a g -model deternnnistic if for any state s there is
a state t such that p (8 ,t) =1. If a formula a. is f -valid
then it is. in particular. satisfied by all finite determinis-
~ic. ,models. But finite deterministic models are exactly
finite linear models.
Since the logic or linear time has
the tlnlte model property any formula ot the logic of
linear time that 1s I-valid is valid.
Our second result is that no decision procedure for
any of our three systems can work in less than exponen-
tial time.
Theorem 2: There is a constant a >1 such that the
validity problems for TCg. TCb and TCf are not members
ot DTIME(cn ). where n. is the size (I) of the formula.
The proof is by reduction to one letter PDL. Let us
call PDL- the restriction of PDL obtained by restricting
oneself to a Bingle basic program ( 1-) and not allowing
sequential eomposition ( ; ) or non-deterministic choice (
U ). Noti;e that PDL- has essentially only two programs:
t- and f- . In (FL]. it is shown that the validity problem
for PDL- requires exponential time.
Define UB- as the
subset of UB (see (BMP]) defined when one allows VG
and VX as the only temporal connectives (i.e. VF and JG
are disallowed, classical connectives are allowed).
The
simple tran!lation of PDL - to UB- that translates [1-] by
VX and (t- ] by VG shows that the validity problem for
UB-requiresexponential time (this result seems to be
part of the folklore of the subject). Our remark is essen-
tially that UB- is so restricted that the branching time
interpretation is eqUivalent to the probabilistic interpre-
tation.
More precisely. "tVe translate UB- into a subset r' of
r by translating YX by va and YG by VO If a, is 8. for-
mula ot US-, its translation in r' will be denoted by fi.
Let npw 11 be a 9 -model (probabilistic). we shall denote
by 11. the branching time model obtained from 11 by
allowlng those transitions that have positive probability
in 1J (and forgetting the probabilities).

Lemma 1: If a is a formula of UB- and 11 is a g-
model, then 11 ~ it
==;> 11 1= ... iI .
Proof: An easy induction on the structure of rJ" rea-
soning at the same time on a formula and 1ts negation.
Lemma 2: Let a. be a formula of UB- and 'IJ be a g-
model, then 11' F a,
<;:::;> U 1=, ii .
Proof: An easy induction on the structure or a.
Lemma 3: Let a, be a formula of UB-. then the fol-
lowing propositions are equivalent:
a)
a, is valid for branching time logic
b) a is 9 -valid
c) if is b -valid
d) cr is / ·valid
Proof: a) ~ b) by lemma 2. b) ::::;> c) and c) :::;> d)
are obvious. Suppose d) is true. By lemma 2 tor any 1-
model 11 we have 11' Fa. Given a finite model for branch-
ing time 11, one may always give numeric positive proba-
bilities to the transitions of V to obtain an I-model 'Ii
such that'll' =V.
We conclude that a is satisfted in all
finite models for branching time.
Since UB- enjoys the
finite model property, we may conclude that
Dr is valid.
Q..E.D.
4. Upper bounds
All three completeness results of [LS] proceed by
building a "universal" model, Le. a model in which points
are labeled by traces of a suitable size and every trace of
that size labels some point of the model that is built in
such a way that the standard generic paths out of a
point satisfy exactly those formulas that appear in their
label. In all three cases those models, though infinite in
the cases 9
and b, may be finitely (and succinctly)
described. The basic idea is to collect a set of properties
enjoyed by the universal model that is rich enough to
guarantee that the standard generic paths out of a point
satisfy exactly those formulas that appear in their label.
We may know guess a model satisfying those propertie's
and look out tor a label containing formula Va. It one is
found then a is satisfiable. If no model contains such a
label, then the universal model contains no such label
and a. is not satisfiable.
5. A decision procedure for reg
First we shall define the small set of formulas to be
considered.
Definition 1: If
a. E: r, we define CZ-( Do) to be the
smallest subset of r satisfying:
a) Va E: a-(a,)
b) a '-(0,) is closed under sub-formulas
c) a-(a) is closed under negation
d) p
E: CZ-(a) (p stands for a propositional variable )
==:> Vp E: a-(a)
e)Db
€ a-(a.) =::>ODb
E Cl-~a)
f)O b Untnc e: C;Z-(a.) =;>
alb unwc) e: Cl"1a.)
and
-.
- c e: a -( Q, ) •
We shall also assume that double negations are automati-
cally removed. It is easy to see that the size of a -(a) is
linear in the length ot a.
Similarly to what must be done in the completeness
proof we need to detlnea set of formulas that is, larger
than Cl-(a,). The labels considered will be subsets of this
203
larger set of formulas.
Deftnition 2: A formula b is in Or(a.) iff it il either in
a -(a)
or
of
the
form
V b IV . · • b~
where
b, E a (CI ). i = 1f
•
•
• .Ic.
Notice that G!(a) contains only em formulas.
Now,
we want to restrict our attention to those subsets of
a (a.) that are reasonable candidates for labels. Notice
that our requirements deal only with the formulas of
a -(a.).
Definition 8: D ~ a (a.) is a standard set (for a) if it
satisfies:
a) if b E et-(a.) , .. b €. D <=> b ,. D
b) it b vee: Ct-(II) . then b vee: D <t=:;> b e: D or c e: D
c) Db
E: D <:=;> b ED and aOb ED
d) if Vb e: a -(a, ). then Vb e: D :::;> b e: D
e) p ED==:> Vp
E: D
f) 6 Untilc e: D ::::;.. ...0"" c E D
g) b Untnc e: D
¢::;>
c e: D or b e: D andOrb Untnc) e: D
We detlne !b to be the set of all the standard subsets of
a (a)
Remark: 2 contains at most 22 C'(CI) elements. for some
constant c
We detinet now. the successor relation R on !b.
Notice
again that only formulas of Cl-(a) are considered.
Deftnition 4: Let D1 and De be standard sets (Le
11 e:2»
we Bay that D1 R D2 iff for all b e:r such that
Ob e: Cl-(a.), we have Ob e: DI <;::;> b e: De-
Similarly we define a relation E on 2J. It is crucial
here that our requirement is only for formulas of CZ-(a).
DeOnltlon
~: Let D I and De be in!l:J.
We say that
Dl E Da ift for all b e:r such that Vb
Eo: Ct -(a.), we have
Vb E: D1 <=:> Vb e: D2 .
Now we may define the pseudo-models for the case
g.
(
Detlption 8: A pseudo-model (for a.) is a triple
W,r,'""')
satisfying:
1) W is a set of standard sets (Le W c!b)
2) r
is a binary relation on W that is contained in R, Le.
Dl r D2 ::::;> D 1R D2
3) """ is an equivalence relation on W that is contained in
E
4) (r '""') C (f'W R) (Le if D 1,D2 , Ds e: W such that D1r D2 ,
and D2 toW Ds , then there exists D4 e: W such that D1 rowD4
,
and D4 R Ds).
5) for all D e: W . there eXis~a D' E: W such...that Dr D'
6) for all D Eo: Wand for all Ub e: Cl-(a.) , if Ub It D then
there exists aD' E: W such that Dr· D' and b t. D' where
r· denotes the reflexive and transitive closure of r
7) for all DEW and f or all V b e: CL -(a.) , if V b t. D then
there exists aD' e: W such that D ~ D 'and b t. D '
Lemma 4: If a i(S a 9 -satlsflable formula, then there
are a pseudo-model
W, r ...... )
for a and a
D e: W such
that Va. E: D.

Proof: Let .A be the set of all D's tor which there is
a
9 -consistent
and
complete
theory
T
such
that
D:: Tn Cl (m).
Notice that here we consider Cl (tJ) not
a -(a.). One may see that<..A •s .e·>, is a pseudo-model
for m, where s and e are defined below and e· is the
retiexlve and transitive closure of B.
The relation s is
defined by DIs Da itt there is a g-consistent and com-
plete
theory
T1
such
that
D1 =T1 n Cl (a,)
and
D2 = T{ n Cl ((I) where + is defined as in [LS]. The rela-
tion" is defined by D 1 S' D2 itf there are g-consistent and
complete
theories
T1
and
T2
such
that
T1:iii T2'
D" = 1i n a (a,) for i=1,2, where == is deflned as in [L5].
The only delicate pOlnts are verifying conditions 4 and 6
of definition 6.
Condition 6 is proved exactly as in sec-
tlon 11.6 ot [L6]. We shall sketch the verification or con-
dition 4.
We should show that s e· C e· R.
Indeed we
shall show that s e· t: e R. SUppose D 1 S De and De e • Ds.
We know that there Is a 9 -consistent and complete
theory T1 such that D 1 = T1 n a(a.). De= Tt n (l(a.). and
tor any Vb e: a(a) (the larger set, not only CZ-(a.»),
Vb €. De <=:> Vb e: Da.
Let
U =lb I Vb E: Tit
U fOd Ide: Ds n a-(a)J.
One easily sees that U is
g-consistent.
Now one may extend U to a g-conslstent
and
complete
theory
T4
(
T4 == T1
)
and
take
D. =T4 n O(a.).
One also sees that it a. is satisfiable so is Va. and
that there is a g-consistent and complete theory that
contains Va. and therefore a
D e:.A such that Va. e: D.
Q.E.D.
We must now show that in a pseudo-model. the rela-
tion.s rand'" have all the properties needed to perform
the construction of a 9 -model that to prove that it
enjoys properties similar to those of the universal model
built in [LS] (we are able to carry out the proof of lemma
21 of [LS]). First we prove the equivalent of lemma B of
[L8].
Lemma 5: Let <W .r , f'W) be a pseudo-model and let
k~O
and
DoaDla . · . ,14 e: W
such
that
V
i,~i<k. D" f'WT Di +1• There are Si. tor 1, =0, · · . ,k, such
that St e: Wand
1) 5( -Dt"Yi, O~i~k
2) 5i R Si+l,Yi. Q~i<k
Proof: By induction on Ie.
For Ie =0 the result is
clear.
For k >0 use the induction hypothesis tor the
sequence Dt ....D" to find 8lJ . · · ,S•. Now Dof'Wr rewSl and
by definition 6 parts 4 and 3 Do f'W R S l' Q.E.D.
We may know prove the main lemma.
Lemma 8: If there exist a pseUdo-model <W ,r .'" )
and aCe: W such that Va e: C, then there exists a model
for m.
Proof: The model 11 = <s ,1.t , l , P>, is defined t.he
following way:
1) S =tWxW
2)
11, =<0 , C>
3) .l«i,D»=fp Ip e:DJ
4) Let us say, first, that the only transitions 'With non-
zero probability are those that increase the first
coordinate by one and use rwr to move along the
second
coordinate.
In
other
terms,
p«i,D>,<; ,F»J!Q ~ j =i+l and D ~r F. ·If Dr F
let us call the transition trom <i.D> to <i+1 aF> a
normal transition. A transition ot positive probabil-
ity that is not normal, Will be called exceptional.
Our goal is to give increasing ( with the first coordi-
nate) weight to the normal transitions. and ensure
that. with probability one. atter a certain time. only
normal transitions occur.
Therefore we choose a
sequence eli of real numbers between 0 and 1. such
that Ii(I, > O. From state <i,D>, we give equal pro-
i=O
bability to all normal transitions, so as to give them
total weight ai, and equal probability to all excep-
tional transitions, so as to give them total weight
1-ai'
If
a =<;." ,Di >
is
a
sequence
of
states
(any
sequence) we say that a is standard it! ~ R D'+l for any
i~O. A sequence of normal transitions is standard.
We
say_ that
a
is
ultimately
standard
if
for
any
i~O
D1, f'WR Di +1 and a has a standard tail. Our goal is to show
that the model U satisfies a.. With the changes just made
lemma 19 of [LS] still holds. The proof 1s unchanged.
If a = l<ki,D,>t and T =1<;,,1(>1 are sequences of
states, we say that C1 and i are equivalent and write a E T
iff for every i EN, D." E F,. Generic sequences are detlned
as in [L6], replacing p by T. Lemma 20 of [LS] still holds,
and tor the same reasons.
Notice that, if a sequence of states a = I<ki ,Di>1 is gen-
eric and it F e: W appears an infinite number of times in
the sequence (as a second component ) then every
G €. W such that Fr· G also appears an infinite number
of times.
Our basic result concerning 11 is the following.
Lemma 7: Let b e:Cl-(a,),
C1
a generic standard
sequence ot states ( of U ), and T and T' two eqUivalent
sequences of states, then
a) b lti =bu. <;:::;> b rEDo, where ai =<.Je1.,Di,>
b) b Iii =b 'u'
Proot: The proof is by induction on the size of b , i.e.
N(b), at each induction step, we prove a) first. and then
b).
b =1'
a) p lti = tnl.. ~ P e:l(o:o) ~ p EDO
b)
PI" =tnte ¢::>
p e:F, where '-0 =<i.F> <:=:>
Vp e:F. by conditions d) and e) of definition 3
<=;>
Vp e:F',
where
T'o =<i,F'>,
since
F E F'
by
definition ~ ~ P EF' , by condition e of definition
3 ~p IU = fnLe.
b = "'0
By condition a) of definition 3.
b =cvd.
By condition b) of definition 3.
b =00
a)
00 'U =tnte ~
0 lui =f7'U8 ~
0 EDI ~
Oc €DOt since DoR D1 and by definition 4 (since a is
a standard sequence).
b) Obvious.
b =Dca) Dc e:.Do ~ Yi e:rt.J ,Dc ED"
using condition c)
of detlnltion 3 and definition 4 since a 1s a standard
sequence
=:> Vi E:rtJ , C E:Di,
by
condition
c)
of
definition 3
==;> Vi e:rtJ , cieri =tnte, by the induc-
tion hypothesis and since tHe end part of a generic
sequence is generic
==:> Dc Iu=true.
Suppose
now
that
Dc ~ Do.
It
folloW's
that
204

3i e:t,I • c rl D,
or Vi EIN. Dc t D;, (by induction on i
usina condition e of definition 3 and definition 4 ).
We want to show that the first alternative is true.
In the last case, there is a member of W, say.£, that
appears an infinite number of times, and UC t.F.
Since the sequence a is generic, any G e:: W such
that F'r. G appears an infinite number of times in
the sequence.
By condition 6 of definition e then,
there is an i e: I'N. for which c t. D". We conclude that
3i e:~
such
that
c t D"
and
by
the
1nduction
hypothesis c 1;/ = false and Dc Iii =labe.
b) Obvious.
b = c tlntlld
a)
Suppose
cllnWd EDo.
By
condition
f)
of
definition
3
... U .... d. e: Do
and
by the
induction
hypothesis there exists an index k tor which d. E: Die .
Let i be the smallest such k. Using definition 4 and
property g) of definition 3 one sees that for any;,
j <i, we have C E Dj . We conclude by the induction
hypothesis.
Suppose now that c 1InUld t. Do. If for every k, we
have d t. Dj; we conclude straightforwardly by the
induction hypothesis.
Suppose i
is the smallest
index for which d. ED".
Using definition 5 and pro-
perty g) of definition 3, one sees that there is an
i.ndex j, j < i for which b t. Ds and we conclude by
the induction hypothesis.
b) Obvious.
b =Va
a)
Suppose VC EDo.
We want to show that, for
=tnLe.
almost all sequences TEP..o' we have c 1[;
Since almost all sequences of Pflo are generic (by
lemma 20 of [L8]), it is enough. by lemma 19 of [L8]
to show that if T is generic and ultimately standard,
then c I~ =true.
Let T be standard from index i
on.
By remma 5, there are 8m € W , O~m <i such
that Sm ..... Dm" tor m=O,'" .i-l and SmRSm+b for
m,=O•... ,i-a.
Let us define the sequence .,-' by:
T'm. =<km ,Sm>. for m=O,' · . ,i-1 and T'm = T m
, ,
for
m~.
The sequence
T' is equivalent to
T.
Th'frefore,.. by the induction hypothesis. part b),
c I'J = c I'IJ' It is generic since it is identical with 7
fro-tn inde-x i on and since T is generic.
It is also
standard. Since.,-' is standard and generic. we con-
clU;,.4e. by the
inducti~n hypothesis part
~). that:
c IU = llMLe <=>
c ED.
where
T'O = <k.D >.
But
since -rET'. and Vc E:.Do, we conclude that c ED',
by definition 5 and condition d) of definition 3.
Suppose now that Vet. Do. We must find a set Q of
sequences that begin at aD and do not satisfy c,
such that Q has a positive measure.
Remember
that ao = <ko,Do>.
By condition 7 of definition 6,
there 1s a F E: W such that Do '" F and c ~F. Let F'
be any member ot W such that Fr F'.
Condition 5
of deflnition6 ensures the existence of such an F'.
We have Do ~r F', and by the definition of our
model p «ko,Do>.<ko+1.F'»
> O. Let us define Q
as the set of all sequences T such that:
1"0 =ao.
T1 =<k1,F'> and the sequence T 1 is standard and
generic.
By lemma 19 of [L5]. we have 'Pflo(Q) > O.
It is left to us to show tha.t no sequence of
Q
satisfies c. Let T be any sequence of Q. Let 1'" be
the sequence <ko , F> , 71 , T2'
· · '. It is a generic
standard sequence.
~y the induction hypothesis,
part a) we have c 11j = false.
But since Do '""" F,
'T E T'.
We conclude. by the induction hypothesis,
part b), that c Itl = /alss.
205
b) Let tI be any generic standard sequence starting
at To. Since the truth value of Vc depends only on
the first state of the sequence we have Vel T =
Vc lti.
By t~e induction hypothesis, part a) rust
above;
Vc 111 =trus ~ YC ED,
where
TO =Uo
= <leo,D>.
Similarly Va lu =true <:=;>
Va ED',
where
T'o =
</colD '>.
. But,
since
D ED',
Va ED ~ Vc ED'. Q..E.D.
We may now conclude the proof of lemma a. Since
Va. E.-Do and Do is the initial state of our model 'Ii,
we conclude from lemmas 19 of [L8] and lemma 7
that 11'IJ. (a. )=1 and 11 J=a. Q.E.D.
Theorem 3: Satisflability in TCg is decidable in
NTIME(2
2rm ) for some constant c ~ 0 where n is the
size (I) of the formula .
(
Proof: Algorithm 1.
To test if a is satisfiable:
(1) Guess a pseudo-model<W •r , I'W>.
(2) Test if J D e: W such that Va. E: D .
Notice that the task of checking if a triplet is a
pseudo-model is polynomial in the size of Wand
that the correctness of the algorithm Is clear trom
lemmas 4 and 6. Q.E.D.
6. A decision procedure for Tet
Since we must consider terminal theories and their
traces we must enlarge somewhat the set of formulas to
be considered. therefore we replace definition 1 by the
following.
Detlnition 7: Let a E: f, we define Cl-(a) to be the
smallest
subset
of r
satisfying
conditions
a}-d)
of
definition 1 and
.e.)
.11
b e: CZ-(u)
that
does
not
begin
by 0
then
o .... Ub e: Cl-(a) .
We
shall
assu~ that
two
simpli!tcations Jre
IlJAde
automaticall~
is simplified to D and
.... U .... 0 -, U is
simplified to U ...
With those assumptions one may see
that the size of et-(a.) remains linear in the length (I) of
a. Let a be a formula in Tef ,the closure of a, (Cl (a»
and standard sets for a are detlned as in the case of reg.
We need to define terminal subsets of Cl (a).
Deftnlt10n 8: D t: a (a) is a terminal set (tor a) it it
satisfies;
it b e: a -(a) , b t. D => 0 ....Db €. D
We may now define pseudo-models.
DetJpition .9: An I-pseudo-model for a is a triplet
( W ,r ,~) satisfying:
1) W t: 10.11 x ~ such that <1 ~ D> E W ==> D is termi-
nal
2)
r
is
a
binary
relation
on
W
such
that
<i ,D1>r <; ,D2> =::::;>- D 1R D2
and
such
that
<1, D 1>r <j •D2> ====> i =1
3)
N
1s
an
eqUiValence
relation
on W
such
that
<i,D1>'"""<;,De>:::;>D1EDe Ai=j
and
s,u.ch
that
,S.l, D 1>'" <1 ,))2> =;>
for
any
Ub e: Ct (a),
Ub ED} <=;> Ub e:Da
4) if WI, We and Ws =<i ,Ds> are members ·of W such

that
Wt rw 2
,
and
'W2~WS
I
then there
exists an
1.1)4 =<i .D.> e: W such that WI NUl4 • and D..R Ds.
5) for all
'W e: W • there exists an w
f e: W such that
w ". w' and an w" E W of first coordinate 1 suoh that
w ".. ow If where ".. denotes the reflexive and transitive
closure of r
el for all w =<i,D>EW and for all Dbe:a-(rI) • if
Db t. D then there exists an w' =<; •D t E W such that
wr·w' and b t. D'
7) for all tv =<i, D> €. Wand' for all Vb E: a-(a.) , if
Vb t. D then there exists an s' = <i •D '> E: W such that
s~s'andb t.D'
Now we may proceed as in the case of TCg.
Lemma 8: If
a. is an I -satisfla9le torm'tla. then
there are an '-pseudo-model for a,. \. W •r . ~). and a
D E: W such that Va. E: D.
Proof: One sees that <..A. S ,e·) is a suitable 1-
pseudo-model where
.A contains the pairs <0, T n a (0,»
where T is an ,-
consistent
and
complete
theory
and
the
pairs
<1 ,Tn a (0,»
where T is such a terminal theory. The
relation s is defined by:
a) <0. D1>B <i •De> iff there is an J -consistent and com.-
plete
theory
T
such
that
D1 =T n CZ (tt)
and
De =T+ n Cl (a)
b)
<1. D1>s <1 .De'> iff there is a terminal. ! -consistent
and complete T as above.
The relation e is defined by:
a) <0. D1> 8 <0 .D2> it! there are '-consistent and com-
plete
theories
TA: ,Ic =1,2
such
that
T1 == T2•
.0. =T~ n a (a.) for Ie = 1.2
b) <1.D1>e <l.De> iff there are terminal such theories.
Q.E,D.
Lemma
9:
If
there
are
an
f -pseudo-model
<W ,r . fW>and a tv =<i •C> e: W such that V0. e: C then
there exists an I-model for r.&.
.
Proof: The model 'Ii =<s ,'U. , 1 •P), is defined the
folloWiDj way:
1) S =W
2)
'U =C
5) I (D)=tp Ip E: DI
4) We decide that p (w 1 ,wa) ~ 0 It! w 1 ~ r Wg and that all
transitions of positive probability from
WI have
equal probabilities.
- Let m, be a natural number. Let a be a sequence of
states of 11 (any sequence).
Suppose a = <zi .Di >.
We
shall say that a is an m-standard sequence if there
exists an ft Etl such that: for any i such that ~i<n we
have zi =D. tor any i ~n. z, =1. tor any i
such that
~i<n+m,. we have .Da R D'+l and for any i~n+m. we
have a, ~r a'+l' A sequence Is Ultimately m-standard 1t
it has some m-standard tail.
We see. using conditions 2 and 5 of definition 9, that
the set of m-standard sequences beginning at a state s
has positive weight and that the set of ultimately m,-
standard sequences beginning at a state s has weight 1.
Equivalent ( E ) sequences are defined as in the case or
reg.
We shall now need a stronger definition ot generic
sequences (it is needed in th~0 case below). Let t1 be a
sequence of states of 1J (a e:S ), a is said to be generic iff
for any So e: S that appears an infinite number of times
206
in a and for any finite sequence of 8t € S
80.S1' · · • ,s",
such that s, r 8(+1' for every i
such that
O~i<m. the
seQ.uence above appears in
f1 (in this order) an intinite
number
ot
times.
Clearly
the
weight
of
generic
sequences is 1.
Our basic result concerning 1.1 Is the following.
Lemma 10: Let b e:a-(a) . a an O(b)-standard gen-
eric sequence of states ( of U ) (and let the second coor-
dinate of (7, be .Dt) and T and r' two equivalent sequences
of stat,s. then
a) b ItI = tn.uI <=:> b E: ao
b) b I; = b I;.
Proof: The proof is very similar to that of lemma 7.
and we signal only the differences.
b =Oc
a) OC I~ =true ~
c ,.,1 =tnuf.
The sequence
a l is gelferic since a is. SiNce tJ is Q(b )-standard. a1
is
(Q(b )-1)-standard.
But O(b )-1= O(c).
There-
fore.
by
the
induction
hypothesis:
c 1~1 =tn.uI
<:=>
c e:Dt -
Since nCb )~1. the first
trahsltion of a is an R-transition and Do R D I . We
O
conclude that C ED l ~ 00 e:Do.
b =
c
a) SUPl?9Be Dc EDo. Since a is o-standard. we have
Vi e:~, Uc EDi .
Our goal 1s to use the induction
hypothesis on c.
We notice that Vi e:~, ai is gen-
eric.
Let i
be given.
In general a' 1s not O(c)-
standard.
Let m = O(c).
Now we have to distin-
iuish between two cases folloWing whether the first
coordinate of a, is a or 1. If it is O. a4. 1s clearly
O(c )-standard
and
we
may
use
the
induction
hypothesis part a) to conclude: G Ivi =tn.uI.
On the other hand. suppose the tNst coordinate of
a, is 1.
By lemma 5 (mutatis mutandis). we may
find w" EW. for n. = it' · , ,i+m-1. (let F", be the
second coordinate of wn ) such that
1) w" "'a".
i<=n~'L+m-l
2)
Fn RF"+l'
i~n<i+m-l.
By
condition
5
of
definition 9. the first coordinates of the tv,.,s are 1.
and theretQ,re the Fn's are terminal.
By the same
condition t;Jc: e: .Pi.. Let the sequence T be defined
by: T'" = a'+m , and Tn = <l.Fi+n>. Yn O~n:S;m-l.
By construction a' and 1" are equivalent and there-
fore by the induction hypothesis b) 01,1 =
c I"'.
But T is a generic m-standard sequence and by tile
induction hypothesJs a) C lu = tnLe
cQ:::;>
C Eli.
We
I
=tnuf.
conclude that Dc 1J
Dc t. Do Following the line of reasoning used in
lemma 7 one may see that 3t e:1N such that c t. D( .
Now, as just above, we must distingUish two cases.
If the tlrst coordinate of a, is O. a' must be m-
standard and one may use the inductIon hypothesis
part a). If the first coordinate of a;, 1s 1. the proof
1s more delicate.
In this case D, is terminal and
does not oontain
C,
therefore it does
oontain
o...Oc (this last formula is in Cl-U~,>. We may the~
show that tor all indexes j~. 0 ""Dc E: Dj, since a'
contains only transitions of "type" R and
~r.
Therefore there is an F E!b
that contains
... Dc
and appears an infinite number of times in a (as a
second component).
Since a is generic. we con-
clude, by condition e of definition 9 that there is a
G e:!b that does not contain c and that appears an
infinite number of times in
C1 (as a second com-
ponent). Since a is generic. G must appear in a an

infinite number of times followed by at least O(c )
r-transitions. Let j be such a point in tI, with i~i.
At ;. we may apply the induction hypothesis part a)
and
see
that
c 1u
i =false.
We
conclude that
Dc I; =false.
b = Va
a)
Suppose VC EDo.
We want to show that, tor
almost all sequences T e: p.o' we have c IU=tnl.e ·
Since almost all sequences of p.o are generic and
O(c: )-ultimately standard it is enough to, show that
if T is generic and Q(c)-ultimately standard, then
C I~ = &-u.e. Let m = O(c). Since T is m-ultlmately
stahdard it has an m-standard tail. Using lemma 6
(mutatis mutandis) as we did in the corresponding
part of lemma 7 we may build a sequence -r' that is
equivalent to T, generic and m-standarp.
By the
induction hypothesis. part b). ciT =c I . We con-
clude by using the 1nductlonhypo~esiS.~art a).
Suppose now that
...Vc e: Do.
We must find a set Q
of sequences that begin at 0'0 and do not satisfy c,
such that Q has a positive measure. By the condi-
tion 7 of definition 9, there exists a tv .... aD (say
'W =<% .F> such that c ~F. Let F' be any member
ot W such that Fr Ft. Notice that. by condition 5
definition 9 there is such an F'.
By the construc-
tion
of
our
model.
we
have
p«zo,Do> . <zo,F') > O.
Let us define Q as the
set
of
all
sequences
T
such
that:
To ="0,
'1 =<%0. F' and the sequence
T 1 1s generic and
O(a)-standard.
We have ~"o(Q) > O. It 1s left to us
to show that no sequence of Q sa.tisfies c. Let T be
any
sequence
of
Q.
Let
"
be
the
sequence
W
, Tl , T2. ....
It
is
a
ieneric
0(0 )-standard
sequence~ By the induction hypothesis, part a) we
have a Iii = /aJ.se.
But since ao .... W,
T E T'.
We
conclude, by the induction hypothesis, part b). that
c I; =trUse. Q.E.D.
The proof ot lemma 9 is completed as in the previous
case.
Theorem 4: Satistlability in Tet is decidable in
NTIME(Z2
Cft
) for some constant c ~O where n is the size
(I) of the formula.
Proof: The proof 1s like in the previous case. Q.E.D.
7.. A dec1s1on procedure for TCb
We need to enlarge the set of formulas to be con-
sidered. The d~tinition of a-(CJ) Is as in definition 7. For
the definition ot Cl (a) we replace definition 2 by the fol-
lowing.
DeftDition 10: A formula b il[ in a (a,) lit! it is in
a-(a.),
of
the
form
Vb1v···bk
where
bi e: a (a). i = 1, ' · . ,k or of the form /1[A 0(1.) VCJ~]. tor
~=o
~
m. EtJ~ Vak in a-(o) and lk ~# (a.) for any 1c~m.
One
may see that the
size
of
Cl (a,) is 2an2 where
n=I(a).
Our new notion of a pseudo-model is the follOWing.
207
~
DefqlitiQ~
1~: A b-pseudo-model for
rI is a triplet
W ,r , ~) satlstymg:
1
W c: (0. 1f )(!b such that <1. D> E: W ~ D is termi-
nal
2)
r
is
a
binary
relation
on
W
such
that
<i •D1>r <1 ,D2> ==;> Dl R D2
I
3)
rw
is
an
equivalence
relation
on
W
such that
<i •D1> N <j ,Da> =;> D 1E De
and
suc;b.
that
.sJ. ,D1>.... <1 JJ2> =::;>
for
any
Ub e: Cl (a,),
Ub €. D1 <=> Ub €. D2
4) if WI, 102 and Ws = <i ,Ds> are members of W such
that
'Wt rW2
I
and
'W2I'WWS
• then there
eXists
an
w" =<j ,D.> E W such that Wt ....W4 , and D.R Ds.
5) tor all
w
E:' W
, there eXists an .'W I E: W such that
tV r w' I for all w's of first coordinate 1 there 1s such a w'
of first coordinate 1, and tor all w' s of first coordinate 0
there is a W" E: W of first coordinate 1 such that tv ,. • 'tv If
where""
denotes the reflexive and transiY,ve closure of .,.
a1 for all w = <i .D> E: Wand for all Ub E: a-(a.) , if
Db ~ D then there exists an 'tv' =,<i .D '> E: W such that
w r • tv I and b t. D'
7) tor all w =<-L,D> e:W and tor all Vb e: 0-(0.) , if
Vb t. D then there exists an s' =<0. D '> E: W such that
8 -s' and b ~ D'
8) for any wo.w l ..W t
E: W where k ~I (a.) such that Wi
has first coordinate 1. for; =0. · · ..A: and Wi ....r 'Wi +1. for
i =0.... ,k -1 there exist Vi E: W ot first coordinate 1,
i = 0•. · · It satisfying
a) Vo rwWo
b) VI EW1' for; =1•. · . •Ic. where E is interpreted on the
second coordinate only
c) V S R'Vj+l' for ;=0.'"
.t-1. where R 1s interpreted on
the seoond ooordinate only.
9) for any 'V,tv e:W such that 11 -wand tor any Ie ~'(a.)
there are Vi ,wi' for i =0, · . · .Ic such that
a) 'Vo =v and Wo = w
b)
'Vi Ews for i =0, . · · ,Ie where E is interpreted on the
second coordinate only
c) 'Vi ....rui+l. for; =0, ·
1e-1
d) Wi R'WJ+l' for i =0
· ,It -1.
Lemma 11:
Ifa.isab-.atisfiabl~ formula, then
there are a
b -pseudo-model \ WI" •-1
for
a. and a
D e: W such that VfJ e: D.
Proof: One sees that <.A,8.e·) is a suitable b-
pseudo-model where
..A contains the pairs <0. Tn a (a»
where T is an b-
consistent
a.nd
complete
theory
and
the
pairs
<1 , T n a (a. )> where T is such a terminal theory. The
relation s is defined by:
a) if i=O or ;=0 <i,D1>s<j,D2> ift there is an b-
consistent
and
complete
theory
T
such
that
D1 =' T n a(a.) and D2 = T+ n Cl(a,)
b)
<1. Dt>s <1 ,De> it! there 1s a terminal, b -consistent
and complete T as above.
The relation e is defined by:
a)
if i=O or ; =0 <i, D1> e <; ,De>
1ff there are b-
consistent and complete theories Tk ,A: = 1,2 such that
T1 ;;; T2 , Dt = T~ n a(a.) for Ie =1,2
b) <1, D1>e <1. D2> iff there are terminal theories
T~ tor
k=1,2
such
that
T1 == T2•
T1 ~ 12•
T2 ~ T1
and
~ = T~ n a (a) for k =1,2. Q.E.D.
Lelllfl'l
12:
If
there
are
a
b-pseudo-model
<W ,r ......}
for
CJ
• and a w =<;, 1D> in W such that
Va E: D then a. is b -satisfiable.

Proof: The model 11 =<s . 1.£ , l , 11). that satisfies
a-, 1s defined the following way:
l) S Is a subset of rNx,2) detlned by:
<O,D>ES it! <O,D>EW
tor i>O
I <i ,D> €oS iff <l,D> EW
2}
'U =w'
3) l «i,D»=1P 1" e: DJ
4) Choose some number a.: t<a.<l.
We distinguish here
between the states of first coordinate 0 and the
other ones.
For states whose ftrst coordmate is
zero, we give a positive probability to a move from
<O,D> to <O.D'> iff <0 ,D> ~r <D,D'>.
We aive a
positive probability to a move from <O.D> to <1.D'>
iff <0, D> ~r <1, D '>.
All other transitions from
<O,D> have probability zero.
We eive equal proba-
bilities to all moves of positive probability.
For
states whose first coordinate Is positive, we allow to
increase or decrease by one the first coordinate. It
the first coordinate is 1, we give a positive probabil-
ity
to
transitions
trom
<1, D>
to
<0, D'>
it!
<l,D>f>oJr <O,D'> and to transitions from <l.D>
to <2, D'> itt there 1s a w e:W 1n the pseudo-model..
such that tV has first coordinate 1, <1 ,D>""'w and
W T <1 ,D'>. If i>l, we give a positive probability to
a transition from <i.D> to <i,D''> in (either j =i-1
or i =4,+1) and there is a tv EW in the pseudo·
model.
such
that
w
has
first
coordinate
1,
<i. D> "'wand w r <i. D '>.
Moreover,
at
each
state S ot positive first coordinate we give a com-
bined weight of a
( a>t) to those moves that
increase the first coordinate.
L.et a be a sequence and let a, =<A:.t ,D,>. Let m be
a natural number.
We detlne a to be m,-standard iff
there exists a j
, such that ki>O, for i~j, such that tor
any i. i~i+m-l we have Di R Di+l and such that tor any
i. 1,;ze.:J+m we have ai t'Wr ai+l'
-
A sequence is said to be m.-ultimately standard it 1t
has a tail that is m-standard.
We see, using condition 5 of definition 11 J that the
set ot m-standard sequences beginning at a state s bas
positive weight and that the set ot ultimately m-standard
sequences
be~inning at
a
state
s
has
weight
1.
ECI,uivalent ( E ) seq~ences are defined as in the case of
reg. Generic sequences are defined as 1n the case ot ref.
Clearly the weight of generic sequences is 1.
Our bastc result concerning U Is the folloWing.
Lemma 13: Let b e: a (a), a a generic O(b )-standard
seQ.uence" of states ( of 11 ) and
T and
T' any two
equivalent (E) sequences of states, then
a) b 'ti = tnuJ <=;> b EDo, where)u( =<.k(,D(>
IT
,T'
b) b U=b U·
Proot: The proof is very similar to the proof of
lemma 10, and therefore we shall only highlight the
cha~es to be made.
b =Uc
a) SUR,P0se Dc E. Do.
Since a is a-standard, we have V
i €o·tJ, UC e: D;,.
Our
goal
is
to
use
the
induction
hypothesis on c. We notice that Vi ErN. ai 1s generic. Let
i
be given.
In general a' is not O(c)-standard.
Let
m =0(0).
Since a is m-standard, there is an index i
such that k l >0. for l ~j, such that for any l, l ~j +rn -1 we
have
Dl R D,,+1 and such that for any l. l~j+m we have
a, ~r at+1' Now we have to distinguish between two cases
following whether i <j or not. If i <;. a' 1s clearly O(c)-
standard and we may use the induction hypothesis part
a) to conclude: c 1;/ = tnLe .
On the other hand, suppose i>=;.
By condition B of
definition 11 we may find
"Wft E W, for n =;"
· . · ,i+m -1 ,
(let UJn =<8n ,Fn » such that
a) Zn = kn. n = i. · · , ,i+m-l
b) Wif'WU,
c) F" E Dn, n =i+l, · · · ,i+m.-l
d) Fn R Fn +l' n = 1" . • • ,i+m-1.
By
condition
3 ot
definition
11. Dc e: Fi,.
Let
the
sequence
T
be
defined
by:
T'" =~+m
f
and
Tn =<a,+,. .1(..,.>, n =O. · · · ,m.-I.
By construct1on a'
and
T are equivalent and therefore by the induction
hypothesis
b)
c 10" =
c I".
But
T
is
a
generic m-
sta.p.dard sequencVand byUthe inductiou..hrtl0thesis a)
c Itl = tnuJ ~
C EFt. We conclude thatUc Iii =true.
Dc ~ Do Following the line of reasoning used in lemma
7 one may see that Ji e:rtJ such that c t.Di
. Now. as just
above, we must distingUish two cases. It the first coordi-
nate of tit is 0, a' must be m-standard and one may use
the induction hypothesis part a). It the first coordinate
of a( is positive. the proof is more delicate. In this case
.Dc is termillA1 and does not contain c, therefore it does
containU ...Uc (this last formulai~...Jn....{l-(a,).
We may
then show that for all indexes i ~i, U ... Uc e: DS' since a'
contains only transitions of "type" Jtjlnd ""r. Therefore
there is an F E:b that contains
..., Uc and appears an
lntlnite number of times in a (as a second component).
Since a is generic, we conclude, by condition 6 of
definition 11 that there is aGE!b that does not contain
c and that appears an infinite number of times in f1 (as a
second component).
Since a is generic, G must appear
in a an infinite number of times followed by at least O(c)
r-transitions. Let i be such a point in a. With i~. At;,
we may apply the induction hypothesis part a) and see
that c 1;/ = fmlBe. We conclude that Dc IU= false ·
b =VcThe first haJ:t proceeds as in lemma 10.
Suppose now that ""'V C E Do-
We must. find a set Q of
sequences that begin at ao and do not satisfy c. such
that
Q
has
a
positive
measure.
Remember
that
ao = <ko,Do>. By condition 7 of definition 11 there is an
s = <0, F> such that
C t. F and ao ..... t. By condition 9 of
definition 11 we may find si' t( for i=O, ' · ·.m (where
m. =O(c) ) such that
a) ao = So and t =to
b) s.;, E ti
c) Sot "'r 8ot+l
d) t i R ti +1 .
Let Q be the set of all sequences T su~h that: Ti = Sit for
i=O.. · · ,m and T'" is generic and Q·standard.
By con-
struction the set Q has a positive measure. It is left to
us to show that no sequence of Q satisfies c. Let,. be a
sequence or the set
Q.
Den.ne the sequence
T'
by:
T'm+l = Tm +1 and T', = tir for i=O, · .. ,m.
By construc-
tion
T E.,.' and therefore, by the induction hypothesis
part b) c lu =c I~. But the sequence T' is generic since
it has a
ge~eric tail. It is also m,-standard since it con-
sists of a prefix of m R-transitions and a O-standard taiL
By T' the
induction. hypothesis
part
a)
we
conclude
c Itl =/dlse.
The proof of lemma 12 is ·completed as in the previous
case. Q.E.D.
1heorem 5: Satistiability in reb is decidable in
enl
NTIME(22
) tor some constant c ~ 0 where n is the size
(,) of the formula.
208

Proof: The proof is like in the previous case. Q.E.D.
8.
Open problems
There is a gap between the deter-
ministic
exponential
lower
bound
and
the
non-
deterministic double- exponential upper bound. It is our
feeling that this gap may be reduced. A natural idea is to
try and obtain a deterministic double-exponential time
decision procedure by an iterative method in the spirit
of [SH], but a too simple-minded effort tails.
The idea
seems applicable, though, for a sUblanguage containing
only "state
formulas",
large
enough to
include the
language of (HS].
One should also look for methods to
check whether a given formula Is satisfied in a given
model (described in some finite way).
9. Acknowledgements
J.
Halpern suggested the
exponential-time
lower
bound.
[A] Abrahamson. K. Decidability and expressiveness of
logics of processes.
PhD. Thesis, Univ.
of Washington
(1980).
[BMP] Ben-Ari, M.• Manna, Z. and Pnueli. A. The temporal
logic of branching time. Conf. Record au. Annual ACM
Symposium on Principles of Programming Languages.
Williamsburg. Va. (Jan. 1981). pp. 164-176.
[CE] Clarke, E.M. and Emerson. E.A. Design and synthesis
of synchronization skeletons using branching time t.em-
porallogic, Prac. Workshop on Logics ot Programs, Kozen
ed., Springer-Verlag (1982) (to appear).
[CLP] Cohen, S.• Lehmann D. and Pnueli, A. Symmetric
and economical solutions to the mutual exclusion prob-
lem in a distributed system Proc. of lOlA International
Conference on Automata, Languages and Programming.
Barcelona (1983).
[EH1] Emerson. E. A. and Halpern.J. Y.
Decisio~ pro-
cedures and expressiveness in the temporal
lOgIC of
branching time, Conf. Record 14th Annual ACM Sympo-
sium on Theory of Computing, San Francisco, CA (May
1982). pp. 169-179.
[EH2] Emerson. E.A. and Halpern. J.Y, "Sometimes" and
"not never" revisited: on branching versus linear time
(preliminary report). Proof of
10th Annual ACM Sympo-
sium on Principles of Programming Languages, Austin,
Texas (Jan. 1983),pp. 127-139.
[FL] Fischer, M.J. a,nd Ladner. R.E. Propositional dynamic
logic of regular pr-ograms, Journal of Computer and Sys-
tem Sciences. Vol. 18 (1979). pp. 194-211.
[GPSS] Gabbay, D.• Pnueli. A., Shelah. S. and Stavi. J. On
the temporal analysis of fairness, Cont. Record of 7th
Annual ACM Symposium on Principles of Programming
Languages, Las Vegas, Nevada (Jan. 1980), pp. 163-173.
[HS] Hart, S. and Sharir, M.
Probabilistic Propositional
Temporal Logics. manuscript. June 8S.
[La] Lamport, L. "Sometimes" is sometimes "not never",
Conf. Record of 7th. Annual ACM Symposium on Principles
of Programming Languages,
Las Vegas.
Nevada
(Jan.
1980),pp.174-183.
[LR] Lehmann, D. and Rabin, M. O. On the advantages of
free choice: a symmetric and fully distributed solution to
the dining philosophers problem (extended abstract),
Conf. Record of au. Annual ACM Symposium on Principles
of Programming Languages, Williamsburg, Va. (Jan. 19B1),
pp. 133-138.
[LS] Lehmann, D. and Shelah. S. Reasoning with Time and
209
Chance, Information and Control (in press) (Extended
Abstract in Proe. lOU' International Conference on Auto-
mata. Langua.ges and Programming, Barcelona. 1983, pp.
445-457.
[Pn) Pnueli, A. The temporal semantics of concurrent
programs, Theoretical Computer Science Vol. 13 (1981),
pp.45-60.
[Ral] Rabin. M. O. Decidability of second order th.eories
and automata on infinite trees, Trans. AMS Vol.
141
(1969). pp. 1-35.
[Rae]
Rabin,
M.D.
N-process
mutual
exclusion
with
mmrr9! filtttiM by 4.log N'::vall1ed shared variable. Jour~
nal of Computer and System Sciences Vol.25 ·(1982) pp.
B8-'75.
rR~3] Rabin•. M.D. The. cl10ice coordination problem, Acta
Informatica Vol. 17 (1982). pp. 121-134.
[SH] Sherman, R, and Hare! D. A combined proof of one-
exponential decidability and completeness tor PDL. Proof
First
International
Workshop
on
Foundations
of
Theoretic Computer Science G.T.!., Vnlv. of Paderborn.
West Germany (March 1983) pp.221-233.
[SC] Sistla. A. P. and Clarke. E. M. The compleXity ot pro-
positional linear temporal logics, Proe. 141A Annual ACM
Symposium on Theory of Computing. San Francisco. CA
(May 1982), pp. 159-168.

