The semibicategory of Moore automata
Guido Boccali1, Bojana FemiÂ´c2, Andrea Laretto3, Fosco Loregian3, and
Stefano Luneia4
1Universit`a di Torino, Torino, Italy
guidoboccali@gmail.com
2Serbian Academy of Sciences and Arts, Belgrade, Serbia
femicenelsur@gmail.com
3Tallinn University of Technology, Tallinn, Estonia
anlare@ttu.ee,folore@ttu.ee
4Universit`a di Bologna, Bologna, Italy
stefano.luneia@gmail.com
May 2, 2023
Abstract
We study the semibicategory Mre of Moore automata: an arrangement of objects, 1- and 2-cells
which is inherently and irredeemably nonunital in dimension one.
Between the semibicategory of Moore automata and the better behaved bicategory Mly of
Mealy automata a plethora of adjunctions insist: the well-known essential equivalence between
the two kinds of state machines that model the deï¬nitions of Mre and Mly is appreciated at
the categorical level, as the equivalence induced between the ï¬xpoints of an adjunction, in fact
exhibiting Mre(A, B) as a coreï¬‚ective subcategory of Mly(A, B); the comodality induced by this
adjunction is but the 0th step of a â€˜level-likeâ€™ ï¬ltration of the bicategory Mre in a countable family
of essential bi-localizations snMre âŠ†Mre. We outline a way to generate intrinsically meaningful
adjunctions of this form. We mechanize some of our main results using the proof assistant Agda.
1
Introduction
Any arrangement of sets and functions E
d
â†âˆ’A Ã— E, E
sâˆ’â†’B can be interpreted as follows:
â€¢ E as a set of â€˜statesâ€™, and A, B are sets of â€˜inputsâ€™ and â€˜outputsâ€™;
â€¢ the function d : E Ã— A â†’E is a transition function (specifying a dynamics), and the function
s : E â†’B provides an output given an initial state (specifying a ï¬nal state).
Altogether, (d, s) form a Moore automaton or Moore â€˜machineâ€™.
This deï¬nition extends to the case where E, A, B are objects of the same monoidal category (K, âŠ—)
[Ehr+74]; the situation is of particular interest when K is Cartesian or semiCartesian: for example
K = (Top, Ã—) (and then d, s are continuous, and in particular we can think of f as an action over E of
1
arXiv:2305.00272v1  [math.CT]  29 Apr 2023

the free topological monoid Aâˆ—on A, cf. [Reu79]),1 but also K = (Cat, Ã—) (and then f, g are functors,
cf. [Boc+23a; Gui74; Gui78]), K = Par (the category of sets and partial functions; in this case, f, g are
â€˜partially deï¬nedâ€™ functions that can fail on certain inputs), or a category of smooth manifolds [Spi16].
For ï¬xed input and output A, B the structure of the class Mre(A, B) of Moore automata can be
described as the strict pullback
Mre(A, B)
V â€²
/
U â€²

K/B
V

Alg(A âŠ—
)
U
/ K
(1.1)
where U : Alg(A âŠ—
) â†’K is the forgetful functor from the category of endofunctor algebras for
A âŠ—
: K â†’K, or â€“which is equivalent if K has countable colimitsâ€“ actions of Aâˆ—, and V : K/B â†’K
is the usual â€˜domainâ€™ ï¬bration [Jac99, p. 30], [LR20] from the slice over B. Universal constructions are
induced from the underlying category K (in particular, all colimits and connected limits are created
by V â€², a result we survey in [Boc+23b]).
As clean as it may seem, this characterisation leaves something out of the story; thinking of objects
of Mre(A, B) as processes from A to B, it is natural to compose them sequentially, as follows:
(E, f, g)
(Eâ€², fâ€², gâ€²)
(E Ã— Eâ€², f â€² â‹„f, gâ€² â‹„g)
A
B
C
(1.2)
Given (E, f, g) âˆˆMre(A, B) and (Eâ€², f â€², gâ€²) âˆˆMre(B, C), we can consider the Moore automaton
(E Ã— Eâ€², f â€² â‹„f, gâ€² â‹„g) âˆˆMre(A, C), deï¬ned as
(
f â€² â‹„f : E Ã— Eâ€² Ã— A â†’E Ã— Eâ€² : (e, eâ€², a) 7â†’(f(e, a), f â€²(eâ€², ge))
gâ€² â‹„g : E Ã— Eâ€² â†’C : (e, eâ€²) 7â†’gâ€²(eâ€²)
(1.3)
This binary composition law is easily seen to be associative up to isomorphism. Now, do the various
Mre(A, B) in (1.1) arrange as the hom-categories of a bicategory Mre of Moore automata? This would
be the best situation to be in.
However, the composition
â‹„
looks irredeemably nonunital, as there is no hope of ï¬nding a
common section A 7â†’idA for the domain and codomain endofunctors sending (E, f, g) âˆˆMre(A, B) to
A and B respectively. Indeed, to ï¬nd such identity arrows, one should ï¬x a triple (UA, x, y) : UA
x
â†âˆ’
A Ã— UA, UA
yâˆ’â†’A such that, at the very least, the compositions (E Ã— UB,
,
) and (UA Ã— E,
,
)
are isomorphic to (E, f, g) in Mre(A, B). So in particular, the carrier UA must be the terminal object
/ monoidal unit, which is easily seen to not work.
Confronted with this problem, two approaches are possible: one can forget about the composition
law in (1.3), and ï¬nd one that underlies a bicategory structure; or, one can forget about the absence
of identity 1-cells, and study the structure exhibited by Mre â€˜as it isâ€™.
1It is worth to remark that here â€˜topologicalâ€™ can â€“and shouldâ€“ be intended broadly as follows: let E be a Grothendieck
topos; we can consider Moore automata in E, and then E is an object of EM, the category of E-objects with an action
of M = Aâˆ—, the free monoid on A. Cf. also [Rog21] for a thorough study of â€˜toposes of monoid actionsâ€™ when E = Set.
2

Leaning towards the ï¬rst approach is not recommendable, as the composition law outlined above
arises by restricting an existing bicategory structure. If we consider more general spans like
E
A Ã— E
g
/
f
o
B,
(1.4)
arranged in the class Mly(A, B), all the nice properties expounded above remain true, while at the
same time addressing the problem: now that the g is sensitive to the input, the identity 1-cell of an
object A is given by the span 1
!â†âˆ’AÃ—1
Ï€A
âˆ’âˆ’â†’A, given by the two projections. Moreover, this deï¬nition
â€˜makes senseâ€™, because when K = Set (or for that matter, any Cartesian category) the bicategory Mly
so determined is just the category of Mealy automata, which is known to be not just a bicategory, but
the bicategory [KSW97; KSW02; Lav+21] of pseudofunctors and lax natural transformations from N
(the monoid of natural numbers) to (K, âŠ—): a bicategory of â€˜lax dynamical systemsâ€™, borrowing the
analogy from [Tie69]. Our choice of composition of 1-cells is then constrained by the fact that
â‹„
in Mly enjoys a certain universal property, and that in it composing 1-cells restricts to the subcategory
of spans like (1.4) with g mute in the input variable.
We are thus led to follow the second path, and recognise that Mre is a semibicategory: a structure
that is precisely like a bicategory, except that it lacks identity 1-cells.
The purpose of this note is to initiate the study of Mre qua semibicategory, embracing its (lack of)
identity and trying to uncover its properties, both regarded as an object of the category of semibicat-
egories, and related the â€˜trueâ€™ bicategory Mly where it embeds through a canonical functor J (Deï¬ni-
tion 2.9).
In particular, assuming K is Cartesian closed, we focus on the precise sense in which the semibicat-
egory Mre and the bicategory Mly, linked by J, ï¬t into adjoint situations, and we provide a generic way
of generating such adjunctions; leveraging on the pullback (1.1), and given a similar characterisation
of Mly(A, B) as a strict pullback in Cat, in Deï¬nition 2.1.cfïœ±, all adjunctions
K/B
/
âŠ¥
Alg(A Ã—
) âˆ¼= K/BA
o
(1.5)
between slice categories pull back to Mre(A, B) and Mly(A, B).
Now categorical algebra provides
â€˜standardâ€™ natural ways to obtain such adjunctions, when K is rich enough (e.g., it is locally Cartesian
closed): pulling back along a morphism or computing direct/inverse images [Joh02, A1.5.3], using
the 2-functoriality of comma objects in Cat [Kel89], or the structure induced by the whole functor
Mre(A, B) â†’K/B Ã— K/BA obtained from the pullback span (1.1). Each of these constructions yields
a diï¬€erent adjunction, each of which is of some interest when translating 1-cells of Mre(A, B) and
Mly(A, B) into â€˜machinesâ€™ that accept an input of type A and produce an output of type B.
In
particular, we provide J with a right adjoint, just to discover a moment later that J = D0 is the 0th
term of a countable sequence of functors Dn, each of which is a fully faithful left adjoint Dn âŠ£Kn (cf.
(3.6)): this way, we obtain a rather intrinsic description for a classical equivalence theorem between
Moore and Mealy machines [Sha08, pp. 3.1.4, 3.1.5], embedding Mre(A, B) in Mly(A, B) as a coreï¬‚ective
subcategory; in Deï¬nition 3.9, Theorem 3.10 we give a very explicit description of the coreï¬‚ector as
post-composition with a universal Moore cell uX. Adopting a similar point of view in Theorem 3.19
we prove that a similar adjunction colocalises Mly(A, B) onto the subcategory of what we call soft
Moore machines (Deï¬nition 3.14); again, the coreï¬‚ector in Theorem 3.19 is post-composition with a
universal soft automaton pX, that can be characterised (Construction 3.12, Remark 3.16) as a certain
pullback, or as the image of yet another functor (Remark 3.5) obtained by a change of base/direct
image adjoint situation (3.7). This situation generalises: it is possible to deï¬ne a whole hierarchy of
3

subcategories snMre for n â‰¥1, each of which is the category of DnKn-coalgebras, thus arranged in a
ï¬ltered diagram of coreï¬‚ective inclusions
sMre  
/ s2Mre  
/ s3Mre  
/ . . .  
/ Mre
(1.6)
analogous in some regards to the â€˜levelâ€™ ï¬ltration of a topos [KL89; MM19], although the localisations
in study here are not essential.
Unsurprisingly, a well-known and â€˜solidâ€™ procedure like [Sha08, pp. 3.1.4, 3.1.5] is just a universal
construction in disguise. However, the interest in such a ï¬nding is also pedagogical: if hypothetical
readers journeyed automata theory in any direction, armed only with bicategory theory, they would be
able to rediscover natural constructions on state machines by just enacting what they know about more
familiar universal constructions (composition of 1-cells, bicategorical limits [Kel89; Str76; Bir+89],
especially of of Kan type,2 [Str81] the fundamental calculus of a Cartesian closed category, base
change adjunctions. . . ). The importance of such serendipity is hard to overestimate.
2
The semibicategory of Moore machines
Letâ€™s start by recording a precise deï¬nition of the categories of Moore and Mealy machines. Fix a
monoidal category (K, âŠ—) in the background, which we will call the â€˜base categoryâ€™.
Deï¬nition 2.1 (The hom-categories of Mly and Mre). (
) Fix two objects A, B âˆˆK0; A is to be
thought of as the â€˜inputâ€™ object, and B as the â€˜outputâ€™ object.
Denote with Alg(A âŠ—
) the category of endofunctor algebras for the functor X 7â†’A âŠ—X (or acts,
cf. [KKM00]), and (A âŠ—
/B) the comma category of morphisms A âŠ—X â†’B. Then,
cfïœ±) the category Mly(A, B) of Mealy machines with input A and output B is the strict pullback
square
Mly(A, B)
U â€²
/
V â€²

(A âŠ—
/B)
V

Alg(A âŠ—
)
U
/ K
(2.1)
cfïœ²) the category Mre(A, B) of Moore machines with input A and output B is the strict pullback
square
Mre(A, B)
U â€²
/
V â€²

K/B
V

Alg(A âŠ—
) U
/ K
(2.2)
if K/B is the comma category of the identity functor id : K â†’K, and of the constant functor at
B âˆˆK0.3
2Loosely speaking, a â€˜bicategorical limit of a Kan typeâ€™ is a left or right Kan extension, or a left/right Kan lifting,
possibly pointwise or absolute.
3It is worth noting three things: the deï¬nition of Mly(A, B) and Mre(A, B) depends on K; every lax monoidal functor
F : H â†’K induces base changes pseudofunctors Fâˆ—: MlyH(A, B) â†’MlyK(FA, FB) â€“and similarly for Moore; under
suitable assumptions, this can be extended to a 3-functor from (Cartesian monoidal categories, product-preserving
functors, Cartesian natural transformations). This is the content of [Boc+23a, Remark 2.6], but it can be deduced in
one fell sweep from the characterization in [KSW97].
4

Remark 2.2. (
) Unwinding the deï¬nition, an object of Mly(A, B) is a span
d,s
E
: E
d
â†âˆ’AâŠ—E
sâˆ’â†’B,
and a morpism f from
d,s
E
to
dâ€²,sâ€²
F
is an f : E â†’F in the base category such that f â—¦d = dâ€² â—¦(AâŠ—f)
and sâ€² â—¦(A âŠ—f) = s. Similarly, an object of Mre(A, B) is a span
d,s
E
: E
d
â†âˆ’A âŠ—E, E
sâˆ’â†’B, and a
morphism f from
d,s
E
to
dâ€²,sâ€²
F
is an f : E â†’F in the base category such that f â—¦d = dâ€² â—¦(A âŠ—f)
and sâ€² â—¦f = s.
Corollary 2.3. (
) An immediate consequence of this deï¬nition (cf. [Boc+23b] for the details) is
that when K is closed and
âŠ—
separately commutes with small colimits (e.g., when K is closed),
each category Mly(A, B) and Mre(A, B) is complete and cocomplete:
â€¢ the category Mre(A, B) has a terminal object, the internal hom [Aâˆ—, B];
â€¢ the category Mly(A, B) has a terminal object, the internal hom [A+, B].4
From now on, we assume (K, Ã—) is a Cartesian category (more than often, Cartesian closed). Then,
a bicategory Mly = MlyK can be deï¬ned as follows (cf. [RSW98] where this is called â€˜Circâ€™, and a more
general structure is studied, in case the base category has a non-Cartesian monoidal structure â€“but
then a clear analogy with Mealy machines is lost):
Deï¬nition 2.4 (The bicategory Mly, [RSW98]). (
) In the bicategory Mly
â€¢ 0-cells A, B, C, . . . are the same objects of K;
â€¢ 1-cells A _ B are the Mealy machines (E, d, s), i.e. the objects of the category Mly(A, B) in
Equation 2.1, thought as morphisms âŸ¨s, dâŸ©: E Ã— A â†’B Ã— E in K;
â€¢ 2-cells are Mealy machine morphisms as in Equation 2.1;
â€¢ the composition of 1-cells
â‹„
is deï¬ned as follows: given 1-cells âŸ¨s, dâŸ©: E Ã— A â†’B Ã— E and
âŸ¨sâ€², dâ€²âŸ©: F Ã—B â†’C Ã—F their composition is the 1-cell âŸ¨sâ€² â‹„s, dâ€² â‹„dâŸ©: (F Ã—E)Ã—A â†’C Ã—(F Ã—E),
obtained as
F Ã— E Ã— A
F Ã—âŸ¨s,dâŸ©/ F Ã— B Ã— E
âŸ¨sâ€²,dâ€²âŸ©Ã—E / C Ã— F Ã— E;
(2.3)
â€¢ the vertical composition of 2-cells is the composition of Mealy machine morphisms f : E â†’F
as in Equation 2.1;
â€¢ the horizontal composition of 2-cells is the operation deï¬ned thanks to bifunctoriality of
â‹„
:
Mly(B, C) Ã— Mly(A, B) â†’Mly(A, C);
â€¢ the associator and the unitors are inherited from the monoidal structure of K.
Remark 2.5 (The universal property of Mly). Regard K as a bicategory with a single 0-cell, and let
â„¦B be the bicategory of pseudofunctors N â†’B, lax natural transformations, and modiï¬cations; then
(cf. [KSW97; KSW02]) there is an equivalence of bicategories MlyK âˆ¼= â„¦K.
4Assuming countable coproducts in K, the free monoid Aâˆ—on A is the object P
nâ‰¥0 An; the free semigroup A+ on
A is the object P
â‰¥1 An; clearly, if 1 is the monoidal unit of âŠ—, Aâˆ—âˆ¼
= 1 + A+, and the two objects satisfy â€˜recurrence
equationsâ€™ A+ âˆ¼
= A âŠ—A+ and Aâˆ—âˆ¼
= 1 + A âŠ—Aâˆ—.
5

Remark 2.6 (Composition of 1-cells ï¬‚eshed out). (
) The composition of 1-cells in Mly happens as
follows (where we freely employ Î»-notation available in any Cartesian closed category):
d2 â‹„d1 : Î»efa.âŸ¨d2(f, s1(e, a)), d1(e, a)âŸ©
s2 â‹„s1 : Î»efa.s2(f, s1(e, a))
Deï¬nition 2.7 (Terminal extensions of machines). (
)
â€¢ Every Moore machine
d,s
E
can be extended as E
E Ã— Aâˆ—
sâˆ†/
dâˆ†
o
B where dâˆ†is obtained
from the universal property of Aâˆ—, and sâˆ†is deï¬ned inductively using the distributivity of
products over coproducts: s1 = s and for each n â‰¥2,
sn :=
 E Ã— An
dÃ—Anâˆ’1
âˆ’âˆ’âˆ’âˆ’âˆ’â†’E Ã— Anâˆ’1 â†’Â· Â· Â·
dÃ—A
âˆ’âˆ’âˆ’â†’E Ã— A
dâˆ’â†’E
sâˆ’â†’B

.
(2.4)
â€¢ Similarly, every Mealy machine
d,s
E
has an extension E
E Ã— A+
sâˆ†/
dâˆ†
o
B .
Remark 2.8. The above procedure deï¬nes functors (
)eâˆ—: Mre(A, B) â†’Mly(Aâˆ—, B) and (
)e+ :
Mly(A, B) â†’Mly(A+, B). We call these the terminal extensions of the Moore/Mealy machines at
study (due to their link with the terminal morphism in Mre(A, B) and Mly(A, B), cf. [Ehr+74, Ch.
11] and [Boc+23b]).
Deï¬nition 2.9 (Embedding Mre in Mly). (
) There is a 2-functor J : Mre â†’Mly from the category
of Moore machines to the category of Mealy machines, regarding each Moore machine (E, d, s) as a
Mealy machine
E
E Ã— A
d
o
Ï€E / E
s
/ B
(2.5)
Notation 2.10. Graphical notation is very useful in bookkeeping the structure of a Mealy or Moore
machine and invaluable in simplifying computations: so, let us depict the generic Mealy (red) and
Moore (blue) machines with input and output A, B as follows:
E
A
B
E
A
B
(2.6)
Instead, when we need to look closer at the structure of a given automaton, we might use the following
string-diagrammatic notation: the diagrams
d
E
s
B
A
E
(2.7)
denote the same span of (2.2) forming a Mealy 1-cell (E, d, s) (and d is oriented right-to-left!), and if
the machine lies in the image of the functor J above, the picture simpliï¬es to
d
E
s
B
A
E
(2.8)
(In such a situation, we say that s is â€˜Mooreâ€™ or â€˜of Moore typeâ€™.) Adopting this notation the
composition of (E, d1, s1) : A _ B and (F, d2, s2) : B _ C is written
s1
E
A
F
s2
C
s1
d1
d2
F
E
E
F
A
s2 â‹„s1
d2 â‹„d1
(2.9)
6

and in case s2 (resp., s1) is Moore, it suitably simpliï¬es.
From this we deduce at once the following lemma.
Lemma 2.11 (Moore overrides Mealy, on both sides). (
) The composition of a Mealy 1-cell
d,s
E
with a Moore 1-cell
dâ€²,sâ€²
F
is a Moore 1-cell
#,#
F Ã—E . Conversely, the composition of a Moore 1-cell
d,s
E
with a Mealy 1-cell
dâ€²,sâ€²
F
is a Moore 1-cell
#,#
F Ã—E .
In algebraic terms, the statement reads as follows: the composition bifunctors given in (2.3) restrict
to bifunctors
J
â‹„
: Mre(B, C) Ã— Mly(A, B)
/ Mre(A, C)
â‹„J
: Mly(B, C) Ã— Mre(A, B)
/ Mre(A, C).
(2.10)
Proof. Immediate using graphical reasoning and the deï¬nition of composition in (2.9).
Remark 2.12. (
) Due to the tautological nature of J â€˜virtually allâ€™ ways to compose together a
Moore and a Mealy machine agree:
J(m â‹„n) = m â‹„Jn
J(m â‹„n) = Jm â‹„n
m â‹„Jn = Jm â‹„n
J(m â‹„n) = Jm â‹„Jn
m âˆˆMly, n âˆˆMre
m âˆˆMre, n âˆˆMly
m, n âˆˆMre
m, n âˆˆMre
(2.11)
(after the reduction of the involved Î»-terms, we obtain a strict equality.)
Corollary 2.13 (Mooriï¬cation functors). For any two objects A, B âˆˆMly there exist functors
â‹ŠAB
: Mly(A, B) Ã— Mre(A, A)
/ Mre(A, B)
â‹‰AB
: Mre(B, B) Ã— Mly(A, B)
/ Mre(A, B)
(2.12)
Clearly then, given endo-1-cells m : A â†’A and n : B â†’B in Mre, we can deï¬ne pre- and post-
composition operations as Rm =
â‹ŠAB m and Ln = n â‹‰AB
, which we will use in Theorem 3.19,
Theorem 3.10 to characterize functors converting Mealy into Moore machines.
2.1
The semibicategory structure of Mre
Corollary 2.14 (Sometimes you have no identity, and thatâ€™s ok). The composition of a Moore 1-cell
[E, d, s] with a Moore 1-cell [F, dâ€², sâ€²] is a Moore 1-cell [F Ã—E, dâ€² â‹„d, sâ€² â‹„s]. Hence, if we take as objects
the same of K, as 1-cells the Mealy machines of Moore type
d,s
E : A _ B, and considering 2-cells in the
sense of Remark 2.2, we obtain a sub-semibicategory of Mly, the semibicategory of Moore machines.
It is important to note that the composition law of Moore machines is inherently nonunital: given the
composition law deï¬ned in Deï¬nition 2.4 there can be no other identity 1-cell than
Ï€1,Ï€A
1
: A _ A,
and this is not of Moore type.
It is worth recording the precise deï¬nition of what we denote as a semibicategory; loosely speaking,
we are considering a weakening of [MBCB02, Deï¬nition 1.1] in which we relax the requirement that
we have strictly associative composition; a semibicategory is then the semicategorical5 equivalent of
5Semicategories were introduced by Mitchell as â€˜categories without identitiesâ€™ and studied to some extent in [Mit72];
semigroupal categories are often studied in relation with their cognates the magmoidal ones (where a mere binary functor
âŠ™
: MÃ—M â†’M is given, cf. [Dav17]); a semibicategory with a single object, is precisely a (nonstrict) semigroupal
category, cf. [LYH18] for a proof that semigroupal categories support graphical calculi.
7

a bicategory [BÂ´en67], [Gra74, p. I.3], or again equivalently the multi-object version of semigroupal
categories (as deï¬ned, e.g., in [Boy07, p. 3.3], [LYH18], although in a strict sense; for the weak version
cf. [Elg04, p. 4.1], or adapt [MBCB02] as we do). Cf. also [Koc08; Koc10].
Deï¬nition 2.15. (
) A semibicategory consists of
scïœ±) a collection of objects or 0-cells S0;
scïœ²) for all objects X, Y âˆˆS0 a category S(X, Y );
scïœ³) for all objects X, Y, Z âˆˆS0 a composition bifunctor
â—¦
: S(Y, Z) Ã— S(X, Y ) â†’S(X, Z);
scïœ´) for all f : Z â†’W, g : Y â†’Z, h : X â†’Y , an associator isomorphism Î±fgh : f â—¦(gâ—¦h) âˆ¼= (f â—¦g)â—¦h
(cf. (A.1)).
The associator morphism must satisfy the usual pentagon equation for all f, g, h, k: the diagram of
(A.2) is commutative.
Now, a technical result of a general kind allows replacing the semibicategory of Moore machines
with a bicategory of â€˜Moore machinesâ€™, which is identical to Mre in all respects, apart from the fact
that a class of symbols idA, one for each object A âˆˆK0, has been forcefully added in order to play the
rË†ole of identity 1-cell.
Theorem 2.16. The obvious forgetful 2-functor MonCat â†’SgCat admits a left adjoint ( )u : SgCat â†’
MonCat.
Proof. The proof is deferred to the appendix, p. 18. Cf. also Construction A.1.
3
A plethora of adjoints between machines
The key observation guiding our intuition throughout the section is the following.
Lemma 3.1 (Pulling back ï¬bered adjunctions). (
) Given a commutative cube
Mâ€²
{
/

Bâ€²
~

M
;
/

B

>
A
/ K
A
/ K
(3.1)
assume the front and back vertical faces are strict pullbacks in Cat; then any adjunction F : B â‡†Bâ€² : G
pulls back to an adjunction F â€² : M â‡†Mâ€² : Gâ€².6
Proof. Immediate, using the 2-dimensional universal property of the pullbacks involved.
6A similar result holds, when the bottom horizontal square is replaced by a commutative square of adjunctions in
the sense of [ML78, p. IV.7]; we will invoke the more general version as well: refer for this to the right part of (A.3).
8

Corollary 3.2. Any adjunction F : K/B
/
âŠ¥
A Ã—
/B : G
o
ï¬bered over K induces an adjunction
F : Mre(A, B)
/
âŠ¥
Mly(A, B) : G
o
(3.2)
ï¬bered over Alg(A Ã—
). (When there is no danger of confusion, we will keep denoting as F âŠ£G the
pulled back adjunction. Refer to the left part of (A.3) for the diagram we have in mind.)
A blanket assumption for all that follows is that K is (locally) Cartesian closed. Then there is an
evident equivalence of categories (A Ã—
)/B âˆ¼= K/BA; we deduce that:
Lemma 3.3. There are adjoint triples
Î£f âŠ£f âˆ—âŠ£Î f : K/BA
f âˆ—
/ K/B
o
o
(3.3)
ï¬bered over K, induced by a morphism f â€² : B â†’BA (or rather by its mate f : A Ã— B â†’B) pulls back
to an adjoint triple ï¬bered over Alg(A Ã—
), between Mre(A, B) and Mly(A, B).
Example 3.4. Let K be locally Cartesian closed; let Ï€B : AÃ—B â†’B be the projection on the second
factor and Ï–B : B â†’BA its mate; it is well-known that there is a triple of adjoints Ï–B â—¦
âŠ£Ï–âˆ—
B âŠ£
Î Ï–B, acting respectively as composition, pullback, and direct image for Ï–B [Joh02, A4.1.2]. As a
consequence, we obtain a triple of functors
Ï–B â—¦
âŠ£Ï–âˆ—
B âŠ£Î Ï–B : Mly(A, B)
/ Mre(A, B)
o
o
(3.4)
This is not the only way to obtain adjoint situations between machines from adjoint situations
between comma categories: we can exploit the fact that Lemma 3.1 holds in slightly more generality,
also for adjunctions that are not ï¬bered over K; thus,
â€¢ any natural transformation Î± between A Ã—
and the identity functor of K induces, by the
2-dimensional part of the universal property of comma objects, a functor Î±âˆ—between K/B and
(A Ã—
)/B âˆ¼= K/BA. But the functor A Ã—
is a comonad on any Cartesian category, whence
itâ€™s naturally copointed by the counit Ïµ : A Ã—
â‡’idK; from this, we get a functor
Ïµâˆ—: K/B
/ (A Ã—
)/B âˆ¼= K/BA
(3.5)
pulling back to a functor Â¯Ïµâˆ—: Mre(A, B) â†’Mly(A, B).
â€¢ All morphisms inductively deï¬ned by the rule d(0) := Ï€E, d(1) = d : A Ã— E â†’E, d(n) :=
d â—¦(A Ã— d(nâˆ’1)) as in Deï¬nition 2.7 induce functors
Dâˆ—
n : K/B
/ (A Ã—
)/B âˆ¼= K/BA : s 
/ s â—¦d(n)
(3.6)
pulling back thanks to Lemma 3.1 to a functor Â¯Dn : Mre(A, B) â†’Mly(A, B).
Adjoint situations like (3.4) however provide a nifty characterization for the precomposition functors
Mly(u, B) : Mly(Aâ€², B) â†’Mly(A, B) induced by u : A â†’Aâ€² in the base category. From u, using the
Cartesian closed structure of K, we get Bu : BAâ€² â†’BA, from which, applying Lemma 3.1 to the triple
of adjoints
Bu â—¦
âŠ£(Bu)âˆ—âŠ£Î u : K/BA
(Bu)âˆ—
/ K/BAâ€²
o
o
(3.7)
9

(same notation of Lemma 3.3) we get a triple of adjoints Mly(A, B)
/ Mly(Aâ€², B)
o
o
and an identi-
ï¬cation of the leftmost adjoint Bu â—¦
with Mly(u, B) : Mly(Aâ€², B) â†’Mly(A, B).
As a direct consequence,
Remark 3.5. Let K be locally Cartesian closed; then each functor Mly(u, B) : Mly(Aâ€², B) â†’Mly(A, B)
sits in a triple of adjoints Mly(u, B) âŠ£(Bu)âˆ—âŠ£Î u.
Remark 3.6 (Adjunctions between hom-categories). In case K is locally presentable (e.g., K = Set,
any Grothendieck topos, a docile category of spaces, etc.) AFTs in their classical form [Bor94b, Ch.
5], [Bor94a, pp. 3.3.3â€“3.3.8] applied to Ïµâˆ—, Dâˆ—
n yield right adjoints R and Kn and thus, by virtue of
Lemma 3.1 above, we get
â€¢ An adjunction Â¯Ïµâˆ—: Mre(A, B) â‡„Mly(A, B) : Â¯R;
â€¢ for evey n â‰¥1 an adjunction Â¯Dn : Mre(A, B) â‡„Mly(A, B) : Kn, with Dn fully faithful â€“and thus
Â¯Kn is a coreï¬‚ector.
Among these, especially the second bears some importance to automata theory. We will analyse
its structure, providing a clean explicit construction for K0, K1 in the rest of the present section; in
particular, we will completely characterise the coreï¬‚ective subcategory of Â¯Dn Â¯Kn-coalgebras. A crucial
point of our discussion will be that Â¯Kn arises as composition u â‹‰
for a universal 1-cell u of Moore
type, following the notation of Corollary 2.13.
Remark 3.7 (Biadjunctions between Mly and Mre). The adjunctions in Remark 3.6 constitute the
action on hom-categories of biadjunctions (cf. [BK81] for an earlier reference, and the notion of a
left adjoint of a left lax transformation in [Str72, p. 8]. This is a weakening of [Fio06, Ch. 9] that
drops the request to have adjoint equivalences of hom-categories, replacing them with a family of
adjunctions indexed over the objects of the two bicategories) E âŠ£R, {Dn âŠ£Kn | n â‰¥0} between the
semibicategory Mre (or equivalently its bicategorical reï¬‚ection Mreu in the sense of Theorem 2.16) and
the bicategory Mly of Mealy machines of Deï¬nition 2.4. Each of these (2-semi) functors is the identity
on 0-cells.
Deï¬nition 3.8. In the notation of Equation 3.6, the functors D0 and D1 are deï¬ned respectively as
follows: a generic Moore machine
d,s
E goes to
d,sÏ€E
E
and
d,sd
E
, and more in general, Dn is the upper
horizontal functor in
K/B
U

Dn / K/BA
U â€²

K
AnÃ—
/ K
(3.8)
adapted from Lemma 3.1 (In the lower rows, the functors X 7â†’An Ã— X are clearly left adjoints).
Deï¬nition 3.9 (The universal Moore machine). (
) Let X âˆˆK0 be an object. There exists a Moore
machine uX =
Ï€X,idX
X
in Mre(X, X) where Ï€X : X Ã— X â†’X is the projection on the ï¬rst coordinate.
The machine uX canâ€™t be the identity 1-cell in Mre(X, X) by Corollary 2.14 above, but it is â€˜as
near to the identity as a Moore 1-cell can beâ€™ to the identity in Mly(X, X), in a sense made precise
by the following result: post-composition with uX realizes the Moore machine associated to a Mealy
machine.
10

Theorem 3.10 (Mooriï¬cation is composition with a universal cell). (
) The functor K1 of Re-
mark 3.6 is naturally isomorphic to the functor LuB = uB â‹‰
: Mly(A, B) â†’Mre(A, B) of Corol-
lary 2.13.
Remark 3.11. In laymanâ€™s terms, uB =
Ï€B,idB
B
is the universal machine of Moore type, in the sense
that sequential composition with it turns every Mealy machine into an â€˜equivalentâ€™ Moore machine.
This is a clean-cut categorical counterpart for the extremely well-known fact that the two concepts
of Moore and Mealy machines are â€˜essentially equivalentâ€™ in a sense made precise by [Sha08, pp. 3.1.4,
3.1.5].
Construction 3.12. (
) Let X âˆˆK0 be an object. We deï¬ne a Moore machine pX =
Î´X,ÏƒX
PâˆX
in
Mre(X, X) as follows:
â€¢ its carrier results from the pullback in the base category K
PâˆX
/

1
head

[Xâˆ—, X]
/ [X+, X]
(3.9)
where the lower horizontal map results from the obvious inclusion A+ ,â†’Aâˆ—= 1 + A+ and head
picks the element Î»(a :: as).a.7
â€¢ the map Î´X : PâˆXÃ—X â†’PâˆX is deï¬ned by restriction to the dynamics of [Xâˆ—, X] as (f, a) 7â†’f;
â€¢ the map ÏƒX : PâˆX â†’X is deï¬ned as f 7â†’f[ ].
Remark 3.13. Informally speaking, the carrier of pX is the subobject H of [Xâˆ—, X]8 made of those
functions f : Xâˆ—â†’X that on nonempty lists coincide with the head function: f[ ] is free to assume
any value whatsoever, while f(a :: as) = a for every nonempty list a :: as.
Given this, Ïƒ : f 7â†’f[ ] is clearly a bijection. So, it might seem unnecessarily verbose to distinguish
uX and pX; yet, Ïƒ is not a Moore machine homomorphism, as the diagrams of (2.2) do not commute
when ï¬lled with Ïƒ.
A property that is stable under isomorphism, enjoyed by PâˆA but not Aâˆis the following: the
diagram
X Ã— PâˆX
Î´X
/
Ï€PâˆX

PâˆX
s

PâˆX
s
/ X
(3.10)
commutes for PâˆX but not for X; the same property enforced for uX would entail that âˆ€(x, xâ€²) âˆˆ
X.x = xâ€², a blatantly false statement.
7In every Cartesian closed category one obtains head : X+ â†’X from the family Ï€1 : Xn â†’X of projections on the
ï¬rst coordinate, thanks to the universal property of X+ = P
nâ‰¥1 Xn.
8Indeed, the left vertical map is monic; for the sake of clarity we write as if K = Set, leaving the straightforward
element-free rephrasing to the conscientious readers.
11

Deï¬nition 3.14 (Soft machine, [Bur61]). (
) A Moore machine
d,s
E
is called soft if the following
square commutes:
A Ã— E
d
/
Ï€E

E
s

E
s
/ B
(3.11)
and in simple terms, it can be thought of as a Moore machine whose output map â€˜skips a beat and then
starts computingâ€™, as its terminal extension sâˆ†(cf. Deï¬nition 2.7) is such that sâˆ†(a::as, e) = sâˆ†(as, e).
Clearly, soft Moore machines A _ B form a full subcategory sMre(A, B) of Mre(A, B); we denote
i : sMre â†’Mre the most obvious locally fully faithful inclusion 2-functor. More is true:
Lemma 3.15 (Soft machines cut other heads). (
) Let m : A _ B and n : B â†’C be a Mealy
machine and a Moore machine; if n is soft, then the composition Jn â‹„m is also soft.9 Translated in
graphical terms, the statement reads as follows, if we depict a soft Moore machine as
n
:
(3.12)
Proof. Immediate by inspection, using graphical reasoning (diagram (3.11) is easy to translate graph-
ically) and the deï¬nition of composition in Equation 2.9.
Remark 3.16. (
) The Moore machine
Î´X,ÏƒX
PâˆX
in Construction 3.12 is soft.
Corollary 3.17. (
) Let
d,s
E
: A _ B be a generic Mealy machine; then, by virtue of Lemma 2.11,
the composition
Î´B,ÏƒB
PâˆB
â‹‰AB
d,s
E
is a Moore machine, and by virtue of Lemma 3.15 it is soft. Hence,
the functor LpB : Mly(A, B) â†’Mre(A, B) factors through the obvious full inclusion iA : sMre â†’Mre.
Remark 3.18. Given that D1 is fully faithful, the unit of the adjunction D1 âŠ£K1 is a natural
isomorphism; denote S1 := D1K1 the comodality (= idempotent comonad) obtained as a consequence.
Then the category of S1-coalgebras is isomorphic to the category of soft Moore machines.
An object of the form
Î´A,ÏƒA
PâˆA is thus a universal soft Moore machine, in the sense speciï¬ed by the
following coreï¬‚ection theorem:
Theorem 3.19 (Decapitation as a right adjoint). (
) The coreï¬‚ector of the comodality of Re-
mark 3.18 is naturally isomorphic to the postcomposition functor LpB = pB â‹‰
.
Similarly, denote Sn = DnKn the comodality of the adjunction obtained from Equation 3.6. Then,
the category of S1-coalgebras is isomorphic to the full category snMre of n-soft Moore machines, if we
understand Deï¬nition 3.14 generalised as follows: the square
An Ã— E
d(n) /
Ï€E

E
s

E
s
/ B
(3.13)
9Warning: it is not true in general that the composition m â‹„Jn is soft.
12

commutes (cf. (3.6) for the deï¬nition of d(n)).
Evidently, sMre = s1Mre âŠ†s2Mre and more in general, there is a chain of full inclusions
sMre  
/ s2Mre  
/ s3Mre  
/ . . .  
/ Mre
(3.14)
analogous to the â€˜levelâ€™ ï¬ltration of a topos (cf. [KL89; Ken+11; MM19; Roy21; Str00], especially in
the case of simplicial sets or geometric shape for higher structures indexed over the natural numbers).
As a ï¬nal remark, letâ€™s record that the results of Remark 3.5 provide an extremely intrinsic char-
acterization for the object PâˆX of Construction 3.12, and a comparison theorem for the operations
(
)eâˆ—, (
)e+ of terminal extension of a Mealy machine and of a Moore machine expounded in Re-
mark 2.8.
Lemma 3.20. (
) The left square in (A.4) commutes (in the notation of (3.7), Mly(t, B) is the
obvious restriction functor induced by the â€˜toListâ€™ map t : A+ ,â†’Aâˆ—).
Proof. Immediate inspection.
Corollary 3.21 (Corollary of Remark 3.5). The functor Mly(t, B) sits in a triple of adjoints Mly(t, B) âŠ£
(Bt)âˆ—âŠ£Î t, where (Bt)âˆ—is given pulling back a morphism

X
â†“
BA+

along Bt : BAâˆ—â†’BA+.
It follows from an easy inspection that Bt : [Aâˆ—, B] âˆ¼= B Ã— [A+, B] â†’[A+, B] coincides with the
projection map, and thus we can consider the right square in (A.4), obtained mating the left square,
and prove at once that
Proposition 3.22. The left square of (A.4) is exact, in the sense of [Gui80; Gui81; Pav91] or [Jac99,
1.8.9.(b)]. This is to say, Î¸ in the right diagram ibid. is invertible.
Now let head : 1 â†’[A+, A] be the morphism in (3.9): from Remark 3.5 we get a functor headâˆ—of
pullback along head (with both a left and a right adjoint), and an isomorphism between the Moore
machine pX and (At)âˆ—(head).
4
Future plans
Among many, we are left with three questions:
â€¢ What is the ï¬ltered colimit of the chain snMre â†’sn+1Mre, and are these inclusions coreï¬‚ective
as well?
â€¢ Can we ï¬nd a representation for all Kn in terms of postcomposition with universal 1-cells? In
other words, can we ï¬nd the universal n-soft machine, perhaps adapting Construction 3.12?
â€¢ Theorem 3.10 and Theorem 3.19 characterize K0, K1 as postcomposition; but then D0, D1 are
left liftings in Mly: can we deduce something meaningful from this intrinsic characterization?10
10Observe that the existence of right liftings [Lor21, p. 2.1.3] can be ruled out by the fact that postcompositions do
not preserve colimits in general.
13

References
[BÂ´en67]
J. BÂ´enabou. â€œIntroduction to bicategoriesâ€. In: Reports of the Midwest Category Seminar.
Berlin, Heidelberg: Springer Berlin Heidelberg, 1967, pp. 1â€“77. isbn: 978-3-540-35545-8.
[Bir+89]
G.J. Bird et al. â€œFlexible limits for 2-categoriesâ€. In: Journal of Pure and Applied Algebra
61.1 (1989), pp. 1â€“27.
[BK81]
R. Betti and S. Kasangian. â€œA quasi-universal realization of automataâ€. In: Universit`a
degli Studi di Trieste. Dipartimento di Scienze Matematiche (1981).
[Boc+23a]
G. Boccali et al. â€œBicategories of automata, automata in bicategoriesâ€. 2023. arXiv: 2303.
03865 [math.CT].
[Boc+23b]
G. Boccali et al. â€œCompleteness for categories of generalized automataâ€. 2023. arXiv:
2303.03867 [math.CT].
[Bor94a]
F. Borceux. Handbook of categorical algebra. 1. Vol. 50. Encyclopedia of Mathematics and
its Applications. Basic category theory. Cambridge University Press, Cambridge, 1994,
pp. xvi+345.
[Bor94b]
F. Borceux. Handbook of categorical algebra. 2. Vol. 51. Encyclopedia of Mathematics
and its Applications. Categories and structures. Cambridge University Press, Cambridge,
1994, pp. xviii+443.
[Boy07]
M. Boyarchenko. Associativity constraints in monoidal categories. 2007. url: http://
www.math.uchicago.edu/~may/TQFT/Boyarchenko%20on%20associativity.pdf.
[Bur61]
W. S. Burroughs. The Soft Machine. The Nova Trilogy. 182 pp. Olympia Press, 1961.
[Dav17]
A. Davydov. â€œNuclei of categories with tensor productsâ€. In: Theory Appl. Categ. 18.16
(2017), pp. 440â€“472. issn: 1201-561X.
[Ehr+74]
H. Ehrig et al. Universal theory of automata. A categorical approach. English. Teubner
StudienbÂ¨ucher. Informatik. Stuttgart: B. G. Teubner., 1974. doi: 10.1007/978-3-322-
96644-5.
[Elg04]
J. Elgueta. â€œCohomology and deformation theory of monoidal 2-categories Iâ€. In: Advances
in Mathematics 182.2 (Mar. 2004), pp. 204â€“277. doi: 10.1016/s0001-8708(03)00078-1.
url: https://doi.org/10.1016/s0001-8708(03)00078-1.
[Fio06]
T.M. Fiore. Pseudo Limits, Biadjoints, And Pseudo Algebras: Categorical Foundations of
Conformal Field Theory. Memoirs AMS 860. American Mathematical Society, 2006. isbn:
0821839144; 9780821839140.
[Gra74]
J.W. Gray. Formal Category Theory: Adjointness for 2-Categories. Springer Berlin Hei-
delberg, 1974. doi: 10.1007/bfb0061280. url: https://doi.org/10.1007/bfb0061280.
[Gui74]
R. Guitart. â€œRemarques sur les machines et les structuresâ€. In: Cahiers de Topologie et
GÂ´eomÂ´etrie Diï¬€Â´erentielle CatÂ´egoriques 15 (1974), pp. 113â€“144.
[Gui78]
R. Guitart. â€œDes machines aux bimodulesâ€. Univ. Paris 7. 1978. url: http://rene.
guitart.pagesperso-orange.fr/textespublications/rg30.pdf.
[Gui80]
R. Guitart. â€œRelations et carrÂ´es exactsâ€. In: Ann. Sci. Math. QuÂ´ebec 4.2 (1980), pp. 103â€“
125.
14

[Gui81]
R. Guitart. â€œCarrÂ´es exacts et carrÂ´es dÂ´eductifsâ€. fre. In: Diagrammes 6 (1981), G1â€“G17.
url: http://eudml.org/doc/192983.
[Jac99]
B. Jacobs. Categorical Logic and Type Theory. SLFM 141. Elsevier, 1999. isbn: 9780444508539.
[Joh02]
P.T. Johnstone. Sketches of an Elephant: A Topos Theory Compendium. Vol. I. Oxford:
Oxford University Press, 2002. 1288 pp.
[Kel89]
G.M. Kelly. â€œElementary observations on 2-categorical limitsâ€. In: Bulletin of the Aus-
tralian Mathematical Society 39.2 (1989), 301â€“317. doi: 10.1017/S0004972700002781.
[Ken+11]
C. Kennett et al. â€œLevels in the toposes of simplicial sets and cubical setsâ€. In: Journal of
Pure and Applied Algebra 215.5 (May 2011), pp. 949â€“961. doi: 10.1016/j.jpaa.2010.
07.002. url: https://doi.org/10.1016/j.jpaa.2010.07.002.
[KKM00]
M. Kilp, U. Knauer, and A.V. Mikhalev. Monoids, Acts and Categories: With Applications
to Wreath Products and Graphs. A Handbook for Students and Researchers. de Gruyter,
2000.
[KL89]
G.M. Kelly and F.W. Lawvere. On the complete lattice of essential localizations. University
of Sydney. Department of Pure Mathematics, 1989.
[Koc08]
J. Kock. â€œElementary remarks on units in monoidal categoriesâ€. In: Mathematical Pro-
ceedings of the Cambridge Philosophical Society 144.1 (Jan. 2008), pp. 53â€“76. doi: 10.
1017/s0305004107000679. url: https://doi.org/10.1017/s0305004107000679.
[Koc10]
J. Kock. â€œWeak identity arrows in higher categoriesâ€. In: International Mathematics Re-
search Papers (July 2010). doi: 10.1155/imrp/2006/69163. url: https://doi.org/
10.1155/imrp/2006/69163.
[KSW02]
P. Katis, N. Sabadini, and R.F.C. Walters. â€œFeedback, trace and ï¬xed-point semanticsâ€.
en. In: RAIRO - Theoretical Informatics and Applications - Informatique ThÂ´eorique et
Applications 36.2 (2002), pp. 181â€“194. doi: 10.1051/ita:2002009. url: http://www.
numdam.org/articles/10.1051/ita:2002009/.
[KSW97]
P. Katis, N. Sabadini, and R.F.C. Walters. â€œBicategories of processesâ€. In: Journal of
Pure and Applied Algebra 115.2 (Feb. 1997), pp. 141â€“178. doi: 10.1016/s0022-4049(96)
00012-6. url: https://doi.org/10.1016/s0022-4049(96)00012-6.
[Lav+21]
E. Di Lavore et al. â€œA Canonical Algebra of Open Transition Systemsâ€. In: Formal As-
pects of Component Software - 17th International Conference, FACS 2021, Virtual Event,
October 28-29, 2021, Proceedings. Ed. by Gwen SalaÂ¨un and Anton Wijs. Vol. 13077. Lec-
ture Notes in Computer Science. Springer, 2021, pp. 63â€“81. doi: 10.1007/978-3-030-
90636-8\_4. url: https://doi.org/10.1007/978-3-030-90636-8\_4.
[Lor21]
F. Loregian. Coend Calculus. ï¬rst. Vol. 468. London Mathematical Society Lecture Note
Series. ISBN 9781108746120. Cambridge University Press, 2021.
[LR20]
F. Loregian and E. Riehl. â€œCategorical notions of ï¬brationâ€. In: Expositiones Mathe-
maticae 38.4 (Dec. 2020), pp. 496â€“514. doi: 10.1016/j.exmath.2019.02.004. url:
https://doi.org/10.1016/j.exmath.2019.02.004.
[LYH18]
Xuexing L., Yu Y., and Sen H. â€œA Graphical Calculus for Semi-Groupal Categoriesâ€. In:
Appl. Categor. Struct. 27.2 (2018), pp. 163â€“197. doi: 10.1007/s10485-018-9549-8.
15

[MBCB02]
M.-A. Moens, U. Berni-Canani, and F. Borceux. â€œOn regular presheaves and regular semi-
categoriesâ€. en. In: Cahiers de Topologie et GÂ´eomÂ´etrie Diï¬€Â´erentielle CatÂ´egoriques 43.3
(2002), pp. 163â€“190. url: http://www.numdam.org/item/CTGDC_2002__43_3_163_0/.
[Mit72]
B. Mitchell. â€œThe dominion of Isbellâ€. In: Transactions of the American Mathematical
Society 167.0 (1972), pp. 319â€“331. doi: 10.1090/s0002-9947-1972-0294441-0. url:
https://doi.org/10.1090/s0002-9947-1972-0294441-0.
[ML78]
S. Mac Lane. Categories for the Working Mathematician. Second. Vol. 5. Graduate Texts
in Mathematics. New York, NY: Springer-Verlag, New York, 1978, pp. xii+314. isbn:
0-387-98403-8. doi: 10.1007/978-1-4757-4721-8. (Visited on 05/05/2018).
[MM19]
M. Menni and F. Marmolejo. â€œLevel Ïµâ€. In: Cahiers de Topologie et GÂ´eomÂ´etrie Dï¬€Â´erentielle
CatÂ´egoriques LX.4 (2019), pp. 450â€“477.
[Pav91]
D. PavloviÂ´c. â€œCategorical interpolation: Descent and the Beck-Chevalley condition with-
out direct imagesâ€. In: Lecture Notes in Mathematics. Springer Berlin Heidelberg, 1991,
pp. 306â€“325. doi: 10.1007/bfb0084229. url: https://doi.org/10.1007/bfb0084229.
[Reu79]
C. Reutenauer. â€œUne topologie du monoÂ¨Ä±de libreâ€. In: Semigroup Forum. Vol. 18. Springer.
1979, pp. 33â€“49.
[Rog21]
M. Rogers. Toposes of Monoid Actions. 2021. arXiv: 2112.10198 [math.CT].
[Roy21]
M. Roy. â€œThe topos of ball complexesâ€. In: Reprints in Theoy and Applications of Cate-
gories 28 (2021), pp. 1â€“63.
[RSW98]
R. Rosebrugh, N. Sabadini, and R.F.C. Walters. â€œMinimal realization in bicategories of
automataâ€. In: Mathematical Structures in Computer Science 8.2 (1998), 93â€“116. doi:
10.1017/S0960129597002454.
[Sha08]
J. Shallit. A second course in formal languages and automata theory. en. Cambridge,
England: Cambridge University Press, Sept. 2008.
[Spi16]
D.I. Spivak. The steady states of coupled dynamical systems compose according to matrix
arithmetic. 2016. arXiv: 1512.00802 [math.DS].
[Str00]
R. Street. â€œThe petit topos of globular setsâ€. In: Journal of Pure and Applied Algebra
154.1-3 (Dec. 2000), pp. 299â€“315. doi: 10.1016/s0022-4049(99)00183-8. url: https:
//doi.org/10.1016/s0022-4049(99)00183-8.
[Str72]
R. Street. â€œTwo constructions on Lax functorsâ€. en. In: Cahiers de topologie et gÂ´eomÂ´etrie
diï¬€Â´erentielle 13.3 (1972), pp. 217â€“264. url: http://www.numdam.org/item/CTGDC_
1972__13_3_217_0/.
[Str76]
R. Street. â€œLimits indexed by category-valued 2-functorsâ€. In: Journal of Pure and Applied
Algebra 8.2 (1976), pp. 149â€“181. issn: 0022-4049. doi: http://dx.doi.org/10.1016/
0022-4049(76)90013-X. url: http://www.sciencedirect.com/science/article/
pii/002240497690013X.
[Str81]
R. Street. â€œConspectus of variable categoriesâ€. In: Journal of Pure and Applied Algebra
21.3 (1981), pp. 307â€“338.
[Tie69]
M. Tierney. Categorical Constructions in Stable Homotopy Theory. Springer Berlin Hei-
delberg, 1969. doi: 10.1007/bfb0101425. url: https://doi.org/10.1007/bfb0101425.
16

A
Diagrams and Proofs
A.1
Diagrams
S0 Ã— S0 Ã— S0
âŠ—Ã—S0

S0Ã—âŠ—/
 Î±
S0 Ã— S0
âŠ—

S0 Ã— S0
âŠ—
/ S0
(A.1)
f â—¦(g â—¦(h â—¦k)))
/
|
(f â—¦g) â—¦(h â—¦k)
!
f â—¦((g â—¦h) â—¦k)
(
((f â—¦g) â—¦h) â—¦k
(f â—¦(g â—¦h)) â—¦k
6
(A.2)
Mly(A, B)
u
/

A Ã—
/B
x

M
5
/

K/B

8
Alg(A Ã—
)
/ K
Alg(A Ã—
)
/ K
Mly(A, B)
u
/

A Ã—
/B
x

M
5
/

K/B

8
Alg(A Ã—
)
u
5
/ K
x
8
Alg(A Ã—
)
/ K
(A.3)
Mre(A, B)
(
)eâˆ—/
D1

Mly(Aâˆ—, B)
Mly(t,B)

Mly(A, B)
(
)e+/ Mly(A+, B)
Mre(A, B)
(
)eâˆ—/
O
K1
Mly(Aâˆ—, B)
O
(Bt)âˆ—
T\
Î¸
Mly(A, B)
(
)e+/ Mly(A+, B)
(A.4)
A.2
Proofs
This is essentially the argument that appears in passing in [LYH18], extended from strict semigroupal/-
monoidal categories to non-strict ones.
Construction A.1. Let S be a semigroupal category with underlying category S0 and equipped with
a bifunctor
âŠ—
: S0 Ã— S0 â†’S0 satisfying the associativity axiom. We deï¬ne Su as follows:
â€¢ the underlying category (Su)0 is the coproduct S0 + 1, where 1 is the terminal category with
unique object âŠ¥;
â€¢ the â€˜extendedâ€™ multiplication functor
âŠ—u
: (S0 + 1) Ã— (S0 + 1) âˆ¼= (S0 Ã— S0) + (S0 Ã— 1) + (1 Ã— S0) + (1 Ã— 1)
/ S0 + 1
(A.5)
17

is deï¬ned piecewise as S âŠ—u Sâ€² = S âŠ—Sâ€² if S, Sâ€² âˆˆS0 and âŠ¥âŠ—uSâ€² = Sâ€², âŠ¥âŠ—u âŠ¥=âŠ¥. (Notice in
particular that in case S had a monoidal unit, âŠ¥â€˜replacedâ€™ it: we have added âŠ¥as a free unit.)
On morphisms we follow a similar strategy; there is only an identity in 1, and no morphism
âŠ¥â‡†S, so we just have to deï¬ne f âŠ—u g := f âŠ—g and idâŠ¥âŠ—u idâŠ¥= idâŠ¥, f âŠ—u idâŠ¥= f, idâŠ¥âŠ—u g
are forced to be f and g respectively, if we want that âŠ—u sends identities to identities, and that
is is bifunctorial. Thus, âŠ¥âŠ—u and âŠ—u âŠ¥are strictly the identity functors of the category (Su)0.
Proof that the functor in Theorem 2.16 is a left adjoint. First of all letâ€™s specify the last (straightfor-
ward) piece of structure needed to deï¬ne the unitization.
â€¢ The associator has components Î±XY Z on objects of S0, and when either X, Y or Z is âŠ¥we
deï¬ne it to be the appropriate identity morphism of the tensor of the remaining two objects.
Naturality of Î± is ensured by these choices. This also ensures that the pentagon axiom for 4
objects X, Y, Z, W trivially holds either because X, Y, Z, W are all in S0 (and thus the pentagon
axiom is true in the semigroupal structure of S0) or because the pentagon is made of identities.
â€¢ The last bit of structure that we have to assess is the â€˜triangle axiomâ€™ for a monoidal structure:
the triangle
X âŠ—u (âŠ¥âŠ—uY )
Î±XâŠ¥Y
/
'
(XâŠ—u âŠ¥) âŠ—u Y
w
X âŠ—u Y
(A.6)
must commute as it is composed by identities, and reasoning with a similarly straightforward
case analysis, we conclude it does.
We have exhibited a construction for the unitization of a semigroupal category S; we still have to prove
that this is a functor (but this is obvious: each semigroupal functor H : S â†’Sâ€² induces a monoidal
functor coinciding with H on S0 and sending âŠ¥S to âŠ¥Sâ€²), and its universal property. For the latter,
we have to check that there is an isomorphism
SgCat(S, U M) âˆ¼= MonCat(Su, M)
(A.7)
between the category of strong semigroupal functors S â†’U M into a monoidal category, and the
category of strong monoidal functors Su â†’M, when both categories are equipped with semigroupal
and monoidal natural transformations respectively.
At the level of the underlying categories, ( )u acts as the â€˜Maybeâ€™ functor, and M0 is a pointed
object in Cat (by the monoidal unit, IM : 1 â†’M) so that H : S â†’U M induces a unique functor
Ë†H : S0+1 â†’M0; this functor is now preserving the tensor product on S0 (because H was semigroupal
to start with), and it is forced by the universal property of â€˜Maybeâ€™ to send âŠ¥into IM, so strictly
speaking it becomes a normal strong monoidal functor (=strictly preserving the identity).
Proof of Theorem 2.16. Let S = (S0,
â—¦) be a semibicategory as in Deï¬nition 2.15; deï¬ne F S as
follows:
â€¢ (F S)0 is the same class of objects of S;
â€¢ for each X âˆˆS0, we apply to the category S(X, X) the construction of A.1; thus, each semi-
groupal category S(X, X) is unitized into S(X, X)u.
18

â€¢ the composition functors are deï¬ned as in S when X, Y, Z are such that neither Y = Z or X = Y ,
which means that in such case we take the same
â—¦XY Z
: S(Y, Z) Ã— S(X, Y )
/ S(X, Z)
(A.8)
as composition maps. When X = Y instead we deï¬ne
â—¦u,XXZ
: S(X, Z) Ã— (S(X, X) + 1) âˆ¼= S(X, Z) Ã— S(X, X) + S(Y, Z) Ã— 1
/ S(X, Z)
(A.9)
via the coproduct map of
â—¦XXZ
and the right unitor of (Cat, Ã—). We act similarly to deï¬ne
â—¦u,XY Y
: (S(Y, Y ) + 1) Ã— S(X, Y ) âˆ¼= S(Y, Y ) Ã— S(X, Y ) + 1 Ã— S(X, Y )
/ S(X, Y )
(A.10)
using the coproduct map of
â—¦XY Y
and the left unitor of (Cat, Ã—).
Clearly, all
â—¦XY Z
so deï¬ned are functors.
â€¢ The components of the associator Î±u when either f, g or h is the â€˜dummy identityâ€™ in a S(X, X)
reduce to the identity 2-cells of the remaining two objects, considering how we deï¬ned the com-
position operation; on all other components, Î±u = Î±. Again, these choices ensure the naturality
of Î±u.
â€¢ Clearly, any strong semigroupal functor H : S â†’T induces a strong monoidal unctor Hu : Su â†’
Tu, that coincides with H on S ,â†’Su.
It remains to show the universal property. A pseudofunctor H : S â†’B from a semibicategory to a
bicategory must induce a pseudofunctor Su â†’T: at the level of objects nothing has changed; each
hom-functor
HXY : S(X, Y )
/ B(HX, HY )
(A.11)
with X Ì¸= Y is also unchanged, and since each B(HX, HX) is a monoidal category (hence, in particular,
a pointed category) the functor H extends to Hu
XX : S(X, X)u â†’B(HX, HX); it is easily seen that
this extension is to a strong monoidal functor.
19

