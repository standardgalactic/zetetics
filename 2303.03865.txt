arXiv:2303.03865v1  [math.CT]  7 Mar 2023
Bicategories of automata, automata in bicategoriesâ‹†
Guido Boccalia, Andrea Larettob, Fosco Loregianc,1,âˆ—, Stefano Luneiad
aUniversity of Torino, Torino, Italy
bTallinn University of Technology, Tallinn, Estonia
cTallinn University of Technology, Tallinn, Estonia
dUniversity of Bologna, Bologna, Italy
Abstract
We study bicategories of (deterministic) automata, i.e.
how automata E â†
E âŠ—I â†’O organise as the 1-cells of a bicategory MlyK, drawing from prior work
of Katis-Sabadini-Walters, and Di Lavore-Gianola-RomÂ´an-Sabadini-SobociÂ´nski,
and linking their bicategories of â€˜processesâ€™ to a bicategory of Mealy machines
constructed in 1974 by R. Guitart. We make clear the sense in which Guitartâ€™s
bicategory retains information about automata, proving that Mealy machines
`a la Guitart identify to certain Mealy machines `a la K-S-W that we call fugal
automata; there is a biadjunction between fugal automata and the bicategory
of K-S-W. Then, we take seriously the motto that a monoidal category is just
a one-object bicategory. We deï¬ne categories of Mealy and Moore machines
inside a bicategory B; we specialise this to various choices of B, like categories,
relations, and profunctors. Interestingly enough, this approach gives a way to
interpret the universal property of â€˜reachability of a stateâ€™ as a Kan extension
and leads to a new notion of 1- and 2-cell between Mealy and Moore automata,
that we call intertwiners, related to the universal property of K-S-W bicategory.
1. Introduction
A single historical fact can motivate, alone, the profound connection be-
tween category theory and automata theory: one of the founders of the ï¬rst
wrote extensively about the second [22, 23]. A more intrinsic reason is that a
natural way to interpret category theory is as a theory of systems and processes.
Morphisms in a category can be considered a powerful abstraction of â€˜sequential
operationsâ€™ performed on a domain/input to obtain a codomain/output. Hence
why the introduction of categorical models for computational machines has been
â‹†Loregian was supported by the ESF funded Estonian IT Academy research measure
(project 2014-2020.4.05.19-0001).
âˆ—Corresponding author
Email addresses: andrea.laretto@altech.ee (Andrea Laretto),
fosco.loregian@gmail.com (Fosco Loregian), stefano.luneia@gmail.com (Stefano Luneia)
Preprint submitted to ArXiv
March 8, 2023

rich in results, starting from the elegant attempts by Arbib and Manes [2, 5â€“
8, 58] â€“cf. also [3, 20, 21] for exhaustive monographsâ€“ and Goguen [27â€“29], up
to the ultra-formal â€“and sadly, forgottenâ€“ experimentations of [9, 10, 31, 32, 34]
using hyperdoctrines, 2-dimensional monads, bicategories, lax co/limits. . . up
to the modern coalgebraic perspective of [37, 61, 62, 66]; all this, without men-
tioning categorical approaches to Petri nets [53], based essentially on the same
analogy, where the computation of a machine is concurrent â€“as opposed to sin-
gle-threaded.
Furthermore, many constructions of computational signiï¬cance often, if not
always, have a mathematical counterpart in terms of categorical notions: the
transition from a deterministic machine to a non-deterministic one is reï¬‚ected
in the passage from automata in a monoidal category (cf. [21, 54]), to automata
in the Kleisli category of an opmonoidal monad (cf. [33, 39]; this approach is
particularly useful to capture categorically stochastic automata, [7, 15, 19] as
they appear as automata in the Kleisli category of a probability distribution
monad); minimisation can be understood in terms of factorisation systems (cf.
[18, 29]); behaviour as an adjunction (cf. [55, 56]).
The present work starts from the intuition, ï¬rst presented in [44, 59], that
the analogy between morphisms and sequential machines holds up to the point
that the series and parallel composition of automata should itself be reï¬‚ected
in the â€˜seriesâ€™ and â€˜parallel â€™ composition of morphisms in a category. As a
byproduct of their â€˜Circâ€™ construction, one can see how the 1-cells of a certain
monoidal bicategory specialise exactly a Mealy machines E
d
â†âˆ’E âŠ—I
sâˆ’â†’O with
inputs and outputs I and O.
Outline of the paper. The ï¬rst result we ï¬nd in this work, and that oc-
cupies section 2 is that this category relates to another bicategory constructed
by R. Guitart in [31], where the author observes that one can use certain cate-
gories Mac(M, N) of spans, where M, N are categories, as hom categories of a
bicategory Mac, and shows that Mac admits a concise description as the Kleisli
bicategory of the monad of diagrams [31, Â§1] (cf. also [34], by the same author,
and [57] for a more modern survey); Mealy machines shall be recognisable as
the 1-cells of Mac between monoids, regarded as categories with a single object.
The fundamental assumption in [31] is that a Mealy machine E
d
â†âˆ’E âŠ—M
sâˆ’â†’N
satisï¬es a certain property of compatibility with the action of d on E, cf. (14),
that we call being a fugal automaton:
s(e, m Â· mâ€²) = s(e, m) Â· s(d(e, m), mâ€²).
This notion can be motivated in the following way: if s satisï¬es (14), then
s â€˜liftsâ€™ to a functor E[d] â†’N deï¬ned on the category of elements, and in
fact, deï¬nes a â€˜relational actionâ€™ in its own right, compatible with the action d
(formally speaking, E[d] is a displayed category [4] over N). We show that there
is a sub-bicategory Mlyâ™­
Set of MlySet made of fugal automata and that Mlyâ™­
Set is
biequivalent (actually, strictly) to the 1-full and 2-full sub-bicategory of Mac
spanned by monoids.
2

The second result we propose in this paper is motivated by the slogan for
which a monoidal category is just a bicategory with a single object: what are
automata inside a bicategory B, where instead of input/output objects I, O we
have input/output 1-cells, arranged as e
Î´â‡e â—¦i
Ïƒâ‡’o? Far from being merely
formal speculation (a similar idea was studied in a short, cryptic note [10] to
describe behaviour through Kan extensions: we take it seriously and present it
as a quite straightforward observation in Remark 3.6), we show how this allows
for a concise generalisation of â€˜monoidalâ€™ machines:
â€¢ ï¬rst, the simple fact that a diagram of 2-cells as above exists forces i to
be an endo-1-cell A â†’A, in order to be composable with the state 1-
cell e : A â†’B and map to the output 1-cell o : A â†’B; this hints at
some hidden structure that the one-object case, where every 1-cell is an
endomorphism for trivial reasons, did not allow to see (cf. Remark 3.2).
The take is that input and output are not interchangeable concepts: an
input 1-cell must be an endomorphism.
â€¢ Second, another piece of structure that in the monoidal case remained
hidden is a natural notion of 1- and 2-cell between bicategorical machines,
which specialises, in the monoidal case, to a novel notion of 1- and even 2-
cell between automata; we call such arrows intertwiners and intertwiner
2-cells, cf. subsection 3.1; they have apparently never been considered
before, in the monoidal case.
Related work.
A word on related work and how we ï¬t into it: the ideas
in section 2 borrow heavily from [44, 59] where bicategories of automata (or
â€˜processesâ€™) are studied in ï¬ne detail; in section 2 we carry on a comparison
with a diï¬€erent approach to bicategories of automata, present in [31] but also
in [32, 34]; in particular, our proof that there is an adjunction between the two
bicategories is novel â€“to the best of our knowledgeâ€“ and it hints at the fact
that the two approaches are far from being independent. At the level of an
informal remark, the idea of approaching automata via (spans where one leg is
a) ï¬brations bears some resemblance to Waltersâ€™ work on context-free languages
through displayed categories in [68], and the requirement to have a ï¬bration as
one leg of the span should be thought as mirroring determinism of the involved
automata: if âŸ¨s, dâŸ©: E Ã— M â†’N Ã— E is fugal and s deï¬nes a ï¬bration over
N, then E is a M-N-bimodule, not only an M-set; there is extensive work of
Betti-Kasangian [11, 12, 41] and Kasangian-Rosebrugh [42] on â€˜profunctorialâ€™
models for automata, their behaviour, and the universal property enjoyed by
their minimisation: spans of two-sided ï¬brations [63, 64] and profunctors are
well-known to be equivalent ways to present the same bicategory of two-sided
ï¬brations. Carrying on our study will surely determine a connection between
the two approaches.
For what concerns section 3, the idea of valuing a Mealy or a Moore machine
in a bicategory seems to be novel, although in light of [59] and in particular of
their concrete description of C = â„¦Î£(K, âŠ—) it seems that both MlyB and MreB
3

allow deï¬ning tautological functors into C. How these two bicategories relate is
a problem we leave for future investigation: [59] proves that when K is Cartesian
monoidal, MlyK is â„¦Î£(K, Ã—). The conjecture is that our MlyB is â„¦B under some
assumptions on the bicategory B: our notion of intertwiner seems to hint in that
direction. Characterising â€˜behaviour as a Kan extensionâ€™ is nothing but taking
seriously the claim that animates applications of coalgebra theory [38, 39] to
automata; the -sadly forgotten- work of Bainbridge [10] bears some resemblance
to our idea, but his note is merely sketched, no plausibility for his intuition is
given. Nevertheless, we recognise the potential of his idea and took it to its
natural continuation with modern tools of 2-dimensional algebra.
1.1. Mealy and Moore automata
The scope of the following subsection is to introduce the main characters
studied in the paper:1 categories of automata valued in a monoidal category
(K, âŠ—) (in two ï¬‚avours: â€˜Mealyâ€™ machines, where one considers spans E â†
E âŠ—I â†’O, and â€˜Mooreâ€™, where instead one consider pairs E â†E âŠ—I, E â†’O).
â€˜Mealyâ€™ automata are known as â€˜deterministic automataâ€™ in todayâ€™s parlance.
However, since we often need to distinguish between the two kinds of diagrams
or state deï¬nitions for both at a time, we stick to an older terminology.
The only purpose of this short section is to ï¬x the notation for section 2 and
3; comprehensive classical references for this material are [3, 21].
For the entire subsection, we ï¬x a monoidal category (K, âŠ—, 1).
Deï¬nition 1.1 (Mealy machine). A Mealy machine in K of input object I and
output object O consists of a triple (E, d, s) where E is an object of K and d, s
are morphisms in a span
e :=

E
E âŠ—I
d
o
s
/ O

(1)
Remark 1.2 (The category of Mealy machines). Mealy machines of ï¬xed input
and output I, O form a category, if we deï¬ne a morphism of Mealy machines
f : e = (E, d, s) â†’(F, dâ€², sâ€²) = f as a morphism f : E â†’F in K such that
E
f

E âŠ—I
d
o
fâŠ—I

s
/ O
F
F âŠ—I
dâ€²
o
sâ€²
/ O
(2)
Composition and identities are performed in K.
1An almost identical introductory short section appears in [13], of which the present note
is a parallel submission â€“although related, the two manuscripts are essentially independent,
and the purpose of this repetition is the desire for self-containment.
4

The category of Mealy machines of input and output I, O is denoted as
MlyK(I, O).
Deï¬nition 1.3 (Moore machine). A Moore machine in K of input object I and
output object O is a diagram
m :=

E
E âŠ—I ; E
d
o
s
/ O

(3)
Remark 1.4 (The category of Moore machines). Moore machines of ï¬xed input
and output I, O form a category, if we deï¬ne a morphism of Moore machines
f : e = (E, d, s) â†’(F, dâ€², sâ€²) = f as a morphism f : E â†’F in K such that
E
f

E âŠ—I
d
o
fâŠ—I

E
f

s
/ O
F
F âŠ—I
dâ€²
o
F
sâ€²
/ O
(4)
Remark 1.5 (Canonical extension of a machine). If (K, âŠ—) has countable co-
products preserved by each A âŠ—
then the span (1), considering for example
Mealy machines, can be â€˜extendedâ€™ to a span
E
E âŠ—Iâˆ—
dâˆ—
o
sâˆ—
/ O
(5)
where dâˆ—, sâˆ—can be deï¬ned inductively from components dn, sn : E âŠ—IâŠ—n â†’
E, O; if K is closed, the map dâˆ—corresponds, under the monoidal closed ad-
junction, to the monoid homomorphism Iâˆ—â†’[E, E] induced by the universal
property of Iâˆ—= P
nâ‰¥0 IâŠ—n.
2. Bicategories of automata
Let (K, Ã—) be a Cartesian category. There is a bicategory MlyK deï¬ned as
follows (cf. [59] where this is called â€˜Circâ€™ and studied more generally, in case
the base category has a non-Cartesian monoidal structure):
Deï¬nition 2.1 (The bicategory MlyK, [59]). The bicategory MlyK has
â€¢ its 0-cells I, O, U, . . . are the same objects of K;
â€¢ its 1-cells I â†’O are the Mealy machines (E, d, s), i.e. the objects of the
category MlyK(I, O) in Remark 1.2, thought as morphisms âŸ¨s, dâŸ©: EÃ—I â†’
O Ã— E in K;
â€¢ its 2-cells are Mealy machine morphisms as in Remark 1.2;
â€¢ the composition of 1-cells
â™¦
is deï¬ned as follows: given 1-cells âŸ¨s, dâŸ©:
E Ã—I â†’J Ã—E and âŸ¨sâ€², dâ€²âŸ©: F Ã—J â†’K Ã—F their composition is the 1-cell
5

âŸ¨sâ€² â™¦s, dâ€² â™¦dâŸ©: (F Ã— E) Ã— I â†’K Ã— (F Ã— E), obtained as
F Ã— E Ã— I
F Ã—âŸ¨s,dâŸ©/ F Ã— J Ã— E
âŸ¨sâ€²,dâ€²âŸ©Ã—E/ K Ã— F Ã— E;
(6)
â€¢ the vertical composition of 2-cells is the composition of Mealy machine
morphisms f : E â†’F as in Remark 1.2;
â€¢ the horizontal composition of 2-cells is the operation deï¬ned thanks to
bifunctoriality of
â™¦
: MlyK(B, C) Ã— MlyK(A, B) â†’MlyK(A, C);
â€¢ the associator and the unitors are inherited from the monoidal structure
of K.
Remark 2.2. Spelled out explicitly, the composition of 1-cells in Equation 6
corresponds to the following morphisms (where we freely employ Î»-notation
available in any Cartesian category):
d2 â™¦d1 : Î»efa.âŸ¨d2(f, s1(e, a)), d1(e, a)âŸ©
(7)
s2 â™¦s1 : Î»efa.s2(f, s1(e, a))
(8)
Remark 2.3 (Kleisli extension of automata as base changes). If P : K â†’K
is a commutative monad [47, 48], we can lift the monoidal structure (K, âŠ—)
to a monoidal structure (Kl(P), Â¯âŠ—) on the Kleisli category of P; this leads to
the notion of P-non-deterministic automata or PÎ»-machines studied in [33, Â§2,
DÂ´eï¬nition 6]. Nondeterminism through the passage to a Kleisli category is a
potent idea that developed into the line of research on automata theory through
coalgebra theory [39], cf. in particular Chapter 2.3 for a comprehensive refer-
ence, or the self-contained [37].
We do not investigate the theory of PÎ»-machines apart from the following
two results the proof of which is completely straightforward: we content our-
selves with observing that the results expounded in [43, 59], and in general the
language of bicategories of processes, naturally lends itself to the generation of
base-change functors, of which the following two are particular examples.
Proposition 2.4. The correspondence deï¬ned at the level of objects by sending
(E, d, s) âˆˆMlyK(I, O) to
PE
E
Î·E
o
E âŠ—I
d
o
s
/ O
Î·O/ PO
(9)
extends to a functor L : MlyK(I, O) â†’MlyKl(P )(I, O).
Proposition 2.5. The correspondence sending (E, d, s) âˆˆMlyKl(P )(I, O) into
PE
PPE
ÂµE
o
PE âŠ—PI
P dâ—¦D
o
P sâ—¦D / PPO
ÂµO / PO
(10)
extends to a functor (âˆ’)e : MlyKl(P )(I, O) â†’MlyK(PI, PO).
6

More precisely, the proof of the following result is straightforward â€“only
slightly convoluted in terms of notational burdenâ€“ so much so that we feel
content to enclose it in a remark.
Remark 2.6. Let H, K be cartesian monoidal categories, then we can deï¬ne
2-categories MlyH, MlyK as in Deï¬nition 2.1; let F : H â†’K be a lax monoidal
functor. Then, there exists a â€˜base changeâ€™ pseudofunctor Fâˆ—: MlyH â†’MlyK,
which is the action on 1-cells of a 2-functor CatÃ— â†’Bicat from (Cartesian
monoidal categories, product-preserving functors, Cartesian natural transfor-
mations), to (bicategories, pseudofunctors, oplax natural transformations).
As a corollary, we re-obtain the functors of Proposition 2.5 and Proposi-
tion 2.4 from the free and forgetful functors FP : K â†’Kl(P) and UP : Kl(P) â†’
K.
2.1. Fugal automata, Guitart machines
A conceptual construction for MlyK in Deï¬nition 2.1 is given as follows in
[43]: it is the category â„¦Î£(K, âŠ—) of lax functors N â†’Î£(K, Ã—), where Î£ is the
â€˜suspensionâ€™ of (K, âŠ—), i.e. K regarded as a one-object bicategory; a universal
property for MlyK is provided in [44] (actually, for any â„¦Î£(K, âŠ—)): it is the free
category with feedbacks (op. cit., Proposition 2.6, see also [50]) on K. The bi-
category MlyK addresses the fundamental question of whether one can fruitfully
consider morphisms in a category as an abstraction of â€˜sequential operationsâ€™
performed on a domain/input to obtain a codomain/output, and up to what
point the analogy between morphisms and sequential machines holds up (com-
posing 1-cells in MlyK accounts for the sequential composition of state machines,
where the â€˜stateâ€™ E is an intrinsic part of the speciï¬cation of a machine/1-cell
âŸ¨s, dâŸ©).
Twenty eight years before [44], however, RenÂ´e Guitart [31] exhibited another
bicategory Mac of â€˜Mealy machinesâ€™, deï¬ned as a suitable category of spans,
of which one leg is a ï¬bration, and its universal property: Mac is the Kleisli
bicategory of the diagram monad (monade des diagrammes in [31, Â§1], cf. [46,
57]) Cat//
.2
Deï¬nition 2.7 (The bicategory Macs, adapting [31]). Deï¬ne a bicategory Macs
as follows:
â€¢ 0-cells are categories A, B, C. . . ;
2Guitartâ€™s note [31] is rather obscure with respect of the ï¬ne details of his deï¬nition, as
he chooses for 2-cells the H for which the upper triangle in (12) is only laxly commutative,
and when it comes to composition of 1-cells he invokes a produit ï¬brÂ´e canonique; apparently,
this canâ€™t be interpreted as a strict pullback, or there would be no way to deï¬ne horizontal
composition of 2-cells; using a comma object instead of a strict pullback, the lax structure
is given by the universal property â€“observe that the functor that must be an opï¬bration is
indeed an opï¬bration, thanks to [36, Exercise 1.4.6], but this opï¬bration does not remember
much of the opï¬bration q one pulled back. Our theorem involves a strict version of Guitartâ€™s
Mac, because the functor Î  of Theorem 2.17 factors through Macs âŠ†Mac.
7

â€¢ 1-cells (E; p, S) : A â†’B consist of spans
A
E
p
oo
S
/ B
(11)
where p : E â†’A is a discrete opï¬bration;
â€¢ 2-cells H : (E; p, S) â‡’(F; q, T ) are pairs where H : E â†’F is a morphism
of opï¬brations (cf. [36, dual of 1.7.3.(i)]): depicted graphically, a 2-cell is
a diagram
E
H
 â…
â…
â…
â…
â…
â…
â…
â…
S
/
p 
B
A
F
q
oo
T
O
(12)
where both triangles commute and H is an opCartesian functor (it pre-
serves opCartesian morphisms);
â€¢ composition of 1-cells A
pâ†âˆ’E
Sâˆ’â†’B and B
qâ†âˆ’F
Tâˆ’â†’C is via pullbacks, as it
happens in spans, and all the rest of the structure is deï¬ned as in spans.
Given this, a natural question that might arise is how do the two bicategories
of Deï¬nition 2.1 and Deï¬nition 2.7 interact, if at all?
In the present section, we aim to prove the existence of an adjunction (cf.
Theorem 2.18) between a suitable sub-bicategory of Macs and a sub-bicategory
of MlySet spanned over what we call fugal Mealy machines between monoids (cf.
Deï¬nition 2.11).3
Since the construction of Macs outlined in [31] requires some intermediate
steps (and it is written in French), we deem it necessary to delve into the details
of how its structure is presented. To ï¬x ideas, we keep working in the category
of sets and functions.
Notation 2.8. In order to avoid notational clutter, we will blur the distinction
between a monoid M and the one-object category it represents; also, given the
d part of a Mealy machine, we will denote as dâˆ—both the extension E Ã—Iâˆ—â†’E
of Remark 1.5, which is a monoid action of Iâˆ—on E, and the functor Iâˆ—â†’Set
to which the action corresponds.
Remark 2.9. In the notation above, a Mealy machine e = (E, d, s) yields a
discrete opï¬bration (cf. [1, 36]) E[dâˆ—] â†’Iâˆ—over the monoid Iâˆ—, and E[a] is the
translation category of an M-set a : M Ã— X â†’X (cf. [14] for the case when M
is a group: clearly, E[a] is the category of elements of the action a : M â†’Set
regarded as a functor), i.e. the category having
3A fugue is â€˜a musical composition in which one or two themes are repeated or imitated
by successively entering voices and contrapuntally developed in a continuous interweaving of
the voice partsâ€™, cf. [67]. In our case, the interweaving is between s, d in a Mealy machine.
8

â€¢ objects the elements of E;
â€¢ a morphism m : e â†’eâ€² whenever eâ€² = dâˆ—(e, m).
Composition and identities are induced by the fact that dâˆ—is an action.
Remark 2.10. The hom-categories Macs(A, B) of Deï¬nition 2.7 ï¬t into strict
pullbacks
Macs(A, B)
/

Cat/B

opFib/A
/ Cat
(13)
where Cat/B is the usual slice category of Cat over B.
Deï¬nition 2.11 (Fugal automaton). Let M, N be monoids; a Mealy machine
âŸ¨s, dâŸ©: E Ã— M â†’N Ã— E is fugal if its s part satisï¬es the equation
s(e, m Â· mâ€²) = s(e, m) Â· s(d(e, m), mâ€²).
(14)
Remark 2.12. This deï¬nition appears in [31, Â§2] and it looks an ad-hoc re-
striction for what an output map in a Mealy machine shall be; but (14) can be
motivated in two ways:
â€¢ A fugal Mealy machine âŸ¨s, dâŸ©: E Ã— M â†’N Ã— E induces in a natural way
a functor Î£ : E[dâˆ—] â†’N because (14) is exactly equivalent to the fact
that Î£ deï¬ned on objects in the only possible way, and on morphisms as
Î£(e â†’dâˆ—(e, m)) = s(e, m) preserves (identities and) composition;
â€¢ given a generic Mealy machine âŸ¨s, dâŸ©: E Ã— A â†’B Ã— E one can produce a
â€˜universalâ€™ fugal Mealy machine âŸ¨s, dâŸ©â™­= âŸ¨sâ™­,
âŸ©: E Ã— Aâˆ—â†’Bâˆ—Ã— E, and
this construction is well-behaved for 1-cell composition in MlySet, in the
sense that (s2 â™¦s1)â™­= sâ™­
2 â™¦sâ™­
1.
The remainder of this section is devoted to making these claims precise
(and prove them). In particular, the â€˜universalityâ€™ of âŸ¨s, dâŸ©â™­among fugal Mealy
machines obtained from âŸ¨s, dâŸ©is clariï¬ed by the following Lemma 2.13 and by
Theorem 2.18, where we prove that there is a 2-adjunction between MlySet and
Mlyâ™­
Set.
Lemma 2.13. Given sets A, B, denote with Aâˆ—, Bâˆ—their free monoids; then,
there exists a â€˜fugal extensionâ€™ functor (
)â™­
A,B : MlySet(A, B) â†’Mlyâ™­
Set(Aâˆ—, Bâˆ—).
Proof. The proof is deferred to the appendix, p. 23. In particular, the map sâ™­
is constructed inductively as
(
sâ™­(e, [ ])
= [ ]
sâ™­(e, a :: as)
= s(e, a) :: sâ™­(d(e, a), as)
(15)
9

and it ï¬ts in the Mealy machine âŸ¨sâ™­, dâˆ—âŸ©: EÃ—Aâˆ—â†’Bâˆ—Ã—E where dâˆ—is as in (5).
The proof that âŸ¨sâ™­, dâˆ—âŸ©is fugal in the sense of (14) can be done by induction
and poses no particular diï¬ƒculty.
Lemma 2.14. Given sets A, B there exists a commutative square
Mlyâ™­
Set(Aâˆ—, Bâˆ—)
/

Cat/Bâˆ—

opFib/Aâˆ—
/ Cat.
(16)
Proof of Lemma 2.14. Given a fugal Mealy machine âŸ¨s, dâŸ©: E Ã— Aâˆ—â†’Bâˆ—Ã— E
between free monoids, from the action d we obtain a discrete opï¬bration E[d] â†’
Aâˆ—, and from the map s : E Ã— Aâˆ—â†’Bâˆ—we obtain a functor Î£ : E[dâˆ—] â†’Bâˆ—as
in Remark 2.12. So, one can obtain a span
Aâˆ—
E[dâˆ—]
D
oo
Î£
/ Bâˆ—
(17)
where the leg D : E[dâˆ—] â†’Aâˆ—is as in Remark 2.9 and Î£ is an in Remark 2.12.
The functors opFib/Aâˆ—â†Mlyâ™­
Set(Aâˆ—, Bâˆ—) â†’Cat/Bâˆ—project to each of the two
legs.
Corollary 2.15. The universal property of the hom-categories Macs(A, B) ex-
posed in Remark 2.10 yields the right-most functor in the composition
Î“A,B : MlySet(A, B)
(
)â™­
A,B
/ Mlyâ™­
Set(Aâˆ—, Bâˆ—)
Î A,B
/ Macs(Aâˆ—, Bâˆ—)
(18)
Lemma 2.16 (Fugal extension preserves composition). Let A, B, C be sets,
s1 : E Ã— A â†’B and s2 : F Ã— B â†’C parts of Mealy machines âŸ¨s1,
âŸ©and
âŸ¨s2,
âŸ©; then
(s2 â™¦s1)â™­= sâ™­
2 â™¦sâ™­
1.
(19)
Proof. The proof is deferred to the appendix, p. 23.4
This, together with the fact that the identity 1-cell 1 Ã— A â†’A Ã— 1 is fugal
(the proof is straightforward), yields that there exists a 2-subcategory Mlyâ™­
Set of
MlySet where 0-cells are monoids, 1-cells are the âŸ¨s, dâŸ©where s is fugal in the
sense of Deï¬nition 2.11, and we take all 2-cells.
Theorem 2.17. The maps Î“A,B of Corollary 2.15 constitute the action on 1-
cells of a 2-functor Î“ : MlySet â†’Macs. More precisely, there are 2-functors
(
)â™­: MlySet â†’Mlyâ™­
Set and Î  : Mlyâ™­
Set â†’Macs whose composition is Î“.
4The argument is straightforward but tedious (the diï¬ƒcult part is that the condition to
verify on (s2 â™¦s1)â™­involves d2 â™¦d1, the expression of which we recall from (7), is the Î»-term
Î»efa.âŸ¨d2(f, s1(e, a)), d1(e, a)âŸ©).
10

Proof. The proof is deferred to the appendix, p. 24.
Theorem 2.18. The 2-functor (
)â™­: MlySet â†’Mlyâ™­
Set admits a right 2-adjoint;
the 2-functor Î  : Mlyâ™­
Set â†’Macs identiï¬es Mlyâ™­
Set as the 1-full and 2-full subcat-
egory of Macs spanned by monoids.
Proof. The proof is deferred to the appendix, p. 24. The last statement essen-
tially follows from (17): the span (D, Î£) is essentially equivalent to the fugal
Mealy machine âŸ¨s, dâŸ©, since its left leg D determines a unique action of Aâˆ—on
the set of objects E[dâˆ—]0, and Î£ and s are mutually deï¬ned.
3. Bicategory-valued machines
A monoidal category is just a bicategory with a single 0-cell; then, do Deï¬ni-
tion 1.1 and Deï¬nition 1.3 admit a generalisation when instead of K we consider
a bicategory B with more than one object? The present section answers in the
positive. We also outline how, passing to automata valued in a bicategory, a
seemingly undiscovered way to deï¬ne morphisms between automata, diï¬€erent
(from (1.2) and) from the categories of â€˜variableâ€™ automata described in [21,
Â§11.1]: we study this notion in Deï¬nition 3.12.
In our setting, â€˜automataâ€™ become diagrams of 2-cells in B, and input, output
and state are 1-cells, in contrast with previous studies where automata appeared
as objects, and with [59] (and our section 2), where they appear as 1-cells. This
perspective suggests that 2-dimensional diagrams of a certain shape can be
thought of as state machines -so, they carry a computational meaning; but also
that state machines can be fruitfully interpreted as diagrams: in Example 3.11
we explore deï¬nitions of an automaton where input and output are relations, or
functors (in Example 3.9), or profunctors (in Example 3.10); universal objects
that can be attached to the 2-dimensional diagram then admit a computational
interpretation (cf. (28) where a certain Kan extension resembles a â€˜reachabilityâ€™
relation).
This idea is not entirely new: it resembles an approach contained in [9, 10]
where the author models the state space of abstract machines as a functor,
of which one can take the left/right Kan extension along an â€˜input schemeâ€™.
However, Bainbridgeâ€™s works are rather obscure (and quite ahead of their time),
so we believe we provide some advancement to state of the art by taking his
idea seriously and carrying to its natural development â€“while at the same time,
providing concrete examples of bicategories in which inputs/outputs automata
can be thought as 1-cells, and investigating the structure of the class of all such
automata as a global object.
Deï¬nition 3.1. Adapting from Deï¬nition 1.1 verbatim, if B is a bicategory
with 0-cells A, B, X, Y, . . . , 1-cells i : A â†’B, o : X â†’Y, . . . and 2-cells Î±, Î², . . .
the kind of object we want in MlyB(i, o) is a span of the following form:
e
e â—¦i
Î´
ks
Ïƒ
+3 o
(20)
11

for 1-cells i : X â†’Y , e : A â†’B, o : C â†’D. Note that with
â—¦
, we denote
the composition of 1-cells in B, which becomes a monoidal product in B has a
single 0-cell.
Remark 3.2. The important observation here is that the mere existence of
the span (Î´, Ïƒ) â€˜coherces the typesâ€™ of i, o, e in such a way that i must be an
endomorphism of an object A âˆˆB, and e, o : A â†’B are 1-cells. Interestingly,
these minimal assumptions required even to consider an object like (20) make
iterated compositions iâ—¦Â· Â· Â·â—¦i as meaningful as iterated tensors IâŠ—Â· Â· Â·âŠ—I, and in
fact, the two concepts coincide when B has a single object âˆ—and hom-category
B(âˆ—, âˆ—) = K.
In the monoidal case, the fact that an input 1-cell stands on a diï¬€erent level
from an output was completely obscured by the fact that every 1-cell is an
endomorphism.
Let us turn this discussion into a precise deï¬nition.
Deï¬nition 3.3 (Bicategory-valued Mealy machines). Let B be a bicategory,
and ï¬x two 1-cells i : A â†’A and o : A â†’B; deï¬ne a category MlyB(i, o) as
follows:
bml1) the objects are diagrams of 2-cells as in (20);
bml2) the morphisms (e, Î´, Ïƒ) â†’(eâ€², Î´â€², Ïƒâ€²) are 2-cells Ï• : e â‡’eâ€² subject to
conditions similar to Remark 1.2:
â€¢ Ïƒâ€² â—¦(Ï• âˆ—i) = Ïƒ;
â€¢ Î´â€² â—¦(Ï• âˆ—i) = Ï• â—¦Î´.
Deï¬nition 3.4 (Bicategory-valued Moore machines). Deï¬ne a category MreB(i, o)
as follows:
bmo1) the objects are pairs of 2-cells in B, Î´ : e â—¦i â‡’e and Ïƒ : e â‡’o;
bmo2) the morphisms (e, Î´, Ïƒ) â†’(eâ€², Î´â€², Ïƒâ€²) are 2-cells Ï• : e â‡’eâ€² such that
diagrams of 2-cells similar to those in Deï¬nition 3.3 are commutative.
Notation 3.5. In the following, an object of MlyB(i, o) (resp., MreB(i, o)) will
be termed a bicategorical Mealy machine (resp., a bicategorical Moore machine)
of input cell i and output cell o, and the objects A, B are the base of the
bicategorical Mealy machine (e, Î´, Ïƒ).
To denote that a bicategorical Mealy
machine is based on A, B we write (e, Î´, Ïƒ)A,B.
In [10] the author models the state space of abstract machines as follows: ï¬x
categories A, X, E and a functor Î¦ : X â†’A, of which one can take the left/right
Kan extension along an â€˜input schemeâ€™ u : E â†’X; a machine with input scheme
u is a diagram of 2-cells in Cat(E, A) of the form M = (I â‡’Î¦ â—¦u â‡’J), and
the behaviour B(M) of M is the diagram of 2-cells LanuI â‡’Î¦ â‡’RanuJ.
All this bears some resemblance to the following remark, but at the same
time looks very mysterious, and not much intuition is given in op. cit. for what
12

the approach in study means; we believe our development starts from a similar
point (the intuition that a category of machines is, in the end, some category
of diagrams â€“a claim we substantiate in Proposition 3.8) but rapidly takes a
diï¬€erent turn (cf. Deï¬nition 3.12), and ultimately gives a cleaner account of
Bainbridgeâ€™s perspective (see also [9] of the same author).
Remark 3.6 (Behaviour as a Kan extension). A more convenient depiction
of the span in bmo1 will shed light on our Deï¬nition 3.3 and 3.4, giving in
passing a conceptual motivation for the convoluted shape of ï¬nite products in
MreK(I, O) and MlyK(I, O) (cf. [21, Ch. 11]): a bicategorical Moore machine
in B of ï¬xed input and output i, o consists of a way of ï¬lling the dotted arrows
in the diagram
A
i
â‘¦â‘¦â‘¦â‘¦â‘¦â‘¦â‘¦â‘¦
e

o

    <D
Ïƒ
A
e
/
â´â´â´â´+3
Î´
B
(21)
with e : A â†’B and two 2-cells Î´, Ïƒ. But then the â€˜terminal wayâ€™ of ï¬lling such
a span can be characterised by the right extension of the output object along a
certain 1-cell obtained from the input i. Let us investigate how.
First of all, we have to assume something on the ambient hom-categories
B(A, A), namely that each of these admits a left adjoint to the forgetful functor
B(A, A)
/ Mnd/A
(22)
so that every endo-1-cell i : A â†’A has an associated extension to an endo-1-cell
iâ™®: A â†’A with a unit map i â‡’iâ™®that is initial among all 2-cells out of i into
a monad in B; iâ™®is usually called the free monad on i.
Construction 3.7. Now, ï¬x i, o as in Deï¬nition 3.4; we claim that the terminal
object of MreB(i, o) is obtained as the right extension in B of the output o along
iâ™®. We can obtain
â€¢ from the unit Î· : idA â‡’iâ™®of the free monad on i, a canonical modiï¬cation
Rani â‡’Ranid = idA, with components at o given by 2-cells Ïƒ : Ranio â‡’o;
this is a choice of the right leg for a diagram like bmo1;
â€¢ from the multiplication Âµ : iâ™®â—¦iâ™®â‡’iâ™®of the free monad on i, a canonical
modiï¬cation Raniâ™®â‡’Raniâ™®â—¦Raniâ™®, whose components at o mate to a
2-cell Î´0 : Raniâ™®o â—¦iâ™®â‡’Raniâ™®o; the composite
Î´ : Raniâ™®o â—¦i
Raniâ™®oâˆ—Î· +3 Raniâ™®o â—¦iâ™®
+3 Raniâ™®o
(23)
The left leg is now chosen for a diagram like bmo1.
Together, (Raniâ™®o, Î´, Ïƒ) is a bicategorical Mealy machine, and the universal
property of the right Kan extension says it is the terminal such.
A similar
line of reasoning yields the same result for MlyB(i, o), only now Ïƒ is the 2-cell
13

obtained as mate of Ç« â—¦(Raniâ™®o âˆ—Î·) : Raniâ™®o â—¦i â‡’Raniâ™®o â—¦iâ™®â‡’o from the
counit of
â—¦iâ™®âŠ£Raniâ™®.
Proposition 3.8 (MreB(i, o) and MlyB(i, o) as categories of diagrams.). There
exists a 2-category P and a pair of strict 2-functors W, G : P â†’B such that bi-
categorical Moore machines with â€˜variable output 1-cellâ€™ i.e. the 2-dimensional
diagrams like in (21) where o is variable, can be characterised as natural trans-
formations W â‡’G.
Proof. The proof is deferred to the appendix, p. 26.
As explained therein, bicategorical Moore machines with ï¬xed output o can
be characterised as particular such natural transformations that take value o on
one argument.
Also, minor adjustments to the shape of G yield a similar result for bicate-
gorical Mealy machines.
Example 3.9 (Bicategorical machines in Cat). Consider a span C
Iâ†âˆ’C
O
âˆ’â†’D
in the strict 2-category Cat of categories, functors and natural transformations,
where D is a Îº-complete category. The category MreCat(I, O) has objects the
triples (E, Î´, Ïƒ) where E : C â†’D is a functor and Ïƒ, Î´ are natural transforma-
tions arranged as in (21); assuming enough limits in D, we can compute the
action of the right Kan extension of O along Iâ™®(the free monad on the endo-
functor I, cf. [45], whose existence requires additional assumptions on C) on an
object C âˆˆC as the equaliser
RC
/ Q
CâˆˆC OCC(A,Iâ™®C)
// Q
Câ†’B OBC(A,Iâ™®C)
(24)
or (better, cf. [51, 2.3.6]) as the end5 A 7â†’
R
C OCC(A,Iâ™®C), i.e. as the â€˜space
of ï¬xpointsâ€™ for the conjoint action of the functor O and of the presheaf C 7â†’
C(A, Iâ™®C) on objects of C; the free monad Iâ™®sends an object C to the initial
algebra of the functor A 7â†’C + IA, so that Iâ™®C âˆ¼= C + I(Iâ™®C).
For the sake of simplicity, let us specialise the discussion when D is the
category of sets and functions: the input I and the output O of the state
machine in (1) are now variable objects â€˜indexedâ€™ over the objects of C, and
the behaviour of the terminal machine can be described as a known object:
unpacking the end (24) we obtain the functor
A âœ¤
/ [C, Set](C(A, Iâ™®
), O)
(25)
sending an object A to the set of natural transformations Î± : C(A, Iâ™®
) â‡’O;
the intuition here is that to each generalised A-element of Iâ™®C corresponds an
5Recall that if S is a set and C is an object of a category C with limits, by CS we denote
the power of C and S, i.e. the iterated product Q
sâˆˆS C of as many copies of C as there are
elements in S.
14

element of the output space Î¥C(u) âˆˆOC, and that this assocition is natural in
C.
Example 3.10 (Bicategorical machines in profunctors). We can reason simi-
larly in the bicategory of categories and profunctors of [16, 17, 40], [51, Ch. 5];
now an endo-1-cell I : C â†’C on a category C consists of an â€˜extensionâ€™ of the
underlying graph of UC to a bigger graph (UC)+,6 and the free promonad Iâ™®
(cf. [49, Â§5]) corresponds to the quotient of the free category on (UC)+ where
â€˜oldâ€™ arrows compose as in C, and â€˜newâ€™ arrows compose freely; moreover, all
right extensions âŸ¨P/QâŸ©: X â‡Y of Q : A â‡Y along P : A â‡X exist in the
bicategory Pr of, as they are computed as the end in [51, 5.2.5],
âŸ¨P/QâŸ©: (X, Y ) âœ¤
/ R
A Set(P(Y, A), Q(X, A)).
(26)
Example 3.11 (Bicategorical machines in relations). When it is instantiated
in the (locally thin) bicategory of relations between sets, i.e. {0, 1}-profunctors,
given I : A â‡A, O : A â‡B, Iâ™®is the reï¬‚exive-transitive closure of I, and the
above Kan extension is uniquely determined as the maximal E such that E âŠ†O
and E â—¦Iâ™®âŠ†E (here â—¦is the relational composition). So R = RanIâ™®O is the
relation deï¬ned as
(a, b) âˆˆR â‡â‡’âˆ€aâ€² âˆˆA.((aâ€², a) âˆˆIâ™®â‡’(aâ€², b) âˆˆO).
(27)
This relation expresses reachability of b from a: it characterises the sub-relation
of O connecting those pairs (a, b) for which, for every other aâ€² âˆˆA, if there
is a ï¬nite path (possibly of length zero, i.e. a = aâ€²) connecting aâ€², a through
I-related elements, then (aâ€², b) âˆˆO. In pictures:
a R b â‡â‡’

(aâ€² = a) âˆ¨(aâ€²
Iâˆ’â†’a1
Iâˆ’â†’. . .
Iâˆ’â†’an
Iâˆ’â†’a) â‡’aâ€² O b

(28)
When the above example is specialised to the case when A = âˆ—is a singleton,
there are only two possible choices for I (both reï¬‚exive and transitive), and
O identiï¬es to a subset of B; a bicategorical Moore machine is then a subset
R âŠ†O, and thus for both choices of I, MreRel(I, O)âˆ—,B = 2O. One can reason
in the same fashion for Mealy machines.
3.1. Intertwiners between bicategorical machines
In passing from MlyK(I, O) to MlyB(i, o) we gain an additional degree of
freedom by being able to index the category over pairs of 0-cells of B, and this
is particularly true in the sense that the deï¬nition of MlyB(i, o) and its indexing
over pairs of objects A, B of K leads to a seemingly undiscovered way to deï¬ne
morphisms between automata:
6More precisely, to the underlying graph of C, made of â€˜oldâ€™ arrows, we adjoin a directed
edge ex : C â†’Câ€² for each x âˆˆI(C, Câ€²).
15

Deï¬nition 3.12 (Intertwiner between bicategorical machines). Consider two
bicategorical Mealy machines (e, Î´, Ïƒ)A,B, (eâ€², Î´â€², Ïƒâ€²)Aâ€²,Bâ€² on diï¬€erent bases (so
in particular (e, Î´, Ïƒ)A,B âˆˆMlyB(i, o) and (eâ€², Î´â€², Ïƒâ€²)Aâ€²,Bâ€² âˆˆMlyB(iâ€², oâ€²)); an in-
tertwiner (u, v) : (e, Î´, Ïƒ) â†¬(eâ€², Î´â€², Ïƒâ€²) consists of a pair of 1-cells u : A â†’Aâ€², v :
B â†’Bâ€² and a triple of 2-cells Î¹, Ç«, Ï‰ disposed as follows:
A
    |
Î¹
u
/
i

Aâ€²
iâ€²

A
âœâœâœâœ|
Ç«
u
/
e

Aâ€²
eâ€²

A
âœâœâœâœ| Ï‰
u
/
o

Aâ€²
oâ€²

A
u
/ Aâ€²
B
v
/ Bâ€²
B
v
/ Bâ€²
(29)
to which we require to satisfy the following identities (we provide a â€˜birdseyeâ€™
view of the commutativities that we require, as (29) is unambiguous about how
the 2-cells Î¹, Î´, Ïƒ, Ç«, Ï‰ can be composed):
=
Î´
Î´â€²
Ç«
Ç«
Î¹
=
Ïƒ
Ïƒâ€²
Ï‰
Ç«
Î¹
and
;
(30)
Remark 3.13. Interestingly enough, when it is spelled out in the case when B
has a single 0-cell, this notion does not reduce to Remark 1.2, as an intertwiner
between a Mealy machine (E, d, s)I,O and another (Eâ€², dâ€², sâ€²)Iâ€²,Oâ€² consists of a
pair of objects U, V âˆˆK, such that
ic1) there exist morphisms Î¹ : Iâ€²âŠ—U â†’V âŠ—I, Ç« : Eâ€²âŠ—U â†’V âŠ—E, Ï‰ : Oâ€²âŠ—U â†’
V âŠ—O;
ic2) the following two identities hold:
Ç« â—¦(dâ€² âŠ—U) = (V âŠ—d) â—¦(Ç« âŠ—I) â—¦(Eâ€² âŠ—Î¹)
Ï‰ â—¦(sâ€² âŠ—U) = (V âŠ—s) â—¦(Ç« âŠ—I) â—¦(Eâ€² âŠ—Î¹)
In the single-object case, this notion does not trivialise in any obvious way,
and â€“in stark contrast with the notion of morphism of automata given in (1.2)â€“
intertwiners between machines support a notion of higher morphisms even in
the monoidal case.
Deï¬nition 3.14 (2-cell between machines). In the same notation of Deï¬ni-
tion 3.12, let (u, v), (uâ€², vâ€²) : (e, Î´, Ïƒ) â†¬(eâ€², Î´â€², Ïƒâ€²) be two parallel intertwiners
between bicategorical Mealy machines; a 2-cell (Ï•, Ïˆ) : (u, v) â‡’(uâ€², vâ€²) consists
of a pair of 2-cells Ï• : u â‡’uâ€², Ïˆ : v â‡’vâ€² such that the following identities hold
true:
Î¹
Ï•
Î¹
Ï•
=
Ç«
Ï•
Ç«
Ïˆ
=
Ï‰
Ï•
Ï‰
Ïˆ
=
(31)
16

Remark 3.15. When it is specialised to the monoidal case, Deï¬nition 3.14
yields the following notion: a 2-cell (f, g) : (U, V ) â‡’(U â€², V â€²) as in Remark 3.13
consists of a pair of morphisms f : U â†’U â€² and g : V â†’V â€² subject to the
conditions that the following two squares commute:
Eâ€² âŠ—Iâ€² âŠ—U
dâ€²âŠ—U
/
Eâ€²âŠ—Iâ€²âŠ—f

Eâ€² âŠ—U
Eâ€²âŠ—f

V âŠ—E âŠ—I
V âŠ—d
/
gâŠ—EâŠ—I

V âŠ—E
gâŠ—E

Eâ€² âŠ—Iâ€² âŠ—U â€²
dâ€²âŠ—Uâ€² / Eâ€² âŠ—U â€²
V â€² âŠ—E âŠ—I
V â€²âŠ—d
/ V â€² âŠ—E
(32)
Intuitively speaking, in this particular case, the machine 2-cells correspond to
pairs (f, g) of K-morphisms such that both pairs (Eâ€² âŠ—Iâ€² âŠ—f, Eâ€² âŠ—f) and
(g âŠ—E âŠ—I, g âŠ—E) form morphisms in the arrow category of K.
Remark 3.16. Let B be a bicategory; in [43] the authors exploit the universal
property of a bicategory â„¦B = Psd(N, B) as the category of pseudofunctors, lax
natural transformations and modiï¬cations with domain the monoid of natural
numbers, regarded as a single object category. The typical object of â„¦B is an
endomorphism i : A â†’A of an object A âˆˆB, and the typical 1-cell consists of
a lax commutative square
A
/

âœâœâœâœ|
A

B
/ B.
(33)
This presentation begs the natural question of whether there is a tautological
functor MlyB â†’â„¦B given by â€˜projectionâ€™, sending (i, o; (e, Î´, Ïƒ)) into i; the
answer is clearly aï¬ƒrmative, and in fact such functors mates to a unique 2-
functor N âŠ MlyB â†’B under the isomorphism given by Gray tensor product
[30]; this somehow preserves the intuition (cf. [65, Â§1]) of â„¦B as a category of
â€˜lax dynamical systemsâ€™.
4. Conclusions
We sketch some directions for future research.
Conjecture 4.1. Let T be a monad on Set, and V a quantale [24, Ch. 2];
we can deï¬ne the locally thin bicategory (T, V)-Pr of as in [35, Ch. III] where
1-cells a : A
Tâ‡B are (T, V)-relations, i.e. V-functors a : T A Ã— B â†’V for a
ï¬xed lax extension Ë†T : V-Pr of â†’V-Pr of of T to V-Pr of. In each of these
bicategories, we can interpret our Construction 3.7 and adapt Example 3.10,
considering the expression for Ranqr. For suitable choices of the pair (T, V), in-
side (T, V)-Pr of, one can recognise the categories of topological spaces, approach
spaces [52], metric and ultrametric, closure spaces. . . as the (T, V)-categories of
[35, Â§III.1.6]. We conjecture that when instantiated in (T, V)-Pr of, Equation 28
17

yields a 2-categorical way to look at topological, metric and loosely speaking
â€˜fuzzyâ€™ approaches to automata theory.
Conjecture 4.2. From Example 3.9 and 3.10 we suspect that the â€˜non-deter-
minism via Kleisli categoryâ€™ approach of [33] can be carried over for the presheaf
construction on Cat and its Kleisli bicategory Pr of: if automata (classically
intended) in the Kleisli category of the powerset monad are nondeterministic
automata in Set, bicategorical automata in the Kleisli bicategory of the presheaf
construction (cf.
[25]) are nondeterministic bicategorical automata: passing
from Example 3.9 to Example 3.10 accounts for a form of non-determinism.
The exciting conjecture here is that one might be able to address nonde-
terministic bicategorical automata in B as deterministic bicategorical automata
in a proarrow equipment [60, 69, 70] for B. The well-established apparatus of
formal category theory could then elucidate classical constructions like minimi-
sation, behaviour, and bisimulation by putting them in the bigger conceptual
framework arising from Deï¬nition 3.3, Deï¬nition 3.4.
Conjecture 4.3. We have been left with two questions about the adjunction
we outline in Theorem 2.18:
â€¢ is the adjunction MlySet â‡†Mlyâ™­
Set 2-monadic? In other words, can one
recognise fugal Mealy machines as the algebras for the 2-monad MlySet
(
)â™­
âˆ’âˆ’âˆ’â†’
Mlyâ™­
Set â†’MlySet?
â€¢ if Mlyâ™­
Set or Macs are categories with feedback in the sense of [44, 2.6], it
is the case that the functors MlySet â†’Mlyâ™­
Set and Î“ can be characterised
more swiftly through the universal property of MlySet = Circ(Set, Ã—) to
be the free category with feedback over (Set, Ã—); in light of the results
expounded in [50, Â§2.4 and Â§3] that characterise many free categories with
feedback as categories of spans, it seems reasonable to conjecture that also
Mac and Macs are categories with feedback.
References
[1] J. AdÂ´amek, H. Herrlich, and G.E. Strecker. Abstract and concrete cate-
gories: the Joy of cats, volume 17 of Reprints in Theory and Applications
of Categories. Theory and Applications of Categories, 2006. Available on-
line at http://www.tac.mta.ca/tac/reprints/articles/17/tr17.pdf.
[2] J. AdÂ´amek. Realization theory for automata in categories. Journal of Pure
and Applied Algebra, 9:281â€“296, 1977.
[3] J. AdÂ´amek and V. TrnkovÂ´a. Automata and Algebras in Categories. Kluwer,
1990.
[4] B. Ahrens and P. L. Lumsdaine. Displayed Categories. Logical Methods in
Computer Science, Volume 15, Issue 1, March 2019.
18

[5] M.A. Arbib and E.G. Manes. Adjoint machines, state-behavior machines,
and duality. Journal of Pure and Applied Algebra, 6(3):313â€“344, 1975.
[6] M.A. Arbib and E.G. Manes. A categoristâ€™s view of automata and sys-
tems. In Lecture Notes in Computer Science, pages 51â€“64. Springer Berlin
Heidelberg, 1975.
[7] M.A. Arbib and E.G. Manes. Fuzzy machines in a category. Bulletin of
the Australian Mathematical Society, 13(2):169â€“210, 1975.
[8] M.A. Arbib and E.G. Manes. Machines in a category. Journal of Pure and
Applied Algebra, 19:9â€“20, December 1980.
[9] E.S. Bainbridge. A uniï¬ed minimal realization theory, with duality, for
machines in a hyperdoctrine. In Technical Report. Computer and Commu-
nication Sciences Department, University of Michigan, 1972.
[10] E.S. Bainbridge. Addressed machines and duality. In Ernest Gene Manes,
editor, Category Theory Applied to Computation and Control, pages 93â€“98,
Berlin, Heidelberg, 1975. Springer Berlin Heidelberg.
[11] R. Betti and S. Kasangian.
A quasi-universal realization of automata.
Universit`a degli Studi di Trieste. Dipartimento di Scienze Matematiche,
1981.
[12] R. Betti and S. Kasangian. Una propriet`a del comportamento degli au-
tomi completi. Universit`a degli Studi di Trieste. Dipartimento di Scienze
Matematiche, 1982.
[13] G. Boccali, A. Laretto, F. Loregian, and S. Luneia.
Completeness
for categories of generalized automata.
In preparation. Draft available
at http://tetrapharmakon.github.io/stuff/completeness.pdf, mar
2023.
[14] R Brown. Topology and groupoids. www.groupoids.org, rev., updated, and
expanded version edition, 2006.
[15] E. Burroni. Lois distributives. applications aux automates stochastiques.
Theory and Applications of Categories, 22:199â€“221, 2009.
[16] J. BÂ´enabou and T. Streicher. Distributors at work. Lecture notes written
by Thomas Streicher, 2000.
[17] G.L. Cattani and G. Winskel. Profunctors, open maps and bisimulation.
Mathematical Structures in Computer Science, 15(03):553â€“614, 2005.
[18] T. Colcombet and D. Petrisan. Automata Minimization: a Functorial Ap-
proach. In 7th Conference on Algebra and Coalgebra in Computer Science
(CALCO 2017), volume 72 of Leibniz International Proceedings in Infor-
matics (LIPIcs), pages 8:1â€“8:16, Dagstuhl, Germany, 2017.
19

[19] P.R. Dâ€™Argenio and J.-P. Katoen. A theory of stochastic systems part i:
Stochastic automata. Information and Computation, 203(1):1â€“38, Novem-
ber 2005.
[20] M. Droste, W. Kuich, and H. Vogler, editors. Handbook of Weighted Au-
tomata. Springer Berlin Heidelberg, 2009.
[21] H. Ehrig, K.-D. Kiermeier, H.-J. Kreowski, and W. KÂ¨uhnel.
Universal
theory of automata. A categorical approach.
[22] S. Eilenberg. Automata, Languages and Machines, volume A. Academic
Press, New York, 1974.
[23] S. Eilenberg and J.B. Wright. Automata in general algebras. Information
and Control, 11(4):452â€“470, October 1967.
[24] P. Eklund, J. GutiÂ´errez GarciÂ´a, U. HÂ¨ohle, and J. Kortelainen. Semigroups
in Complete Lattices. Springer International Publishing, 2018.
[25] M. Fiore, N. Gambino, M. Hyland, and G. Winskel. Relative pseudomon-
ads, kleisli bicategories, and substitution monoidal structures.
Selecta
Mathematica, 24(3):2791â€“2830, November 2017.
[26] T.M. Fiore. Pseudo Limits, Biadjoints, And Pseudo Algebras: Categorical
Foundations of Conformal Field Theory.
Memoirs AMS 860. American
Mathematical Society, 2006.
[27] J.A. Goguen. Realisation is universal. Mathematical System Theory, 6(4),
1973.
[28] J.A. Goguen. Discrete-time machines in closed monoidal categories. I. Jour-
nal of Computer and System Sciences, 10(1):1â€“43, February 1975.
[29] J.A. Goguen, J. W. Thatcher, E. G. Wagner, and J. B. Wright. Factor-
izations, congruences, and the decomposition of automata and systems. In
Lecture Notes in Computer Science, pages 33â€“45. Springer Berlin Heidel-
berg, 1975.
[30] J.W. Gray.
Formal Category Theory:
Adjointness for 2-Categories.
Springer Berlin Heidelberg, 1974.
[31] R. Guitart.
Remarques sur les machines et les structures.
Cahiers de
Topologie et GÂ´eomÂ´etrie Diï¬€Â´erentielle CatÂ´egoriques, 15:113â€“144, 1974.
[32] R. Guitart. Des machines aux bimodules. Univ. Paris 7, apr 1978.
[33] R. Guitart.
Tenseurs et machines.
Cahiers de topologie et gÂ´eomÂ´etrie
diï¬€Â´erentielle, 21(1):5â€“62, 1980.
[34] R. Guitart and L. Van den Bril.
DÂ´ecompositions et Lax-complÂ´etions.
Cahiers de topologie et gÂ´eomÂ´etrie diï¬€Â´erentielle, 18(4):333â€“407, 1977.
20

[35] D. Hofmann, G.J. Seal, and W. Tholen. Monoidal Topology: A Categor-
ical Approach to Order, Metric, and Topology, volume 153.
Cambridge
University Press, 2014.
[36] B. Jacobs. Categorical Logic and Type Theory.
Number 141 in SLFM.
Elsevier, 1999.
[37] B. Jacobs.
A bialgebraic review of deterministic automata, regular ex-
pressions and languages. In Algebra, Meaning, and Computation, pages
375â€“404. Springer Berlin Heidelberg, 2006.
[38] B. Jacobs. New directions in categorical logic, for classical, probabilistic
and quantum logic. Logical Methods in Computer Science, 11(3):76, 2015.
Id/No 24.
[39] B. Jacobs. Introduction to Coalgebra: Towards Mathematics of States and
Observation. Cambridge Tracts in Theoretical Computer Science. Cam-
bridge University Press, 2016.
[40] M. B. Justesen. Bikategorien af profunktorer. Naturvidenskabelig embed-
seksamen, Aarhus University, 1968.
[41] S. Kasangian, G.M. Kelly, and F. Rossi. Coï¬brations and the realization of
non-deterministic automata. Cahiers de topologie et gÂ´eomÂ´etrie diï¬€Â´erentielle
catÂ´egoriques, 24(1):23â€“46, 1983.
[42] S. Kasangian and R. Rosebrugh.
Glueing enriched modules and com-
position of automata.
Cahiers de topologie et gÂ´eomÂ´etrie diï¬€Â´erentielle
catÂ´egoriques, 31(4):283â€“290, 1990.
[43] P. Katis, N. Sabadini, and R.F.C. Walters. Bicategories of processes. Jour-
nal of Pure and Applied Algebra, 115(2):141â€“178, February 1997.
[44] P. Katis, N. Sabadini, and R.F.C. Walters. Feedback, trace and ï¬xed-point
semantics. RAIRO - Theoretical Informatics and Applications - Informa-
tique ThÂ´eorique et Applications, 36(2):181â€“194, 2002.
[45] G.M. Kelly. A uniï¬ed treatment of transï¬nite constructions for free alge-
bras, free monoids, colimits, associated sheaves, and so on. Bulletin of the
Australian Mathematical Society, 22(01):1â€“83, 1980.
[46] A. Kock. Limit monads in categories. The University of Chicago, 1967.
[47] A. Kock. Closed categories generated by commutative monads. J. Austral.
Math. Soc., 12:405â€“424, 1971.
[48] A. Kock. Strong functors and monoidal monads. Archiv der Mathematik,
23(1):113â€“120, 1972.
[49] S. Lack. Note on the construction of free monoids. Applied Categorical
Structures, 18(1):17â€“29, October 2008.
21

[50] E. Di Lavore, A. Gianola, M. RomÂ´an, N. Sabadini, and P. SobociÂ´nski. A
canonical algebra of open transition systems. In Gwen SalaÂ¨un and Anton
Wijs, editors, Formal Aspects of Component Software - 17th International
Conference, FACS 2021, Virtual Event, October 28-29, 2021, Proceedings,
volume 13077 of Lecture Notes in Computer Science, pages 63â€“81. Springer,
2021.
[51] F. Loregian. Coend Calculus, volume 468 of London Mathematical Society
Lecture Note Series. Cambridge University Press, ï¬rst edition, jul 2021.
ISBN 9781108746120.
[52] R. Lowen. Approach Spaces: The Missing Link in the Topology-uniformity-
metric Triad. Oxford mathematical monographs. Clarendon Press, 1997.
[53] J. Meseguer and U. Montanari. Petri nets are monoids. Information and
Computation, 88(2):105â€“155, October 1990.
[54] J. Meseguer and I. Sols. Automata in semimodule categories. In Lecture
Notes in Computer Science, pages 193â€“198. Springer Berlin Heidelberg,
1975.
[55] G. NaudÂ´e. On the adjoint situations between behaviour and realization.
Quaestiones Mathematicae, 2:245â€“267, 1977.
[56] G. NaudÂ´e. Universal realization. Journal of Computer and System Sciences,
19(3):277â€“289, 1979.
[57] P. Perrone and W. Tholen. Kan extensions are partial colimits. Applied
Categorical Structures, 30(4):685â€“753, January 2022.
[58] I. Pohl and M.A. Arbib. Theories of abstract automata. Mathematics of
Computation, 24(111):760, jul 1970.
[59] R. Rosebrugh, N. Sabadini, and R.F.C. Walters. Minimal realization in
bicategories of automata. Mathematical Structures in Computer Science,
8(2):93â€“116, 1998.
[60] R. Rosebrugh and R.J. Wood. Proarrows and coï¬brations. Journal of Pure
and Applied Algebra, 53(3):271â€“296, 1988.
[61] J.M. Rutten. Universal coalgebra: a theory of systems. Theoretical Com-
puter Science, 249(1):3â€“80, October 2000.
[62] S. Singh and S.P. Tiwari. On the category of L-fuzzy automata, coalgebras
and dialgebras. Fuzzy Sets and Systems, 420:1â€“28, September 2021.
[63] R. Street. Fibrations and Yoneda lemma in a 2-category. In G.M. Kelly,
editor, Proceedings Sydney Category Theory Seminar 1972/1973, volume
420 of Lecture Notes in Mathematics, pages 104â€“133. Springer, 1974.
22

[64] R. Street. Fibrations in bicategories. Cahiers de topologie et gÂ´eomÂ´etrie
diï¬€Â´erentielle catÂ´egoriques, 21(2):111â€“160, 1980.
[65] M. Tierney.
Categorical Constructions in Stable Homotopy Theory.
Springer Berlin Heidelberg, 1969.
[66] Y. Venema. Automata and ï¬xed point logic: A coalgebraic perspective.
Information and Computation, 204(4):637â€“678, April 2006.
[67] VV.AA. Fugal: deï¬nition & meaning.
[68] R.F.C. Walters. A note on context-free languages. Journal of Pure and
Applied Algebra, 62(2):199â€“203, December 1989.
[69] R.J. Wood.
Abstract pro arrows I.
Cahiers de topologie et gÂ´eomÂ´etrie
diï¬€Â´erentielle, 23(3):279â€“290, 1982.
[70] R.J. Wood. Proarrows II. Cahiers de Topologie et GÂ´eomÂ´etrie Diï¬€Â´erentielle
CatÂ´egoriques, 26(2):135â€“168, 1985.
Appendix A. Proofs
Proof of Lemma 2.13. In order to prove that the assignment s 7â†’sâ™­is well
deï¬ned in the set of fugal automata, we proceed by induction on the length of
a string â„“. We have to prove that
sâ™­(e, â„“++ as) = sâ™­(e, â„“) ++ sâ™­(dâˆ—(e, â„“), as)
(A.1)
The base case â„“= [ ] is evidently true, so suppose that â„“= x :: xs is not empty
and the claim is true for every choice of a shorter xs: then,
sâ™­(e, (x :: xs) ++ as) = sâ™­(e, (x :: xs) ++ as)
= sâ™­(e, x :: (xs ++ as))
= s(e, x) :: sâ™­(d(e, x), xs ++ as)
= s(e, x) ::
 sâ™­(d(e, x), xs) ++ sâ™­(dâˆ—(e, xs), as)

=
 s(e, x) :: sâ™­(d(e, x), xs)

++ sâ™­(d(x, dâˆ—(e, xs)), as)
= sâ™­(e, x :: xs) ++ sâ™­(dâˆ—(e, x :: xs), as)
= sâ™­(e, â„“) ++ sâ™­(dâˆ—(e, â„“), as).
We now have to show that any 2-cell f : (E, d, s) â†’(F, c, t) is in fact a 2-cell
(E, dâˆ—, sâ™­) â†’(F, câˆ—, tâ™­). This can be done by induction as well, with completely
similar reasoning.
Proof of Lemma 2.16. We have to prove that
(s2 â™¦s1)â™­= sâ™­
2 â™¦sâ™­
1.
(A.2)
23

The two functions coincide on the empty list by deï¬nition; hence, let â„“= a :: as
be a nonempty list and (e, f) âˆˆE Ã— F a generic element. The right-hand side
of the equation is
(sâ™­
2 â™¦sâ™­
1)((e, f), a :: as) = sâ™­
2(f, sâ™­
1(e, a :: as))
= sâ™­
2
 f, s1(e, a) :: sâ™­
1(d1(e, a), as)

= s2(f, s1(e, a)) :: sâ™­
2(d2(f, s1(e, a)), sâ™­
1(d1(e, a), as))
= (s2 â™¦s1)((e, f), a) :: (s2 â™¦s1)â™­((d2 â™¦d1)((e, f), a), as)
which concludes the proof.
Proof of Theorem 2.17. Similarly to Lemma 2.16, we have to prove that dâˆ—
2 â™¦
dâˆ—
1 = (d2 â™¦d1)âˆ—whenever d2, d1 are two dynamic maps of composable Mealy
machines âŸ¨s1, d1âŸ©: EÃ—M â†’N Ã—E and âŸ¨s2, d2âŸ©: F Ã—N â†’P Ã—F. This, together
with Lemma 2.16, will establish functoriality on 1-cells of (
)â™­. Functoriality
on 2-cells is very easy to establish. For what concerns Î , the proof amounts to
showing that the composition of (fugal) Mealy machines gets mapped into the
composition of spans in Macs; this can be checked with ease and follows from
the fact that the translation category of the action d2 â™¦d1 as deï¬ned in (7) has
the universal property of the pullback Z in
Z
"â‹
â‹
â‹
â‹
|â‘ â‘ â‘ â‘ 
E[dâˆ—
1]
Î£1
"â‹
â‹
â‹
â‹
D1
{â‘ â‘ â‘ â‘ 
E[dâˆ—
2]
Î£2
#â‹
â‹
â‹
â‹
D2
|â‘ â‘ â‘ â‘ 
M
N
R.
(A.3)
This is a straightforward check, and it is also straightforward to see that the
composition of Î£2 with the right projection from Z coincides with the â€˜Sigmaâ€™
functor induced by s2 â™¦s1, which concludes the proof.
Proof of Theorem 2.18. It is worthwhile to recall what a biadjunction is
F : C
/
âŠ¥
D : G
o
(A.4)
if C, D are bicategories (cf. [26, Ch. 9]): for each two objects C, D we are given
an equivalence between hom-categories D(FC, D) â‰ƒC(C, GD), i.e. a pair of
functors H : D(FC, D) â‡†C(C, GD) : K whose composition in both directions
is isomorphic to the identity functor of the respective hom-category â€“and all
this depends naturally on C, D.
In order to prove this, letâ€™s ï¬x a set A and a monoid M, letâ€™s build functors
Mlyâ™­
Set(Aâˆ—, M)
H
/ MlySet(A, UM)
MlySet(A, UM)
K
/ Mlyâ™­
Set(Aâˆ—, M)
(A.5)
and prove that they form an equivalence of categories by explicitly showing that
24

HK and KH are isomorphic to the respective identities. Weâ€™ll often adopt the
convenient notation âŸ¨s, dâŸ©: E Ã— X â†’Y Ã— E for a Mealy machine of input X
and output Y .
â€¢ Let âŸ¨s, dâŸ©: E Ã— Aâˆ—â†’M Ã— E be a fugal Mealy machine; HâŸ¨s, dâŸ©is deï¬ned
as the composition
E Ã— A
EÃ—Î·A/ E Ã— Aâˆ—
âŸ¨s,dâŸ©/ M Ã— E
(A.6)
where Î·A : A â†’Aâˆ—is the unit of the free-forgetful adjunction between Set
and monoids. In simple terms, H acts â€˜restrictingâ€™ a fugal Mealy machine
to the set of generators of its input.
â€¢ Let âŸ¨s0, d0âŸ©: F Ã— A â†’UM Ã— F be any Mealy machine on Set, where
UM means that M is regarded as a mere set; KâŸ¨s0, d0âŸ©is deï¬ned as the
composition
F Ã— Aâˆ—âŸ¨s0,d0âŸ©â™­/ (UM)âˆ—Ã— F
ÎµÃ—F / M Ã— F
(A.7)
where Îµ : (UM)âˆ—â†’M is the counit of the free-forgetful adjunction be-
tween Set and monoids, and âŸ¨s0, d0âŸ©â™­is the fugal extension of Lemma 2.13.
The claim is now that the fugal Mealy machine KHâŸ¨s, dâŸ©coincides with âŸ¨s, dâŸ©,
and that the generic Mealy machine HKâŸ¨s0, d0âŸ©coincides with âŸ¨s0, d0âŸ©.
Both statements depend crucially on the following fact: if s : E Ã— M â†’N
satisï¬es Equation (14), then for all e âˆˆE the element s(1M, e) is idempotent in
N. In particular, if N is free on a set B, s(1M, e) = [ ] is the empty list, and
more in particular, for a generic Mealy machine âŸ¨s,
âŸ©the fugal extension sâ™­is
such that for all e âˆˆE, sâ™­([ ], e) = [ ].
Given this, observe that the Mealy machine HKâŸ¨s0, d0âŸ©coincides with âŸ¨sâ™­
0 â—¦
(F Ã—Î·A), dâˆ—
0 â—¦(F Ã—Î·A)âŸ©; now clearly the composition dâˆ—
0 â—¦(F Ã—Î·A) coincides with
d0 : F Ã— A â†’F and the two maps determine each other. As for sâ™­
0 â—¦(F Ã— Î·A),
we have that for all (f, a) âˆˆF Ã— A
sâ™­
0 â—¦(F Ã— Î·A)(f, a) = sâ™­
0(f, a :: [ ])
= s0(f, a) :: sâ™­
0(f, [ ])
= s0(f, a) :: [ ]
Reasoning similarly, one proves that the fugal Mealy machine KHâŸ¨s, dâŸ©has
components âŸ¨(sâ—¦(E Ã—Î·A))â™­, (dâ—¦(E Ã—Î·A))âˆ—âŸ©: again, since functions E Ã—A â†’E
correspond bijectively to monoid actions E Ã— Aâˆ—â†’E, the map (d â—¦(E Ã— Î·A))âˆ—
25

coincides with d; as for (s â—¦(E Ã— Î·A))â™­, we can argue by induction that
(s â—¦(E Ã— Î·A))â™­(e, [ ]) = [ ] = s(e, [ ])
(s â—¦(E Ã— Î·A))â™­(e, a :: as) = s(e, a) :: (s â—¦(E Ã— Î·A))â™­(d(a, e), as)
= s(e, a) :: s(d(a, e), as)
= s(e, a :: as)
where the last equality uses that s was fugal to start with. This concludes the
proof.
Proof of Proposition 3.8. The category P is in fact 2-discrete (it has no 2-cells)
and its objects and morphisms are arranged as follows:
1
0
y
o
x
o
z
/
t
/ 2
(A.8)
For lack of a better name, P is the generic double span.
The functors W, G are then constructed as follows:
â€¢ G : P â†’Cat is constant on objects at the category K(A, B), and chooses
the double span
K(A, B)
K(A, B)
id
o
id
o
â—¦i /
id
/ K(A, B);
(A.9)
â€¢ W : P â†’Cat chooses the double span
{0 â†’1}
{â™¥, â™ }
j
o
j
o
c0
/
c1
/ {0 â†’1}
(A.10)
where {â™¥, â™ } is a discrete category with two objects, j =
  â™¥7â†’0
â™ 7â†’1

, and ck
is constant at k âˆˆ{0, 1}.
Now, it is a matter of unwinding the deï¬nition of a natural transformation
Î± : W â‡’G to ï¬nd that we are provided with maps
{e, #} = Î±0 : W0 â†’K(A, B)
Ïƒ = Î±1 : W1 â†’K(A, B)
(A.11)
Î´ = Î±2 : W2 â†’K(A, B)
and with commutative diagrams arising from naturality as follows, if we agree
to label Î±0(â™¥) = e and Î±0(â™ ) = o, and we blur the distinction between Î±0 and
26

the embedding of its image {e, o} in K(A, B):
{e, o}
j
/
Î±0

{0 â†’1}
Î±1

{e, o}
c0
/
Î±0

{0 â†’1}
Î±2

{e, o}
c1
/
Î±0

{0 â†’1}
Î±2

K(A, B)
K(A, B)
K(A, B)
â—¦i / K(A, B)
K(A, B)
K(A, B)
(A.12)
Altogether, we have that these data yield a diagram of 2-cells
A
i
â‘¦â‘¦â‘¦â‘¦â‘¦â‘¦â‘¦â‘¦
e
â…
â…
â…
â…
â…
â…
â…
o

    <D
Ïƒ
A
e
/
â´â´â´â´+3
Î´
B
(A.13)
as in (21). Modiï¬cations between these natural transformations correspond to
suitable arrangements of 2-cells, in such a way that we recover the notion of
morphism of bicategorical Moore machine given in bmo2.
In case the output o is ï¬xed, we just constrain Î±0(â™ ) to be mapped in o and
modiï¬cations to be the identity at â™ .
For bicategorical Mealy machines, redeï¬ne Gx = Gz =
â—¦i and the rest of
the argument is unchanged.
27

