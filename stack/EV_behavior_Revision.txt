JAAMAS manuscript No.
(will be inserted by the editor)
Electric Vehicle Charging Strategy Study
and the Application on Charging Station Placement
Yanhai Xiong · Bo An · Sarit Kraus
Received: date / Accepted: date
Abstract Optimal placement of charging stations for electric vehicles (EVs) is critical
for providing convenient charging service to EV owners and promoting public accep-
tance of EVs. There has been a lot of work on EV charging station placement, yet EV
drivers’ charging strategy, which plays an important role in deciding charging stations’
performance, is missing. EV drivers make choice among charging stations according
to various factors, including the distance, the charging fare and queuing condition in
diﬀerent stations etc. In turn, some factors, like queuing condition, is greatly inﬂuenced
by EV drivers’ choices. As more EVs visit the same station, longer queuing duration
should be expected. This work ﬁrst proposes a behavior model to capture the deci-
sion making of EV drivers in choosing charging stations, based on which an optimal
charging station placement model is presented to minimize the social cost (deﬁned as
the congestion in charging stations suﬀered by all EV drivers). Through analyzing EV
drivers’ decision-making in the charging process, we propose a k−Level nested Quantal
Response Equilibrium charging behavior model inspired by Quantal Response Equilib-
rium model and level-k thinking model. We then design a set of user studies to simulate
charging scenarios and collect data from human players to learn the parameters of dif-
ferent behavior models. Experimental results show that our charging behavior model
can better capture the bounded rationality of human players in the charging activity
compared with state-of-the-art behavior models. Furthermore, to evaluate the proposed
charging behavior model, we formulate the charging station placement problem with
it and design an algorithm to solve the problem. It is shown that our approach obtains
placement with a signiﬁcantly better performance to diﬀerent extent, especially when
the budget is limited and relatively low.
Keywords Electric vehicle · Charging strategy · Game theory · Facility placement
Yanhai Xiong
Dartmouth College, Hanover NH, USA
E-mail: yanhai.xiong@dartmouth.edu
Bo An
Nanyang Technological University, Singapore
Sarit Kraus
Bar-Ilan University, Israel

2
Yanhai Xiong et al.
1 Introduction
Electric vehicles (EVs) are attracting growing interest from the public in recent years.
Many countries have started investing on EVs to mitigate the shortage of fossil fuels
and the serious air pollution caused by traditional combustion vehicles. A critical issue
that limits the promotion of EVs is their limited battery capacity, which brings mileage
anxiety for drivers. Consequently, the EV charging stations, which can support EVs
with fast and convenient charging (between 20 to 30 minutes, around 12 times faster
than charging with domestic electricity [1]) is important for the successful boosting
of EVs. With integrated network of charging stations, EV drivers can select the most
suitable and convenient one to use according to their preference. Such facility support
would increase the willingness of the public to accept EVs. On the one hand, character-
istics of charging stations (e.g., the location and size) inﬂuence the charging behavior
of EV drivers; in turn, the choices of EV drivers aﬀect the performance of charging
stations (e.g., the length of the queue). Thus, it is important to study the interrelation-
ship between EV drivers’ charging behavior and the performance of charging stations,
which should be furthermore considered in the planning and construction process of
charging stations.
While there has been a number of studies [2–5] on Charging Station Placement
Problems (CSPP), only a few of them [2,5] take into consideration the inﬂuence of EV
drivers’ charging behavior. Moreover, among a few studies that mention EV drivers
during solving CSPP, their behavior models are based on rather simple assumptions.
There is lack of comprehensive study of EV drivers’ preference over diﬀerent factors
and/or they assume that EV drivers are fully rational. Although there are some other
studies on EV drivers’ charging behavior or patterns without considering the charging
station placement problem [6–9], they focus on statistics of their charging time, fre-
quency and peak demand etc. None of them have studied the decision making process
of EV drivers about choosing charging stations in the charging process.
In this paper, we propose a realistic k-Level nested Quantal Response Equilibrium
(k-Level QRE) charging behavior model, which is the ﬁrst contribution of this work.
In the proposed model, with diﬀerent levels of rationality, EV drivers try to minimize
the charging cost and compete with each other over limited resources for charging. Our
k-Level QRE charging behavior model is inspired by the QRE model [10] and level-k
thinking model [11]. To the best of our knowledge, we are the ﬁrst to study EV drivers’
speciﬁc charging behavior.
Our second contribution is that we formulate the charging station placement prob-
lem with the k-Level QRE charging behavior model and design an algorithm to solve
the complex optimization problem. We utilize the approximate derivative and design
a gradient descent based approach.
The third contribution of this work is that we design a set of simulations of charg-
ing scenarios and collect data from human players to learn the parameters of different
behavior models and compare the ﬁtting results of them. The comparison result proves
that our proposed model can better capture the charging behavior of EV drivers.
The last contribution is that we conduct experimental evaluations to prove the
eﬀectiveness of employing the k-Level QRE charging behavior model for CSPP. We
compare it with benchmarks with other behavior models. It is shown that our ap-
proach for placement signiﬁcantly outperforms the benchmarks by decreasing the EV
drivers’ queuing duration to diﬀerent extent, especially when the budget is limited and
relatively low.

Electric Vehicle Charging Strategy Study
3
2 Related Work
Due to the rising attention to environment-friendly energy usage in transportation area,
electric vehicle (EV) and its charging techniques have been extensively researched in
recent years [12–14]. Meanwhile, to support the introduction of EVs, the charging
station placement problem (CSPP) has also been widely studied [15,16,3,17–20,4,
21–24]. They focus on diﬀerent aspects, including the charging station coverage, the
cooperation with power grid, and the travel cost of EV drivers to access the charging
stations etc., to optimize the location and/or size of charging stations. Nevertheless,
they lack enough attention on the inﬂuence from the participating EV drivers on the
performance of the charging stations. Among a few studies that consider EV drivers’
charging strategies, He et al. [2] use a multi-nomial logit model to model EV drivers’
charging route distribution. However, they fail to explain why the drivers’ behavior
would form the distribution and how to decide the parameters in the logit model.
Xiong et al. [5,25] assume that the drivers are fully rational in the charging game and
would form Nash equilibrium in choosing charging stations, which is usually impractical
in real-world scenarios.
While perfect rationality has been extensively studied and used to model players’
decision-making in congestion games [26,27], it is not the best solution for the charging
game that we want to study. Nash equilibrium (NE) in a game is deﬁned as the state
where no player can improve his/her utility by unilaterally changing his/her own deci-
sion. While the number of players goes to inﬁnity, NE converges to the Wardrop user
equilibrium (UE), i.e., whichever choice used by the players has the same and maxi-
mum utility. However, the assumptions in perfect rationality are usually impractical
in reality due to (1) players’ lack of accurate information (on others’ behavior) and
(2) limited computational ability. Bounded rationality is ﬁrst proposed by Simon [28],
where players tend to seek a satisfactory solution rather than an optimal one. However,
the qualitative deﬁnition of “satisfactory solution" does not specify its distance from
the optimal solution and thus it is hard to quantitatively evaluate it for speciﬁc prob-
lems. Moreover, the existence of Bounded Rational User Equilibria (BRUE) makes the
solution space a non-convex set.
To model the bounded rationality of human players, Mckelvey and Palfrey [10]
propose quantal response equilibrium (QRE). QRE speciﬁes a set of mixed strategies
for each player while assuming a random perception error in utility estimation. A
typical QRE formation is the logit equilibrium based on a presumed error distribution,
i.e., i.i.d. Gumbel distribution.
pi =
eλui
P
j eλuj
Note that the subscript i denotes a speciﬁc choice, ui is the utility of choice i, and pi is
the probability of using choice i. However, the hyper-parameter — rationality level λ
deﬁned in QRE can be any value from 0 to ∞, and it may vary from case to case. This
character hinders the application of QRE to real-world problems. Some work (e.g. [29])
discovers that value of λ is largely dependent on speciﬁc problem structure, but there
is no further research on how it is inﬂuenced. Thus, the hyper-parameter λ is usually
carefully studied for speciﬁc problems and applications.
Human behavior has also been valued and extensively studied in the economic
research community. Prospect theory, a Nobel-prize-winning theory is a classic behavior
economic theory proposed by Daniel Kahneman and Amos Tversky [30]. As shown in

4
Yanhai Xiong et al.
Figure 1, people’s prospect utility for a certain decision is inﬂuenced by a reference
point, as well as the loss or gain versus it. Another behavior model, cognitive hierarchy
model (which is well known as level-k thinking model [11]) assumes that players act
with diﬀerent levels of rationality.
Fig. 1: The value function of prospect theory
Some existing work has focused on EV drivers’ charging behaviors or patterns.
Smart and Schey [6] collect and analyze data collected from an EV project. Their data
show some statistics of EV users, including the driving distance, charging frequency
and the place to charge (home or charging stations) etc. Franke and Krems [7] focus on
studying the charge level at which people recharge. Azadfar et al. [8] also present some
statistics of EV drivers’ recharging behavior such as driving distance between charging
activities etc. Quirós-Tortós et al. [9] use probability distribution functions to analyze
EV drivers’ start charging time and peak demand etc. to understand the interaction
between charging activities and the power grid. However, to the best of our knowledge,
there is no existing work studying EV drivers’ charging proﬁle and strategy.
In this work, we formulate the charging process of EV drivers as a charging game;
study and describe the bounded rationality of EV drivers in charging activities with a
k-Level QRE model (which is inspired by the QRE model and level-k thinking model);
and integrate the obtained realistic charging behavior model into the CSPP formulation
to improve the charging station performance.
3 Charging Game and Equilibria
In this section, we ﬁrst describe the EV charging scenario and model it as a charging
game. Then we discuss three kinds of diﬀerent equilibrium concepts for the charging
game, including two state-of-the-art equilibria and the k-Level QRE model proposed
in this work.
3.1 Charging Scenario and Charging Game Formulation
When EV drivers need to charge their EVs, they are usually faced with multiple choices,
where each is a charging station with some speciﬁc characteristics. These characteristics
may include the distance to the station, the charging fare to pay for charging and the

Electric Vehicle Charging Strategy Study
5
Notation
Meaning
N = {1, ..., n}
the set of zones; if there is a charging station in zone i, it is
named the ith charging station
τ
the portion of EV owners that use charging stations
xi
the number of chargers in the ith charging station; xi = 0 means
there is no charging station in zone i
Ei
the number of EV owners in zone i; they are treated as identical
group i players of the charging game
pi = {pij}
the mixed strategy of EV owners in zone i, where pij is the
probability they charge in the jth charging station
P = {pi}
the strategy proﬁle of all EV owners
P⋆
An equilibrium strategy proﬁle
P⋆
−i
An equilibrium strategy proﬁle of all players except group i play-
ers
Ci
the charging cost of all EV owners in zone i
cij
the unit charging cost for EV owners in zone i to charge in the
jth charging station
tij, dij
the travel time and distance between zone i and the jth charging
station
fj
the charging fare of the jth charging station
qj
the queuing duration in the jth charging station, which is a
function of the strategy proﬁle P
µ
the time used to charge one EV
yj
the number of EV owners that use the jth charging station under
strategy proﬁle P, yj = P
i Eiτpij
wt, wd, wf, wq
the weights of travel time, distance, charging fare and queuing
duration in function cij
λ
the rationality parameter of QRE and k-Level QRE models
γl
the proportion of level-l players in the k-Level QRE model,
Pk
l=1 γl = 1
pl
i = {pl
ij}
the strategy of level-l players in zone i
SC
the social cost
B
the budget
S = {x0}
the set of initial searching points, each of which is a valid place-
ment
NI
the maximum number of iterations of Algorithm 1
NS
the maximum searching step size (integer) of Algorithm 1
Table 1: Notations
queuing condition in the station etc. Speciﬁcally, considering the queuing condition,
it is straightforward to see that more people selecting the same station would lead to
longer queuing duration. In a sense, people are competing with each other for the re-
source — the charging stations and they are self-interested in this process. Therefore,
we deﬁne a charging game to model the interactions among them.
Let us ﬁrst take a look at the charging scenario. We consider the EV charging prob-
lem in such an environment. Assume that there is an EV driver population scattered in

6
Yanhai Xiong et al.
the city. According to the geographic condition, residential distribution and city plan,
the city can be divided into a set N = {1, ..., n} of zones1. Each zone i ∈N has Ei
residents that own EVs and a part τ ∈(0, 1) of them use charging stations instead of
home electricity to recharge their EVs. Suppose there is at most one charging station
in each zone i and we name it the ith charging station, whose size is xi (i.e., there are
xi chargers and at most xi EVs can be served in the meantime) and location is decided
by the government according to various factors (e.g., the land property and city plan-
ning requirement etc.)2. Then the EV charging problem is for each EV driver to make
decision about where to charge the EV. The charging game has following components.
– Player. The EV drivers are players of the charging game.
– Strategy, mixed strategy and strategy proﬁle. A strategy for a player is to use
one accessible charging station. For example, a player in zone i can charge in the
jth charging station. Considering that players in the same zone have the same ac-
cessibility to charging stations, we treat them as identical players. The EV drivers
in zone i are thus called group i players. We then focus on the mixed strategy
pi = {pij}, i.e., the strategy distribution of players in each group i, where pij is
the probability that players in zone i charge in the jth charging station. The strat-
egy proﬁle of the charging game is denoted by P = {pi}, i.e., the mixed strategy
of all groups.
– Cost. Considering that charging in diﬀerent charging stations bring the same utility
for EV drivers, i.e., having the EV recharged, we assume that EV drivers of each
group i only consider their cost Ci (details to be discussed later in this section)
when making decision in the charging process3.
– Equilibrium. Players are self-interested in the charging game, thus they are always
searching for better strategy to decrease the charging cost with their best ability.
An equilibrium strategy proﬁle P⋆is the stable state of the game where no player
has the incentive to unilaterally deviate from their current strategy.
We then discuss the cost deﬁnition in the charging game. Considering the charging
process, an EV driver needs to drive from home to the charging station, (probably)
queue in the charging station for some time and pay the charging fare. Thus, we decide
to include the following factors in the charging cost function4.
– Travel time tij: the time of driving between zone i and the jth charging station.
We assume that the travel time is similar for going to and coming back from the
charging station.
– Travel distance dij: the distance between zone i and the jth charging station.
1 This is inspired by the city plan of Singapore (http://www.propertyhub.com.sg/
singapore-district-guide.html). Based on the zoning assumption, residents in the same
zone are living relatively close. Although identifying the speciﬁc location and treating each of
them as a different player would be closer to the real-world scenario,
relatively unrealistic
for formulating and solving the optimization problem. Thus, we make the comprise and treat
them as a group of identical agents.
2 Readers might wonder why only one charging station is considered in one zone. The
reason is that in case there are multiple charging stations in one zone, we can always divide
the zone into a number of new zones, each with one charging station.
3 Under some circumstances, EV drivers might have different beneﬁts while charging their
EVs in different charging stations (e.g., getting access to other facilities). In that case, our
model can be extended by deducting the beneﬁt in the cost function.
4 We list the most common factors that inﬂuence EV drivers’ charging cost. While other
factors may make a diﬀerence in some special scenarios, the model can be extended accordingly.

Electric Vehicle Charging Strategy Study
7
– Charging fare fj: the money to pay in the jth charging station. We assume a
ﬁxed fare for all players that use the same charging station.
– Queuing duration qj(P): the time to wait in line in the jth charging station,
which depends on the size xi of the charging station and the number of EV drivers
yi = P
i Eiτpij that use it. Note that the queuing duration qj in the charging sta-
tion of zone j is decided by how many EV drivers use it. Thus it is a function of the
strategy proﬁle P. Similar to [25], we assume that all chargers to be deployed have
the same service ability, and each of them averagely takes µ minutes to recharge
one EV. The queuing duration qj for EV drivers in the jth charging station is
qj(P) = µyj
2xj
= µ P
i Eiτpij
2xj
(1)
A linear of aforementioned factors with corresponding weights is used to formulate
charging cost Ci.
Ci(P) = Eiτ
X
j
pijcij(P)
(2)
cij(P) = wttij + wddij + wffj + wqqj(P)
(3)
where qj(P), cij(P) and Ci(P) mean that the queuing duration qj and cost Ci are
functions of the strategy proﬁle P, and cij is the unit cost of charging in the jth
charging station.
3.2 Nash Equilibrium
Nash equilibrium is widely used in game theory. By assuming that players have the
knowledge of all other players’ strategies and are fully rational, the Nash equilibrium
describes the state where no player can decrease her charging cost via unilateral strat-
egy change. In the charging game, it means: if the jth charging station is used with
non-zero probability pij by group i players, there must be charging cost cij = minj′ cij′.
Otherwise, pij will decrease while pij⋆with j⋆= arg minj′ cij′ would increases. For-
mally, the Nash equilibrium P⋆can be denoted as Equation (4), which can further be
represented by Equation (5).
p⋆
i ∈arg min
pi Eiτ
X
j
pijcij(pi, P⋆
−i), ∀i ∈N
(4)
cij(P⋆) = min
j′ cij′(P⋆), if p⋆
ij > 0, ∀i ∈N
(5)
Note that P⋆
−i denotes the equilibrium strategy proﬁle of all players except group i
players.
3.3 QRE Model
With the charging cost function in Equation (3), we can denote the selection distribu-
tion of players according to Quantal Response Equilibrium (QRE) model with Equation
(6).
pij =
e−λcij(P)
P
j′ e−λcij′ (P)
(6)

8
Yanhai Xiong et al.
Note that λ is the rationality parameter of the QRE model. When λ →0, players tend
to be irrational and choose one charging station randomly; when λ →∞, players tend
to be rational and choose the option with the lowest cost. In this case, players are
actually using the Nash equilibrium.
3.4 k-Level QRE Model
A strong assumption in aforementioned QRE model is that players can form QRE
distribution P according to the actual charging cost cij(P). In practice, QRE is usually
employed when the cost for each strategy is a constant, which is diﬀerent from our
charging game, where the charging cost of a strategy is in turn a function of the
strategy distribution (as shown in Equation (3)). In other words, players can hardly
know cij(P) when they are making decision.
With respect to the above characteristic, we propose a k-Level nested Quantal
Response Equilibrium (in short, k−Level QRE) model to capture the decision making
of the EV drivers.
We assume that there are players with k diﬀerent levels of rationality, which means
players from diﬀerent levels perceive the unknown charging cost diﬀerently and make
distinct decisions.
Speciﬁcally, the level-1 players are the least rational players and
would form a QRE distribution according to their direct observation, i.e., the current
queuing duration that they observe. We denote the observable queuing duration for all
charging stations as q0 = {q0
1, ..., q0n}, where q0
j , j ∈N is for the jth charging station.
Then, level-1 players would form the following QRE distribution P1 with each
p1
ij =
e−λcij(q0)
P
j′ e−λcij′ (q0)
(7)
Consequently, level-2 players, as they are more intelligent and rational, would think
other players are in level-1, anticipate their choice distribution P1 and perceive the
queuing duration as q1(P1). Note that the queuing duration in charging stations de-
pends on the strategy proﬁle P1, thus it is a function of P1. The QRE distribution P2
formed by level-2 players is then presented with Equation (8).
p2
ij =
e−λcij(q1(P1))
P
j′ e−λcij′ (q1(P1))
(8)
Similarly, level-k players form QRE distribution Pk as Equation (9).
pk
ij =
e−λcij(qk−1(Pk−1))
P
j′ e−λcij′ (qk−1(Pk−1))
(9)
In Figure 2, we can see the illustration of k-Level QRE model’s structure while
k = 2.
We denote the portion of level-l players as γl. Then, the actual distribution P of
all players’ charging choices is decided by the distribution of players in each level and
the vector γ:
pij =
k
X
l=1
γlpl
ij
(10)
where Pk
l=1 γl = 1.

Electric Vehicle Charging Strategy Study
9
Fig. 2: The k-Level QRE model with k = 2
4 Charging Station Placement Problem Formulation and Algorithm
Based on the charging game definitions in the above section, we can then deﬁne the
Charging Station Placement Problem (CSPP). Actually, the CSPP is a problem to ﬁnd
the best charging station placement, i.e., vector x = {xi}, to optimize a pre-deﬁned
objective w.r.t. the charging game equilibrium state.
We use Singapore as a concrete example to demonstrate the process of formulating
and solving the CSPP. As we can see from Figure 3, Singapore city is a well-developed
metropolitan with the whole territory divided into a number of zones according to the
residential condition, geography and nature etc. We divide the island into a set N of
n zones for the CSPP, which is shown with broad lines on the map.
Fig. 3: Zonal division of a target area
We treat the government as the investor to construct the charging stations and they
aim to optimize the objective for peak hours, which is the most critic time period for

10
Yanhai Xiong et al.
city transportation. To decide the objective of the CSPP, we mainly take two factors
into consideration. (1) Congestion issue is a main concern for most big cities in the
world [31]. (2) The limited space and relatively long charging time for EVs would make
congestion a potential problem for charging stations. Thus, we deﬁne social cost SC as
the objective to optimize in the CSPP, which is the total queuing duration of all EV
drivers6, i.e., Equation (11).
SC =
X
i∈N
τEi
X
j
pijqj(P)
(11)
Meanwhile, a budget B is introduced to constrain the upper bound of investment
from the government, which is the total number of chargers that can be placed in all
charging stations. Then, the CSPP is to minimize SC by strategically deciding the
optimal charging station placement x = {xi} with respect to the EV drivers’ charging
behavior in the charging game.
Speciﬁcally, with our proposed k-Level QRE model, the CSPP can be formulated
as follows.
min
x
SC
(12)
s.t. (1) −(3), (7) −(10)
X
i∈N
xi ≤B, xi ∈N
(13)
The CSPP is an integer non-convex optimization problem, ﬁnding the global opti-
mum is NP-hard. The number of possible charging station placements is as large as nB,
so it is impossible to enumerate all solutions to ﬁnd the optimal one. Therefore, we pro-
pose an algorithm named MAGD (Algorithm 1) with techniques including multi-start
point searching, derivative approximation and gradient descent method to compute an
approximate solution.
MAGD solves the charging station placement problem with multiple start points,
with each of which, it iteratively ﬁnds the best local optimum. Firstly, we randomly
generate a set of start points S (Line 1), where each x0 ∈S represents a charging
station placement. The optimal object value is initialized as inﬁnity (Line 2). For each
start point x0, the algorithm use gradient decent method to search the corresponding
local minimal objective value O0
bj (Lines 3 to 19). We initialize O0
bj by setting x as
x0 and solve the relaxed CSPP (Line 4). In each of the NI iterations, for each integer
step size from the maximum NS (> 1) to 1, we ﬁrst set x as the current x0 (Line 7)
and solve the optimization problem to get the number of EV users in each charging
station, i.e., {yi} (Line 8), then compute the approximated gradient for each xi (Line
9). The vector x is then updated by increasing (resp. decreasing) step for the xi with
the minimal (resp. maximal) gradient (Lines 10 - 12). The objective for the updated x
is computed as Obj (Line 13), which is used to compare with the current local optimal
objective O0
bj. If Obj < O0
bj, both x0 and O0
bj will be updated and we go to next iter-
ation; otherwise, we would change step size. After NI iterations, we compare the local
minimal objective O0
bj of the start point with the O⋆
bj and update the current opti-
mal solution and objective if O0
bj < O⋆
bj. By increasing the number of start points and
6 The reason is that we think the most important factor is the congestion in charging station
for this placement problem. But our framework is able to be extended to include other factors.

Electric Vehicle Charging Strategy Study
11
expanding the searching space, the probability of reaching the global optimal solution
would be increased.
The complexity of the MAGD algorithm is O(2|S|NINSCrelax) where Crelax is
the complexity of the relaxed CSPP with ﬁxed variable x to compute the strategy
proﬁle P. With the k−Level QRE model, Crelax = O(k|P|), where |P| = P
i
P
j 1 is
the size of the strategy space. To ﬁnd the strategy proﬁle of the relaxed CSPP, we
start with computing the level-1 players’ strategy with the observable queuing dura-
tion (Equation (7)), with which the perceived queuing duration for the level-2 players
would be computed and used to compute the corresponding level-2 strategy proﬁle
(Equation (8)), and so forth. After getting the strategy proﬁle of players from all k
levels, we then use Equation (10) to compute the global strategy proﬁle P. Therefore,
the overall complexity of the MAGD algorithm is at most O(n2) when players in each
zone i would charge in any of the n charging stations.
Algorithm 1: MAGD - Multi-start Approximate Gradient Descent Algorithm
1 Generate S;
2 O⋆
bj ←∞;
3 for each x0 ∈S do
4
Compute O0
bj with x ←x0;
5
for Iter = 1 : NI do
6
for step = NS : −1 : 1 do
7
x ←x0;
8
Solve CSPP with ﬁxed x to get {yi};
9
▽x ←{
−step·y2
i
xi(xi+step)};
10
for i ∈N do
11
xi ←xi + step, if ▽xi = mini′∈N ▽xi′;
12
xi ←xi −step, if ▽xi = maxi′∈N ▽xi′;
13
Compute Obj with updated x;
14
if Obj < O0
bj then
15
x0 ←x;
16
O0
bj ←Obj;
17
Goto next Iter;
18
else
19
Goto next step;;
20
if O0
bj < O⋆
bj then
21
x⋆←x0;
22
O⋆
bj ←O0
bj;
23 return O⋆
bj and x⋆;

12
Yanhai Xiong et al.
5 User Study Design
To learn the charging cost function and the level of rationality of EV drivers, we design
a set of user studies to simulate the charging scenarios and collect data from human
players.
We present charging scenarios for players with abstracted information as shown in
Figure 47. The interface includes (1) a grey scale map as background, (2) the start
point8 marked with red circled S where EV drivers (players) stay, (3) the number
of EV drivers at the start point that will go for charging at the same time, (4) the
candidate charging stations marked with purple icons and named as CSi, i ∈{1, 2, ...},
(5) the charging fare in $ at each charging station circled near the corresponding
charging station, (6) the hint for queuing duration, (7) the charging routes from the
start point to each candidate charging station, along which the travel time and distance
are denoted in min and km respectively, and (8) a table with text information below
the map.
The travel time and the distance from the start point to each of the charging stations
are assumed to be constants. To visualize the travel speed in the charging route, inspired
by Google Maps, we use four colors to draw the travel routes (respectively representing
travel speed from fast to slow. All candidate charging stations are assumed to be located
beside a shopping center9. The EV drivers at the same start point will charge at the
same time, thus they would cause congestion in the charging stations. The EV drivers
in a charging station with x EV drivers choosing it would wait for x mins on average
before starting charging.
With all the information provided, a player is able to see the diﬀerence between
diﬀerent charging choices and then make his/her charging decision. For example, as
shown in Figure 4, if a player at the start point S chooses the charging station CS1,
meanwhile there are 12 other EV drivers that also select CS1, the player would travel
13 minutes, 9 kilometers, pay 1$ and queue 13 minutes before charging.
5.0.1 Environment Setting
To study the charging behavior of EV drivers, we design two diﬀerent charging scenario
settings {I1, I2} respectively with: (1) one start point and two candidate charging
stations (I1); and (2) one start point and three candidate charging stations (I2). For
each setting, we carefully design 6 scenarios with diﬀerent parameters. The basic idea
is to provide distinct scenarios to avoid over-ﬁtting. The total 12 charging scenarios
are separated into two groups {GA, GB}, each with 3 from I1 and another 3 from I2.
To decide the parameters in the charging scenarios, we ﬁrst randomly generate
1, 000 settings respectively for I1 and I2, each of which with travel time, distance,
7 The design of the game has been performed in several iterations with studies on human
players to ensure that they are aware of all the games’ parameters.
8 We design the charging games to capture the play behavior when competition exists in
the charging scenario by setting one start point but multiple EV drivers. Although there are
EV drivers from other start points in real-world scenarios, they form the equilibrium after
repeating charging activities in a long term. Setting a too complicated charging game would
make it unrealistic for players to ﬁt in a short time.
9 In real-world application, a charging station can be located in other positions. In the ex-
periments, we say that a charging station is next to a shopping center to provide a simulated
scenario for players.

Electric Vehicle Charging Strategy Study
13
Fig. 4: An example of user study interface
charging fare and the number of EVs all randomized from a given interval/set. Then
we use k-means clustering to class the settings into 6 clusters and select one from each
cluster in two steps as follows. Table 2 presents all settings got the 12 charging games.
1. Find the maximum dmax and minimum dmin distance between the settings’ pa-
rameter vectors in a group and the corresponding group center. Set the radius for
searching as 0.5 ∗dmax + 0.5 ∗dmin.
2. Randomly select a setting from the cluster in the circle with the cluster center and
distance radius.
5.0.2 Charging Game
Each invited human player is randomly directed to GA or GB. They are asked to make
a choice in each of the 6 diﬀerent scenarios for once.
We put the user studies on a virtual machine build on Microsoft Azure platform.
Players are invited to access the user studies via a link. They would ﬁrst see the
introduction with a video and text explanation, which clearly explain how the charging
scenarios are set and what decisions they are supposed to make. After acquiring the
preliminary information, players would see a toy example on the next page, which is
used to ensure that the participants have fully understood the user study. Until then
players would formally start the charging games.

14
Yanhai Xiong et al.
Table 2: Parameters of the 12 charging games (travel time t, distance d and charging
fare f respectively in min, km, $)
Game
CS1(t, d, f)
CS2
Game
CS1(t, d, f)
CS2
CS3
1
8, 6, 4
8, 6, 1
7
8, 7, 3
8, 8, 2
9, 8, 1
2
18, 6, 2
8, 6, 2
8
7, 6, 3
8, 7, 2
7, 7, 3
3
12, 5, 2
12, 12, 2
9
4, 3, 4
6, 3, 3
10, 8, 2
4
8, 5, 2
12, 12, 2
10
4, 3, 2
6, 3, 3
10, 8, 3
5
9, 5, 1
8, 6, 3
11
10, 8, 2
10, 9, 1
1, 1, 3
6
18, 7, 4
9, 10, 1
12
9, 8, 4
12, 9, 1
2, 1, 2
5.1 Model Fitting
We employ the Maximum Likelihood Estimation (MLE) to learn the parameters w.
For a charging scenario S with M records from the players, the logarithmic likelihood
of w is
log L(w|S) =
M
X
i=1
log pcs(i)(w)
(14)
where cs(i) is the charging station selected in the sample i. Assuming that there are
B charging stations (strategies) for the players and the number of players that choose
to use the jth is Mj, then we have P
j Mj = M and
log L(w|S) =
B
X
j=1
Mj log pj(w)
(15)
By substitute pj with k-Level QRE model, we have
log L(w|S) =
B
X
j=1
Mj log(
k
X
l=1
γlpl
j)
(16)
As we can see from above function, γ = {γl} is another set of unknown parameter.
Our approach is to enumerate the value of each γl within [0, 1] with interval 0.01, and
ﬁnd the best set.
In fact, we design a number of charging scenarios with diﬀerent environment set-
tings to study players’ charging behavior. Thus, we are maximizing the sum of the
logarithmic likelihood when learning the parameters. The function fmincon of Matlab
is used for the maximization.
max
w,γ log L(w) =
X
S
log L(w|S)
(17)
6 Experimental Result
We invite N = 50 players to participate the charging game, with 25 of them making
choices for charging scenarios in group GA and the rest for group GB. In this section,

Electric Vehicle Charging Strategy Study
15
we ﬁt the charging behavior models with results from charging games and discuss the
results.
For a charging scenario with M EVs set for the start point, the actual queuing
duration in a candidate charging station i with Ni players selecting it is calculated as
qi = M · Ni/N min.
We use Python language and PyOpt package to solve the electric vehicle charging
station placement optimization problem. We compare the result with (1) using QRE
and (2) an existing method from [32], which assumes EV owners form Nash equilibrium
in the charging game, i.e., the charging cost of each choice should be the same and
minimum if the choice is selected by any player.
6.1 Fitting Results of Charging Behavior Models
We ﬁt Nash equilibrium (“NE”) model (Equations (4) and (5)), QRE model (Equa-
tion (6)) and k-Level QRE (“k-LQRE”) models (Equation (10)) of different k values
(k ∈{1, 2, 3, 4}) with the experimental data collected from human players. Table 3
presents the ﬁtting errors’ mean and standard deviation for different behavior models.
MAE is the mean absolute error (∈[0, 1]) and smaller MAE value means better ﬁtting
performance. R2 is the mean squared error (∈(−∞, 1] for non-linear models). A R2
value closer to 1 means a better ﬁtted model. DKL — the Kullback-Leibler Divergence
is used to evaluate how different are two distributions. Smaller DKL means two dis-
tributions are more similar, i.e., the ﬁtted model is closer to the collected data. As we
can see, the R2 value for some of the models is negative, which is basically saying that
the mean of the data provides a better ﬁt to the outcomes than do the ﬁtted non-linear
function values [33]. Combining the ﬁtting metrics, we can see that the 3−Level QRE
model performs best. Since the 4−Level QRE model is quite close to the 3−Level one,
we further compare the result of Chi-square test on these two models. The null hypoth-
esis is that the charging strategy proﬁle follows the corresponding behavior model. It
is shown that the 3−Level QRE model has a larger p-value 0.96. Thus we select k = 3
as the best hyper-parameter for the k-Level QRE model in the charging game. The ex-
periments for charging station placement would be performed with the 3−Level QRE
model.
Table 4 shows the learnt parameters for different behavior models, where λ is the
rationality parameter when applicable and others are the weights for corresponding
factors. Table 5 demonstrates the proportion of players in each rationality level for the
k−Level QRE models. For example, when k = 3, the results show that 56% of players
are in level 1 and their charging decisions are made without considering others’ behav-
ior; 22% players think others are in level 1 and take into consideration their strategies;
and the rest are in level 3.
6.2 Charging Station Placement
As discussed in Section 4, we can divide Singapore into 23 zones. We present the exper-
imental results on Singapore in this section. We also test the scalability of our proposed
algorithm with synthetic data because we might need to apply the proposed approach
in bigger cities. In experiments with synthetic data, we increase the number of zones
from 20 to 200 with a step size of 20. It turns out that the run time of our approach

16
Yanhai Xiong et al.
Table 3: Learning results from charging games
Models\ Errors - mean(std)
MAE
R2
DKL
NE
0.147(0.063)
-5.452(17.444)
0.124(0.077)
QRE
0.062(0.030)
-0.189(3.366)
0.028(0.027)
1-LQRE
0.064(0.035)
-0.541(4.324)
0.033(0.034)
2-LQRE
0.052(0.033)
0.403(1.407)
0.023(0.025)
3-LQRE
0.048(0.036)
0.833(0.251)
0.017(0.014)
4-LQRE
0.052(0.035)
0.779(0.346)
0.017(0.020)
Table 4: Learning results from charging games
Models\ Params.
λ
wt
wd
wf
wq
NE
–
0.250
0.250
0.250
0.250
QRE
3.918
0.060
0.028
0.251
0.660
1-LQRE
0.997
0.135
0.058
0.556
0.251
2-LQRE
1.793
0.167
0.046
0.626
0.160
3-LQRE
1.808
0.199
0.006
0.619
0.176
4-LQRE
2.012
0.245
0.000
0.568
0.187
Table 5: Proportion of players in each rationality level
Models\ γ
1
2
3
4
1-LQRE
1
–
–
–
2-LQRE
0.8
0.2
–
–
3-LQRE
0.56
0.22
0.22
–
4-LQRE
0.19
0.00
0.53
0.28
increases with the problem size and the maximum run time of the problem with 200
zones is about 17 hours, which means the proposed approach can handle charging sta-
tion placement problems in cities as large as 10 times of Singapore. Therefore, we claim
that the proposed approach is applicable on real-world scenarios.
Especially, we test our approach with data of Singapore10. The main focus is to
compare the social cost of different placement plans while assuming that people ac-
tually follow the k-Level QRE charging behavior model. As presented in Table 6, we
compare with 4 benchmarks: (1) the existing work that assumes EV drivers follow
Nash equilibrium; (2) quantal response equilibrium; (3) randomized placement and (4)
demand-based plan that assign chargers to different zones proportionally according to
its number of EV drivers. As we can see from the table, our approach can decrease
the social cost to different extent comparing to all benchmarks, especially when the
resource is limited and the budget is relatively low.
10 Parameters
are
available
on
https://drive.google.com/open?id=1K6AYYA_
vq6NjYm1jJtSSjcsENwV1ZqdX

Electric Vehicle Charging Strategy Study
17
Table 6: Social cost comparison
SC \ Budget
300
400
500
600
3-Level QRE
6947.82
5256.62
4190.56
3523.95
NE
7625.75
5750.31
5001.71
3719.27
QRE
7604.78
5805.69
4462.38
3564.42
Randomized
8877.99
6451.17
5132.83
4249.91
Demand-based
7432.53
5545.14
4443.04
3705.98
Decreased cost VS. NE (%)
8.89
8.59
16.22
5.25
Decreased cost VS. QRE (%)
8.64
9.46
6.10
1.14
Decreased cost VS. Randomized (%)
21.74
18.52
18.36
17.08
Decreased cost VS. Demand-based (%)
6.52
5.20
5.68
4.91
7 Conclusion
In this work, we study and model the bounded rational charging behavior of electric
vehicle (EV) drivers and apply the behavior model in solving EV Charging Station
Placement problem (CSPP). There are several contributions of this work. (1) We pro-
pose a k-Level QRE charging behavior model based on the QRE model and the level-k
thinking model. The proposed model well captures the bounded rationality of EV
drivers in charging activities. (2) We design a series of user studies to simulate the
real-world charging scenarios and collect data from human players. Experimental re-
sults of ﬁtting diﬀerent behavior models based on the collected data show that our
behavior model outperforms state-of-the-art models. (3) The charging station place-
ment problem is formulated by considering the EV drivers’ bounded rational charging
behavior. An algorithm is designed to solve this complex integer non-convex optimiza-
tion problem. (4) To show the eﬃciency of the proposed charging behavior model,
we execute experiments on charging station placement to compare the expected social
cost of using diﬀerent behavior models. The results show that our model signiﬁcantly
decreases the social cost.
The EV charging behavior model can also be applied to
other related problems. For example, when charging stations have been constructed,
governors can use pricing as a method to incentivize the EV drivers’ charging decision.
References
1. A. Hess, F. Malandrino, M. B. Reinhardt, C. Casetti, K. A. Hummel, and J. M. Barceló-
Ordinas.
Optimal deployment of charging stations for electric vehicular networks.
In
Proceedings of the 1st workshop on Urban networking(UrbaNe), pages 1–6, 2012.
2. F. He, D. Wu, Y. Yin, and Y. Guan. Optimal deployment of public charging stations for
plug-in hybrid electric vehicles. Transportation Research Part B: Methodological, 47:87–
101, 2013.
3. Zhipeng Liu, Fushuan Wen, and Gerard Ledwich.
Optimal planning of electric-vehicle
charging stations in distribution systems.
IEEE Transactions on Power Delivery,
28(1):102–110, 2013.
4. Stefan Funke, André Nusser, and Sabine Storandt.
Placement of loading stations for
electric vehicles: No detours necessary! Journal of Artiﬁcial Intelligence Research, 53:633–
658, 2015.
5. Yanhai Xiong, Jiarui Gan, Bo An, Chunyan Miao, and Ana L. C. Bazzan.
Optimal
electric vehicle charging station placement. In Proceedings of the 24th International Joint
Conference on Artiﬁcial Intelligence (IJCAI), pages 2662–2668, 2015.

18
Yanhai Xiong et al.
6. John Smart and Stephen Schey. Battery electric vehicle driving and charging behavior
observed early in the ev project. SAE International Journal of Alternative Powertrains,
1(1):27–33, 2012.
7. Thomas Franke and Josef F Krems. Understanding charging behaviour of electric vehicle
users. Transportation Research Part F: Traﬃc Psychology and Behaviour, 21:75–89, 2013.
8. Elham Azadfar, Victor Sreeram, and David Harries. The investigation of the major factors
inﬂuencing plug-in electric vehicle driving patterns and charging behaviour. Renewable
and Sustainable Energy Reviews, 42:1065–1076, 2015.
9. Jairo Quirós-Tortós, Luis F Ochoa, and Becky Lees. A statistical analysis of ev charging
behavior in the uk. In 2015 IEEE PES Innovative Smart Grid Technologies Latin America
(ISGT LATAM), pages 445–449. IEEE, 2015.
10. Richard D McKelvey and Thomas R Palfrey. Quantal response equilibria for normal form
games. Games and economic behavior, 10(1):6–38, 1995.
11. Colin F Camerer, Teck-Hua Ho, and Juin-Kuan Chong. A cognitive hierarchy model of
games. The Quarterly Journal of Economics, 119(3):861–898, 2004.
12. James Larminie and John Lowry. Electric vehicle technology explained. John Wiley &
Sons, 2012.
13. Chwei-Sen Wang, Oskar H Stielau, and Grant A Covic. Design considerations for a con-
tactless electric vehicle battery charger.
IEEE Transactions on industrial electronics,
52(5):1308–1314, 2005.
14. Siqi Li and Chunting Chris Mi. Wireless power transfer for electric vehicle applications.
IEEE journal of emerging and selected topics in power electronics, 3(1):4–17, 2014.
15. H. Wang, Q. Huang, C. Zhang, and A. Xia. A novel approach for the layout of electric
vehicle charging station.
In Proceedings of International Conference on Apperceiving
Computing and Intelligence Analysis (ICACIA), pages 64–70, 2010.
16. I. Frade, R. Anabela, G. Goncalves, and A. P. Antunes. Optimal location of charging
stations for electric vehicles in a neighborhood in lisbon, portugal. Transportation Research
Record: Journal of the Transportation Research Board, 2252:91–98, 2011.
17. T. D. Chen, K. M. Kockelman, M. Khan, et al.
The electric vehicle charging station
location problem: a parking-based assignment method for seattle. In Proceedings of 92nd
Annual Meeting of the Transportation Research Board (TRB), 2013.
18. A. Lam, Y. Leung, and X. Chu.
Electric vehicle charging station placement.
In
Proceedings of the 4th IEEE International Conference on Smart Grid Communica-
tions(SmartGridComm), pages 510–515, 2013.
19. Albert YS Lam, Yiu-Wing Leung, and Xiaowen Chu. Electric vehicle charging station
placement: Formulation, complexity, and solutions. IEEE Transactions on Smart Grid,
5(6):2846–2856, 2014.
20. Payam Sadeghi-Barzani, Abbas Rajabi-Ghahnavieh, and Hosein Kazemi-Karegar. Opti-
mal fast charging station placing and sizing. Applied Energy, 125(0):289 – 299, 2014.
21. Pablo A López Hidalgo, Max Ostendorp, and Markus Lienkamp. Optimizing the charging
station placement by considering the user’s charging behavior.
In IEEE International
Energy Conference (ENERGYCON), pages 1–7. IEEE, 2016.
22. Abbas Rajabi-Ghahnavieh and Payam Sadeghi-Barzani. Optimal zonal fast-charging sta-
tion placement considering urban traﬃc circulation.
IEEE Transactions on Vehicular
Technology, 66(1):45–56, 2017.
23. Ozan Erdinç, Akın Taşcıkaraoˇglu, Nikolaos G Paterakis, İlker Dursun, Murat Can Sinim,
and João PS Catalão. Comprehensive optimization model for sizing and siting of dg units,
ev charging stations, and energy storage systems.
IEEE Transactions on Smart Grid,
9(4):3871–3882, 2018.
24. Mostafa F Shaaban, Sayed Mohamed, Muhammad Ismail, Khalid Qaraqe, and Erchin
Serpedin.
Joint planning of smart ev charging stations and dgs in eco-friendly remote
hybrid microgrids. IEEE Transactions on Smart Grid, 2019.
25. Yanhai Xiong, Jiarui Gan, Bo An, Chunyan Miao, and Ana LC Bazzan. Optimal elec-
tric vehicle fast charging station placement based on game theoretical framework. IEEE
Transactions on Intelligent Transportation Systems, 19(8):2493–2504, 2018.
26. John F Nash et al. Equilibrium points in n-person games. Proceedings of the national
academy of sciences, 36(1):48–49, 1950.
27. John Glen Wardrop. Road paper. Some theoretical aspects of road traﬃc research. Pro-
ceedings of the institution of civil engineers, 1(3):325–362, 1952.
28. Herbert A Simon. A behavioral model of rational choice. The quarterly journal of eco-
nomics, 69(1):99–118, 1955.

Electric Vehicle Charging Strategy Study
19
29. James Pita, Richard John, Rajiv Maheswaran, Milind Tambe, and Sarit Kraus. A robust
approach to addressing human adversaries in security games. In Proceedings of the 20th
European Conference on Artiﬁcial Intelligence, pages 660–665. IOS Press, 2012.
30. Daniel Kahneman and Amos Tversky. Prospect theory: An analysis of decision under risk.
Econometrica: Journal of the econometric society, pages 263–291, 1979.
31. Mark
Matousek.
These
are
the
world’s
20
most
congested
cities.
https://www.businessinsider.com/cities-with-worst-traﬃc-in-the-world-2019-2, 2019.
32. Yanhai Xiong, Jiarui Gan, Bo An, Chunyan Miao, and Yeng Chai Soh. Optimal pricing
for eﬃcient electric vehicle charging station management.
In Proceedings of the 2016
International Conference on Autonomous Agents & Multiagent Systems, pages 749–757.
International Foundation for Autonomous Agents and Multiagent Systems, 2016.
33. A Colin Cameron and Frank AG Windmeijer. An r-squared measure of goodness of ﬁt for
some common nonlinear regression models. Journal of econometrics, 77(2):329–342, 1997.

