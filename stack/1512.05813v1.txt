arXiv:1512.05813v1  [cs.LO]  17 Dec 2015
An Introduction to Eï¬€ectus Theory
Kenta Cho, Bart Jacobs, Bas Westerbaan, Abraham Westerbaan
Institute for Computing and Information Sciences (iCIS),
Radboud University Nijmegen, The Netherlands.
Email: {K.Cho,bart,bwesterb,awesterb}@cs.ru.nl
December 21, 2015
Abstract
Eï¬€ectus theory is a new branch of categorical logic that aims to cap-
ture the essentials of quantum logic, with probabilistic and Boolean logic
as special cases. Predicates in eï¬€ectus theory are not subobjects having a
Heyting algebra structure, like in topos theory, but â€˜characteristicâ€™ func-
tions, forming eï¬€ect algebras. Such eï¬€ect algebras are algebraic models
of quantitative logic, in which double negation holds. Eï¬€ects in quantum
theory and fuzzy predicates in probability theory form examples of eï¬€ect
algebras.
This text is an account of the basics of eï¬€ectus theory. It includes the
fundamental duality between states and eï¬€ects, with the associated Born
rule for validity of an eï¬€ect (predicate) in a particular state.
A basic
result says that eï¬€ectuses can be described equivalently in both â€˜totalâ€™
and â€˜partialâ€™ form. So-called â€˜commutativeâ€™ and â€˜Booleanâ€™ eï¬€ectuses are
distinguished, for probabilistic and classical models. It is shown how these
Boolean eï¬€ectuses are essentially extensive categories. A large part of the
theory is devoted to the logical notions of comprehension and quotient,
which are described abstractly as right adjoint to truth, and as left adjoint
to falisity, respectively. It is illustrated how comprehension and quotients
are closely related to measurement. The paper closes with a section on
â€˜non-commutativeâ€™ eï¬€ectus theory, where the appropriate formalisation is
not entirely clear yet.
1

Contents
1
Introduction
3
2
Notation
7
3
Eï¬€ectuses
11
3.1
Examples of eï¬€ectuses . . . . . . . . . . . . . . . . . . . . . . . .
18
4
The structure of partial maps and predicates
26
5
State and eï¬€ect triangles
35
6
Eï¬€ectuses from biproduct categories
41
7
Kernels and images
45
7.1
Kernels
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
46
7.2
Images . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
53
8
Relating total and partial maps
58
8.1
FinPACs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
58
8.2
FinPACs with eï¬€ects . . . . . . . . . . . . . . . . . . . . . . . . .
60
9
Commutative and Boolean eï¬€ectuses
65
10 Monoidal eï¬€ectuses
75
10.1 Commutative eï¬€ectuses via copiers . . . . . . . . . . . . . . . . .
80
11 Comprehension
82
12 Quotients
96
13 Boolean eï¬€ectuses and extensive categories
106
14 Combining comprehension and quotients
114
15 Towards non-commutative eï¬€ectus theory
130
15.1 Uniqueness of assert maps, in von Neumann algebras . . . . . . . 138
16 Conclusions and future work
143
References
145
Notation Index
150
Subject Index
152
2

1
Introduction
Eï¬€ectus theory is a new branch of categorical logic that started with [Jac15a].
The theory is already used in several other publications, such as [JWW15,
Cho15, CJWW15, Ada14, AJ15], and is being actively developed. Therefore
we think that it is appropriate to provide a systematic, accessible introduction
to this new area.
The aim of eï¬€ectus theory is to axiomatise the categorical characteristics
of quantum computation and logic. This axiomatisation should include proba-
bilistic and classical computation and logic as special cases. The relevant logical
structure is described in terms of eï¬€ect algebras. Such algebras have been in-
troduced in theoretical physics to describe generalised (quantum) probability
theories, see [FB94], and also [CK95, GG94]. Eï¬€ect algebras generalise both
classical logic, in the form of Boolean algebras, and quantitative logic, with the
unit interval [0, 1] of real numbers as main example. The double negation law
holds in such eï¬€ect algebras. One of the basic insights of [Jac15a] is that cer-
tain elementary categorical structure â€” involving coproducts and pullbacks â€”
provides predicates with eï¬€ect algebra structure.
In the usual set-theoretic world one can deï¬ne predicates on a set X as
subsets P âŠ†X or equivalently as characteristic functions p: X â†’2, where
2 = 1+1 = {0, 1} is the two-element set. The â€˜subsetâ€™ or â€˜spatialâ€™ approach is the
basis for much of categorical logic where predicates are described as subobjects
P ÖŒ X.
In topos theory, there is a bijective correspondence between such
subobjects of X and characteristic maps X â†’â„¦to a distinguished â€˜classiï¬erâ€™
object â„¦. These predicates on an object X in a topos form a Heyting algebra,
a basic formalisation of intuitionistic logic, in which the double negation law
fails. Topos theory has developed into a rich area of mathematics, combining
geometry and logic, see for instance the handbooks [MM92] or [Joh02].
Eï¬€ectus theory breaks with this spatial approach and uses maps of the form
X â†’1 + 1 as predicates. Negation then corresponds to swapping of outcomes
in 1 + 1, so that the double negation law immediately holds. As mentioned,
predicates in an eï¬€ectus are not Heyting algebras, but eï¬€ect algebras: their
logic is completely diï¬€erent.
The current text provides an introduction to this new area. It starts with
some basic results from the original source [Jac15a]. But it diï¬€ers from [Jac15a]
in that it combines the total and partial perspectives on eï¬€ectuses right from
the beginning, working towards the equivalence of these two approaches, as
developed in [Cho15]. Similarly, this article provides a systematic description
of quotients and comprehension in eï¬€ectuses, which are neatly described as a
chain of four adjunctions in a row, which quotients as left adjoint to falsity,
and comprehension as right adjoint to truth. This extends [CJWW15] where
quotients and comprehension are described only concretely, in speciï¬c examples.
This paper contains several deï¬nitions and results that have not been pub-
lished before, such as:
â€¢ the construction of eï¬€ectuses from â€˜groundedâ€™ biproduct categories in Sec-
tion 6;
â€¢ the deï¬nition of commutative (probabilistic) eï¬€ectuses and Boolean (clas-
3

sical) eï¬€ectuses in Section 9, giving a picture:
â˜›
âœ¡
âœŸ
âœ 
Boolean
eï¬€ectuses
âŠ†
â˜›
âœ¡
âœŸ
âœ 
commutative
eï¬€ectuses
âŠ†
â˜›
âœ¡
âœŸ
âœ 
(non-commutative)
eï¬€ectuses
The adjective â€˜non-commutativeâ€™ means â€˜arbitraryâ€™; it is only used to dis-
tinguish the general case from the two special subcases.
â€¢ the equivalence between a Boolean eï¬€ectus with comprehension and the
well-known notion of extensive category; this gives many examples of
(Boolean) eï¬€ectuses, including categories of (compact Hausdorï¬€) topo-
logical spaces, and of measurable spaces; also, the opposite CRngop of
the category of commutative rings is an example, see [CJWW15, Jac15a];
â€¢ the ï¬rst steps in non-commutative â€” properly quantum â€” eï¬€ectus theory.
A recurring topic in eï¬€ectus theory is the association of an â€˜assertâ€™ partial
map asrtp : X â†’X + 1 with a predicate p: X â†’1 + 1. This assert map is
the â€˜actionâ€™ of the predicate and is typical for a quantum setting, where an
observation, determined by a predicate, may have a side-eï¬€ect and disturb the
system under observation. In a commutative or Boolean eï¬€ectus one does have
such action maps asrtp, but they are side-eï¬€ect free.
This is formalised by
saying that these assert maps are below the identity, in a suitable partial order
on partial maps. Indeed, the identity map does nothing, so maps below the
identity also do not change the state. This predicate-action correspondence is
one of the main topics.
Four running examples are used throughout the text, namely:
1. the category Sets of sets and functions, which is a Boolean eï¬€ectus;
2. the Kleisli category Kâ„“(D) of the distribution monad D on Sets, which is
a commutative eï¬€ectus, modeling discrete probabilistic computation;
3. the opposite OUGop of the category OUG of order unit groups, which is
used as a relatively simple toy example to illustrate some basic notions;
4. the opposite vNAop of the category vNA of von Neumann algebras, which
is the prime example of a non-commutative eï¬€ectus.
The last two categories occur in opposite form because they incorporate Heisen-
bergâ€™s view where quantum computations are predicate transformers which op-
erate in opposite direction, transforming predicates on the post-state to predi-
cates on the pre-state.
The insight that these diverse examples are all instance of the notion of
eï¬€ectus has signiï¬cant value. It allows us to grasp in these examples what,
for instance, the comprehension or quotient structure of an eï¬€ectus amounts
to. These descriptions can be non-trivial and hard to understand without the
abstract categorical viewpoint. This applies in particular to von Neumann al-
gebras, where the â€˜oppositeâ€™ interpretation can be confusing, and where no-
tions like support projection exist already for a long time (see e.g. [Sak71,
Dfn. 1.10.3]), but without their proper universal properties.
4

This text uses von Neumann algebras (or W âˆ—-algebras) instead of Câˆ—-alge-
bras. The key aspect of von Neumann algebras that we use is that that pred-
icates/eï¬€ects form a directed complete poset. This allows us to deï¬ne for an
arbitrary predicate/eï¬€ect p the least sharp predicate âŒˆpâŒ‰above p. This con-
struction is crucial for images, comprehension and for quotients. Additionally,
(normal) states separate predicates in von Neumann algebras, which is used
in the quotient construction. These two properties, directed completeness and
separation characterise von Neumann algebras among Câˆ—-algebras, following
Kadison [Kad56, Dfn. 1 and Thm. 1] (see also [Ren14]).
Before starting, we would like to put eï¬€ectus theory in broader perspec-
tive. The Oxford school in categorical quantum theory started with [AC04],
see the recent books [HV15] and [CKar]. This approach takes the tensor âŠ—
for parallel composition as the main ingredient of quantum theory â€” following
SchrÂ¨odingerâ€™s emphasis on composite systems, and not von Neumannâ€™s focus
on measurement, see [CL13, Â§Â§2.2]. In the associated graphical calculus this
tensor is represented simply via paralell wires. This gives a powerful formalism
in which many protocols can be described. Coproducts (or biproducts) played
a role originally, but have become less prominent, probably because they do not
work well in a projective (i.e. â€˜scalar-freeâ€™) setting [CD11] and make the graph-
ical calculus more complicated. The main examples for the Oxford school are
so-called dagger-compact closed monoidal categories, such as Hilbert spaces, sets
and relations, or ï¬nite-dimensional Câˆ—-algebras and completely positive maps.
In contrast, in eï¬€ectus theory the coproduct + is taken as primitive construc-
tor (and not the tensor âŠ—), leading to a strong emphasis on logic, validity and
measurement, with the category of von Neumann algebras as leading quantum
example. A connection with the Oxford school exists via the CPâˆ—-categories
(with biproducts) of [CHK14]. Section 6 below shows that the causal maps in a
â€˜groundedâ€™ biproduct category â€” including CPâˆ—-categories â€” form an eï¬€ectus.
Tensors can be added to an eï¬€ectus, see Section 10, and lead to a much richer
theory, more closely connected to the Oxford school. But tensors are not essen-
tial for the deï¬nition of an eï¬€ectus theory, and for the associated logic of eï¬€ect
algebras.
Other connections are emerging in recent work [Tul16] on operational prob-
abilistic theories [CDP10] and eï¬€ectuses.
This makes it possible to transfer
methods and results in existing quantum theory and eï¬€ectus theory back and
forth.
One may ask: is eï¬€ectus theory the new topos theory? It is deï¬nitely too
early to say. But what hopefully becomes clear from this introduction is that
eï¬€ectus theory is a rich novel direction in categorical logic that promises to cap-
ture essential aspects of the quantum world and to provide a unifying framework
that includes the probabilistic and Boolean worlds as special cases.
This text gives a survey of ï¬rst results in the theory of eï¬€ectuses. Some
parts focus more on explaining ideas and examples, and some parts serve as
reference for basic facts â€” with long series of results. We brieï¬‚y discuss the
contents of the various sections. First, a separate section is devoted to notation,
where distinct notation is introduced and explained for total and partial maps.
Then, Section 3 introduces the central notion of eï¬€ectus, as a category with
coproducts (+, 0) and a ï¬nal object 1 satisfying certain elementary axioms. This
same section describes categorical consequences of these axioms, in particular
about partial projections and pairing, and introduces the leading examples of
5

eï¬€ectuses. Section 4 continues the exploration and focuses on the partial monoid
structure (>, 0) on partial maps X â†’Y + 1 in an eï¬€ectus. Predicates X â†’
1 + 1 are a special case and have additional structure: it is shown that they
form eï¬€ect algebras with scalar multiplication â€” making them eï¬€ect modules.
Subsequently, Section 5 shows that states 1 â†’X of an object X in an eï¬€ectus
form convex sets, and that the basic adjunction between eï¬€ect modules and
convex sets gives what is called a state-and-eï¬€ect triangle of the form:
(EModM)op
Hom(âˆ’,M)
-
âŠ¤
ConvM
Hom(âˆ’,M)
m
B
Hom(âˆ’,1+1)=Pred
eâ‘â‘â‘â‘â‘â‘â‘â‘â‘â‘
Stat=Hom(1,âˆ’)
;âœ‡
âœ‡
âœ‡
âœ‡
âœ‡
âœ‡
âœ‡
âœ‡
âœ‡
where B is an eï¬€ectus and M = Pred(1) is the eï¬€ect monoid of scalars in B,
see Theorem 28 for details. In this situation we can describe the Born rule for
validity Ï‰ |= p of a predicate p: X â†’1 + 1 and a state Ï‰: 1 â†’X simply via
composition, as scalar p â—¦Ï‰: 1 â†’1 + 1.
Section 6 describes a new construction â€” inspired by CPâˆ—-categories [CHK14]
â€” to obtain an eï¬€ectus as the subcategory of â€˜causalâ€™ maps in a biproduct cate-
gory with special ground maps
. Many examples of eï¬€ectuses can be obtained
(and understood) in this way, where, for instance, causal maps correspond to
the unital ones. Subsequently, Section 7 is more auxiliary: it introduces kernels
and images in an eï¬€ectus and collects many basic results about them that will be
used later on. A basic result in the theory of eï¬€ectuses, namely the equivalence
of the descriptions in terms of total and partial maps, is the topic of Section 8,
following [Cho15]. It plays a central role in the theory, and once we have seen it,
we freely switch between the two descriptions, by using phrases like an â€˜eï¬€ectus
in total formâ€™, or an â€˜eï¬€ectus in partial formâ€™.
Special axioms in an eï¬€ectus are identiï¬ed in Section 9 that capture proba-
bilistic models and Boolean models as special cases. Section 10 describes tensors
âŠ—in an eï¬€ectus, for parallel composition. These tensors come equipped with
projections X â†X âŠ—Y â†’Y , for weakening/discarding. But these tensors do
not have copiers/diagonals X â†’X âŠ—X, since contraction/duplication/cloning
does not exist in the quantum world. We show that if copiers exist, then the
eï¬€ectus becomes commutative.
The subsequent two Sections 11 and 12 introduce the important notions of
comprehension {X|p} and quotients X/p for a predicate p on an object X in
an eï¬€ectus. These notions are nicely captured categorically as right adjoint to
truth and as left adjoints to falisity, in a chain of comprehesions:
quotient âŠ£falsity âŠ£forget âŠ£truth âŠ£comprehension
Such chains exist in all our leading examples, see also [CJWW15]. The combi-
nation of comprehension and quotients is studied in Section 14.
Inbetween, Section 13 returns to Boolean eï¬€ectuses and gives a new charac-
terisation: it shows that Boolean eï¬€ectuses with comprehension are essentially
the same as extensive categories. The latter are well-known kinds of categories
in which ï¬nite coproducts (+, 0) are well-behaved.
Our ï¬nal Section 15 is of a diï¬€erent nature because it describes some unclar-
ities in the theory of eï¬€ectuses which require further research. What is unclear
6

is the precise formalisation of the general non-commutative case that captures
the essentials of quantum theory. This involves the intruiging relations between
the predicate-action correspondence for measurement on the one hand, and quo-
tients and comprehension on the other. We show that the â€˜assertâ€™ action maps
are uniquely determined by postulates in von Neumann algebras, but we cannot,
at this stage, prove uniqueness at a general, axiomatic level. More directions
for future research are collected in Section 16.
2
Notation
In the theory of eï¬€ectuses, both total and partial maps play an important role.
When reasoning in an eï¬€ectus one often switches between total and partial maps.
Since this may lead to confusion, we address this topic explicitly in the current
section, before introducing the notion of eï¬€ectus itself in the next section.
There are two equivalent ways of deï¬ning eï¬€ectuses, see Section 8 for details.
1. The â€˜totalâ€™ approach starts from a category of total maps, and introduces
partial maps as special, Kleisli maps for the lift monad (âˆ’) + 1 in a larger
enveloping Kleisli category. This is how eï¬€ectuses were originally intro-
duced in [Jac15a].
2. The â€˜partialâ€™ approach starts from a category of partial maps, and de-
scribes the total maps via a smaller â€˜wideâ€™ subcategory with the same
objects where the total maps are singled out via a special property. This
approach comes from [Cho15].
In both cases we have a faithful functor between two categories with the same
objects:
 
total
maps
!
 
/
 
partial
maps
!
These categories each have their own form of composition. In order to disam-
biguate them we shall use diï¬€erent notation, for the time being, namely
and
. In fact, we shall also use diï¬€erent notation for morphisms, namely â†’and
â†’, and also for sums of maps, namely + and +. These notational diï¬€erences
are relevant as long as we have not established the precise relationship between
total and partial maps, see Theorem 53. Once we know the relationship, we
re-evaluate the situation in Discussion 54.
Only at that stage do we see clearly how to switch back-and-forth, and can
decide whether to take total or partial maps as ï¬rst class citizens.
Total maps
Let B be a category with ï¬nite coproducts (+, 0) and a ï¬nal object 1 âˆˆB. We
consider the maps in B as total, and we write the coprojections Îºi and cotupling
[âˆ’, âˆ’] as maps:
X1
Îº1 / X1 + X2
X2
and
X1 + X2
Îº2
o
[f1,f2] / Y
for
Xi
fi / Y
The sum of two maps f : X â†’A, g : Y â†’B is written as f + g = [Îº1
f, Îº2
g]: X + Y â†’A + B. The n-fold coproduct X + Â· Â· Â· + X of the same object
7

X is usually written as n Â· X, and called a copower.
We use the notation
âˆ‡= [id, id]: X + X â†’X for the codiagonal.
For an arbitrary object X âˆˆB we write !X, or simply !, both for the unique
map from 0 to X, and for the unique map from X to 1, as in:
0
!
/ X
X
!
/ 1
Partial maps
A partial map is a map of the form X â†’Y +1. As is well-known, the assignment
X 7â†’X + 1 forms a monad on the category B. It is often called the lift or the
maybe monad. The unit of this monad is the ï¬rst coprojection Îº1 : X â†’X + 1,
and the multiplication is the cotuple [id, Îº2]: (X + 1) + 1 â†’X + 1. We shall
write Par(B) for the Kleisli category of this lift monad.
Its objects are the
objects of B, and its maps from X to Y , written as X â†’Y , are morphisms
X â†’Y + 1 in B. Thus, (ordinary) maps in Par(B) are partial maps in B.
Composition of f : X â†’Y and g : Y â†’Z in Par(B) is written as g f : X â†’Z,
and is described in Par(B) and in B as:
g
f =

X
f / Y
g / Z

=

X
f / Y + 1
[g,Îº2]
/ Z + 1

.
Each map h: X â†’Y in B gives rise to a map â€¹hâ€º: X â†’Y in Par(B), namely:
â€¹hâ€º =

X
h
/ Y
Îº1
/ Y + 1

.
We call such maps in Par(B) of the form â€¹hâ€º total, and write them with this (sin-
gle) guillemet notation â€¹âˆ’â€º. Later on, in Lemma 7, we shall see an alternative
characterisation of total maps, which will be much more useful.
The identity on X in Par(B) is then the (total) map â€¹idXâ€º = Îº1 : X â†’X.
There is an identity-on-objects functor B â†’Par(B), which we simply write as
â€¹âˆ’â€º. It preserves composition, since:
â€¹kâ€º
â€¹hâ€º = [Îº1
k, Îº2] Îº1
h = Îº1
k h = â€¹k hâ€º.
It is also not hard to see that:
g
â€¹hâ€º = g
h
and
â€¹kâ€º
f = (k + id) f.
The initial object 0 âˆˆB is a zero object in Par(B), because there are unique
maps 0 â†’X and X â†’0 in Par(B), namely the maps !: 0 â†’X + 1 and
!: X â†’0 + 1 âˆ¼= 1 in B. Hence, for each pair of objects X, Y there is a special
zero map between them in Par(B), deï¬ned as:

X
0 / Y

=

X
! / 1
Îº2 / Y + 1

.
Notice that 0
g = 0 = f
0 for all (partial) maps f, g. Notice that we write
this zero map 0 in bold face, in order to distinguish it from the zero object 0.
In general, we shall write the top and bottom element of a poset as such bold
8

face 1 and 0. Frequently, the zero map is indeed the bottom element in a poset
structure on homsets.
The presence of this zero map 0 allows us to deï¬ne kernel and cokernel maps
in Par(B), like in Abelian categories, namely as (co)equaliser of a map X â†’Y
and the zero map 0: X â†’Y . This will appear later.
The coproducts (+, 0) in B also form coproducts in Par(B). The coprojec-
tions in Par(B) are:
X1
â€¹Îº1â€º=Îº1 Îº1
/ X1 + X2
X2
â€¹Îº2â€º=Îº1 Îº2
o
The cotuple [f, g] in Par(B) is the same as in B. For two maps f : X â†’A and
g : Y â†’B there is thus a sum of maps f + g : X + Y â†’A + B in Par(B), which
is deï¬ned in B as:
f + g =

X + Y
[(Îº1+id) f,(Îº2+id) g]
/ (A + B) + 1

.
It is not hard to see that:

â€¹fâ€º, â€¹gâ€º

= â€¹[f, g]â€º
and
â€¹hâ€º + â€¹kâ€º = â€¹h + kâ€º.
The coproduct X1 +X2 in Par(B) comes with â€˜partial projectionsâ€™ âœ„i : X1 +
X2 â†’Xi, described in B as:
X1 + 1
X1 + X2
âœ„1=id+!
o
âœ„2=[Îº2 !,Îº1] / X2 + 1
(1)
Equivalently they can be described in Par(B) via the zero map 0 as cotuples:
X1
X1 + X2
âœ„1=[id,0]
o
âœ„2=[0,id]
/ X2
(2)
These partial projections are natural in Par(B), in the sense that:
âœ„i
(f1 + f2) = fi
âœ„i.
(3)
It is easy to deï¬ne these projections âœ„i : X1 + Â· Â· Â· + Xn â†’Xi for n-ary coprod-
ucts.
The coproduct + in Par(B) forms what is sometimes called a â€˜split productâ€™
or â€˜butterï¬‚yâ€™ product (see e.g. [Gra12, 2.1.7]): the following triangles commute
in Par(B), where the two diagonals are zero maps:
X
â˜
â˜
â˜
â˜
â€¹Îº1â€º
(â˜
â˜
â˜
â˜
Y
â§â§â§â§
â€¹Îº2â€º
vâ§â§â§â§
X + Y
â§â§â§â§
âœ„1
vâ§â§â§â§
â˜
â˜
â˜
â˜
âœ„2
(â˜
â˜
â˜
â˜
X
Y
(4)
In particular, the coprojections â€¹Îºiâ€º are split monos, and the projections âœ„i are
split epis in Par(B).
In this diagram (4) we write â€¹Îº1â€º: X â†’X + Y for the coprojection in a
category of partial maps Par(B). Similarly we have written â€¹idâ€º for the identity
in Par(B). From now on we shall omit these guillemets â€¹âˆ’â€º for coprojections
and identities when the context is clear. Thus we simply write Îº1 : X â†’X + Y
and id : X â†’X for a coprojection or identity map in Par(B).
9

Predicates and predicate transformers
In the context of eï¬€ectus theory a predicate on an object X is a total map of
the form X â†’1 + 1, or equivalently, a partial map X â†’1. The predicates 1
for true and 0 for false are given by:
1 =

X
! / 1
Îº1 / 1 + 1

0 =

X
! / 1
Îº2 / 1 + 1

.
The zero predicate on X is thus the zero map X â†’1. The negation, called
orthosupplement in this setting, of a predicate p: X â†’1 + 1 is obtained by
swapping the outcomes:
pâŠ¥=

X
p / 1 + 1
[Îº2,Îº1]
âˆ¼
=
/ 1 + 1

.
(5)
Clearly, pâŠ¥âŠ¥= p and 1âŠ¥= 0. One may expect that these predicates X â†’1+1
form a Boolean algebra, but this is not true in general. When B is an eï¬€ectus,
the predicates on X form an eï¬€ect algebra.
This is one of the fundamental
results of eï¬€ectus theory, see Section 4 for details. The double negation law
pâŠ¥âŠ¥= p always holds in an eï¬€ect algebra.
We use two kinds of re-indexing or substitution operations for a map, each
transferring predicates on the codomain to predicates on the domain. For total
maps f : Y â†’X and partial maps g : Y â†’X we write:
f âˆ—(p) =

Y
f / X
p / 1 + 1

gâœ·(p) =

Y
g / X + 1
[p,Îº1] / 1 + 1

.
(6)
The idea is that f âˆ—(p) is true on an input to f iï¬€p is true on its output.
Similarly, gâœ·(p) is true on an input to g iï¬€either g does not terminate, or g
terminates and p is true on its output (i.e. if g terminates then p is true on the
output). The â€˜boxâ€™ notation gâœ·suggests this modal reading, see also the De
Morgan dual gâœ¸in point (4) below.
The next result collects some basic observations. The proofs are easy and
left to the reader.
Exercise 1. The two substitution (or modal) operations (âˆ’)âˆ—and (âˆ’)âœ·for total
and partial maps satisfy:
1. idâˆ—(p) = p and (f2
f1)âˆ—(p) = f âˆ—
1
 f âˆ—
2 (p)

;
2. â€¹idâ€ºâœ·(p) = p and (g2
g1)âœ·(p) = gâœ·
1
 gâœ·
2 (p)

;
3. â€¹fâ€ºâœ·(p) = f âˆ—(p);
4. gâœ·(p) = (pâŠ¥
g)âŠ¥= gâœ¸(pâŠ¥)âŠ¥, if we deï¬ne gâœ¸(q) = q
f;
5. f âˆ—(pâŠ¥) = f âˆ—(p)âŠ¥and f âˆ—(1) = 1, and thus also f âˆ—(0) = 0;
6. gâœ·(1) = 1.
â–¡
10

3
Eï¬€ectuses
In this section we give the deï¬nition of eï¬€ectus, we provide several leading
examples, and we prove some basic categorical results about eï¬€ectuses. The
deï¬nition below is slightly simpler than the original one in [Jac15a]. We shall
show that the requirements used below are equivalent to the original ones, see
Lemma 3 (1). There is no clear intuition behind the nature of the axioms below:
they ensure that coproducts are well-behaved and provide the logical structure
that will be described in Section 4.
Deï¬nition 2. An eï¬€ectus is a category B with ï¬nite coproducts (+, 0) and a
ï¬nal object 1, such that both:
1. diagrams of the following form are pullbacks in B:
X + Y
id+! /
!+id

X + 1
!+id

X
!
/
Îº1

1
Îº1

1 + Y
id+! / 1 + 1
X + Y
!+! / 1 + 1
(7)
2. the following two maps are jointly monic in B:
(1 + 1) + 1
Â·Â·Â·
Â·Â·âœâœ=[[Îº1,Îº2],Îº2]
-
Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœ=[[Îº2,Îº1],Îº2]
1 1 + 1
(8)
Joint monicity means that if f, g satisfy Â·Â·Â·
Â·Â·âœâœ
f = Â·Â·Â·
Â·Â·âœâœ
g and Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœ
f = Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœ
g,
then f = g.
A map of the form X â†’1 + 1, or equivalently X â†’1, will be called a
predicate on X âˆˆB. We write Pred(X) for the collection of predicates on X.
Predicates of the special form 1 â†’1 + 1 are also called scalars.
A state is a total map of the form 1 â†’X, and a substate is a partial map
1 â†’X. We write Stat(X) and SStat(X) for the collections of such states and
substates of X.
The diagram on the left in (7) provides a form of partial pairing for compat-
ible partial maps, see Lemma 6 below; the diagram on the right ensures that
coprojections are disjoint, see Proposition 4 below. The joint monicity require-
ment (8) is equivalent to joint monicity of partial projections, see Lemma 5
below. It captures a form of cancellation. The symbols Â·Â·Â·
Â·Â·âœâœand Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœshould suggest
what these two maps do, as functions from a 3-element set to a 2-element set,
read downwards.
The diagram on the right in (7) only mentions the ï¬rst coprojection Îº1 : X â†’
X + Y . A corresponding pullback exists for the second coprojection Îº2 : Y â†’
X + Y since it is related to Îº1 via the swap isomorphism X + Y âˆ¼= Y + X.
Similarly, the results below only mention the ï¬rst (co)projection, but hold for
the second one as well.
An important property of eï¬€ectuses is that predicates in an eï¬€ectus have
the logical structure of an eï¬€ect module. This will be elaborated in the next
few sections.
11

The next few results describe some categorical consequences of the structure
in an eï¬€ectus.
They focus especially on pullbacks.
We recall the following
general result, known as the Pullback Lemma: consider a situation with two
commuting squares A and B,
Â·
/

Â·
/

Â·

A
B
Â·
/ Â·
/ Â·
Then: if B is a pullback, then A is a pullback if and only if the outer rectangle
is a pullback.
Lemma 3. Let B be a category with ï¬nite coproducts and a ï¬nal object, in
which the squares (7) in the deï¬nition of an eï¬€ectus are pullbacks.
1. Rectangles of the following forms are also pullbacks in B.
X + Y
id+g /
f+id

X + B
f+id

X
f
/
Îº1

A
Îº1

A + Y
id+g / A + B
X + Y
f+g / A + B
(9)
2. In the category Par(B) of partial maps the following squares are pullbacks,
where f : X â†’A and g : Y â†’B are total maps.
X + Y
id+â€¹gâ€º/
â€¹fâ€º+id

X + B
â€¹fâ€º+id

X + Y
â€¹fâ€º+id/
âœ„1

A + Y
âœ„1

A + Y
id+â€¹gâ€º/ A + B
X
â€¹fâ€º
/ A
(10)
Recall that we write âœ„i for the partial projection maps from (2).
The rectangles in (7) used to deï¬ne eï¬€ectuses are instances of the more
general formulations (9) provided in this lemma.
Proof We start with the diagram on the left in (9). Suppose we have h: C â†’
A + Y and k: C â†’X + B satisfying (id + g)
h = (f + id)
k. Consider the
following diagram.
C
â„“
#
h
!
k
%
(!+id) h
!
(id+!) k
%
X + Y
id+g /
f+id

X + B
f+id

id+! / X + 1
f+id

A + Y
id+g /
!+id

A + B
id+! /
!+id

A + 1
!+id

1 + Y
id+g / 1 + B
id+! / 1 + 1
12

The outer diagram commutes since:
(id + !) (id + g) (! + id) h = (id + !) (! + id) (id + g) h
= (id + !) (! + id) (f + id) k
= (! + id) (f + id) (id + !) k.
The outer rectangle, consisting of all four squares, is a pullback since it is
an instance of the pullback on the left in (7). Hence there is a unique map
â„“: C â†’A + B with (! + id)
â„“= (! + id)
h and (id + !)
â„“= (id + !)
k. We
obtain (f + id)
â„“= h by uniqueness of mediating maps, since the lower two
squares form a pullback, again by (7). Similarly (id + g) â„“= k holds because
the two square on the right together form a pullback.
In a similar way we show that the diagram on the right in (9) is a pullback:
let h: C â†’X + Y and k: C â†’A satisfy (f + g) h = Îº1
k. Then we have a
situation:
C
â„“
#
h
"
k
$
!
$
X
f
/
Îº1

A
Îº1

!
/ 1
Îº1

X + Y
f+g / A + B
!+! / 1 + 1
Since the two squares together and the square on the right form a pullback, as
on the right in (7). Hence we obtain a unique map â„“: C â†’X with Îº1
â„“= h.
We get f
â„“= k by uniqueness of mediating maps, using the pullback on the
right.
We turn to the diagram (10) in the category Par(B). We write Î± for the
standard associativity isomorphism U + (V + W) â†’(U + V ) + W in B, given
explicitly by Î± = [Îº1
Îº1, Îº2 + id] and Î±âˆ’1 = [id + Îº1, Îº2
Îº2]. For total maps
f : X â†’A and g : Y â†’B we have commuting diagrams in B:
X + (Y + 1)
f+id

Î±
âˆ¼
= / (X + Y ) + 1
[â€¹fâ€º+id,Îº2]

A + (Y + 1)
Î±
âˆ¼
= / (A + Y ) + 1
X + (Y + 1)
id+(g+id)/
Î±
âˆ¼
=

(X + B) + 1
Î±
âˆ¼
=

(X + Y ) + 1
[id+â€¹gâ€º,Îº2]
/ (X + B) + 1
As a result, the rectangle on the left below is a pullback in B, since it is related
via the associativity isomorphisms Î± to the rectangle on the right, which is a
pullback by (9).
(X + Y ) + 1
[id+â€¹gâ€º,Îº2]/
[â€¹fâ€º+id,Îº2]

(X + B) + 1
[â€¹fâ€º+id,Îº2]

X + (Y + 1)
id+(g+id)/
f+id

X + (B + 1)
f+id

(A + Y ) + 1
[id+â€¹gâ€º,Îº2]/ (A + B) + 1
A + (Y + 1)
id+(g+id)/ A + (B + 1)
The fact that the above rectangle on the left is a pullback in B implies that the
rectangle on the left in (10) is a pullback in Par(B).
13

We use basically the same trick for the diagram on the right in (10). Let
h: C â†’X and k: C â†’A + Y be (partial) maps with â€¹gâ€º
h = âœ„1
k. When
translated to the category B the latter equation becomes (g+id) h = [âœ„1, Îº2] k.
C
h
#
â„“
%
Î±âˆ’1 k
(
X + (Y + 1)
f+id /
id+!

â´âœ¤
A + (Y + 1)
id+!=[âœ„1,Îº2] Î±

X + 1
f+id
/ A + 1
The rectangle is a pullback, as instance of the square on the left in (9). Then
â„“â€² = Î± â„“: C â†’X + Y is the required mediating map in Par(B).
â–¡
Proposition 4. In an eï¬€ectus coprojections Îºi : Xi â†’X1 + X2 are monic and
disjoint, and the initial object 0 is strict.
An easy consequence of this result is that for an eï¬€ectus B the canonical
functor â€¹âˆ’â€º: B â†’Par(B) from B to the Kleisli category Par(B) of the lift
monad (âˆ’) + 1 is faithful. This is the case because â€¹fâ€º = Îº1
f, and Îº1 is
monic.
Proof The ï¬rst coprojection Îº1 : A â†’A+ B is monic since, using the pullback
on the right in (9), we get a diagram as on the left below. Its two rectangles are
pullbacks, and so their combination too.
Aâ´âœ¤
Aâ´âœ¤
Îº1
âˆ¼
=

A
Îº1

A
Îº1
âˆ¼
=
/
Îº1
7
A + 0
id+! / A + B
0
â– 
â– 
â– 
â– 
âˆ¼
=
$â– 
â– 
â– 
â– 

/ X
Îº2
âˆ¼
= 
!
Îº2
~
0 + 0â´âœ¤
/

0 + X
!+id 
A / Îº1
âˆ¼
=
/
&
Îº1
7
A + 0
id+! / A + X
The above diagram on the right shows that the intersection (pullback) of Îº1, Îº2
is the initial object 0: the small rectangle is a pullback since it is an instance of
the pullback on the left in (9). Hence the outer rectangle is a pullback via the
isomorphisms in the diagram.
Strictness of the initial object 0 means that each map f : X â†’0 is an
isomorphism. For such a map, we have to prove that the composite X â†’0 â†’X
14

is the identity. Consider the diagram:
X
f
$

Îº2
!
# 0 â´âœ¤

Îº1

0
Îº1=Îº2

0 + X
id+f /
[!,id]

0 + 0
X
The rectangle is a pullback, as on the right in (9). By initiality of 0, we have
Îº1 = Îº2 : 0 â†’0 + 0, so that the outer diagram commutes. Then we get the
dashed map, as indicated, which must be f : X â†’0. But now we are done:
! f = [!, id] Îº1
f = [!, id] Îº2 = id.
â–¡
The next result shows that the joint monicity requirement in the deï¬nition
of an eï¬€ectus has many equivalent formulations.
Lemma 5. Let B be a category with ï¬nite coproducts and a ï¬nal object, in which
the squares in (7) are pullbacks. Then the following statements are equivalent.
1. The category B is an eï¬€ectus, that is, the two maps Â·Â·Â·
Â·Â·âœâœ, Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœ: (1 + 1) + 1 â†’
1 + 1 in (8) are jointly monic in B.
2. The two partial projection maps âœ„1, âœ„2 : 1 + 1 â†’1 are jointly monic in
Par(B).
3. For each object X, the two partial projection maps âœ„1, âœ„2 : X + X â†’X
are jointly monic in Par(B).
4. For each pair of objects X1, X2, the two projections âœ„i : X1 + X2 â†’Xi
are jointly monic in Par(B).
5. For each n-tuple of objects X1, . . . , Xn, with n â‰¥1, the n projections
âœ„i : X1 + Â· Â· Â· + Xn â†’Xi are jointly monic in Par(B).
Proof The implication (1) â‡’(2) is a simple reformulation, using that Â·Â·Â·
Â·Â·âœâœ=
[âœ„1, Îº2] and Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœ= [âœ„2, Îº2].
For the implication (2) â‡’(3), let f, g : Y â†’X + X satisfy âœ„i
f = âœ„i
g : Y â†’X for i = 1, 2. Consider the following diagram in Par(B).
Y
f
!
g
(
X + X
â´âœ¤
â€¹!â€º+id /
id+â€¹!â€º

âœ„2
(
âœ„1

1 + Xâ´âœ¤
âœ„2
/
id+â€¹!â€º

X
â€¹!â€º

X + 1â´âœ¤
â€¹!â€º+id
/
âœ„1

1 + 1
âœ„2
/
âœ„1

1
X
â€¹!â€º
/ 1
15

All rectangles are pullbacks in Par(B) by Lemma 3 (2). The deï¬nitions f â€² =
(â€¹!â€º + â€¹!â€º)
f and gâ€² = (â€¹!â€º + â€¹!â€º)
g yield equal maps Y â†’1 + 1 by point (2),
since âœ„i
f â€² = â€¹!â€º
âœ„i
f = â€¹!â€º
âœ„i
g = âœ„i
gâ€² by (3). But then:
(
(â€¹!â€º + id)
f = (â€¹!â€º + id)
g
by the upper right pullback
(id + â€¹!â€º)
f = (id + â€¹!â€º)
g
by the lower left pullback.
Hence f = g by the upper left pullback.
For the implication (3) â‡’(4) let f, g : Z â†’X1 + X2 satisfy âœ„i
f = âœ„i
g.
The trick is to consider (Îº1 + Îº2)
f, (Îº1 + Îº2)
g : Z â†’(X1 + X2) + (X1 + X2)
instead. They satisfy, by naturality (3) of the partial projections:
âœ„i
(Îº1 + Îº2)
f = Îºi
âœ„i
f
= Îºi
âœ„i
g
= âœ„i
(Îº1 + Îº2)
g.
We obtain (Îº1 + Îº2)
f = (Îº1 + Îº2)
g from point (3). But then we are done:
f = âˆ‡
(Îº1 + Îº2)
f = âˆ‡
(Îº1 + Îº2)
g = g.
The implication (4) â‡’(5) is obtained via induction. Finally, the implication
(5) â‡’(1) is trivial.
â–¡
In an eï¬€ectus these partial projections âœ„i are projections for a â€˜partial pair-
ingâ€™ operation âŸ¨âŸ¨âˆ’, âˆ’âŸ©âŸ©that will be described next. In fact one can understand
the pullback on the left in (7) in the deï¬nition of eï¬€ectus as precisely providing
such a pairing for maps which are suitably orthogonal to each other. Later on,
in Section 7 we can make this requirement more precise in terms of kernels that
are each otherâ€™s orthosupplement.
Lemma 6. In an eï¬€ectus, each pair of partial maps f : Z â†’X and g : Z â†’Y
with 1
f = (1
g)âŠ¥, determines a unique total map âŸ¨âŸ¨f, gâŸ©âŸ©: Z â†’X + Y with:
âœ„1
âŸ¨âŸ¨f, gâŸ©âŸ©= f
and
âœ„2
âŸ¨âŸ¨f, gâŸ©âŸ©= g.
Uniqueness gives equations:
âŸ¨âŸ¨f, gâŸ©âŸ©h = âŸ¨âŸ¨f
h, g
hâŸ©âŸ©
and
âŸ¨âŸ¨âœ„1
k, âœ„2
kâŸ©âŸ©= k
(11)
for each h: W â†’Z and k: Z â†’X + Y . Also, for total maps h, k we have:
(h + k) âŸ¨âŸ¨f, gâŸ©âŸ©= âŸ¨âŸ¨â€¹hâ€º
f, â€¹kâ€º
gâŸ©âŸ©.
(12)
Note that the partial composite 1
f can be unfolded to:
1
f = [1, Îº2] f = [Îº1
!, Îº2] f = (! + id) f.
This map 1
(âˆ’) plays an important role, see also Lemma 7 below. It is the
orthosupplement of the kernel operation, see Section 7 below.
16

Proof The assumption 1
f = (1
g)âŠ¥says that the outer diagram commutes
in:
Z
[Îº2,Îº1] g
!
f
%
âŸ¨âŸ¨f,gâŸ©âŸ©
#
X + Y
id+! /
!+id

â´âœ¤
X + 1
!+id

1 + Y
id+! / 1 + 1
The (inner) rectangle is a pullback by (7), yielding the pairing âŸ¨âŸ¨f, gâŸ©âŸ©as the
unique total map with âœ„1
âŸ¨âŸ¨f, gâŸ©âŸ©= (id + !) âŸ¨âŸ¨f, gâŸ©âŸ©= f and:
âœ„2
âŸ¨âŸ¨f, gâŸ©âŸ©= [Îº2, Îº1] (! + id) âŸ¨âŸ¨f, gâŸ©âŸ©= [Îº2, Îº1] [Îº2, Îº1] g = g.
Clearly, âŸ¨f, gâŸ©is the unique (mediating) total map Z â†’X + Y satisfying these
equations. The equations (11) follow directly from this uniqueness property.
Finally, the equation (12) is obtained from uniqueness of mediating maps in
pullback like the one above:
(id + !) (h + k) âŸ¨âŸ¨f, gâŸ©âŸ©= (h + id) (id + !) âŸ¨âŸ¨f, gâŸ©âŸ©
= (h + id) f
= â€¹hâ€º
f
(! + id) (h + k) âŸ¨âŸ¨f, gâŸ©âŸ©= (id + k) (! + id) âŸ¨âŸ¨f, gâŸ©âŸ©
= (id + k) [Îº2, Îº1] g
= [Îº2, Îº1] (k + id) g
= [Îº2, Îº1] (â€¹kâ€º
g).
â–¡
This partial pairing âŸ¨âŸ¨âˆ’, âˆ’âŸ©âŸ©will be generalised later, see Lemma 43, and the
end of Discussion 54. It plays an important role in the sequel, for instance in
decomposition, see Lemma 83 (7), (8).
The following result is extremely simple but at the same time extremely
useful.
Lemma 7. Let f : X â†’Y be a partial map in an eï¬€ectus. Then:
1
f = 0 â‡â‡’f = 0
and
1
f = 1 â‡â‡’f is total.
Proof The implication (â‡) on the left is trivial, and for the implication (â‡)
on the right, let f be total, say f = Îº1
g for g : X â†’Y . Then:
1
f = [Îº1
!, Îº2] Îº1
g = Îº1
! g = Îº1
! = 1.
The two implications (â‡’) follow from the following two diagrams.
X
f
!
!
$
#
X
f
!
!
$
#
1
Îº2

â´âœ¤
1
Îº2

Y
Îº1

!
/
â´âœ¤
1
Îº1

Y + 1
!+id / 1 + 1
Y + 1
!+id / 1 + 1
17

Both rectangles are pullbacks, as instances of the diagram on the right in (9)
â€” once for the second coprojection Îº2.
â–¡
3.1
Examples of eï¬€ectuses
Below we describe the running examples of eï¬€ectuses that will be used through-
out this text. We will not go into all details and proofs for these examples, but
just sketch the essentials.
Example 8. The category Sets of sets and functions has coproducts via disjoint
union: X +Y = {âŸ¨x, 1âŸ©| x âˆˆX}âˆª{âŸ¨y, 2âŸ©| y âˆˆY }. The numbers 1 and 2 in this
set are used as distinct labels, to make sure that we have a disjoint union. The
coprojections Îº1 : X â†’X + Y and Îº2 : Y â†’X + Y are given by Îº1x = âŸ¨x, 1âŸ©
and Îº2y = âŸ¨x, 2âŸ©. For functions f : X â†’Z and g : Y â†’Z there is a cotuple
map [f, g]: X + Y â†’Z given by [f, g](Îº1x) = f(x) and [f, g](Îº2y) = g(y).
The emtpy set is the initial object 0 âˆˆSets, precisely because for any set
X, there is precisely one function 0 â†’X, namely the empty function. Any
singleton set is ï¬nal in Sets. We typically write 1 = {âˆ—} for (a choice of) the
ï¬nal object.
Predicates on a set X are â€˜characteristicâ€™ functions X â†’1 + 1 = 2 âˆ¼= {0, 1},
which correspond to subsets of X. There is thus an isomorphism Pred(X) âˆ¼=
P(X), where P(X) is the powerset. In particular, the set Pred(1) of scalars is
the two-element set of Booleans P(1) âˆ¼= 2. A state is a function 1 â†’X, and
thus corresponds to an element of the set X.
Kleisli maps f : X â†’Y + 1 of the lift monad correspond to partial functions
from X to Y , written according to our convention as maps f : X â†’Y . We say
that f is undeï¬ned at x âˆˆX if f(x) = âˆ—âˆˆ1 â€” or more formally, if f(x) = Îº2âˆ—.
It is easy to see that Kleisli composition corresponds to the usual composition
of partial functions.
Later, in Section 13, we shall see that the category Sets is an instance of an
extensive category, and that such extensive categories are instances of eï¬€ectuses,
that can be characterised in a certain way. In fact, every topos is an extensive
category, and thereby an eï¬€ectus.
Example 9. In order to capture (discrete) probabilistic models we use two mon-
ads on Sets, namely the distribution monad D and the subdistribution monad
Dâ‰¤1.
For an arbitrary set X we write D(X) for the set of formal convex combina-
tions of elements in X. There are two equivalent ways of describing such convex
combinations.
â€¢ We can use expressions r1|x1 âŸ©+ Â· Â· Â· + rn|xn âŸ©where xi âˆˆX and ri âˆˆ[0, 1]
satisfy P
i ri = 1.
The â€˜ketâ€™ notation |xâŸ©is syntactic sugar, used to
distinguish an element x âˆˆX from its occurrence in such sums.
The
expression P
i ri|xi âŸ©= r1|x1 âŸ©+ Â· Â· Â· + rn|xn âŸ©âˆˆD(X) may be understood
as: the probability of element xi is ri.
â€¢ We also use functions Ï‰: X â†’[0, 1] with ï¬nite support supp(Ï‰) = {x âˆˆ
X | Ï‰(x) Ì¸= 0}, and with property P
x Ï‰(x) = 1. We can write this Ï‰
as formal convex sum P
x Ï‰(x)|xâŸ©. Conversely, each formal convex sum
P
i ri|xi âŸ©yields a function X â†’[0, 1] with xi 7â†’ri, and x 7â†’0 for all
other x âˆˆX.
18

We shall freely switch between these two ways of describing formal convex com-
binations. Sometimes we use the phrase â€˜discrete probability distributionâ€™ for
such a combination.
The subdistribution monad Dâ‰¤1 has â€˜subconvexâ€™ combinations P
i ri|xi âŸ©âˆˆ
Dâ‰¤1(X), where ri âˆˆ[0, 1] satisfy P
i ri â‰¤1.
We write Kâ„“(D) for the Kleisli category of the monad D. Objects of this
category are sets, and morphisms X â†’Y are functions X â†’D(Y ). If X, Y
are ï¬nite sets, such maps X â†’D(Y ) are precisely the stochastic matrices.
Such functions can be understood as Markov chains, describing probabilistic
computations. For functions f : X â†’D(Y ) and g : Y â†’D(Z) we deï¬ne g
f : X â†’D(Z) essentially via matrix multiplication:
(g
f)(x) =
X
z
  P
y g(y)(z) Â· f(x)(y)
z

.
Notice that we have mixed the above two descriptions: we have used the ket-
notation for the distribution (g f)(x) âˆˆD(Z), but we have used the distributions
f(x) âˆˆD(Y ) and g(y) âˆˆD(Z) as functions with ï¬nite support, namely as
functions f(x): Y â†’[0, 1] and g(y): Z â†’[0, 1]. This allows us to multiply (and
add) the probabilities g(y)(z) âˆˆ[0, 1] and f(x)(y) âˆˆ[0, 1]. It can be checked
that the above deï¬nition yields a distribution again, and that the operation
is
associative.
We also need an identity map X â†’X in Kâ„“(D). It is the function X â†’
D(X) that sends x âˆˆX to the â€˜Diracâ€™ distribution 1|xâŸ©âˆˆD(X). As function
X â†’[0, 1] this Dirac distribution sends x to 1, and any other element xâ€² Ì¸= x to
0. In this way Kâ„“(D) becomes a category. The empty set 0 is initial in Kâ„“(D),
and the singleton set 1 is ï¬nal, because D(1) âˆ¼= 1.
The Kleisli category Kâ„“(D) inherits ï¬nite coproducts from the underlying
category Sets. On objects it is the disjoint union X + Y , with coprojection
X â†’D(X + Y ) given by x 7â†’1|ÎºixâŸ©. The cotuple is as in Sets. We leave it to
the reader to check that the requirements of an eï¬€ectus hold in Kâ„“(D). Later,
in Example 33, we shall see that this example eï¬€ectus Kâ„“(D) is an instance of
a more general construction.
Predicates on a set X are functions X â†’D(1 + 1) = D(2) âˆ¼= [0, 1]. Hence
predicates in this eï¬€ectus are fuzzy: Pred(X) âˆ¼= [0, 1]X. The scalars are the
probabilities from [0, 1]. A state 1 â†’X corresponds to a distribution Ï‰ âˆˆD(X).
Interestingly, the category Par(Kâ„“(D)) of partial maps in the Kleisli category
of the distribution monad D is the Kleisli category Kâ„“(Dâ‰¤1) of the subdistri-
bution monad. The reason is that subdistribution in Dâ‰¤1(Y ) can be identiï¬ed
with a a distribution in D(Y + 1). Indeed, given a subdistribution P
i ri|yi âŸ©,
we take r = 1 âˆ’(P
i ri) and get a proper distribution P
i ri|yi âŸ©+ r| âˆ—âŸ©, where
1 = {âˆ—}. Thus we often identify a partial map X â†’Y in Kâ„“(D) with a function
X â†’Dâ‰¤1(Y ).
We have used the distribution monad D on Sets, for discrete probability.
For continuous probability one can use the Giry monad G on the category of
measurable spaces, see [Jac15a, Jac13] for details. The Kleisli category Kâ„“(G)
of this monad G is also an eï¬€ectus.
The next example of an eï¬€ectus involves order unit groups. It does not cap-
ture a form of computation, like Sets or Kâ„“(D). Still this example is interesting
because it shares some basic structure with the quantum model given by von
19

Neumann algebras â€” see the subsequent Example 11 â€” but it is mathemati-
cally much more elementary. Hence we use it as an intermediate stepping stone
towards von Neumann algebras.
Example 10. We write Ab for the category of Abelian groups, with group
homomorphisms between them. An Abelian group G is called ordered if there
is a partial order â‰¤on G that satisï¬es: x â‰¤xâ€² implies x + y â‰¤xâ€² + y, for all
x, xâ€², y âˆˆG. One can then prove, for instance x â‰¤xâ€² iï¬€0 â‰¤xâ€² âˆ’x iï¬€x + y = xâ€²
for some y â‰¥0.
A homomorphism f : G â†’H of ordered Abelian groups is a group homomor-
phism that is monotone: x â‰¤xâ€² â‡’f(x) â‰¤f(xâ€²). Such a group homomorphism
is monotone iï¬€it is positive. The latter means: x â‰¥0 â‡’f(x) â‰¥0. We write
OAb for the category of ordered Abelian groups with monotone/positive group
homomorphisms between them. There is an obvious functor OAb â†’Ab which
forgets the order.
An ordered Abelian group G is called an order unit group if there is a positive
unit 1 âˆˆG such that for each x âˆˆG there is an n âˆˆN with âˆ’n Â· 1 â‰¤x â‰¤
n Â· 1. A homomorphism f : G â†’H of order unit groups is a positive group
homomorphisms which is â€˜unitalâ€™, that is, it preserves the unit: f(1) = 1. We
often write â€˜PUâ€™ for positive unital. We obtain another category OUG of order
unit groups and PU group homomorphisms between them. We have a functor
OUG â†’OAb that forgets the unit.
It is easy to see that order unit groups are closed under ï¬nite products:
the cartesian product, commonly written as direct sum G1 âŠ•G2, is again an
ordered Abelian group, with componentwise operations and order, and with the
pair (1, 1) as unit. The trivial singleton group {0} with 1 = 0 is ï¬nal in the
category OUG. The group of integers Z is initial in OUG, since for each order
unit group G there is precisely one map f : Z â†’G, namely f(k) = k Â· 1.
We now claim that the opposite OUGop of the category of order unit groups
is an eï¬€ectus. The direct sums (âŠ•, {0}) form coproducts in OUGop, and the
integers Z form the ï¬nal object. The eï¬€ectus requirements in Deï¬nition 2 can
be veriï¬ed by hand, but they also follow from a general construction in Exam-
ple 34. This category is in opposite form since it incorporates Heisenbergâ€™s view
where computations are predicate transformers, acting in opposite direction,
transforming â€˜postconditionâ€™ predicates on the codomain of the computation to
â€˜preconditionâ€™ predicates on the domain.
We elaborate on predicates and on partial maps since they can be described
in alternative ways that also apply in other settings.
1. A predicate on an order unit group G is formally a map p: G â†’1 + 1
in the eï¬€ectus OUGop. In the category OUG this amounts to a map
p: Z âŠ•Z â†’G. We claim that such predicates correspond to eï¬€ects, that
is, to elements in the unit interval [0, 1]G = {x âˆˆG | 0 â‰¤x â‰¤1}. Indeed,
the element p(1, 0) is positive, and below the unit since p(1, 0) + p(0, 1) =
p(1, 1) = 1, where p(0, 1) is positive too. In the other direction, an eï¬€ect
e âˆˆ[0, 1]G gives rise to a map pe : Z âŠ•Z â†’G by pe(k, m) = k Â· e + m Â· eâŠ¥,
where eâŠ¥= 1 âˆ’e.
2. A partial map f : G â†’H in OUGop is a map f : G â†’H + 1, which
corresponds to a positive unital group homomorphism f : H âŠ•Z â†’G. We
next claim that these homomorphisms f correspond to subunital positive
20

group homomorphisms g : H â†’G, where subunital means that g(1) â‰¤1.
This correspondence works as follows: given f, take f(y) = f(y, 0); and
given g, take g(y, k) = g(y) + k Â· g(1)âŠ¥, where g(1)âŠ¥= 1 âˆ’g(1). We use
the abbreviation â€˜PsUâ€™ for â€˜positive subunitalâ€™.
Summarising, there are bijective correspondences for predicates and partial
maps:
G
/ 1 + 1
in OUGop
============
Z âŠ•Z
/ G
in OUG
============
e âˆˆ[0, 1]G
G
/ H
in Par(OUGop)
=============
G
/ H + 1
in OUGop
===============
H âŠ•Z
/ G
in OUG
=============
H
PsU / G
(13)
A state of an order unit group G is a homomorphism G â†’Z.
Order unit groups provide a simple example of an eï¬€ectus, in which part
of the structure of more complex models â€” like von Neumann algebras, see
below â€” already exists.
Similar structures are order unit spaces.
They are
ordered vector spaces over the reals, which are at the same time an order unit
group. The category OUS of order unit spaces has positive unital linear maps
as homormorphisms.
It plays a promiment role in generalised probabilistic
theories, see e.g. [Wil12]. One can prove that the category OUSop is an eï¬€ectus
too. The states of an order unit space V are the homomorphisms V â†’R. They
carry much more interesting structure than the states of an order unit group.
For instance, this set of states Stat(V ) forms a convex compact Hausdorï¬€space.
More information about order unit groups can be found in [Goo86], and about
order unit spaces in [Nag74, JM12b].
Example 11. The mathematically most sophisticated example of an eï¬€ectus is
the opposite vNAop of the category vNA of von Neumann algebra, which pro-
vides a model for quantum computation. For example, the qubit is represented
by the von Neumann algebra of 2 Ã— 2 complex matrices (see point 9 below).
For completeness, we give the deï¬nition of von Neumann algebra (in point 3),
and the morphisms of vNA (in point 7), but we refer the reader to [KR97,
Pau02, Sak71] for the intricate details.
1. The structure that invoked the study of von Neumann algebra is the set
B(H ) of bounded operators T : H â†’H on a Hilbert space H . Recall
that an operator T on H is bounded provided that:
âˆ¥T âˆ¥= inf{b âˆˆ[0, âˆ) | âˆ€x âˆˆH . âˆ¥T (x)âˆ¥â‰¤b Â· âˆ¥xâˆ¥} < âˆ.
Not only is B(H ) a complex vector space (with coordinatewise opera-
tions), but it also carries a multiplication (namely composition of oper-
ators), an involution (viz. taking adjoint), and a unit (viz. the identity
operator), which interact appropriately, and B(H ) is therefor a unital
âˆ—-algebra. The adjoint of an operator S âˆˆB(H ) is the the unique opera-
tor Sâˆ—âˆˆB(H ) with âŸ¨S(x) | yâŸ©= âŸ¨x | Sâˆ—(y)âŸ©for all x, y âˆˆH .
We assume that every âˆ—-algebra has a unit (â€˜is unitalâ€™). A âˆ—-subalgebra
of a âˆ—-algebra A is a complex linear subspace S of A which is closed
21

under multiplication and involution, (âˆ’)âˆ—, and contains the unit 1 of A .
An isomorphism between âˆ—-algebras is a linear bijection which preserves
multiplication, involution and unit.
2. Let H be a Hilbert space. A unital Câˆ—-algebra of operators A on H is a
âˆ—-subalgebra of B(H ) which is norm closed, that is, if (TÎ±)Î± is a net in A
and S âˆˆA such that âˆ¥TÎ±âˆ’Sâˆ¥â†’0, then S âˆˆA . A von Neumann algebra
of operators A on H is a âˆ—-subalgebra B(H ), which is weakly closed, that
is, if (TÎ±)Î± is a net in A and S âˆˆA such that âŸ¨x | (S âˆ’TÎ±)(x)âŸ©â†’0 for
all x âˆˆH , then S âˆˆA .
3. A unital Câˆ—-algebra A is a âˆ—-algebra which is isomorphic to a unital
Câˆ—-algebra of operators on some Hilbert space. (This is not the usual
deï¬nition, but it is equivalent, see [KR97, Thm. 4.5.6]). A von Neumann
algebra (also W âˆ—-algebra) A is a âˆ—-algebra which is isomorphic to a von
Neumann algebra of operators on some Hilbert space (cf. text above Exam-
ple 5.1.6 of [KR97]). Every von Neumann algebra is also a Câˆ—-algebra, but
the converse is false. In this text we will deal mainly with von Neumann
algebras; we added the deï¬nition of Câˆ—-algebra here only for comparison.
4. For every Hilbert space H , the âˆ—-algebra of operators B(H ) is a von
Neumann algebra. In particular, {0}, C, M2, M3, . . . are all von Neu-
mann algebras, where Mn is the âˆ—-algebra of n Ã— n complex matrices.
The cartesian product, A âŠ•B, of two von Neumann algebras is again
a von Neumann algebra with coordinatewise operations. In particular,
the complex plane C2 = C âŠ•C is a von Neumann algebra. Given a von
Neumann algebra A the âˆ—-algebra Mn(A ) of n Ã— n-matrices with entries
drawn from A is a von Neumann algebra.
5. An element a of a von Neumann algebra A is called positive if a = bâˆ—Â· b
for some b âˆˆA , and self-adjoint if aâˆ—= a. The set of positive elements
of A is denoted by A+ and the set of self-adjoint elements of A is denoted
by Asa. All positive elements of A are self-adjoint.
A von Neumann algebra A is partially ordered by: a â‰¤b iï¬€b âˆ’a is
positive. The self-adjoint elements of a von Neumann algebra A form an
order unit space, Asa. For every positive element a âˆˆA of a von Neumann
algebra there is a unique positive element b âˆˆA with b2 = a, which is
denoted by âˆša.
In a von Neumann algebra every bounded directed net of self-adjoint ele-
ments D has a supremum W D in Asa. Both â€˜boundedâ€™ and â€˜directedâ€™ are
necessary, and the statement is false for Câˆ—-algebras.
6. A linear map f : A â†’B between von Neumann algebras is called
(a) unital if f(1) = 1;
(b) subunital if f(1) â‰¤1;
(c) positive if f(a) âˆˆB+ for all a âˆˆA+;
(d) involutive if f(aâˆ—) = f(a)âˆ—for all a âˆˆA ;
(e) multiplicative if f(a Â· b) = f(a) Â· f(b) for all a, b âˆˆA ;
22

(f) completely positive (see [Pau02]) if for every n âˆˆN the map
Mn(A )
Mn(f) / Mn(B)
given by (Mn(f)(A))ij = f(Aij) for all A âˆˆMn(A ) is positive;
(g) normal if f(W D) = W f(D) for every bounded directed set D âŠ†Asa
(cf. [Sak71]).
7. We denote the category of von Neumann algebras and completely positive
normal unital maps by vNA. It has an initial object C, ï¬nal object {0},
and products given by âŠ•(see point 4). The opposite category vNAop then
has ï¬nite coproducts and a ï¬nal object. In fact, vNAop is an eï¬€ectus for
almost the same reasons as OUSop and OUGop are an eï¬€ectuses (see
Example 10).
As is the case for OUSop, the predicates on a von Neumann algebra A
correspond to elements a âˆˆA with 0 â‰¤a â‰¤1, which are called eï¬€ects. In
fact, the map Pred(A ) â†’[0, 1]A given by p 7â†’p(1, 0) is an isomorphism
of eï¬€ect algebras, see the correspondences (13). Also, the partial maps
in Par(vNAop) correspond to the completely positive normal subunital
maps between von Neumann algebras.
8. A von Neumann algebra A is commutative if a Â· b = b Â· a for all a, b âˆˆA .
We write CvNA Ö’â†’vNA for the full subcategory of commutative von
Neumann algebras.
We recall that a positive unital map A â†’B is
automatically completely positive when either A or B is commutative.
These commutative von Neumann algebras capture probabilistic models,
as special case of the general quantum models in vNA. Also the category
CvNAop is an eï¬€ectus.
9. For quantum computation the most important von Neumann algebra is
perhaps the âˆ—-algebra M2 of 2 Ã— 2 matrices, because it models a qubit; it
is closely related to the Hilbert space C2, since M2 = B(C2).
A pure state of a qubit is a vector in C2 of length 1, and can thus be written
as Î± |0âŸ©+ Î² |1âŸ©, where |0âŸ©= (1, 0) and |1âŸ©= (0, 1) are base vectors in C2,
and Î±, Î² âˆˆC are scalars with |Î±|2 + |Î²|2 = 1. One says that any pure
state of a qubit is in a superposition of |0âŸ©and |1âŸ©. Two pure states
(Î±1, Î²1) and (Î±2, Î²2) of a qubit are equivalent if (z Â· Î±1, z Â· Î²1) = (Î±2, Î²2)
for some z âˆˆC (with |z| = 1).
A sharp predicate on a qubit is a linear subspace C of C2 which in turn
corresponds to a projection P âˆˆM2 (namely the orthogonal projection
onto C). For instance, the predicate â€œthe qubit is in state |0âŸ©â€ is rep-
resented by the linear subspace {(Î±, 0): Î± âˆˆC} (the x-axis), and by the
projection ( 1 0
0 0 ).
10. Let C be a linear subspace of C2 (i.e. a sharp predicate of a qubit) with
orthogonal projection P âˆˆM2. Then P âŠ¥= I âˆ’P is again a projection,
onto the orthocomplement CâŠ¥= {y âˆˆC2 | âˆ€x âˆˆC. âŸ¨x | yâŸ©= 0} of C.
Let x âˆˆC2 be a pure state of a qubit (so âˆ¥xâˆ¥= 1). Then:
x âˆˆC â‡â‡’predicate C certainly holds in state x
x âˆˆCâŠ¥â‡â‡’predicate C certainly does not hold in state x.
23

However, if x /âˆˆCâˆªCâŠ¥, then the matter whether C holds in x is undecided.
The matter can, however, be pressed using measurement; it forces the
qubit to the state P(x) Â· âˆ¥P(x)âˆ¥âˆ’1 with probability âˆ¥P(x)âˆ¥2, and to the
state P âŠ¥(x) Â· âˆ¥P âŠ¥(x)âˆ¥âˆ’1 with probability âˆ¥P âŠ¥(x)âˆ¥2.
C
CâŠ¥
x
P(x)
P âŠ¥(x)
Thus, using measurement one ï¬nds that the predicate C holds in state x
with probability âˆ¥P(x)âˆ¥2. After measurement, the state of the qubit has
become a (probabilistic) mixture of P(x) Â· âˆ¥P(x)âˆ¥âˆ’1 âˆˆC and P âŠ¥(x) Â·
âˆ¥P âŠ¥(x)âˆ¥âˆ’1 âˆˆCâŠ¥.
11. Any pure state x of a qubit gives rise to a state Ï‰x : M2 â†’C of vNAop
given by Ï‰x(A) = âŸ¨Ax | xâŸ©for all A âˆˆM2. The states of the form Ï‰x
are precisely the extreme points of the convex set Stat(M2) of all states
on M2.
The states which are not extreme correspond to probabilistic
mixtures of pure states. For example, if one measures whether the pure
state |+âŸ©=
1
âˆš
2(|0âŸ©+ |1âŸ©) is in the state |0âŸ©, then the resulting state is
1
2(Ï‰|0âŸ©+ Ï‰|1âŸ©), which not extreme, and corresponds to a qubit which is
either in state |0âŸ©or |1âŸ©with equal probability.
Any state of M2 can be written as a convex combination of extreme states.
But this is not true in general: a von Neumann algebra might have no
extreme states at all.
12. Any sharp predicate C of the qubit gives rise to a predicate on M2
in vNAop. To see this recall that the predicates on M2 in vNAop cor-
respond to the elements P âˆˆM2 with 0 â‰¤P â‰¤1.
Now, the sharp
predicate C corresponds to the orthogonal projection PC onto C.
The predicates on M2 of the form PC are precisely those predicates P with:
for every Q âˆˆM2 with 0 â‰¤Q â‰¤1, if Q â‰¤P and Q â‰¤P âŠ¥, then Q = 0.
13. Let us think about the conjunction of two sharp predicates C and D on
the qubit. Surely, it should be C âˆ©D. Is measuring whether C âˆ©D holds
simply a matter of ï¬rst measuring C and then measuring D?
Let P be the orthogonal projection on C, and let Q be the orthogonal
projection onto D. First note that if x âˆˆC2 is a state of the qubit, then
the probability to ï¬nd that C holds upon measurent, and then that D
holds up measurement is âˆ¥Q(P(x))âˆ¥2, and the resulting state is Q(P(x)) Â·
âˆ¥Q(P(x))âˆ¥âˆ’1. By the way, âˆ¥Q(P(x))âˆ¥2 = âŸ¨P(Q(P(x))) | xâŸ©= Ï•x(PQP),
so ï¬rst measuring C and then D corresponds in this formalism to the
operator PQP âˆˆM2 (and not to QP as one might have guessed).
24

C
D
x
Q(P(x))
P(Q(x))
Now, (by choosing C := {(Î±, 0): Î± âˆˆC} and D := {(Î±, Î±): Î± âˆˆC}) one
easily sees the following peculiar behaviour typical for quantum systems:
(a) Measurement disturbes the system: while P(x) Â· âˆ¥P(x)âˆ¥âˆ’1 is in C,
the state Q(P(x)) Â· âˆ¥Q(P(x))âˆ¥âˆ’1 need not be in C;
(b) The order of measurement matters for the probability of the outcome:
we might have âˆ¥Q(P(x))âˆ¥2 Ì¸= âˆ¥P(Q(x))âˆ¥2;
(c) The composition of two sharp measurements need not be sharp: PQP
need not be a projection.
Thus, measuring whether C âˆ©D holds is not always simply a matter of
measuring C and then measuring D.
The operator PQP is called the sequential product of P and Q and is
denoted by P & Q. More generally, if A is a von Neumann algebra, and
p, q âˆˆ[0, 1]A , then the sequential product is given by p & q = âˆšpqâˆšp,
and it represents ï¬rst measuring p and then measuring q.
We will see in Theorem 110 that p & q can be deï¬ned in vNAop using
only the language of category theory.
14. We have the following situation for a qubit:
{pure states} âŠ†C2
{sharp predicates} âŠ†M2.
This situation is typical: any Hilbert space H , representing a purely quan-
tum system, gives rise to the von Neumann algebra B(H ) of bounded
operators on H ; the elements of norm 1 in H are the pure states of
this quantum system, while the projections in B(H ) are the sharp pred-
icates, corresponding to closed linear subspaces of H . For instance, M3
represents a qutrit, and B(â„“2) represents a quantum integer.
15. Let A be a von Neumann algebra. An important technical fact is that
the states on A in vNAop (usually called normal states in the literature)
are separating, that is, for all a, b âˆˆA we have a â‰¤b if and only if for
every Ï‰: A â†’C in vNA we have Ï‰(a) â‰¤Ï‰(b).
This entails that the ultraweak topologyâ€”the least topology on A such
that all states on A in vNAop are continuousâ€”is Hausdorï¬€. A net (ai)iâˆˆD
of elements of A converges ultraweakly (i.e. with respect to the ultraweak
topology) to an element a âˆˆA iï¬€(Ï‰(ai))iâˆˆD converges to Ï‰(a) for every
state Ï‰ on A in vNAop.
It is not hard to see that a positive linear map f : A â†’B between von
Neumann algebras is ultraweakly continuous if and only if f is normal. In
25

this sense the ultraweak topology plays the same role in the theory of von
Neumann algebras as the Scott topology plays in domain theory.
There is much more to be said about the ultraweak topology in particular,
and von Neumann algebras in general, but since we draw most (new)
results about von Neumann algebras from more specialized publications,
[WW15, Ren14, Cho14], we refrain from diverging any farther into the
theory of operator algebras.
4
The structure of partial maps and predicates
This section concentrates on the structure that exists on partial maps X â†’Y
in an eï¬€ectus. It turns out that they come equipped with a partial binary sum
operation, written as >, which has the zero map as unit and is commutative
and associative (in an appropriately partial sense).
Abstractly, the relevant
observation is that the category Par(B) of partial maps of an eï¬€ectus B is
enriched over the category PCM of partial commutative monoids.
We ï¬rst
describe what such PCMs are.
The section continues with predicates, as special case. The main result of
this section states that these predicates in an eï¬€ectus form an eï¬€ect module, in
a functorial way.
Deï¬nition 12. A partial commutative monoid,abbreviated as PCM, is given
by a set M with a zero element 0 âˆˆM and a partial binary operation > on M,
satisfying the following requirements â€” where we call x, y and orthogonal and
write x âŠ¥y when x > y is deï¬ned.
1. x âŠ¥0 and x > 0 = x, for each x âˆˆM;
2. if x âŠ¥y then y âŠ¥x and x > y = y > x, for all x, y âˆˆM;
3. if x âŠ¥y and (x > y) âŠ¥z, then y âŠ¥z and x âŠ¥(x > z), and moreover
(x > y) > z = x > (y > z), for all x, y, z âˆˆM.
A homomorphism f : M â†’N between two PCMs is a function that preserves 0
and >, in the sense that:
1. f(0) = 0;
2. if x âŠ¥y in M, then f(x) âŠ¥f(y) in N and f(x > y) = f(x) > f(y).
We write PCM for the resulting category.
This notion of PCM shows up in the following way. Sums > are deï¬ned
for parallel partial maps, via bounds. These deï¬nitions work well and satisfy
appropriate properties via the categorical structure in eï¬€ectuses, as identiï¬ed
in the previous section.
Proposition 13 (From [Cho15]). Let B be an eï¬€ectus.
1. Each homset Par(B)
 X, Y

of partial maps X â†’Y is a PCM in the
following way.
26

â€¢ f âŠ¥g iï¬€there is a â€˜boundâ€™ b: X â†’Y + Y with âœ„1
b = f and
âœ„2
b = g. By Lemma 5 such a bound b, if it exists, is necessarily
unique.
â€¢ if f âŠ¥g via bound b, then we deï¬ne f >g = âˆ‡b = (âˆ‡+id) b: X â†’
Y .
2. This PCM-structure is preserved both by pre- and by post-composition in
Par(B).
The latter statement can be stated more abstractly as: Par(B) is enriched
over PCM.
This works since the category PCM is symmetric monoidal,
see [JM12a, Thm. 8]. Another way is to say that Par(B) is a ï¬nitely partially
additive category (abbreviated as â€˜FinPACâ€™), using the terminology of [AM80]
(and [Cho15]). The original deï¬nition involves countable sums, whereas we only
use ï¬nite sums, see Subsection 8.1.
More results about these partial homsets follow, in Proposition 41.
Proof For an arbitrary map f : X â†’Y we can take b = Îº1
f : X â†’Y + Y as
bound for f âŠ¥0, showing f >0 = f. If f âŠ¥g via b: X â†’Y +Y , then swapping
the outcomes of b yields a bound for g âŠ¥f, proving f > g = g > f. The more
diï¬ƒcult case is associativity.
So assume f âŠ¥g via bound a, and (f > g) âŠ¥h via bound b. We then have:
ï£±
ï£´
ï£´
ï£²
ï£´
ï£´
ï£³
âœ„1
a = f
âœ„2
a = g
âˆ‡
a = f > g
and
ï£±
ï£´
ï£´
ï£²
ï£´
ï£´
ï£³
âœ„1
b = f > g
âœ„2
b = h
âˆ‡
b = (f > g) > h.
Consider the diagram below, where the rectangle is a pullback in Par(B), as
instance of the diagram on the right in (10). Here we use that the codiagonal
âˆ‡= [â€¹idâ€º, â€¹idâ€º] = â€¹[id, id]â€º is total in Par(B).
X
b
'
a
#
c
%
(Y + Y ) + Y
âˆ‡+id /
âœ„1

â´âœ¤
Y + Y
âœ„1

Y + Y
âˆ‡
/ Y
We now take câ€² = (âœ„2 + id)
c: X â†’Y + Y . This câ€² is a bound for g and h,
giving g âŠ¥h since:
âœ„1
câ€² = âœ„1
(âœ„2 + id)
c
âœ„2
câ€² = âœ„2
c
= âœ„2
âœ„1
c
= âœ„2
(âˆ‡+ id)
c
= âœ„2
a
= âœ„2
b
= g
= h.
27

Next, the map câ€²â€² = [id, Îº2]
c: X â†’Y + Y is a bound for f and g > h since:
âœ„1
câ€²â€² = [âœ„1
id, âœ„1
Îº2]
c
âœ„2
câ€²â€² = [âœ„2
id, âœ„2
Îº2]
c
= [âœ„1, 0]
c
= [âœ„2, id]
c
= âœ„1
[id, 0]
c
= âˆ‡
(âœ„2 + id)
c
= âœ„1
âœ„1
c
= âˆ‡
câ€²
= f
= g > h.
We now obtain the associativity of >:
f > (g > h) = âˆ‡
câ€²â€² = âˆ‡
[id, Îº2]
c = [âˆ‡, id]
c
= âˆ‡
(âˆ‡+ id)
c
= âˆ‡
b
= f > (g > h).
Finally we check that > is preserved by pre- and post-composition.
Let
f âŠ¥g via bound b: X â†’Y + Y .
â€¢ For h: Z â†’X it is easy to see that b
h is a bound for f
h and g
h,
giving (f
h) > (g
h) = (f > g)
h.
â€¢ For k: Y â†’Z we claim that (k + k) b is a bound for k f and k g. This
follows from naturality (3) of the partial projections âœ„i. In this way we
get (k
f) > (k
g) = k
(f > g).
â–¡
Here is a concrete illustration: the two partial projections âœ„1, âœ„2 : X +X â†’
X in an eï¬€ectus are orthogonal, via the identity map X + X â†’X + X. This is
obvious. Hence we have as sum âœ„1 > âœ„2 = âˆ‡.
We brieï¬‚y show what this PCM-structure is in our leading examples.
Example 14. In the category Par(Sets) of partial maps of the eï¬€ectus Sets
two partial maps f, g : X â†’Y + 1 are orthogonal if they have disjoint domains
of deï¬nition. That is:
f âŠ¥g â‡â‡’âˆ€x âˆˆX. f(x) = âˆ—âˆ¨g(x) = âˆ—.
In that case we have:
(f > g)(x) =
(
f(x)
if g(x) = âˆ—
g(x)
if f(x) = âˆ—
In the eï¬€ectus Kâ„“(D) for discrete probability, orthogonality of two partial
maps f, g : X â†’Dâ‰¤1(Y ) is given by:
f âŠ¥g â‡â‡’âˆ€x âˆˆX. P
yâˆˆY f(x)(y) + g(x)(y) â‰¤1.
In that case we have (f > g)(x)(y) = f(x)(y) + g(x)(y).
In the eï¬€ectus OUGop of order unit groups two subunital positive maps
f, g : G â†’H are orthogonal if f(1) + g(1) â‰¤1. In that case we simply have
(f > g)(x) = f(x) + g(x). The same description applies in the eï¬€ectus vNAop
of von Neumann algebras.
28

The PCM-structure on partial maps X â†’Y from Proposition 13 exists in
particular for predicates â€” which are maps of the form X â†’1. In the language
of total maps, a bound for p, q: X â†’1 + 1 is a map b: X â†’(1 + 1) + 1 with
Â·Â·Â·
Â·Â·âœâœ
b = p and Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœ
b = q, where Â·Â·Â·
Â·Â·âœâœ, Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœ: (1 + 1) + 1 â†’1 + 1 are the jointly
monic maps (8) in the deï¬nition of an eï¬€ectus. The actual sum is then given
by p > q = (âˆ‡+ id) b: X â†’1 + 1.
In this special case of predicates there is more than PCM-structure: predi-
cates on X form an eï¬€ect algebra and also an eï¬€ect module. This will be shown
next. We begin with the deï¬nition.
Deï¬nition 15. An eï¬€ect algebra is a partial commutative monoid (M, >, 0)
with an orthosupplement operation (âˆ’)âŠ¥: M â†’M such that for each x âˆˆM:
1. xâŠ¥is the unique element with x > xâŠ¥= 1, where 1 = 0âŠ¥;
2. x âŠ¥1 implies x = 0.
A homomorphism of eï¬€ect algebras f : M â†’N is a homomorphism of PCMs
satisfying f(1) = 1. We write EA for the resulting category.
The unit interval [0, 1] is an example of an eï¬€ect algebra, with r âŠ¥s iï¬€
r + s â‰¤1, and in that case r > s = r + s. The orthosupplement is given by
râŠ¥= 1 âˆ’r. Every Boolean algebra is also an eï¬€ect algebra with x âŠ¥y iï¬€
x âˆ§y = 0, and in that case x > y = x âˆ¨y. The orthosupplement is negation
xâŠ¥= Â¬x. In particular, the set 2 = {0, 1} is an eï¬€ect algebra. It is initial in
the category EA of eï¬€ect algebras.
In [JM12a] it is shown that the category EA of eï¬€ect algebras is symmetric
monoidal, where the unit for the tensor âŠ—is the initial eï¬€ect algebra 2 = {0, 1}.
Each eï¬€ect algebra carries an order, deï¬ned by x â‰¤y iï¬€x > z = y for some
z. We collect some basic results. Proofs can be found in the literature on eï¬€ect
algebras, see e.g. [DP00].
Exercise 16. In an eï¬€ect algebra one has:
1. orthosupplement is an involution: xâŠ¥âŠ¥= x;
2. cancellation: x > y = x > yâ€² implies y = yâ€²;
3. positivity: x > y = 0 implies x = y = 0;
4. â‰¤is a partial order with 1 as top and 0 as bottom element;
5. x â‰¤y implies yâŠ¥â‰¤xâŠ¥;
6. x > y is deï¬ned iï¬€x âŠ¥y iï¬€x â‰¤yâŠ¥iï¬€y â‰¤xâŠ¥;
7. x â‰¤y and y âŠ¥z implies x âŠ¥z and x > z â‰¤y > z;
8. the downset â†“y = {x | x â‰¤y} is again an eï¬€ect algebra, with y as top,
orthosupplement xâŠ¥y = (yâŠ¥> x)âŠ¥, and sum x >y xâ€² which is deï¬ned iï¬€
x âŠ¥xâ€² and x > xâ€² â‰¤y, and in that case x >y xâ€² = x > xâ€².
â–¡
29

The uniqueness of the orthosupplement xâŠ¥is an important property in the
proof of this exericse. For instance it gives us f(xâŠ¥) = f(x)âŠ¥for a map of eï¬€ect
algebras, since:
f(xâŠ¥) > f(x) = f(xâŠ¥> x) = f(1) = 1 = f(x)âŠ¥> f(x).
A test in an eï¬€ect algebra is a ï¬nite set of elements x1, . . . , xn which are
pairwise orthogonal and satisfy x1 >. . .>xn = 1. Each eï¬€ect algebra thus gives
rise to a functor (presheaf) N â†’Sets, sending a number n to the collection of
n-element tests. This structure is investigated in [SU15].
Recall that we write Pred(X) for the collection of predicates X â†’1 + 1 and
f âˆ—= (âˆ’) f for the substitution map Pred(X) â†’Pred(Y ), where f : Y â†’X.
Proposition 17. Let B be an eï¬€ectus. Then:
1. Pred(X) is an eï¬€ect algebra, for each object X âˆˆB;
2. sending X 7â†’Pred(X) and f 7â†’f âˆ—gives a functor Pred: B â†’EAop.
Proof From Proposition 13 (1) we know that Pred(X) is a PCM. We show that
it is an eï¬€ect algebra with the orthosupplement pâŠ¥= [Îº2, Îº1] p from (5).
The three equations below show that b = Îº1 p: X â†’(1 + 1) + 1 is a bound
for p and pâŠ¥, yielding p > pâŠ¥= 1.
Â·Â·Â·
Â·Â·âœâœ
b = [id, Îº2] Îº1
p = p
Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœ
b = [[Îº2, Îº1], Îº2] Îº1
p = [Îº2, Îº1] p = pâŠ¥
(âˆ‡+ id) b = (âˆ‡+ id) Îº1
p = Îº1
âˆ‡p = Îº1 = 1.
Next we show that pâŠ¥is the only predicate with p > pâŠ¥= 1. So assume also
for q: X â†’1 + 1 we have p > q = 1, say via bound b. Then Â·Â·Â·
Â·Â·âœâœ
b = p, Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœ
b = q
and (âˆ‡+ id) b = 1 = Îº1
!. We use the pullback on the right in (9):
X
b
#
!
&
c
%
1 + 1
Îº1

âˆ‡
/
â´âœ¤
1
Îº1

(1 + 1) + 1 âˆ‡+id / 1 + 1
The fact that the bound b is of the form Îº1
c is enough to obtain q = pâŠ¥in:
pâŠ¥= [Îº2, Îº1] Â·Â·Â·
Â·Â·âœâœ
b = [Îº2, Îº1] [id, Îº2] Îº1
c
= [[Îº2, Îº1], Îº2] Îº1
c = Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœ
b = q.
Next, suppose 1 âŠ¥p; we must prove p = 0: X â†’1 + 1. We may assume a
bound b: X â†’(1 + 1) + 1 with âœ„1
b = 1 = Îº1
! and âœ„2
b = p. We use the
pullback in B on the right in (9) to obtain the unique map X â†’1 as mediating
30

map in:
X
b

!
'
!
' 1
Îº1

â´âœ¤
1
Îº1

(1 + 1) + 1
Î±âˆ’1
âˆ¼
=
/
Â·Â·Â·
Â·Â·âœâœ=[âœ„1,Îº2]
5
1 + (1 + 1)
id+âˆ‡/ 1 + 1
As before, Î± is the associativity isomorphism. Hence b = Î± Îº1 ! = Îº1 Îº1 ! = â€¹1â€º.
Then, as required:
p = âœ„2
b = [0, id]
â€¹1â€º = [Îº2, id] Îº1
! = Îº2
! = 0.
For the second point of the proposition we only have to prove that substitu-
tion f âˆ—preserves > and 1. Preservation of > follows from Proposition 13 (2),
and preservation of 1 holds by Exercise 1 (5).
â–¡
In Example 22 below we shall describe this eï¬€ect algebra structure con-
cretely for our running examples. But we ï¬rst we show that the result can be
strengthened further: predicates in an eï¬€ectus are not only eï¬€ect algebras, but
also eï¬€ect modules. The latter are eï¬€ect algebras with a scalar multiplication,
a bit like in vector spaces. In examples the scalars are often probabilities from
[0, 1] or Booleans from {0, 1}. But more abstractly they are characterised as
eï¬€ect monoids.
Deï¬nition 18. An eï¬€ect monoid is an eï¬€ect algebra which is at the same time
a monoid, in a coherent way: it is given by an eï¬€ect algebra M with (total)
associative multiplication operation Â·: M Ã— M â†’M which preserves 0, > in
each coordinate separately, like in the second part of Deï¬nition 12, and satisï¬es
1 Â· x = x = x Â· 1.
An eï¬€ect monoid is commutative if its multiplication is commutative.
More abstractly, using that the category EA of eï¬€ect algebras is symmet-
ric monoidal [JM12a], an eï¬€ect monoid (M, Â·, 1) is a monoid in the monoidal
category EA of eï¬€ect algebras of the form:
2
/ M
M âŠ—M
o
satisfying the monoid requirements.
Since the tensor unit 2 = {0, 1} is ini-
tial in the category EA, the map on the left is uniquely determined, and the
multiplication map on the right is the only structure.
The unit interval [0, 1] is the prime example of an eï¬€ect monoid, via its stan-
dard multiplication. It is clearly commutative. This structure can be extended
pointwise to fuzzy predicates [0, 1]X, for a set X, and to continuous predicates
C(Y, [0, 1]) for a topological space Y .
The Booleans {0, 1} also form an eï¬€ect monoid, via conjunction (multiplica-
tion). More generally, each Boolean algebra is an eï¬€ect monoid, with conjunc-
tion as multiplication.
31

Recall that any order unit group gives rise to an eï¬€ect algebra by considering
its unit interval. If the order unit group carries an associative bilinear positive
multiplication for which the order unit is neutral, then its unit interval is an
eï¬€ect monoid. We should warn that this does not apply to Câˆ—-algebras: their
self-adjoint elements form an order unit group, but their multiplication is not
positive and does not restrict to self-adjoint elements â€” except when the Câˆ—-
algebra is commutative. Indeed, we shall see in Section 9 that predicates in a
â€˜commutativeâ€™ eï¬€ectus form commutative eï¬€ect monoids, see esp. Lemma 57 (2).
Most obvious examples of an eï¬€ect monoid are commutative.
But here
is an example of a non-commutative eï¬€ect monoid.
Consider R5 with stan-
dard basis e1, . . . , e5 ordered lexicographically such that e1 â‰«e2 â‰«. . . â‰«e5,
where v â‰«w denotes v â‰¥Î»w for any Î» > 0. There is a unique associative bi-
linear positive product âˆ—ï¬xed by e1 âˆ—ej = ej âˆ—e1 = ej, e2 âˆ—e2 = e4, e3 âˆ—e2 = e5
and in the remaining cases ei âˆ—ej = 0. For details, see [Wes13].
Scalars in an eï¬€ectus are predicates 1 â†’1 + 1 on the ï¬nal object 1. They
form an eï¬€ect algebra by Proposition 17 (1). When we view scalars as partial
maps 1 â†’1, we directly see that they also carry a monoid structure, namely
Kleisli/partial composition
. The latter preserves the sums >, 0 in each co-
ordinate by Proposition 13 (2).
Since the scalar 1 is the ï¬rst coprojection
Îº1 : 1 â†’1 + 1, it is the identity map on 1 in the category of partial maps, and
thus the unit for . We now summarise the situation.
Deï¬nition 19. For an arbitrary eï¬€ectus B with ï¬nal object 1, we write Pred(1) =
Par(B)(1, 1) for the eï¬€ect monoid of scalars with partial composition
.
Once we know what scalars are, we can deï¬ne associated modules having
scalar multiplication.
Deï¬nition 20. Let M be an eï¬€ect monoid.
1. An eï¬€ect module over M is an eï¬€ect algebra E with a scalar multiplication
(action) M âŠ—E â†’E in EA. In such a module we have elements rÂ·e âˆˆE,
for r âˆˆM and e âˆˆE, satisfying, apart from preservation of 0, > in each
coordinate, 1 Â· e = e and r Â· (s Â· e) = (r Â· s) Â· e.
2. A map of eï¬€ect modules is a map of eï¬€ect algebras f : E â†’D satisfying
f(r Â· e) = r Â· f(e) for each r âˆˆM, e âˆˆE. We write EModM for the
category of eï¬€ect modules over M, with eï¬€ect module maps as morphisms
between them.
We can also deï¬ne eï¬€ect modules more abstractly: an eï¬€ect monoid M
is a monoid M âˆˆEA in the symmetric monoidal category of eï¬€ect algebras.
Hence the functor M âŠ—(âˆ’) is a monad on EA.
The category EModM of
eï¬€ect modules over M is the resulting category of Eilenberg-Moore algebras of
this monad, i.e. the category of actions of the monoid M. There is an obvious
forgetful functor EModM â†’EA.
Eï¬€ect modules over the Booleans {0, 1} are just eï¬€ect algebras.
Almost
always in examples we encounter eï¬€ect modules over the probabilities [0, 1].
Thatâ€™s why we often simply write EMod for EMod[0,1].
In the context of
eï¬€ect modules, the elements of the underlying eï¬€ect monoid are often called
scalars.
For each set X, the collection [0, 1]X of â€˜fuzzy predicatesâ€™ on X is an eï¬€ect
algebra, by Proposition 17, where p âŠ¥q iï¬€p(x) + q(x) â‰¤1 for all x âˆˆX, and
32

in that case (p > q)(x) = p(x) + q(x). The orthosupplement pâŠ¥is deï¬ned by
pâŠ¥(x) = 1 âˆ’p(x) = p(x)âŠ¥. This eï¬€ect algebra [0, 1]X is an eï¬€ect module over
[0, 1], via scalar multiplication r Â· p deï¬ned as (r Â· p)(x) = r Â· p(x). This mapping
X 7â†’[0, 1]X yields a functor Sets â†’EModop.
We can now strengthen Proposition 17 in the following way.
Theorem 21 (From [Jac15a]). For each eï¬€ectus B the mapping X 7â†’Pred(X)
yields a predicate functor:
B
Pred
/

EModM
op
where
M = Pred(1).
This functor Pred preserves ï¬nite coproducts and the ï¬nal object.
This theorem says that predicates in an eï¬€ectus form eï¬€ect modules over
the eï¬€ect monoid Pred(1) of scalars in the eï¬€ectus.
Proof For a predicate p: X â†’1 on X and a scalar s: 1 â†’1 we deï¬ne scalar
multiplication simply as partial composition s
p. The PCM-structure >, 0 is
preserved in each coordinate by Proposition 13 (2). We have r (s p) = (r s) p
by associativity of partial composition, and 1 p = p because 1 = Îº1 : 1 â†’1 + 1
is the identity on 1 for partial composition .
For a (total) map f : Y â†’X in B we see that substitution f âˆ—preserves
scalar multiplication:
f âˆ—(s
p) = (s
p) f = (s
p)
â€¹fâ€º = s
(p
â€¹fâ€º) = s
f âˆ—(p).
We still have to prove that the functor Pred: B â†’(EModM)op preserves ï¬nite
coproducts and the ï¬nal object. This means that it sends coproducts in B to
products in EModM, and the ï¬nal object to the initial one in EModM.
â€¢ There is precisely one predicate 0 â†’1+1, so Pred(0) is a singleton, which
is ï¬nal in EModM.
â€¢ The scalars M = Pred(1) are initial in EModM.
â€¢ For objects X, Y âˆˆB, there is an isomorphism of eï¬€ect modules:
Pred(X + Y )
âŸ¨Îºâˆ—
1,Îºâˆ—
2âŸ©
-
âˆ¼=
Pred(X) Ã— Pred(Y )
[âˆ’,âˆ’]
m
â–¡
With this ï¬nal object M and these ï¬nite coproducts the category (EModM)op
is an eï¬€ectus. Its scalars are precisely the elements of the eï¬€ect monoid M.
Example 22. We brieï¬‚y review what this theorem means concretely for the
running examples from Subsection 3.1.
1. The scalars in the eï¬€ects Sets of sets and functions are the Booleans
2 = {0, 1}, see Example 8.
Since eï¬€ect modules over 2 are just eï¬€ect
algebras, the predicate functor takes the form Pred: Sets â†’EAop. It
sends a set X to the eï¬€ect algebra P(X) of subsets of X. As is well-known,
these predicates P(X) form a Boolean algebra, but that is a consequence
33

of the fact that Sets is a special, â€˜Booleanâ€™ eï¬€ectus, see Proposition 61.
For a function f : Y â†’X, the associated substitution functor f âˆ—: P(X) â†’
P(Y ) is inverse image:
f âˆ—(U) = {y âˆˆY | f(y) âˆˆU}.
2. We recall from Example 9 that scalars in the Kleisli category Kâ„“(D) are
the probabilities [0, 1], and predicates on a set X are functions X â†’[0, 1].
Indeed, as we saw before Theorem 21, the set of fuzzy predicates [0, 1]X
is an eï¬€ect module over [0, 1]. For a map f : Y â†’X in Kâ„“(D), that is, for
a function f : Y â†’D(X), the associated substitution map f âˆ—: [0, 1]X â†’
[0, 1]Y is deï¬ned as:
f âˆ—(p)(y) = P
xâˆˆX f(y)(x) Â· p(x).
This map f âˆ—is indeed a homomorphism of eï¬€ect modules. Hence we have
a predicate functor Kâ„“(D) â†’EModop.
3. The scalars in the eï¬€ectus OUGop of order unit groups are the Booleans
2 = {0, 1}, and the predicates on an order unit group G are the eï¬€ects
in the unit interval, [0, 1]G = {x âˆˆG | 0 â‰¤x â‰¤1}, see Example 10. For
a map f : G â†’H in OUGop, that is, for a homomorphism of order unit
groups f : H â†’G the substitution function f âˆ—: [0, 1]H â†’[0, 1]G is given
simply by function application:
f âˆ—(x) = f(x).
This is well-deï¬ned since f is positive, so that f(x) â‰¥0, and unital so
that f(x) â‰¤f(1) = 1. In this case we have a predicate functor OUGop â†’
EAop.
For the special case of order unit spaces, the scalars in the relevant eï¬€ectus
OUSop are the probabilities [0, 1]. In this case the predicate functor is of
the form Pred: OUSop â†’EModop. It is full and faithful.
4. The situation is similar for the eï¬€ectus vNAop of von Neumann algebras,
see Example 11: the scalars are the probabilities [0, 1], and the predicates
on a von Neumann algebra A are the eï¬€ects in [0, 1]A = {a âˆˆA | 0 â‰¤
a â‰¤1}. This is an eï¬€ect module since r Â· a âˆˆ[0, 1]A for r âˆˆ[0, 1] and
a âˆˆ[0, 1]A . Substitution f âˆ—works, like for order unit groups, via function
application:
f âˆ—(a) = f(a).
We thus obtain a predicate functor vNAop â†’EModop. It is also full
and faithful, see [FJ15].
In (the proof of) Theorem 21 we have seen scalar multiplication s
p via
partial post-composition, for a scalar s: 1 â†’1 and a predicate p: X â†’1.
The same trick can be used for substates Ï‰: 1 â†’X via partial pre-composition.
Substates thus form a PCM with scalar multiplication (which is a map of PCMs
34

in each coordinate). We call these structure partial commutative modules (PC-
modules, for short). They are organised in a category PCMod in the obvious
manner. We have to keep in mind that writing partial composition
in the
usual order gives â€˜rightâ€™ modules, with the scalar written on the right.
Lemma 23. The sets SStat(X) of substates Ï‰: 1 â†’X in an eï¬€ectus are partial
commutative modules over the eï¬€ect monoid of scalars Pred(1), via Ï‰
s.
Proof Obviously, this deï¬nition Ï‰
s determines a right action of the monoid
Pred(1) of scalars on the set SStat(X) of substates.
It preserves the PCM
structure in each coordinate by Proposition 13 (2).
â–¡
Later, in Section 10 we shall see that in the presence of tensor products âŠ—
all partial homsets, and not just the ones of substates, become PC-modules.
This scalar multiplication on substates makes it possible to deï¬ne when a
substate is pure. In quantum theory a state is called pure is it is not a mixture
(convex combination) of other states.
In the current setting this takes the
following form.
Deï¬nition 24. A non-zero substate Ï‰: 1 â†’X in an eï¬€ectus is called pure if
for each pair of orthogonal substates Ï‰1, Ï‰2 : 1 â†’X with Ï‰ = Ï‰1 > Ï‰2 there is a
scalar s with:
Ï‰1 = Ï‰
s
and
Ï‰2 = Ï‰
sâŠ¥.
For instance, subdistributions of the form r|xâŸ©âˆˆDâ‰¤1(X), for r > 0, are
pure: if r|xâŸ©= Ï‰1 > Ï‰2, for Ï‰1, Ï‰2 âˆˆDâ‰¤1(X), then Ï‰1(y) + Ï‰2(y) = (Ï‰1 >
Ï‰2)(y)r|xâŸ©(y) = 0 for y Ì¸= x.
Hence Ï‰1(y) = Ï‰2(y) = 0. This means that
Ï‰1 = r1|xâŸ©and Ï‰2 = r2|xâŸ©for certain r1, r2 âˆˆ[0, 1] with r1 + r2 = r. Hence we
take s = r1
r âˆˆ[0, 1]. Clearly:
s Â· Ï‰ = r1
r Â· r|xâŸ©= r1|xâŸ©= Ï‰1.
And:
sâŠ¥Â· Ï‰ = (1 âˆ’r1
r ) Â· r|xâŸ©= (r âˆ’r1)|xâŸ©= r2|xâŸ©= Ï‰2.
5
State and eï¬€ect triangles
In quantum theory there is a basic duality between states and eï¬€ects, see
e.g. [HZ12]. This duality can be formalised in categorical terms as an adjunction
EModop â‡†Conv between the opposite of the category of eï¬€ect modules and
the category of convex sets. This adjunction will be described in more detail
below.
The duality between states and eï¬€ects is related to the diï¬€erent approaches
introduced by two of the founders of quantum theory, namely Erwin SchrÂ¨odinger
and Werner Heisenberg. SchrÂ¨odingerâ€™s approach is state-based and works in a
forward direction, whereas Heisenbergâ€™s describes how quantum operations work
on eï¬€ects, in a backward direction. It turns out that the diï¬€erence between these
two approaches is closely related to a well-known distinction in the semantics of
computer programs, namely between state transformer semantics and predicate
35

transformer semantics, see [Jac15b]. The situation can be described in terms of
a triangle:
âœ
âœ
â˜
âœ†
Heisenberg
âœ
âœ
â˜
âœ†
SchrÂ¨odinger
Logop =
 
predicate
transformers
!
-
âŠ¤
 
state
transformers
!
m

computations

Pred
fâ—†â—†â—†â—†â—†â—†â—†â—†
Stat
8â™£
â™£
â™£
â™£
â™£
â™£
â™£
â™£
(14)
The main result of this section shows that each eï¬€ectus gives rise to a such a
â€˜state and eï¬€ectâ€™ triangle.
We start with a closer inspection of the structure of states in an eï¬€ectus.
Recall that a state is a map of the form Ï‰: 1 â†’X. We will show that states
are closed under convex combinations P
i riÏ‰i, where the ri are scalars 1 â†’
1 + 1. We recall from Deï¬nition 19 that these scalars form an eï¬€ect monoid.
Hence we need to understand convexity with respect to such eï¬€ect monoids,
generalising the usual form of convexity with respect to the eï¬€ect monoid [0, 1]
of probabilities.
Deï¬nition 25. Let M be an eï¬€ect monoid.
1. A convex set over M is a set X with sums of convex combinations with
scalars from M.
More precisely, for each n-tuple r1, . . . , rn âˆˆM with
>i ri = 1 and n-tuple x1, . . . , xn âˆˆX there is an element P
i rixi âˆˆX.
These convex sums must statisfy the following two properties:
1x = x
and
P
i ri
  P
j sijxij

= P
ij(ri Â· sij)xij
2. A function f : X â†’Y between two convex sets is called aï¬ƒne if it pre-
serves sums of convex combinations: f(P
i rixi) = P
i rif(xi). Convex
sets and aï¬ƒne functions between them form a category ConvM.
Convex sets over M can be described more abstractly as an Eilenberg-Moore
algebra of a distribution monad DM deï¬ned in terms of formal convex combi-
nations with scalars from M, see [Jac15a]. This explains the form of the above
two equations.
Convex sets over the unit interval [0, 1] have sums of â€˜usualâ€™ convex com-
binations, with scalars from [0, 1]. Thatâ€™s why we often simply write Conv
for the category Conv[0,1] â€” just like EMod is EMod[0,1]. Convex sets over
the Booleans {0, 1} are ordinary sets: in an n-tuple r1, . . . , rn âˆˆ{0, 1} with
>i ri = 1 there is precisely one i with ri = 1, and rj = 0 for j Ì¸= i. In that case
we can deï¬ne P
j rjxj = xi. This works for any set X. Hence Conv2 âˆ¼= Sets.
The next result gives a categorical formalisation of the duality between states
and eï¬€ects in quantum physics. It goes back to [Jac10a].
Proposition 26. Let M be an eï¬€ect monoid.
By â€œhomming into Mâ€ one
obtains an adjunction:
 EModM
op
Hom(âˆ’,M)
-
âŠ¤
ConvM
Hom(âˆ’,M)
m
36

Proof Given a convex set X âˆˆConvM, the homset Conv(X, M) of aï¬ƒne
maps is an eï¬€ect module, with f âŠ¥g iï¬€âˆ€x âˆˆX. f(x) âŠ¥g(x) in M. In that
case one deï¬nes (f > g)(x) = f(x) > g(x). It is easy to see that this is again
an aï¬ƒne function. Similarly, the pointwise scalar product (r Â· f)(x) = r Â· f(x)
yields an aï¬ƒne function. This mapping X 7â†’Conv(X, M) gives a contravariant
functor since for h: X â†’Xâ€² in ConvM pre-composition with h yields a map
(âˆ’) â—¦h: Conv(Xâ€², M) â†’Conv(X, M) of eï¬€ect modules.
In the other direction, for an eï¬€ect module E âˆˆEModM, the homset
EMod(E, M) of eï¬€ect module maps yields a convex set: a convex sum f =
P
j rjfj, where fj : E â†’M in EModM and rj âˆˆM, can be deï¬ned as
f(y) = >j rj Â· fj(y).
This f forms a map of eï¬€ect modules.
Again, func-
toriality is obtained via pre-composition.
The dual adjunction between EModM and ConvM involves a bijective cor-
respondence that is obtained by swapping arguments.
â–¡
Lemma 27. Let B be an eï¬€ectus, with eï¬€ect monoid of scalars Pred(1).
1. For each object X the set of states Stat(X) = B(1, X) is a convex set over
the eï¬€ect monoid Pred(1) of scalars in B.
2. Each (total) map f : X â†’Y in B gives rise to an aï¬ƒne function fâˆ—=
f
(âˆ’): Stat(X) â†’Stat(Y ).
Thus we have a state functor:
B
Stat
/ ConvM
where
M = Pred(1).
Proof We ï¬rst have to prove that convex sums exist in the set of states Stat(X).
So let r1, . . . , rn âˆˆPred(1) be scalars with >i ri = 1. This means that there
is a bound b: 1 â†’n Â· 1 = 1 + Â· Â· Â· + 1 with âœ„i
b = ri and âˆ‡
b = 1: 1 â†’1,
where âˆ‡: n Â· 1 â†’1 is the n-ary codiagonal. The equation âˆ‡
b = 1 translates
to (âˆ‡+ id) b = Îº1 !: 1 â†’1 + 1. Hence b is a total map 1 â†’n Â· 1, of the form
b = Îº1
s in:
1
b
"
!
%
s
#
n Â· 1

Îº1

âˆ‡
/
â´âœ¤
1
Îº1

n Â· 1 + 1 âˆ‡+id / 1 + 1
For an n-tuple of states Ï‰i : 1 â†’X we now deï¬ne [Ï‰1, . . . , Ï‰n]
s to be the
convex sum P
i riÏ‰i.
Post-composition with f : X â†’Y is clearly aï¬ƒne, since:
fâˆ—
  P
i riÏ‰i

= f
[Ï‰1, . . . , Ï‰n] s
= [f
Ï‰1, . . . , f
Ï‰n] s = P
i rifâˆ—(Ï‰i).
â–¡
When we combine this result with Theorem 21 and Proposition 26 we obtain
the following result.
37

Theorem 28. Let B be an eï¬€ectus, with M = Pred(1) = Stat(1 + 1) its eï¬€ect
monoid of scalars. There is a â€˜state and eï¬€ectâ€™ triangle of the form:
(EModM)op
Hom(âˆ’,M)
-
âŠ¤
ConvM
Hom(âˆ’,M)
m
B
Hom(âˆ’,1+1)=Pred
eâ‘â‘â‘â‘â‘â‘â‘â‘â‘â‘
Stat=Hom(1,âˆ’)
;âœ‡
âœ‡
âœ‡
âœ‡
âœ‡
âœ‡
âœ‡
âœ‡
âœ‡
(15)
For a predicate (eï¬€ect) p: X â†’1 + 1 and a state Ï‰: 1 â†’X we deï¬ne the
validity Ï‰ |= p as the scalar obtained by composition:
(Ï‰ |= p) = p â—¦Ï‰: 1 â†’1 + 1.
(16)
We call this abstract deï¬nition the Born rule, see Example 29 (4) below.
This validity |= satisï¬es the following Galois correspondence:
fâˆ—(Ï‰) |= q = q f
Ï‰ = Ï‰ |= f âˆ—(q),
(17)
where f : X â†’Y , Ï‰: 1 â†’X, and q: Y â†’1 + 1.
This validity relation |= gives rise to two natural transformations in:
(EModM)op
ConvM
B
Stat
6
Hom(Pred(âˆ’),M)
F
âœ¼âœ¼âœ¼âœ¼
Hom(Stat(âˆ’),M)
\
Pred
g
â˜›â˜›â˜›â˜›AI
(18)
Proof Most of this is a summary of what we have seen before. We concentrate
on the natural transformations in the last part of the theorem.
The natu-
ral transformation Hom(Stat(âˆ’), M) â‡’Pred consists of functions Pred(X) â†’
M Stat(X) in EModM, given by p 7â†’(Ï‰ 7â†’Ï‰ |= p).
Similarly, the natural
transformation Stat â‡’Hom(Pred(âˆ’), M) consists of aï¬ƒne maps Stat(X) â†’
M Pred(X) given by Ï‰ 7â†’(p 7â†’Ï‰ |= p). Naturality of these functions is given by
the equations (17).
â–¡
Notice that we do not require that the triangle (15) commutes (up to iso-
morphism), that is, that the natural transformations in (18) are isomorphisms.
In some examples they are, in some examples they are not.
Example 29. We shall review the running examples in the remainder of this
section.
1. For the eï¬€ectus Sets the triangle (15) takes the following form.
EAop
Hom(âˆ’,2)
,
âŠ¤
Sets
Hom(âˆ’,2)
l
Sets
2(âˆ’)=Pred
dâ– â– â– â– â– â– â– â– â– 
Stat=id
;âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
Here we use that convex sets over the eï¬€ect monoid 2 = {0, 1} of scalars in
Sets are just sets. The predicate functor 2(âˆ’) is powerset, see Example 8.
38

For a state x âˆˆX and a predicate p âˆˆ2X the Born rule 16 gives an
outcome in {0, 1} determined by membership:
x |= p = p(x).
2. For the eï¬€ectus Kâ„“(D) we have a triangle:
EModop
Hom(âˆ’,[0,1])
,
âŠ¤
Conv
Hom(âˆ’,[0,1])
m
Kâ„“(D)
[0,1](âˆ’)=Pred
eâ‘â‘â‘â‘â‘â‘â‘â‘â‘â‘
Stat
:âœ‰
âœ‰
âœ‰
âœ‰
âœ‰
âœ‰
âœ‰
âœ‰
âœ‰
For a Kleisli map f : X â†’D(Y ) the associated state transformer function
fâˆ—: D(X) â†’D(Y ) is Kleisli extension, given by:
fâˆ—(Ï‰)(y) = P
x Ï‰(x) Â· f(x)(y).
This is â€˜babyâ€™ integration. For the Giry monad G it is proper integration,
see [Jac13]. For a state Ï‰ âˆˆD(X) and a predicate p âˆˆ[0, 1]X the Born
rule gives the expected value:
Ï‰ |= p = P
x Ï‰(x) Â· p(x) âˆˆ[0, 1].
The (Born) validity rules for discrete and continuous probability have been
introduced in [Koz81, Koz85], in the context of semantics of probabilistic
programs.
For continuous probability, the correspondence (17) occurs
in [Jac13] for the Giry monad as an equation:
fâˆ—(Ï‰) |= q =
Z
q dfâˆ—(Ï‰) =
Z
f âˆ—(q) dÏ‰ = Ï‰ |= f âˆ—(q).
Here, f : X â†’G(Y ) is a measurable function, q: Y â†’[0, 1] is a (measur-
able) predicate on Y and a maesure/state Ï‰ âˆˆG(X). The operation fâˆ—is
Kleisli extension and f âˆ—is substitution.
3. The state and eï¬€ect triangle for the eï¬€ectus OUGop of order unit groups
is:
EAop
Hom(âˆ’,2)
,
âŠ¤
Sets
Hom(âˆ’,2)
l
OUGop
[0,1](âˆ’)=Pred
eâ–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
Stat=Hom(âˆ’,Z)
9s
s
s
s
s
s
s
s
s
For a predicate e âˆˆ[0, 1]G and a state Ï‰: G â†’Z validity is:
Ï‰ |= e = Ï‰(e) âˆˆ{0, 1}.
39

4. The eï¬€ectus vNAop of von Neumann algebras yields:
EModop
Hom(âˆ’,[0,1])
-
âŠ¤
Conv
Hom(âˆ’,[0,1])
m
vNAop
[0,1](âˆ’)=Pred
fâ–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼
Stat=Hom(âˆ’,C)
9s
s
s
s
s
s
s
s
s
s
For a predicate e âˆˆ[0, 1]A and a state Ï‰: A â†’C one interpretes validity
again as expected probability:
Ï‰ |= e = Ï‰(e) âˆˆ[0, 1].
An interesting special case is A = B(H ), where H is a Hilbert space,
with associated von Neumann algebra B(H ) of bounded operators H â†’
H . It is well-known that (normal) states Ï‰: B(H ) â†’C correspond to
density matrices Ï: H â†’H , via Ï‰ = tr(âˆ’Ï). The Born rule formula (16),
for an eï¬€ect E âˆˆ[0, 1]B(H ) = {F : H â†’H | 0 â‰¤F â‰¤id} becomes the
Born rule:
tr(âˆ’Ï) |= E = tr(EÏ).
Remark 30. In Theorem 21 we have seen that the predicate functor Pred: B â†’
(EModM)op of an eï¬€ectus B preserves ï¬nite coproducts. The same preservation
property does not hold in general for the states functor Stat: B â†’ConvM from
Lemma 27. The matter is investigated in [JWW15], for the case where the eï¬€ect
monoid M is [0, 1].
It turns out that preservation of ï¬nite coproducts by the states functor is
closely related to normalisation of substates. This works as follows.
We say that an eï¬€ectus B satisï¬es normalisation if for each non-zero substate
Ï‰: 1 â†’X there is a unique state Ï: 1 â†’X with:
Ï‰ = â€¹Ïâ€º
1
Ï‰.
(19)
This says that the substate Ï‰ is scalar multiplcation â€¹Ïâ€º
s in the sense of
Lemma 23, where the scalar s = 1
Ï‰: 1 â†’1 is determined by Ï‰ itself.
We brieï¬‚y show that the eï¬€ectuses Kâ„“(D) and vNAop satisfy normalisation.
1. A substate in Kâ„“(D) is a subdistribution Ï‰ âˆˆDâ‰¤1(X). Let us assume that
it is non-zero, so that the associated scalar s = 1
Ï‰ = P
x Ï‰(x) âˆˆ[0, 1]
is non-zero.
We take Ï =
Ï‰
s = P
x
Ï‰(x)
s |xâŸ©.
This Ï is a proper state
(distribution) since:
P
x Ï(x) = P
x
Ï‰(x)
s
= 1.
Moreover, we have s Â· Ï = Ï‰ by construction.
2. A state in the eï¬€ectus vNAop is a positive subunital map Ï‰: A â†’C.
If it is non-zero, then s = Ï‰(1) âˆˆ[0, 1] is a non-zero scalar, so we can
deï¬ne Ï: A â†’C as Ï(a) = Ï‰(a)
s . By construction Ï is unital, and satisï¬es
Ï‰ = s Â· Ï.
40

6
Eï¬€ectuses from biproduct categories
This section describes a construction that turns a biproduct category with a
suitable â€˜groundâ€™ map into an eï¬€ectus. The construction is inspired by causal
maps in the context of CPâˆ—-categories, see [CHK14].
A biproduct category is a category with ï¬nite biproducts (0, âŠ•). This means
ï¬rst of all that the object 0 is both initial and ï¬nal, and thus gives rise to zero
maps 0: X â†’0 â†’Y between arbitrary objects X, Y . Next, for each pair of
objects X1, X2, the object X1 âŠ•X2 is both a product, and a coproduct, with
coprojections and projections:
Xi
Îºi
/ X1 âŠ•X2
Ï€j
/ Xj
satisfying
Ï€j â—¦Îºi =
(
id
if i = j
0
if i Ì¸= j
It follows immediately that Îº1 = âŸ¨Ï€1 â—¦Îº1, Ï€2 â—¦Îº1âŸ©= âŸ¨id, 0âŸ©and Ï€1 = [Ï€1 â—¦
Îº1, Ï€1 â—¦Îº2] = [id, 0], and similarly for Îº2 and Ï€2. Moreover, each homset of
maps X â†’Y is a commutative monoid, with sum of maps f, g : X â†’Y given
by:
f + g =

X
âˆ†=âŸ¨id,idâŸ©/ X âŠ•X
fâŠ•g
/ Y âŠ•Y
âˆ‡=[id,id]/ Y

The zero element for this addition + is the zero map 0: X â†’Y .
Deï¬nition 31. We call a category A a grounded biproduct category if A has
ï¬nite biproducts (âŠ•, 0) and has a special object I with for each X âˆˆA a â€˜groundâ€™
map
X : X â†’I satisfying the four requirements below. We omit the subscript
X in
X when it is clear from the context.
1. the ground on I is the identity:
I = idI : I â†’I;
2. coprojections commute with ground:
 Xi
Îºi
âˆ’â†’X1 âŠ•X2 âˆ’â†’I

=
 Xi âˆ’â†’I

.
3. ground maps are â€˜zero-monicâ€™, that is
â—¦f = 0 implies f = 0
4. â€˜subcausal cancellationâ€™ holds: if f + g = f + h =
: X â†’I, then g = h.
A map f : X â†’Y in A is called causal if
Y â—¦f =
X. We write Caus(A) Ö’â†’A
for the subcategory with causal maps.
As we shall see in Examples 33 and 34 below, these ground maps describe a
unit elements, possibly in opposite direction. Causal maps preserve this units,
and may thus be called unital â€” or co-unital. The idea of deï¬ning them causal
maps in this way occurs in [CL13], building on the causality axiom in [CDP11].
The above second point says that coprojections are causal. Third point, about
cancellation, fails in the CPâˆ—-category obtained from the category of relations,
where union âˆªis used as sum +.
We can now state and prove the main result, which was obtained jointly
with Aleks Kissinger.
Theorem 32. The category Caus(A) of causal maps, for a grounded biproduct
category A, is an eï¬€ectus.
41

Proof The category Caus(A) has coproduct âŠ•since the coprojections Îºi are
causal by deï¬nition, and the cotuple [f, g] is causal if f : X â†’Z, g : Y â†’Z are
causal by requirement (2) in Deï¬nition 31:
Z â—¦[f, g] = [
Z â—¦f,
Z â—¦g] = [
X,
Y ]
(2)
= [
X+Y â—¦Îº1,
X+Y â—¦Îº2] =
X+Y .
The zero object 0 in A is initial in Caus(A) since !X : 0 â†’X is causal. We have
X â—¦!X = !I =
0. The object I âˆˆA is ï¬nal in Caus(A), since: the ground map
X : X â†’I is causal because
I â—¦
X = idI â—¦
X =
X. Further, any causal
map f : X â†’I satisï¬es f = idI â—¦f =
I â—¦f =
X.
We have to prove that the two diagrams from Deï¬nition 2 (1) are pullbacks
in Caus(A).
X âŠ•Y
idâŠ•
/
âŠ•id 
X âŠ•I
âŠ•id

X
/
Îº1 
I
Îº1

I âŠ•Y
idâŠ•
/ I âŠ•I
X âŠ•Y
âŠ•
/ I âŠ•I
For the diagram on the left let A âˆˆA be an object with causal maps f : A â†’
X âŠ•I and g : A â†’I âŠ•Y satisfying (
âŠ•id) â—¦f = (id âŠ•
) â—¦g. There is an
obvious, unique mediating map âŸ¨Ï€1 â—¦f, Ï€2 â—¦gâŸ©: A â†’X âŠ•Y . We only have to
prove that it is causal. First notice that:
Y â—¦Ï€1 â—¦f = Ï€1 â—¦(
âŠ•id) â—¦f = Ï€1 â—¦(id âŠ•
) â—¦g = Ï€1 â—¦g =
I â—¦Ï€1 â—¦g.
Now we have that:
XâŠ•Y =
XâŠ•Y â—¦[Îº1, Îº2] = [
XâŠ•Y â—¦Îº1,
XâŠ•Y â—¦Îº2]
= [
X,
Y ] = âˆ‡â—¦(
X âŠ•
Y ).
(âˆ—)
Hence:
â—¦âŸ¨Ï€1 â—¦f, Ï€2 â—¦gâŸ©
(âˆ—)
= âˆ‡â—¦(
âŠ•
) â—¦âŸ¨Ï€1 â—¦f, Ï€2 â—¦gâŸ©
= âˆ‡â—¦âŸ¨
â—¦Ï€1 â—¦f,
â—¦Ï€2 â—¦gâŸ©
= âˆ‡â—¦âŸ¨
â—¦Ï€1 â—¦g,
â—¦Ï€2 â—¦gâŸ©
as shown above
= âˆ‡â—¦(
âŠ•
) â—¦âŸ¨Ï€1 â—¦g, Ï€2 â—¦gâŸ©
(âˆ—)
=
â—¦g
=
.
The âŸ¨Ï€1 â—¦f, Ï€2 â—¦gâŸ©is causal, and the diagram on the left is a pullback.
For the above diagram on the right, let f : A â†’X âŠ•Y be a causal map
satisfying (
âŠ•
) â—¦f = Îº1 â—¦
. The obvious mediating map is Ï€1 â—¦f : A â†’X.
It is causal since
â—¦Ï€1 â—¦f = Ï€1 â—¦(
âŠ•
) â—¦f = Ï€1 â—¦Îº1 â—¦
=
. We obtain
Ï€2 â—¦f = 0 via Deï¬nition 31 (3) from:
â—¦Ï€2 â—¦f = Ï€2 â—¦(
âŠ•
) â—¦f = Ï€2 â—¦Îº1 â—¦
= 0 â—¦
= 0.
We now get:
f = âŸ¨Ï€1 â—¦f, Ï€2 â—¦fâŸ©= âŸ¨Ï€1 â—¦f, 0âŸ©= âŸ¨id, 0âŸ©â—¦Ï€1 â—¦f = Îº1 â—¦Ï€1 â—¦f.
42

Hence Ï€1 â—¦f : A â†’X is the required unique mediating (causal) map.
Finally we have to prove that the following two maps Â·Â·Â·
Â·Â·âœâœand Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœare jointly
monic, in:
(I âŠ•I) âŠ•I
Â·Â·Â·
Â·Â·âœâœ/
Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœ
/ I âŠ•I
where
( Â·Â·Â·
Â·Â·âœâœ= [id, Îº2] = âŸ¨Ï€1 â—¦Ï€1, (Ï€2 â—¦Ï€1) + Ï€2âŸ©
Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœ= [[Îº2, Îº1], Îº2] = âŸ¨Ï€2 â—¦Ï€1, (Ï€1 â—¦Ï€1) + Ï€2âŸ©.
Let f, g : X â†’(IâŠ•I)âŠ•I be causal maps satisï¬ng Â·Â·Â·
Â·Â·âœâœâ—¦f = Â·Â·Â·
Â·Â·âœâœâ—¦g and Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœâ—¦f = Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœâ—¦g.
Then Ï€1 â—¦f = Ï€1 â—¦g since:
Ï€1 â—¦Ï€1 â—¦f = Ï€1 â—¦Â·Â·Â·
Â·Â·âœâœâ—¦f = Ï€1 â—¦Â·Â·Â·
Â·Â·âœâœâ—¦g = Ï€1 â—¦Ï€1 â—¦g
Ï€2 â—¦Ï€1 â—¦f = Ï€1 â—¦Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœâ—¦f = Ï€1 â—¦Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœâ—¦g = Ï€2 â—¦Ï€1 â—¦g.
Hence it suï¬ƒces to show Ï€2 â—¦f = Ï€2 â—¦g : X â†’I. For this we use subcausal
cancellation from Deï¬nition 31 (4):
(âˆ‡â—¦Ï€1 â—¦f) + (Ï€2 â—¦f) = âˆ‡â—¦âŸ¨âˆ‡â—¦Ï€1 â—¦f, Ï€2 â—¦fâŸ©
= âˆ‡â—¦(âˆ‡âŠ•idI) â—¦f
=
I â—¦âˆ‡â—¦(âˆ‡âŠ•idI) â—¦f
since
I = idI
=
X,
where the last equality holds since f is causal, and causal maps are closed under
composition, cotuple and coproduct. Similarly we have (âˆ‡â—¦Ï€1â—¦g)+(Ï€2â—¦g) =
X.
By Ï€1â—¦f = Ï€1â—¦g and the cancellation in Deï¬nition 31 (4) we obtain Ï€2â—¦f = Ï€2â—¦g.
Hence f = g, showing that Â·Â·Â·
Â·Â·âœâœand Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœare jointly monic.
â–¡
In the remainder of this section we show how each of our four running ex-
ample eï¬€ectuses can be understood as category of causal maps in a grounded
biproduct category.
Example 33. Let S be a semiring which is positive and cancellative, that is,
it satisï¬es x + y = 0 â‡’x = y = 0 and x + y = x + z â‡’y = z. We write
MS : Sets â†’Sets for the multiset monad with scalars from S. Thus, elements
of MS(X) are ï¬nite formal sums P
i si|xi âŸ©with si âˆˆS and xi âˆˆX. It is easy
to see that MS is a monad, with unit Î·(x) = 1|xâŸ©. It is an â€˜additiveâ€™ monad
(see [CJ13]), since MS(0) âˆ¼= 1 and MS(X + Y ) âˆ¼= MS(X) Ã— MS(Y ). The
Kleisli category Kâ„“(MS) then has ï¬nite biproducts (+, 0).
We claim that Kâ„“(MS) is a grounded biproduct category. We take I = 1
and use that MS(1) âˆ¼= S. We thus take as map
: X â†’1 in Kâ„“(MS) the
function X â†’S given by
(x) = 1 âˆˆS for all x âˆˆX. We note that each map
f in Kâ„“(MS), of the form f = Î· â—¦g for g : X â†’Y in Sets, is causal, since in
Kâ„“(MS):
 â—¦f

(x) =
 Âµ â—¦MS( ) â—¦Î· â—¦g

(x)
=
 Âµ â—¦Î· â—¦
â—¦g

(x) =
(g(x)) = 1 =
(x).
We now brieï¬‚y check that the ground maps
in Kâ„“(MS) satisfy the four re-
quirements from Deï¬nition 31.
43

1. The ground map
: 1 â†’1 in Kâ„“(MS) is
(âˆ—) = 1, which is the unit Î· of
the monad MS, and thus the identity in Kâ„“(MS).
2. The coprojection Îº1 : X â†’X + Y in Kâ„“(MS) is Î· â—¦k1, where, for the
moment, we write k1 for the coprojection in Sets. Hence it is causal, as
noted above.
3. If
â—¦f = 0 in Kâ„“(MS), for a Kleisli map f : X â†’Y , then P
y f(x)(y) Â·
(y) = 0 for each x âˆˆX. Since S is positive, we get f(x)(y) = 0, for each
y âˆˆY . But then f(x) = 0 âˆˆMS(X), and thus f = 0.
4. If f + g = f + h =
, for f, g, h: 1 â†’MS(X), then we may identify f, g, h
with multisets in MS(X) that satisfy f(x) + g(x) = f(x) + h(x) = 1, for
each x âˆˆX. But then g(x) = h(x) by cancellation in S, for each x âˆˆX,
and thus g = h.
We now consider two special choices for the semiring S.
â€¢ By taking S = N we obtain the category Sets as the eï¬€ectus of causal
maps in Kâ„“(MN). Indeed, maps f : X â†’MN(Y ) with P
y f(x)(y) = 1,
for each x âˆˆX are determined by a unique y âˆˆY with f(x)(y) = 1. Hence
f corresponds to a function X â†’Y .
â€¢ Next we take S = Râ‰¥0, the semiring of non-negative real numbers. We
now obtain the Kleisli category Kâ„“(D) as eï¬€ectus of causal maps in the
grounded biproduct category Kâ„“(MRâ‰¥0), since maps f : X â†’MRâ‰¥0(Y )
with P
y f(x)(y) = 1, for each x, are precisely the maps X â†’D(Y ).
Example 34. It is well-known that the category Ab of Abelian groups has ï¬nite
biproducts (âŠ•, {0}), given by cartesian products. These biproducts restrict to
the category OAb of ordered Abelian groups with positive/monotone group
homomorphisms (described in Example 10). Letâ€™s use the ad hoc notation OUG
for the category with order unit groups as objects, but with positive group
homomorphisms as maps. Hence we have a full and faithful functor OUG â†’
OAb since we do not require that units are preserved. It is not hard to see that
OUG also has biproducts.
We claim that OUGop is a grounded biproduct category. It has biproducts
since they are invariant under taking the opposite. We take I = Z. For an
order unit group G we have to deï¬ne a ground map G â†’Z in OUGop. We
deï¬ne this function
: Z â†’G simply as
(k) = k Â· 1 âˆˆG. We check the four
requirements from Deï¬nition 31.
1. The ground map
: Z â†’Z is given by
(k) = k Â· 1 = k and is thus the
identity.
2. We have a commuting diagram in OUG:
Z
/
'â–
â–
â–
â–
â–
â–
â–
â–
â–
â–
â–
G1 âŠ•G2
Ï€i

Gi
since Ï€i( (k)) = Ï€i(k Â· (1, 1)) = Ï€1(k Â· 1, k Â· 1) = k Â· 1 =
(k).
44

3. If f : G â†’H in OUG satisï¬es f â—¦
= 0, then f(1) = 0. From this we
obtain f(x) = 0 for an arbitrary x âˆˆG in the following way. Since G is
an order unit group there is an n âˆˆN with âˆ’n Â· 1 â‰¤x â‰¤n Â· 1. But then
because f is monotone:
0 = âˆ’n Â· f(1) = f(âˆ’n Â· 1) â‰¤f(x) â‰¤f(n Â· 1) = n Â· f(1) = 0.
Hence f = 0.
4. If f + g = f + h =
: Z â†’G, then f, g, h can be identiï¬ed with elements
of G satisfying f + g = f + h = 1. By subtracting f on both sides we
obtain g = h.
It is now easy to see that OUGop is the subcategory Caus(OUGop) and is
thus an eï¬€ectus. Indeed, a map f : G â†’H in OUG with f â—¦
=
is unital:
f(1) = f( (1)) =
(1) = 1. Hence f is a map in the category OUG of order
unit groups.
In the same way one can prove that the opposite OUSop of the category
OUS of order unit spaces is an eï¬€ectus. Since there is an equivalence of category
OUS â‰ƒEMod, see [JM12b] for details, the opposite EModop of the category
of eï¬€ect modules (over [0, 1]) is also an eï¬€ectus.
In an analogous way one can deï¬ne a category vNA of von Neumann alge-
bras with completely positive maps and show that its opposite is a grounded
biproduct category. The category of von Neumann algebras with completely
positive unital maps is the associated eï¬€ectus of causal maps. In particular, it
forces this quantum model to be â€˜non-signallingâ€™, see [CK15, Â§5.3].
Remark 35. As mentioned in the beginning of this section, the CPâˆ—-categories
from [CHK14] form an inspiration for the construction in this section. A cat-
egory CPâˆ—(C) is obtained from a dagger-compact category C, and forms a
grounded biproduct if:
1. C has ï¬nite biproducts;
2. the dagger in C yields a â€œpositive deï¬nite inner productâ€, that is, for all
Ïˆ: I â†’X, if Ïˆâ€  â—¦Ïˆ = 0, then Ïˆ = 0;
3. â€œuniqueness of positive resolutionsâ€ holds: for all positive maps p, q, qâ€², if
p + q = id = p + qâ€², then q = qâ€². We recall that a map p is called positive
in a dagger-category if there exists g such that p = gâ€  â—¦g.
The main point of this section is to show that inside a grounded biproduct
category there is an eï¬€ectus of causal maps. The grounded biproduct category
can then be seen as a larger, ambient category of the eï¬€ectus. One can also
go in the other direction, that is, produce an ambient grounded biproduct cat-
egory from an eï¬€ectus via a (universal) totalisation construction. This will be
described elsewhere.
7
Kernels and images
Kernels and images (and cokernels) are well-known constructions in (categorical)
algebra. Standardly, for a map f : A â†’B its kernel ker(f) and image im(f) are
45

understood as maps, of the form ker(f): K ÖŒ A and im(f): B Ö‰ C, satisfying
certain universal properties. Here we deï¬ne kernels and images as predicates,
namely ker(f): A â†’1 + 1 and im(f): B â†’1 + 1. Later on, in the presence of
comprehension and quotients, our kernels and images (as predicates) will give
rise to kernels and images/cokernels in the traditional sense, see in particular
Lemma 80 (2) and Lemma 83 (14). When confusion might occur we speak of
kernel/image predicates versus kernel/image maps. But our default meaning is:
predicate.
In the context of eï¬€ectuses there is an important diï¬€erence between kernels
and images: kernels always exist, but the presence of images is an additional
property of an eï¬€ectus.
We recall from (6) on page 10 the two forms of substitution that we use, for
total and partial maps, namely: f âˆ—(p) = p f and gâœ·(p) = [p, Îº1] g = (pâŠ¥g)âŠ¥,
with their basic properties described in Exercise 1. The predicate gâœ·(p) may
be read as the â€˜weakest liberal preconditionâ€™ of p for the partial computation g.
Informally it says: if g terminates, then p holds. The â€˜strongâ€™ version gâœ¸(p) =
p
g says: g terminates and then p holds. As usual, there is the De Morgan
relationship gâœ¸(pâŠ¥) = gâœ·(p)âŠ¥.
At this stage we know that the predicates Pred(X) on an object X in an
eï¬€ectus form an eï¬€ect module, and are in particular partially ordered (see Ex-
ercise 16). We know that the total substitution map f âˆ—preserves the eï¬€ect
module structure. This is diï¬€erent for the partial substitution map gâœ·. So far
we only know that it preserves truth, see Exercise 1 (6). But there is a bit more
that we can say now.
Lemma 36. For a partial map g : X â†’Y in an eï¬€ectus the partial substitution
map gâœ·: Pred(Y ) â†’Pred(X) preserves 1, ? and is monotone â€” where ? is
the De Morgan dual of > given by p ? q = (pâŠ¥> qâŠ¥)âŠ¥.
Proof We use that partial pre-composition (âˆ’)
g preserves >, see Proposi-
tion 13 (2). If pâŠ¥âŠ¥qâŠ¥, then:
gâœ·(p ? q) =
 (p ? q)âŠ¥
g
âŠ¥=
 (pâŠ¥> qâŠ¥)
g
âŠ¥
=
 (pâŠ¥
g) > (qâŠ¥
g)
âŠ¥
= (pâŠ¥
g)âŠ¥? (qâŠ¥
g)âŠ¥
= gâœ·(p) ? gâœ·(q).
As a consequence gâœ·is monotone, since p â‰¤q iï¬€qâŠ¥â‰¤pâŠ¥iï¬€qâŠ¥> râŠ¥= pâŠ¥for
some r, that is, q ? r = p.
â–¡
7.1
Kernels
In linear algebra the kernel of a (linear) map f : A â†’B is the subspace {a âˆˆ
A | f(a) = 0} of those elements that get mapped to 0. This also works for partial
maps X â†’Y + 1 where we intuitively understand the kernel as capturing those
elements of X that get sent to 1 in the outcome Y + 1.
Deï¬nition 37. Let B be an eï¬€ectus. The kernel of a partial map f : X â†’Y
is the predicate ker(f): X â†’1 + 1 given by:
ker(f)
def
= f âœ·(0)
= [0, Îº1] f = [Îº2, Îº1] (! + id) f =
 (! + id) f
âŠ¥.
(20)
46

We call f an internal mono if ker(f) = 0.
Sometimes it is easier to work with the orthosupplement of a kernel, and so
we introduce special notation kerâŠ¥for it:
kerâŠ¥(f)
def
= ker(f)âŠ¥
= (! + id) f = â€¹!â€º
f = [Îº1
!, Îº2] f = 1
f.
This kerâŠ¥(f) is sometimes called the â€˜domain predicateâ€™ since it captures
the â€˜domain of fâ€™, where f is deï¬ned, that is, â€˜non-undeï¬nedâ€™. Here we call it
the kernel-supplement. We shortly see that internal monos are not related to
â€˜externalâ€™ monos, in the underling category, but they are part of a factorisation
system, see Proposition 84. Similarly, the internal epis that will be deï¬ned later
on in this section form part of a factorisation system, see Proposition 95 (7).
We review the situation for our running examples.
Example 38. In the eï¬€ectus Sets the kernel of a partial function f : X â†’Y +1
the partial substitution map f âœ·: P(Y ) â†’P(X) is given by:
f âœ·(V ) = {x âˆˆX | âˆ€y âˆˆY . f(x) = Îº1y â‡’y âˆˆV }.
(21)
Hence we obtain as kernel predicate:
ker(f) = f âœ·(0) = {x âˆˆX | âˆ€y âˆˆY . f(x) = Îº1y â‡’y âˆˆâˆ…}
= {x âˆˆX | f(x) = âˆ—},
where we write âˆ—for the sole element of the ï¬nal set/object 1.
In the eï¬€ectus Kâ„“(D) for discrete probability a partial map f : X â†’Y + 1
may be described either as a function f : X â†’D(Y + 1) or as f : X â†’Dâ‰¤1(Y ),
see Example 9. We consider both cases.
1. For f : X â†’D(Y + 1) the partial substitution map f âœ·: [0, 1]Y â†’[0, 1]X
is given by:
f âœ·(q)(x) = P
yâˆˆY f(x)(y) Â· q(y) + f(x)(âˆ—).
(22)
Hence the ker(f) âˆˆ[0, 1]X is the fuzzy predicate:
ker(f)(x) = f âœ·(0)(x) = f(x)(âˆ—) = 1 âˆ’P
yâˆˆY f(x)(y).
The kernel thus assigns to x âˆˆX the probability that f(x) is undeï¬ned.
2. For a function f : X â†’Dâ‰¤1(Y ) we have:
f âœ·(q)(x) = P
yâˆˆY f(x)(y) Â· q(y) +
 1 âˆ’P
y f(x)(y)

.
(23)
It gives essentially the same description of the kernel:
ker(f)(x) = 1 âˆ’P
y f(x)(y)
so that
kerâŠ¥(f)(x) = P
y f(x)(y).
47

In the eï¬€ectus OUGop of order unit groups the kernel of a partial map
f : G â†’H can also be described in two ways, via the correspondences from
Example 10. We choose to understand f as a positive subunital map H â†’G.
Then, for an eï¬€ect e âˆˆ[0, 1]H we have:
f âœ·(e) = f(e) + f(1)âŠ¥.
(24)
As a result, if identify e âˆˆ[0, 1]H with the corresponding map e: H â†’Z âŠ•Z,
then:
e â—¦f = f âœ·(eâŠ¥)âŠ¥
by Exercise 1 (4)
= 1 âˆ’f(eâŠ¥) âˆ’f(1)âŠ¥
by (24)
= 1 âˆ’f(1) + f(e) âˆ’f(1)âŠ¥
= f(1)âŠ¥+ f(e) âˆ’f(1)âŠ¥
= f(e).
(25)
Moreover, we simply have:
ker(f) = f(1)âŠ¥
and so
kerâŠ¥(f) = f(1).
The same descriptions apply in the eï¬€ectus vNAop of von Neumann algebras.
We continue with some basic properties of kernels.
Lemma 39. The kernel operation ker(âˆ’) in an eï¬€ectus B satisï¬es:
1. ker(p) = pâŠ¥for a predicate p: X â†’1, and so kerâŠ¥(p) = p;
2. ker(f) = 1 iï¬€kerâŠ¥(f) = 0 iï¬€f = 0;
3. ker(âœ„1) = [0, 1] and ker(âœ„2) = [1, 0], for the partial projections âœ„i deï¬ned
in (1);
4. f is internally monic, that is ker(f) = 0, iï¬€f is total;
5. ker(g
f) = f âœ· ker(g)

6. ker(g
f) â‰¥ker(f);
7. ker(â€¹hâ€º
f) = ker(f);
8. the internally monic maps form a subcategory of Par(B);
9. if g
f and g are internally monic, then so is f;
10. f âœ·(pâŠ¥) = f âœ·(p)âŠ¥> ker(f).
Proof This involves some elementary reasoning in an eï¬€ectus.
1. Clearly, ker(p) = [0, Îº1] p = [Îº2
!, Îº2] p = [Îº2, Îº1] p = pâŠ¥.
2. First, ker(0) = ker(Îº2 !) = [0, Îº1] Îº2 ! = Îº1 ! = 1. Next, if 1 = ker(f),
then (! + id) f = kerâŠ¥(f) = 0, so that f = 0 by Lemma 7.
48

3. We simply calculate:
ker(âœ„1) = [0, Îº1] (id + !) = [0, Îº1
!] = [0, 1]
ker(âœ„2) = [0, Îº1] [Îº2
!, Îº1] = [Îº1
!, 0] = [1, 0].
4. On the one hand the kernel of a total map is 0 since:
ker(â€¹gâ€º) = [Îº2
!, Îº1] Îº1
g = Îº2
! g = Îº2
! = 0.
On the other hand, if ker(f) = 0, then 1
f = kerâŠ¥(f) = 1 so that we f
is total by Lemma 7.
5. We have by Exercise 1 (2):
ker(g
f) = (g
f)âœ·(0) = f âœ· gâœ·(0)

= f âœ· ker(g)

.
6. From 0 â‰¤ker(g) we get by Lemma 36 and point (5):
ker(f) = f âœ·(0) â‰¤f âœ·(ker(g)) = ker(g
f).
7. By a straightforward computation:
ker(â€¹hâ€º
f) = [0, Îº1] (h + id) f = [0, Îº1] f = f âœ·(0) = ker(f).
8. Internally monic maps are total by point (4), and these total map form a
subcategory by Lemma 7.
9. Let g
f and g be internally monic. Write g = â€¹hâ€º. Then f is internally
monic since by point (7),
ker(f) = ker(â€¹hâ€º
f) = ker(g
f) = 0.
10. Let f : X â†’Y be a partial map and p a predicate on Y . We ï¬rst observe
that:
1 =
 1
f

>
 1
f
âŠ¥=
 (p > pâŠ¥)
f

> ker(f)
=
 p
f

>
 pâŠ¥
f

> ker(f)
= f âœ·(pâŠ¥)âŠ¥> f âœ·(p)âŠ¥> ker(f).
This last equation is based on Exercise 1 (4). By uniqueness of orthosup-
plements we obtain f âœ·(pâŠ¥) = f âœ·(p)âŠ¥> ker(f).
â–¡
We can now see that â€˜internally monicâ€™ does not imply â€˜monicâ€™.
Indeed
â€˜internally monicâ€™ means â€˜totalâ€™, and not every total function in Par(Sets) is
also monic in Par(Sets), like the truth function {0, 1} â†’1 + 1.
More generally, it is not hard to see that a partial map f : X â†’Y + 1 is
monic in the category Par(B) of partial maps of an eï¬€ectus B if and only if its
Kleisli extension [f, Îº2]: X + 1 â†’Y + 1 is monic in B.
49

But also: not all â€˜external monosâ€™ are â€˜internal monosâ€™. For instance the
partial function f : X â†’D(X +1) given by f(x) = 3
4|xâŸ©+ 1
4|âˆ—âŸ©has ker(f)(x) =
f(x)(âˆ—) = 1
4, so ker(f) Ì¸= 0 in [0, 1]X, and thus f is not internally monic. Still f
is an external mono in Par(Kâ„“(D)): if Ï‰, Ï‰â€² âˆˆD(X + 1) satisfy fâˆ—(Ï‰) = fâˆ—(Ï‰â€²),
then for each x âˆˆX we have Ï‰(x) = 4
3 Â· fâˆ—(Ï‰)(x) = 4
3 Â· fâˆ—(Ï‰â€²)(x) = Ï‰â€²(x), and
Ï‰(âˆ—) = 4 Â· fâˆ—(Ï‰)(âˆ—) = 4 Â· fâˆ—(Ï‰â€²)(âˆ—) = Ï‰â€²(âˆ—).
The following technical but important result about kernel-supplements, and
the subsequent proposition, are due to [Cho15].
Lemma 40. Let B be an eï¬€ectus, with objects X, Y âˆˆB. The kernel-supplement
map
Par(B)
 X, Y )
kerâŠ¥
/ Pred(X)
is a map of PCMs, that preserves and reï¬‚ects both 0 and orthogonality âŠ¥.
Moreover, this kernel-supplement map is â€˜dinaturalâ€™ in the situation:
Bop Ã— B
Par(B)(âˆ’,âˆ’)
+
Pred1=Predâ—¦Ï€1
3
âœ¤âœ¤âœ¤âœ¤ kerâŠ¥
Sets
Indeed, for each map f : X â†’Y in B we have a commuting diagram:
Par(B)(X, X)
kerâŠ¥
X/ Pred1(X, X) = Pred(X)
Pred1(X,f)=id
â–
â–
â–
â–
â–
â–
â–
â–
â–
â–
â–
â–
â–
â–
â–
â–
Par(B)(Y, X)
Par(B)(f,X)=(âˆ’) f
7â™¥
â™¥
â™¥
â™¥
â™¥
â™¥
â™¥
â™¥
â™¥
Par(B)(Y,f)=(f+id) (âˆ’)
'P
P
P
P
P
P
P
P
P
Pred(X) = Pred1(X, Y )
Par(B)(Y, Y )
kerâŠ¥
Y
/ Pred1(Y, Y ) = Pred(Y )
Pred1(f,Y )=f âˆ—
7â™¦
â™¦
â™¦
â™¦
â™¦
â™¦
â™¦
â™¦
(26)
Proof First, the map kerâŠ¥preserves and reï¬‚ects 0, since kerâŠ¥(f) = 0 iï¬€f = 0
by Lemma 39 (2) â€” or equivalently, Lemma 7. It also preserves > by Proposi-
tion 13 (2): if parallel partial maps f, g are orthogonal, then:
kerâŠ¥(f > g) = 1
(f > g) = (1
f) > (1
g) = kerâŠ¥(f) > kerâŠ¥(g).
The main challenge is to prove that kerâŠ¥(f) âŠ¥kerâŠ¥(g) implies f âŠ¥g. So let
b: X â†’1 + 1 be a bound for kerâŠ¥(f) and kerâŠ¥(g). Then âœ„1
b = kerâŠ¥(f) =
1
f = â€¹!â€º
f and similarly âœ„2
b = â€¹!â€º
g. We use the projection pullbacks in
Par(B) from (10) in Lemma 3 (2) in two steps below, ï¬rst to get a map c, and
then d.
X
f
"
b
$
c
"
X
g
"
c
%
d
#
Y + 1
â€¹!â€º+id/
âœ„1

â´âœ¤
1 + 1
âœ„1

Y + Y
id+â€¹!â€º/
âœ„2

â´âœ¤
Y + 1
âœ„2

Y
â€¹!â€º
/ 1
Y
â€¹!â€º
/ 1
50

The outer diagram on the right commutes since:
âœ„2
c = âœ„2
(â€¹!â€º + id)
c = âœ„2
b = â€¹!â€º
g.
This d is a bound for f, g, showing f âŠ¥g. By construction âœ„2
d = g, and:
âœ„1
d = âœ„1
(id + â€¹!â€º)
d = âœ„1
c = f.
Finally we check commutation of the dinaturality diagram (26): for a total
map f : X â†’Y and a partial map g âˆˆPar(B)(Y, X) we have:
 f âˆ—â—¦kerâŠ¥
Y â—¦((f + id) âˆ’)

(g) = f âˆ— kerâŠ¥
Y ((f + id) g)

= (! + id) (f + id) g
f
= (! + id) g
f
= kerâŠ¥
X(g
f)
=
 kerâŠ¥
X â—¦(âˆ’f)

(g).
â–¡
This reï¬‚ection of orthogonality is a quite powerful property. First we use it
to say more about the PCM-structure (>, 0) on homsets of partial maps from
Proposition 13.
Proposition 41. Let B be an eï¬€ectus. Then:
1. the sum > on partial homsets Par(B)(X, Y ) is positive: f > g = 0 implies
f = g = 0;
2. it is also cancellative in the sense: f > g = g implies f = 0;
3. Par(B)(X, Y ) is a partial order via f â‰¤g iï¬€f > h = g for some h; pre-
and post-composition of partial maps is thus monotone.
As a result of the last point the category Par(B) of partial maps is not
only enriched over PCMs, but also over pointed posets (with a bottom element,
preserved under composition).
Proof If f > g = 0, then kerâŠ¥(f) > kerâŠ¥(g) = kerâŠ¥(f > g) = 0, so that
kerâŠ¥(f) = kerâŠ¥(g) = 0 since the eï¬€ect module Pred(X) is positive. But then
f = g = 0 by Lemma 39 (2).
If f > g = g, then by similarly applying kerâŠ¥(âˆ’) we get kerâŠ¥(f) = 0 in
Pred(X), and thus f = 0.
Obviously, the order â‰¤on Par(B)(X, Y ) is reï¬‚exive and transitive. But it
is also anti-symmetric: if f â‰¤g and g â‰¤f, say via f > h = g and g > k = f,
then f > (h > k) = f, so that h > k = 0 by point (2), and thus h = k = 0 by
point (1). Hence f = g.
â–¡
We include a second result that uses reï¬‚ection of orthogonality by kernel-
supplements. The fact that normalisation of substates holds in the two examples
Kâ„“(D) and vNAop in Remark 30 is an instance of the following result due to
Sean Tull.
Lemma 42. Let B be an eï¬€ectus whose scalars are given by the unit interval
[0, 1] of R. Then normalisation holds in B: non-zero substates can be normalised
to proper states, that is, for each non-zero Ï‰: 1 â†’X there is a unique Ï: 1 â†’X
with Ï‰ = â€¹Ïâ€º
r for the (non-zero) scalar r = 1
Ï‰: 1 â†’1.
51

In particular, this means that in the context of [JWW15], where all eï¬€ectuses
have [0, 1] as scalars, normalisation comes for free.
Proof Let Ï‰: 1 â†’X be a non-zero substate, with corresponding scalar r =
1
Ï‰ âˆˆ[0, 1].
Since r Ì¸= 0 â€” by Lemma 7 â€” we can ï¬nd an n âˆˆN and
râ€² âˆˆ[0, 1] with râ€² â‰¤r and n Â· r + râ€² = 1. More abstractly, we can ï¬nd scalars
s1, . . . , sm âˆˆ[0, 1] with >i si Â· r = 1. We now form the scalar multiplication
Ï‰
si : 1 â†’X as in Lemma 23. The scalars 1
Ï‰
si = r
si are orthogonal, so
the maps Ï‰
si are orthogonal too, since 1
(âˆ’) = kerâŠ¥reï¬‚ects orthogonality,
by Lemma 40. But then we have the following equalities of maps 1 â†’1.
1 >i(Ï‰
si) = >i 1
Ï‰
si = >i r
si = 1.
Lemma 7 tells that the partial map >i(Ï‰
si): 1 â†’X is total, so we can write
it as â€¹Ïâ€º, for a unique state Ï: 1 â†’X. By construction we have â€¹Ïâ€º
1
Ï‰ = Ï‰
as in (19).
If also Ïâ€² : 1 â†’X satisï¬es â€¹Ïâ€²â€º
r = Ï‰ = â€¹Ïâ€º
r, then we obtain Ïâ€² = Ï from
faithfulness of â€¹âˆ’â€º: B â†’Par(B):
â€¹Ïâ€º = â€¹Ïâ€º >i r
si = >iâ€¹Ïâ€º
r
si
= >iâ€¹Ïâ€²â€º
r
si = â€¹Ïâ€²â€º >i r
si = â€¹Ïâ€²â€º.
â–¡
Tullâ€™s result is a bit more general and generalises the crucial property used in
the lemma to the requirement that the scalars satisfy: for each non-zero scalar
r there are scalars s1, . . . , sm with >i si Â· r = r = >i r Â· si. This condition
does not apply to eï¬€ectuses that have a cube [0, 1]n as scalars. For instance
(r, 0) âˆˆ[0, 1]2 is non-zero, for r Ì¸= 0, but there is no way to raise (r, 0) to the
top element (1, 1) âˆˆ[0, 1]2 via multiply-and-add. This means that the product
of two eï¬€ectuses with normalisation need not have normalisation.
By generalising the requirement to all sets of predicates one can normalise
all non-zero partial maps, via the scalar multiplication from Lemma 67.
Once again using reï¬‚ection of orthogonality we can give an alternative de-
scription of the partial pairing âŸ¨âŸ¨f, gâŸ©âŸ©from Lemma 6. It exists for maps f, g
satisfying 1
f = (1
g)âŠ¥. In the terminology of the present section we can
rephrase this assumption as kerâŠ¥(f) = ker(g), or as kerâŠ¥(f) > kerâŠ¥(g) = 1.
Lemma 43. Let f : Z â†’X and g : Z â†’Y be to partial maps in an eï¬€ectus
with kerâŠ¥(f) = ker(g). Then we can describe the resulting total pairing map
âŸ¨âŸ¨f, gâŸ©âŸ©: Z â†’X + Y as the unique one satisfying in the homset of partial maps
Z â†’X + Y :
â€¹âŸ¨âŸ¨f, gâŸ©âŸ©â€º = (Îº1
f) > (Îº2
g).
(27)
As special case of this equation we obtain, using the equation âŸ¨âŸ¨âœ„1, âœ„2âŸ©âŸ©= id
from (11), a new relationship between projections and coprojections:
id = (Îº1
âœ„1) > (Îº2
âœ„2).
More generally, there is the following bijective correspondence (from [Cho15]):
Z
f
/ X1 + Â· Â· Â· + Xn
==============================
Z
fi
/ Xi
with kerâŠ¥(fi) orthogonal
(28)
52

Moreover, the map f above the lines is total if and only if the maps fi below the
lines satisfy >i kerâŠ¥(fi) = 1.
Proof For the sum > on the right in the equation (27) we take as bound
b: Z â†’(X +Y )+(X +Y ) the map b = â€¹Îº1+Îº2â€º âŸ¨âŸ¨f, gâŸ©âŸ©= (â€¹Îº1â€º+â€¹Îº2â€º) âŸ¨âŸ¨f, gâŸ©âŸ©.
Then:
âœ„1
b = âœ„1
(â€¹Îº1â€º + â€¹Îº2â€º) âŸ¨âŸ¨f, gâŸ©âŸ©= â€¹Îº1â€º
âœ„1
âŸ¨âŸ¨f, gâŸ©âŸ©= â€¹Îº1â€º
f = Îº1
f.
Similarly we get âœ„2
b = Îº2
g. Then:
(Îº1
f) > (Îº2
g) = âˆ‡
b = â€¹âˆ‡â€º
â€¹Îº1 + Îº2â€º âŸ¨âŸ¨f, gâŸ©âŸ©
= â€¹idâ€º âŸ¨âŸ¨f, gâŸ©âŸ©
= â€¹âŸ¨âŸ¨f, gâŸ©âŸ©â€º.
The equation (Îº1
âœ„1) > (Îº2
âœ„2) = id holds by (11), for k = id.
In the bijective correspondence (28) we send a map f : Z â†’X1 + Â· Â· Â· + Xn
to the n-tuple of maps fi = âœ„i
f. These maps are all orthogonal, via f as
bound. Hence the maps kerâŠ¥(fi) = 1 â—¦fi are also orthogonal. If f is total, then
by an n-ary version of (27),
1 = 1
f = 1 >i(Îºi
fi) = >i 1
Îºi
fi = >i 1
fi = >i ker(fi).
In the other direction, let fi : Z â†’Xi be maps for which the kernel-supplements
kerâŠ¥(fi) = 1â—¦fi : Z â†’1 are orthogonal. The maps Îºi fi : Z â†’X1+Â· Â· Â·+Xn are
then orthogonal too since the maps 1 Îºi fi = 1 fi are orthogonal and kerâŠ¥=
1
(âˆ’) reï¬‚ects orthogonality, by Lemma 40. Hence we take f = >i(Îºi
fi).
This map f is total if > ker(fi) = 1 by following the previous chain of equations
backwards.
We get a bijective correspondence since >i(Îºi âœ„i f) = f like in (27), and:
âœ„j >i(Îºi
fi) = >i(âœ„j
Îºi
fi) = >i
(
id
fi if j = i
0
if j Ì¸= i
)
= fj.
â–¡
The bijective correspondence (28) extends the pairing from Lemma 6 to
n-ary form and to partial maps, see the end for Discussion 54 for more details.
7.2
Images
A kernel is a predicate on the domain of a partial map. An image is a predicate
on its codomain. An eï¬€ectus always has kernels. But the existence of images
must be required explicitly.
There is one more notion that we need in the description of images. In an
eï¬€ect algebra an element s is called sharp if s âˆ§sâŠ¥= 0. One may argue that
the meet âˆ§may not exist. But the deï¬nition of sharpness only requires that the
particular meet s âˆ§sâŠ¥exists and is equal to 0. Equivalently, without meets: s
is sharp if for each element x one has: x â‰¤s and x â‰¤sâŠ¥implies x = 0. Notice
that 0 and 1 are sharp elements, and that if s is sharp then its orthosupplement
sâŠ¥is sharp too.
53

Deï¬nition 44. We say that an eï¬€ectus has images if for each partial map
f : X â†’Y there is a least predicate q on Y with f âœ·(q) = 1. In that case we
write im(f) for this predicate q. We say that the eï¬€ectus has sharp images if
these image predicates im(f) are sharp.
Like kernel-supplements kerâŠ¥we also uses image-complements imâŠ¥deï¬ned
as imâŠ¥(f) = im(f)âŠ¥.
We call f an internal epi if im(f) = 1.
In all our examples images are sharp. Since many basic results about images
can be proven without assuming sharpness, we shall not use sharp images until
we really need them.
Letâ€™s see if we have images in our running examples.
Example 45. In the eï¬€ectus Sets, each partial map f : X â†’Y has an image,
namely the subset of Y given by:
im(f) = {y âˆˆY | âˆƒx âˆˆX. f(x) = Îº1y}.
It is easy to see that im(f) is the least subset V âŠ†Y with f âœ·(V ) = 1, using the
deï¬nition of f âœ·from (21).
The eï¬€ectus Kâ„“(D) also has images: for a partial map f : X â†’D(Y + 1)
take the (sharp) predicate im(f): Y â†’[0, 1] given by:
im(f)(y) =
(
1
if there is an x âˆˆX with f(x)(y) > 0
0
otherwise.
We have, using the description of f âœ·from (22),
f âœ·(im(f))(x) = P
y f(x)(y) Â· im(f)(y) + f(x)(âˆ—)
= P
y f(x)(y) + f(x)(âˆ—)
= 1.
Further, if q âˆˆ[0, 1]Y satisï¬es f âœ·(q) = 1, then P
y f(x)(y) Â· q(y) + f(x)(âˆ—) = 1
for each x âˆˆX. But this can only happen if q(y) = 1 if f(x)(y) > 0, that is, if
im(f) â‰¤q.
In the eï¬€ectus OUGop of order unit groups, images need not exist. To see
this, let A = [0, 1]2 be the unit square, which is clearly a convex set.
The
set Aï¬€(A) of bounded aï¬ƒne functions A â†’R forms an order unit group with
coordinatewise operations and order. Let Ï•: Aï¬€(A) â†’R be the map given by
Ï•(f) = f(0, 0) for all f âˆˆAï¬€(A). We claim that Ï•, seen as arrow R â†’Aï¬€(A)
in OUGop, has no image. Towards a contradiction, let Ï• have image f = im(Ï•)
in the unit interval of predicates [0, 1]Aï¬€(A), see Example 10. Then:
1 = Ï•âœ·(f)
(24)
= Ï•(f) + Ï•(1)âŠ¥= f(0, 0) + 1(0, 0)âŠ¥= f(0, 0).
Consider the functions f1, f2 âˆˆAï¬€(A) given by f1(x, y) = 1 âˆ’x and f2(x, y) =
1 âˆ’y.
Clearly, Ï•âœ·(f1) = f1(0, 0) = 1 and Ï•âœ·(f2) = f2(0, 0) = 1.
Hence
f â‰¤f1, f2 by minimality of images. Then f(1, y) â‰¤f1(1, y) = 0 and f(x, 1) â‰¤
f2(x, 1) = 0.
In particular f(1, 1) = 0.
We now consider the middle point
54

( 1
2, 1
2) âˆˆA. It can be written in two ways as convex combination of extreme
points, namely as:
1
2(1, 0) + 1
2(0, 1)
(a)
= ( 1
2, 1
2)
(b)
=
1
2(0, 0) + 1
2(1, 1).
By applying the aï¬ƒne function f on both sides we obtain a contradiction. Start-
ing from the above equation (a) we get:
f
  1
2, 1
2

= f
  1
2(1, 0) + 1
2(0, 1)

= 1
2f(1, 0) + 1
2f(0, 1) = 0.
But starting from the equation (b) we obtain a diï¬€erent outcome:
f
  1
2, 1
2

= f
  1
2(0, 0) + 1
2(1, 1)

= 1
2f(0, 0) + 1
2f(1, 1) = 1
2.
The conclusion is that the map Ï• in the eï¬€ectus OUGop has no image.
In the eï¬€ectus vNAop of von Neumann algebra the image of a subunital
map f : A â†’B does exist, and is given by the following (sharp) eï¬€ect of A .
im(f) =
^
{p âˆˆA | p is a projection with f(p) = f(1)}.
(29)
Here we use that projections are the sharp elements and form a complete lattice,
see e.g. [Sak71, Prop. 1.10.2] One can prove: f(a) = 0 implies im(f) â‰¤aâŠ¥, for
an arbitrary element a âˆˆ[0, 1]A , see also Lemma 47 (3) below.
It can be shown that in a von Neumann algebra the sharp elements are
precisely the projections, that is, the eï¬€ects e with e Â· e = e.
Later on, in
Proposition 106 (5), we prove this in abstract form.
In general, images need not exist in an eï¬€ectus, but they do exist for a few
special maps: identity maps, coprojections, and partial projections.
Lemma 46. In the category Par(B) of partial maps of an eï¬€ectus B,
1. im(id) = 1, for the identity map id : X â†’X;
2. im(0) = 0, for the zero map 0: X â†’Y ;
3. im(Îº1) = [1, 0] and im(Îº2) = [0, 1];
4. im(âœ„1) = 1 and also im(âœ„2) = 1, so that the partial projections âœ„i are
internally epic.
Proof We show each time that the claimed predicate has the universal property
of an image (the least sharp one such that . . . ).
1. By Exercise 1 (2) we have idâœ·(p) = p. Hence idâœ·(p) = 1 iï¬€p = 1, so that
im(id) = 1.
2. Let 0âœ·(p) = 1. Then 1 = [p, Îº1] Îº2
! = Îº1
!. This equation imposes no
restrictions on p, so the least predicate for which this holds is the falsity
predicate 0. Hence im(0) = 0.
3. Formally a coprojection in Par(B) is of the form â€¹Îºiâ€º = Îº1
Îºi.
By
Exercise 1 (3) we have â€¹Îº1â€ºâœ·([1, 0]) = Îºâˆ—
1([1, 0]) = [1, 0] Îº1 = 1. Further,
if also â€¹Îº1â€ºâœ·(p) = 1, then p Îº1 = 1. Since p â—¦Îº2 â‰¥0, we get p â‰¥[1, 0].
Similarly one shows that im(Îº2) = [0, 1].
55

4. Let âœ„âœ·
1 (p) = 1. Then 1 = [p, Îº1] âœ„1 = [p, Îº1] (id + !) = [p, Îº1 !] = [p, 1].
But then p = [p, 1] Îº1 = 1 Îº1 = 1. The âœ„2-case is left to the reader. â–¡
Having seen this result we can say that the following is an â€˜internalâ€™ short
exact sequence in the category of partial maps an eï¬€ectus.
0
/ X
Îº1
/ X + Y
âœ„2 / Y
/ 0
(30)
Exactness means that the image of one map is the kernel of the next one. This
works because the coprojections are total in the category of partial maps, and
thus internally monic, the partial projections are internally epic, and im(Îº1) =
[1, 0] = ker(âœ„2). But there is more: the sequence 30 involves two splittings,
making Îº1 a split mono, and âœ„2 a split epi:
0
/ X
Îº1
/ X + Y
âœ„2 /
âœ„1
b
Y
/
Îº2
c
0
(31)
This is a reformulation of the â€˜butterï¬‚yâ€™ diagram (4).
Lemma 47. In an eï¬€ectus B with images one has:
1. ker(f) = f âœ· imâŠ¥(f)

;
2. im(f) = 0 iï¬€ker(f) = 1;
3. p
f = 0 iï¬€p â‰¤imâŠ¥(f); in particular, imâŠ¥(f)
f = 0;
4. im(g
f) â‰¤im(g);
5. im(f) â‰¤gâœ· im(g
f)

;
6. im(g
f) = im(g) if f is a internal epi;
7. g
f = 0 iï¬€im(f) â‰¤ker(g);
8. if g
f and f are internally epic, then so is g;
9. internal epis form a subcategory;
10. a partial map f is internally epic iï¬€for each predicate q on its codomain:
f âœ·(q) = 1 â‡â‡’q = 1;
11. â€˜externalâ€™ epis are internal epis: each epi f in Par(B) satisï¬es im(f) = 1;
12. im([f, g]) = im(f) âˆ¨im(g), for predicates f, g with the same codomain.
Proof All of the points are obtained by elementary arguments.
1. The equation ker(f) = f âœ· imâŠ¥(f)

follows directly from Lemma 39 (10):
f âœ· imâŠ¥(f)

= f âœ·(im(f))âŠ¥> ker(f) = 1âŠ¥> ker(f) = ker(f).
2. If im(f) = 0, then by the previous point:
ker(f) = f âœ· imâŠ¥(f)

= f âœ·(0âŠ¥) = f âœ·(1) = 1.
Conversely, if 1 = ker(f) = f âœ·(0), then im(f) â‰¤0 since it is minimal.
56

3. First, we have:
imâŠ¥(f)
f = [imâŠ¥(f), Îº2] f
= [Îº2, Îº1] [im(f), Îº1] f = f âœ·(im(f))âŠ¥= 1âŠ¥= 0.
Hence if p â‰¤imâŠ¥(f), then p
f â‰¤imâŠ¥(f)
f = 0, using Lemma 36.
In the other direction, if p
f = 0, then:
f âœ·(pâŠ¥). = (p
f)âŠ¥= 0âŠ¥= 1.
Hence im(f) â‰¤pâŠ¥by minimality of images, and so p â‰¤im(f)âŠ¥= imâŠ¥(f).
4. In order to prove im(g
f) â‰¤im(g) it suï¬ƒces to show (g
f)âœ·(im(g)) = 1.
But the latter is easy, since (g f)âœ·(im(g)) = f âœ· gâœ·(im(g))

= f âœ·(1) = 1.
5. The inequality im(f) â‰¤gâœ· im(g
f)

follows by minimality of images
from:
f âœ·
gâœ· im(g
f)

= (g
f)âœ· im(g
f)

= 1.
6. By point (4) we only have to prove im(g
f) â‰¥im(g). This follows if we
can show gâœ· im(g
f)

= 1. But this is a consequence of the previous
point, since im(f) = 1 because f is by assumption an internal epi.
7. Let g
f = 0. Then, by Lemma 39 (5), we have f âœ·(ker(g)) = ker(g
f) = ker(0) = 1, so that im(f) â‰¤ker(g). Conversely, if im(f) â‰¤ker(g),
then 1 = f âœ·(im(f)) â‰¤f âœ·(ker(g)) = ker(g
f). But then g
f = 0 by
Lemma 39 (2).
8. Let g f and f be internally epic. Then g is internally epic too, by point (6)
since: im(g) = im(g
f) = 1.
9. Lemma 46 (1) says that the partial identity is internally epic. And if g, f
are internal epis, then by point (6), g
f too, since im(g
f) = im(g) = 1.
10. Let f be internally epic. Clearly, if q = 1, then f âœ·(q) = f âœ·(1) = 1. In the
other direction, if f âœ·(q) = 1, then, by minimality of images, 1 = im(f) â‰¤
q.
Conversely, assume f âœ·(q) = 1 â‡â‡’q = 1 for each predicate q.
Take
q = im(f); since by deï¬nition f âœ·(im(f)) = 1, we get q = im(f) = 1, so
that f is internally epic.
11. Let f : X â†’Y be epic in Par(B). By point (3) we have imâŠ¥(f)
f = 0.
But also 0 f = 0. Hence imâŠ¥(f) = 0 since f is epic, and thus im(f) = 1,
so that f is internally epic.
12. We use point (3) to show that for an arbitrary predicate p,
im([f, g]) â‰¤p â‡â‡’pâŠ¥â‰¤imâŠ¥([f, g])
â‡â‡’pâŠ¥
[f, g] = [pâŠ¥
f, pâŠ¥
g] = 0
â‡â‡’pâŠ¥
f = 0 and pâŠ¥
g = 0
â‡â‡’pâŠ¥â‰¤imâŠ¥(f) = 0 and pâŠ¥â‰¤imâŠ¥(g) = 0
â‡â‡’im(f) â‰¤p and im(g) â‰¤p.
â–¡
57

8
Relating total and partial maps
This section contains the main result of [Cho15], giving a precise relation be-
tween total and partial maps in an eï¬€ectus. Brieï¬‚y certain requirements R are
identiï¬ed so that:
â€¢ for a category C satisfying R, the subcategory Tot(C) of â€˜totalâ€™ maps in
C is an eï¬€ectus, and Par(Tot(C)) âˆ¼= C;
â€¢ for an eï¬€ectus B, the category of partial maps Par(B) satisï¬es R, and
Tot(Par(B)) âˆ¼= B.
A category satisfying R is called a FinPAC with eï¬€ects in [Cho15]. This termi-
nology is explained below.
This correspondence is made precise in [Cho15] in the form of a 2-equivalence
of 2-categories. Here however, we discuss the essentials in more concrete form,
and refer the reader to loc. cit. for further details. This close correspondence
between total and partial maps can be seen as a conï¬rmation of the appropri-
ateness of the notion of eï¬€ectus. The correspondence and its consquences â€” for
notation and terminology â€” are discussed at the end of this section.
We ï¬rst have to explore the notion of ï¬nitely partially additive category, or
FinPAC. This is based on the notion of partially additive category, introduced
in [AM80].
8.1
FinPACs
Recall that an arbitrary category C is PCM-enriched if all its homsets are
PCMs with >, 0, and pre- and post-composition preserve the PCM-structure.
If such a category C has coproducts + too, then we can deï¬ne â€˜projectionsâ€™ âœ„i
via the zero map 0, like in (2), as:
X
X + Y
âœ„1=[id,0]
o
âœ„2=[0,id] / Y
(32)
These projections are automatically natural: âœ„i â—¦(f1 + f2) = fi â—¦âœ„i.
Since C is any category â€” not necessarily an eï¬€ectus â€” we shall use ordinary
notation, like â—¦and â†’, for composition and maps, and not the special notation
,
and â†’, â†’for eï¬€ectuses.
Deï¬nition 48. A ï¬nitely partially additive category (a FinPAC, for short) is
a PCM-enriched category C with ï¬nite coproducts (+, 0) satisfying both the:
â€¢ Compatible Sum Axiom: if there is a bound b: X â†’Y + Y for maps
f, g : X â†’Y with âœ„1 â—¦b = f and âœ„2 â—¦b = g, then f âŠ¥g in the PCM
C(X, Y );
â€¢ Untying Axiom: if f âŠ¥g then (Îº1 â—¦f) âŠ¥(Îº2 â—¦g).
The names for these two axioms come from the theory of partially additive
categories, see [AM80, MA86] or [Hag00]. The maps âœ„i are often called quasi
projections in that context.
We need some basic results about FinPACs, following [MA86, Cho15].
Lemma 49. In a FinPAC C,
58

1. The initial object 0 âˆˆC is also ï¬nal, and thus a zero object; the resulting
zero map X â†’0 â†’Y is the zero element 0 of the PCM-structure on the
homset C(X, Y );
2. the maps Îº1 â—¦âœ„1, Îº2 â—¦âœ„2 : X + Y â†’X + Y are orthogonal with sum
(Îº1 â—¦âœ„1) > (Îº2 â—¦âœ„2) = id;
3. any map f : Z â†’X+Y can be written as sum f = (Îº1â—¦âœ„1â—¦f)>(Îº2â—¦âœ„2â—¦f);
4. the two projection maps âœ„i : X1 + X2 â†’Xi are jointly monic;
5. f1 âŠ¥f2 iï¬€there is a necessarily unique bound b with âœ„i â—¦b = fi and
f1 > f2 = âˆ‡â—¦b.
Proof For the sake of completeness, we include the details.
1. For each object X âˆˆC there is a map 0: X â†’0, namely the PCM-zero. It
is the only such map, since each f : X â†’0 satisï¬es: f = id â—¦f = 0â—¦f = 0.
The resulting map X â†’0 â†’Y is thus ! â—¦0 = 0.
2. Take as bound b = Îº1 + Îº2 : X + Y â†’(X + Y ) + (X + Y ). Then:
âœ„1 â—¦b = [id, 0] â—¦(Îº1 + Îº2) = [Îº1, 0] = Îº1 â—¦[id, 0] = Îº1 â—¦âœ„1.
Similarly one obtains âœ„2 â—¦b = Îº2 â—¦âœ„2. This gives (Îº1 â—¦âœ„1) âŠ¥(Îº2 â—¦âœ„2) by
the Compatible Sum Axiom. We take their sum s = (Îº1 â—¦âœ„1) > (Îº2 â—¦âœ„2)
in the homset of maps X +Y â†’X +Y and obtain s = id from sâ—¦Îºi = Îºi,
as in:
s â—¦Îº2 =
 (Îº1 â—¦âœ„1) > (Îº2 â—¦âœ„2)

â—¦Îº2
= (Îº1 â—¦[id, 0] â—¦Îº2) > (Îº2 â—¦[0, id] â—¦Îº2)
= (Îº1 â—¦0) > Îº2
= 0 > Îº2
= Îº2.
3. Directly by the previous point, for f : Z â†’X + Y ,
f = id â—¦f =
 (Îº1 â—¦âœ„1) > (Îº2 â—¦âœ„2)

â—¦f = (Îº1 â—¦âœ„1 â—¦f) > (Îº2 â—¦âœ„2 â—¦f).
4. Suppose f, g : Z â†’X1 + X2 satisfy âœ„i â—¦f = âœ„i â—¦g, for i = 1, 2. Then, by
the previous point:
f = (Îº1 â—¦âœ„1 â—¦f) > (Îº2 â—¦âœ„2 â—¦f) = (Îº1 â—¦âœ„1 â—¦g) > (Îº2 â—¦âœ„2 â—¦g) = g.
5. If a bound exists, then it is unique because the âœ„i are jointly monic.
The Compatible Sum Axiom says that existence of a bound b for f1, f2
gives f1 âŠ¥f2. We have to prove the converse. So let f1 âŠ¥f2, and thus
(Îº1â—¦f1) âŠ¥(Îº2â—¦f2) by the Untying Axiom. We take b = (Îº1â—¦f1)>(Îº2â—¦f2).
Then âœ„i â—¦b = fi, making b a bound. Moreover:
âˆ‡â—¦b = (âˆ‡â—¦Îº1 â—¦f1) > (âˆ‡â—¦Îº2 â—¦f2) = f1 > f2.
â–¡
59

The next result shows the relevance of FinPACs in the current setting.
Lemma 50. The category Par(B) of partial maps in an eï¬€ectus B is a FinPAC.
Proof We know that Par(B) is enriched over PCM by Proposition 13, and
inherits coproducts from B, like any Kleisli category. The Compatible Sum
Axiom holds by deï¬nition of orthogonality, see Proposition 13 (1).
For the
Untying Axiom, let f1, f2 : X â†’Y satisfy f1 âŠ¥f2 via bound b: X â†’Y + Y .
Then c = (Îº1 + Îº2)
b: X â†’(Y + Y ) + (Y + Y ) is a bound for Îºi â—¦fi since:
âœ„i
c = âœ„i
(Îº1 + Îº2)
b = Îºi
âœ„i
b = Îºi
fi.
â–¡
8.2
FinPACs with eï¬€ects
We now come to the axiomatisation of the category of partial maps in an eï¬€ectus.
We use the name â€˜FinPAC with eï¬€ectsâ€™ from [Cho15]. This is a temporary name,
see Discussion 54 below.
Deï¬nition 51. A category C is called a FinPAC with eï¬€ects if it is a FinPAC
with a special object I âˆˆC such that:
1. the homset C(X, I) is not only a PCM, but an eï¬€ect algebra, for each
object X âˆˆC;
2. the top/truth element 1 âˆˆC(X, I) satisï¬es: for all f, g : Y â†’X,
(1 â—¦f) âŠ¥(1 â—¦g) =â‡’f âŠ¥g
3. the bottom/falsity element 0 âˆˆC(X, I) satisï¬es: for all f : Y â†’X,
1 â—¦f = 0 =â‡’f = 0.
These last two points say that the function 1 â—¦(âˆ’) reï¬‚ects orthogonality and
zero.
A map f : X â†’Y in such a FinPAC with eï¬€ects is called total if 1Y â—¦f =
1X. We write Tot(C) Ö’â†’C for the â€˜wideâ€™ subcategory (with the same objects)
of total maps in C.
These top maps 1: X â†’I resemble the ground maps
: X â†’I in Def-
inition 31. Recall that causal maps f satisfy
â—¦f =
. The corresponding
property 1 â—¦f = 1 describes the total maps, as deï¬ned above.
Before arriving at the main result of this section, we collect a few facts about
FinPACs with eï¬€ects.
Lemma 52. In an FinPAC with eï¬€ects (C, I),
1. split monics are total, so in particular all coprojections and isomorphisms
are total;
2. idI = 1: I â†’I; as a result, I âˆˆC is ï¬nal in Tot(C);
3. [1, 1] = 1: X + Y â†’I;
60

4. for each total map f : X â†’Y pre-composition (âˆ’)â—¦f : C(Y, I) â†’C(X, I)
is a map of eï¬€ect algebras;
5. Tot(C) inherits ï¬nite coproducts (+, 0) from C.
Proof We reason in the category C.
1. Let f â—¦m = id, making m a split monic. We have 1 â—¦f â‰¤1, since 1 is
by deï¬nition the top element. Hence by post-composing with m we get:
1 = 1â—¦f â—¦m â‰¤1â—¦m, so that 1 = 1â—¦m. Coprojections Îºi are split monics
in C, since âœ„i â—¦Îºi = id.
2. In the eï¬€ect algebra C(I, I) we have id âŠ¥idâŠ¥. Hence (1 â—¦id) âŠ¥(1 â—¦
idâŠ¥) since post-composition is a PCM-map. But then 1 â—¦idâŠ¥= 0 by
Deï¬nition 15 (2).
This gives idâŠ¥= 0 by Deï¬nition 51 (3), and thus
id = 1.
For each object X there is a total map 1X : X â†’I, since 1X = idI â—¦1X =
1I â—¦1X. If f : X â†’I is total, then f = idI â—¦f = 1I â—¦f = 1X.
3. For the equation [1, 1] = 1: X + Y â†’I we use that coprojections are
total, by point (1):
1 = 1 â—¦[Îº1, Îº2] = [1 â—¦Îº1, 1 â—¦Îº2] = [1, 1].
4. The map (âˆ’) â—¦f preserves the PCM-structure by deï¬nition. And it pre-
serves truth 1 since f is total. Hence it is a map of eï¬€ect algebras, see
Deï¬nition 15.
5. The object 0 is initial in Tot(C), since the unique map !: 0 â†’X is total:
1X â—¦!X = !I = 10 by initiality in C. Coprojections are total by point (1).
If f, g are total, then so is [f, g] since 1 â—¦[f, g] = [1 â—¦f, 1 â—¦g] = [1, 1] = 1
by point (3).
â–¡
We now come to the main result of this section.
Theorem 53. (From [Cho15])
1. For an eï¬€ectus B, the category of partial maps Par(B) with special object
1 is a FinPAC with eï¬€ects, and Tot(Par(B)) âˆ¼= B.
2. For a FinPAC with eï¬€ects (C, I), the subcategory Tot(C) of total maps is
an eï¬€ectus, and Par(Tot(C)) âˆ¼= C.
Proof Let B be an eï¬€ectus. Lemma 50 tells that Par(B) is a FinPAC. We take
I = 1, so that Par(B)(X, 1) = B(X, 1+1) = Pred(X) is an eï¬€ect algebra. Next
if 1 f = kerâŠ¥(f) âŠ¥kerâŠ¥(g) = 1 g, then f âŠ¥g since kerâŠ¥reï¬‚ects orthogonality
â€” and zero too â€” by Lemma 40. Reï¬‚ection of zero proves requirement (3) in
Deï¬nition 51. In order to prove Tot(Par(B)) âˆ¼= B we have to prove that a map
f : X â†’Y is total iï¬€1
f = 1. But we already know this from Lemma 7.
For the second point, let (C, I) be a FinPAC with eï¬€ects. From Lemma 52
we know that the category Tot(C) of total maps has I as ï¬nial object, and has
coproducts (+, 0) as in C. We ï¬rst show that the rectangles in Deï¬nition 2 (1)
61

are pullbacks in Tot(C). We may thus assume that we have total maps f, g, h
in commuting (outer) diagrams:
Z
g
!
f
%
k
#
W
h
"
1
$
âœ„1â—¦h
#
X + Y
id+1 /
1+id

X + I
1+id

X
1
/
Îº1

I
Îº1

I + Y
id+1 / I + I
X + Y
1+1 / I + I
We ï¬rst concentrate on the situation on the left. By assumption, (1 + id) â—¦f =
(id + 1) â—¦g = b, say. Then (âœ„1 â—¦b) âŠ¥(âœ„2 â—¦b), by deï¬nition of orthogonality.
But:
âœ„1 â—¦b = âœ„1 â—¦(1 + id) â—¦f = 1 â—¦âœ„1 â—¦f = 1 â—¦Îº1 â—¦âœ„1 â—¦f
âœ„2 â—¦b = âœ„2 â—¦(id + 1) â—¦g = 1 â—¦âœ„2 â—¦g = 1 â—¦Îº2 â—¦âœ„2 â—¦g.
Hence we have (1 â—¦Îº1 â—¦âœ„1 â—¦f) âŠ¥(1 â—¦Îº2 â—¦âœ„2 â—¦g), from which we can conclude
(Îº1 â—¦âœ„1 â—¦f) âŠ¥(Îº2 â—¦âœ„2 â—¦g) using Deï¬nition 51 (2). Thus we can deï¬ne:
k = (Îº1 â—¦âœ„1 â—¦f) > (Îº2 â—¦âœ„2 â—¦g) : W âˆ’â†’X + Y.
Then:
(id + 1) â—¦k = ((id + 1) â—¦Îº1 â—¦âœ„1 â—¦f) > ((id + 1) â—¦Îº2 â—¦âœ„2 â—¦g)
= (Îº1 â—¦âœ„1 â—¦f) > (Îº2 â—¦1 â—¦âœ„2 â—¦g)
= (Îº1 â—¦âœ„1 â—¦f) > (Îº2 â—¦âœ„2 â—¦(id + 1) â—¦g)
= (Îº1 â—¦âœ„1 â—¦f) > (Îº2 â—¦âœ„2 â—¦(1 + id) â—¦f)
= (Îº1 â—¦âœ„1 â—¦f) > (Îº2 â—¦âœ„2 â—¦f)
= f
by Lemma 49 (3).
Similarly one proves (1 + id) â—¦k = g. For uniqueness, let â„“: W â†’X + Y also
satisfy (id + 1) â—¦â„“= f and (1 + id) â—¦â„“= g, then:
k = (Îº1 â—¦âœ„1 â—¦f) > (Îº2 â—¦âœ„2 â—¦g)
= (Îº1 â—¦âœ„1 â—¦(id + 1) â—¦â„“) > (Îº2 â—¦âœ„2 â—¦(1 + id) â—¦â„“)
= (Îº1 â—¦âœ„1 â—¦â„“) > (Îº2 â—¦âœ„2 â—¦â„“)
= â„“.
In the above diagram on the right we have (1 + 1) â—¦h = Îº1 â—¦1. We claim
âœ„2 â—¦h = 0. This follows by Deï¬nition 51 (3) from
1 â—¦âœ„2 â—¦h = âœ„2 â—¦(1 + 1) â—¦h = âœ„2 â—¦Îº1 â—¦1 = 0 â—¦1 = 0.
The map h: W â†’X + Y then satisï¬es, by Lemma 49 (3),
h = (Îº1 â—¦âœ„1 â—¦h) > (Îº2 â—¦âœ„2 â—¦h) = (Îº1 â—¦âœ„1 â—¦h) > (Îº2 â—¦0) = Îº1 â—¦âœ„1 â—¦h.
62

Hence âœ„1 â—¦h: W â†’X is a mediating map. It is the unique one, since if also
k: W â†’X satisï¬es Îº1 â—¦k = h, then âœ„1 â—¦h = âœ„1 â—¦Îº1 â—¦k = k.
We still have to prove that the two maps Â·Â·Â·
Â·Â·âœâœ, Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœ: (I + I) + I â†’I + I are
jointly monic in Tot(C), where Â·Â·Â·
Â·Â·âœâœ= [id, Îº2] and Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœ= [[Îº2, Îº1], Îº2].
So let
f, g : X â†’(I + I) + I satisfy Â·Â·Â·
Â·Â·âœâœâ—¦f = Â·Â·Â·
Â·Â·âœâœâ—¦g and Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœâ—¦f = Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœâ—¦g. Write:
f1 = âœ„1 â—¦âœ„1 â—¦f
f2 = âœ„2 â—¦âœ„1 â—¦f
f3 = âœ„2 â—¦f.
Then f = (Îº1 â—¦Îº1 â—¦f1) > (Îº1 â—¦Îº2 â—¦f1) > (Îº2 â—¦f3). We can write the map g in
a similar manner. The equation Â·Â·Â·
Â·Â·âœâœâ—¦f = Â·Â·Â·
Â·Â·âœâœâ—¦g yields,
(Îº1 â—¦f1) > (Îº2 â—¦f2) > (Îº2 â—¦f3) = (Îº1 â—¦g1) > (Îº2 â—¦g2) > (Îº2 â—¦g3).
Hence by post-composing with âœ„1 and with âœ„2 we get:
f1 = g1
and
f2 > f3 = g2 > g3.
Similarly, the equation Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœâ—¦f = Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœâ—¦g yields:
(Îº2 â—¦f1) > (Îº1 â—¦f2) > (Îº2 â—¦f3) = (Îº2 â—¦g1) > (Îº1 â—¦g2) > (Îº2 â—¦g3).
Post-composing with âœ„1 yields f2 = g2. By substitution in our previous ï¬nding
we get f2>f3 = f2>g3. Cancellation in the eï¬€ect algebra C(X, I) gives f3 = g3.
Hence f = g.
Finally we show that we have an identity-on-objects, full and faithful functor
F : Par(Tot(C)) â†’C, deï¬ned on maps by F(g) = âœ„1 â—¦g. It is easy to see that
F is indeed a functor. We construct an inverse functor G: C â†’Par(Tot(C)).
Let f : X â†’Y be a map in C. We form 1 â—¦f : X â†’I, so that (1 â—¦f) âŠ¥
(1 â—¦f)âŠ¥. Now note that 1 â—¦f = 1 â—¦Îº1 â—¦f, for Îº1 : Y â†’Y + 1. Next,
(1 â—¦f)âŠ¥= idI â—¦(1 â—¦f)âŠ¥= 1 â—¦(1 â—¦f)âŠ¥= 1 â—¦Îº2 â—¦(1 â—¦f)âŠ¥,
where Îº2 : 1 â†’Y + 1. Hence (1 â—¦Îº1 â—¦f) âŠ¥(1 â—¦Îº2 â—¦(1 â—¦f)âŠ¥), which gives by
Deï¬nition 51 (2) an orthogonality (Îº1 â—¦f) âŠ¥(Îº2 â—¦(1 â—¦f)âŠ¥) in the homset of
maps X â†’Y + 1. We now deï¬ne:
G(f) = (Îº1 â—¦f) > (Îº2 â—¦(1 â—¦f)âŠ¥) : X âˆ’â†’Y + I.
Clearly,
FG(f) = âœ„1 â—¦G(f) = (âœ„1 â—¦Îº1 â—¦f) > (âœ„1 â—¦Îº2 â—¦(1 â—¦f)âŠ¥)
= f > (0 â—¦(1 â—¦f)âŠ¥) = f > 0 = f.
In order to see GF(g) = g, for a total map g : X â†’Y + I, write g = (Îº1 â—¦âœ„1 â—¦
g) > (Îº2 â—¦âœ„2 â—¦g) by Lemma 49 (3), and compare it with:
GF(g) = (Îº1 â—¦âœ„1 â—¦g) > (Îº2 â—¦(1 â—¦âœ„1 â—¦g)âŠ¥).
Hence it suï¬ƒces to show âœ„2 â—¦g = (1 â—¦âœ„1 â—¦g)âŠ¥. This is done as follows. The
map (1 + id) â—¦g : X â†’I + I satisï¬es (âœ„1 â—¦(1 + id) â—¦g) âŠ¥(âœ„2 â—¦(1 + id) â—¦g) and
thus:
(1 â—¦âœ„1 â—¦g) > (âœ„2 â—¦g) = âˆ‡â—¦(1 + id) â—¦g = [1, 1] â—¦g = 1 â—¦g = 1.
But then we are done by uniqueness of orthosupplements in the eï¬€ect algebra
C(X, I).
â–¡
63

Discussion 54. Now that we have seen the equivalence of â€˜eï¬€ectusâ€™ and â€˜Fin-
PAC with eï¬€ectsâ€™ we have a choice â€” or a dilemma, if you like: which notion
to use? Letâ€™s start by listing some pros and contras.
1. The notion of eï¬€ectus has the deï¬nite advantage that its deï¬nition is
simple and elegant â€” see Deï¬nition 2. Surprisingly many results can be
obtained from this relatively weak structure, which are best summarised
in the resulting state-and-eï¬€ect triangle (15).
A disadvantage of using the notion of eï¬€ectus is that we have to explicitly
distinguish total and partial maps, for which we have even introduced
separate notation. Another disadvantage is that from a computational
perspective the category Par(B) of partial maps in an eï¬€ectus B is the
more interesting structure, and not B itself.
In support of the notion
of eï¬€ectus one could claim that the main examples are most naturally
described as eï¬€ectus, and not as FinPAC with eï¬€ects: thus, for instance
the categories Sets and Kâ„“(D) with total functions and distributions are
in a sense more natural descriptions, than the categories Par(Sets) and
Par(Kâ„“(D)) âˆ¼= Kâ„“(Dâ‰¤1) with partial maps and subdistributions.
2. The deï¬nition of â€˜FinPAC with eï¬€ectsâ€™ is much less elegant, see Deï¬-
nitions 51 and 48: it is not only much more verbose, but also involves
â€˜structureâ€™, namely the special object I, of which it is even not clear that
it is determined up-to-isomorphism. On the other hand, a deï¬nite advan-
tage is that in a FinPAC with eï¬€ects the total maps are a natural subclass
of all the maps (understood as the partial ones), and there is no need for
separate notation for total and partial maps. Moreover, the notion of Fin-
PAC with eï¬€ects gives you in many, computational situations directly the
structure that is of most interest, namely partial maps. This is especially
the case when we discuss comprehension and quotients later on.
How to weigh these arguments? How to proceed from here? We can choose to
work from now on (1) only with eï¬€ectuses, (2) only with FinPACs with eï¬€ects,
or (3) switch freely between them, depending on whatever works best in which
situation.
The ï¬rst two options are easiest, but provide limited ï¬‚exibility. Therefore we
will choose the third approach. We do realise that it does not make the theory
of eï¬€ectuses easier, since one has to been keenly aware of which description
applies. But we hope that the reader will reach such a level of enlightment that
the diï¬€erences become immaterial â€” and Wittgensteinâ€™s proverbial ladder can
be thrown away, after one has climbed it.
More concretely, in the sequel we will start deï¬nitions and results with either
â€œlet B an eï¬€ectus in total formâ€, or with â€œlet C be an eï¬€ectus in partial formâ€.
The latter expression will replace the term â€˜FinPAC with eï¬€ectsâ€™; it will not be
used anymore in the sequel of this document.
We take another important decision: up to now we have used separate nota-
tion for total ( , â†’, +) and partial ( , â†’, +) maps in eï¬€ectuses (in total form).
From now on:
â€¢ we use ordinary categorical notation in an eï¬€ectus in total form (replacing
, â†’, + by â—¦, â†’, +) but continue to use special notation ( , â†’, +) in the
category of partial maps, i.e. in the Kleisli category of the lift monad.
64

â€¢ we also use ordinary categorical notation in an eï¬€ectus in partial form.
In line with such easy switching of contexts we will freely use notation that
we have introduced for partial maps in an eï¬€ectus in total form for ordinary
maps in eï¬€ectuses in partial form â€” where
simply becomes â—¦.
Thus for
instance, for such a map f : X â†’Y in an eï¬€ectus in partial form we write:
f âœ·(q) = (qâŠ¥â—¦f)âŠ¥
ker(f) = f âœ·(0) = (1 â—¦f)âŠ¥
kerâŠ¥(f) = 1 â—¦f.
Theorem 53 allows us to translate back and forth between the total and partial
world. Thus, the properties of, for instance, Lemma 39, which are formulated
for an eï¬€ectus in total form, also make sense for an eï¬€ectus in partial form.
Further, if f is total, then the two forms of substitution f âœ·and f âˆ—concide:
f âœ·(q) = q â—¦f = f âˆ—(q).
This follows from uniqueness of orthosupplements:
(qâŠ¥â—¦f) > (q â—¦f) = (qâŠ¥> q) â—¦f = 1 â—¦f = 1.
There is another topic that we can now understand in greater generality,
namely the partial pairing âŸ¨âŸ¨f, gâŸ©âŸ©.
It was introduced in Lemma 6 for maps
f, g satisfying kerâŠ¥(f) > kerâŠ¥(g) = 1, and produced a total map âŸ¨âŸ¨f, gâŸ©âŸ©. The
bijective correspondence (28), in upwards direction, extends this pairing in two
ways, namely to n-ary pairing and to partial maps fi : Z â†’Xi. for which the
kernel-supplements kerâŠ¥(fi) are only orthogonal (instead of adding up to 1).
The resulting pairing âŸ¨âŸ¨f1, . . . , fnâŸ©âŸ©: Z â†’X1 + Â· Â· Â· + Xn is then only a partial
map, deï¬ned as >i(Îºi â—¦fi). It is unique in satisfying:
âœ„i â—¦âŸ¨âŸ¨f1, . . . , fnâŸ©âŸ©= fi.
Thus, in an eï¬€ectus in partial form we have partial pairing too.
Recall that this map âŸ¨âŸ¨f1, . . . , fnâŸ©âŸ©is total if >i kerâŠ¥(fi) = 1. In that case
we are back in the situation of Lemma 6. In the sequel we use this pairing in
this more general form, as essentially given by the correspondence (28).
9
Commutative and Boolean eï¬€ectuses
Partial endomaps X â†’X play an important role in eï¬€ectus theory. They give
rise to predicates, by taking their kernel, but they may also be obtained from
predicates, as their associated â€˜side eï¬€ectâ€™. This is a topic that will return many
times in the sequel. For this reason we introduce special notation, and write
End(X) for the set of partial maps X â†’X, in an eï¬€ectus in total form. This set
End(X) is a partial commutative monoid (PCM) by Proposition 13 via >, 0, it
carries a partial order by Proposition 41 (3), and it is a (total) monoid via partial
composition
, id. We recall from Lemma 40 that the kernel-orthosupplement
kerâŠ¥forms a PCM-homomorphism
End(X)
kerâŠ¥
/ Pred(X)
65

It reï¬‚ects 0 and âŠ¥. Explicitly, kerâŠ¥(f) = 1
f = (! + id) â—¦f.
We shall write Endâ‰¤id(X) Ö’â†’End(X) for the subset:
Endâ‰¤id(X) = {f : X â†’X | f â‰¤idX},
where idX = Îº1 is the partial identity X â†’X. We shall understand endomaps
in Endâ‰¤id(X) as side-eï¬€ect free morphisms.
Deï¬nition 55. An eï¬€ectus in total form is called commutative if for each
object X both:
1. the map kerâŠ¥: Endâ‰¤id(X) â†’Pred(X) is an isomorphism; we shall write
the inverse as p 7â†’asrtp, and call it â€˜assertâ€™;
2. asrtp
asrtq = asrtq
asrtp, for each pair of predicates p, q âˆˆPred(X).
For p, q âˆˆPred(X) we deï¬ne a new â€˜productâ€™ predicate p & q âˆˆPred(X) via:
p & q = kerâŠ¥ asrtp
asrtq

= kerâŠ¥ asrtq
asrtp

= q & p.
An eï¬€ectus is called Boolean if it is commutative and satisï¬es:
asrtp
asrtpâŠ¥= 0, for each predicate p âˆˆPred(X).
We shall read the predicate p & q as â€˜p andthen qâ€™. This & is a commutative
operation in the present commutative context, but it is non-commutative in a
more general setting, see Section 15.
The conditions in this deï¬nition are given in such a way that they can easily
be re-formulated for an eï¬€ectus in partial form. Hence, in the sequel, we freely
speak about a commutative/Boolean eï¬€ectus in partial form.
Later on in Subsection 10.1 we will show that the presence of copiers makes
an eï¬€ectus commutative.
Example 56. We describe three examples of these subclasses of eï¬€ectuses.
1. The eï¬€ectus Sets is Boolean. For a predicate P âŠ†X, the partial assert
function asrtP : X â†’X + 1 is given by:
asrtP (x) =
(
Îº1x
if x âˆˆP
Îº2âˆ—
if x Ì¸âˆˆP.
For convenience we often omit these coprojections Îº1, Îº2 in such descrip-
tions. We have asrtP â‰¤id since asrtP > asrtP âŠ¥= id, see the description
of > on partial maps in Example 14. We have:
kerâŠ¥(asrtP ) = {x | asrtP (x) Ì¸= âˆ—} = {x | x âˆˆP} = P.
Next, let f : X â†’X + 1 satisfy f â‰¤id. This means f(x) Ì¸= âˆ—â‡’f(x) = x.
Now we take as predicate P = {x | f(x) Ì¸= âˆ—}, so that f = asrtP . Hence
we have an isomorphism Endâ‰¤id(X) âˆ¼= Pred(X).
We further have:
 asrtP
asrtQ

(x) =
(
x
if x âˆˆP âˆ©Q
âˆ—
otherwise
)
=
 asrtQ
asrtP

(x).
66

The product predicate P & Q is thus intersection/conjunction P âˆ©Q.
The eï¬€ectus Sets is Boolean since:
 asrtP
asrtP âŠ¥

(x) =
(
x
if x âˆˆP âˆ©Â¬P
âˆ—
otherwise
)
= âˆ—= 0(x).
2. As may be expected, the eï¬€ectus Kâ„“(D) is commutative. For a predicate
p âˆˆ[0, 1]X we have an assert map asrtp : X â†’D(X + 1) given by the
convex sum:
asrtp(x) = p(x)|xâŸ©+ (1 âˆ’p(x))| âˆ—âŸ©.
We have asrtp â‰¤id since asrtp >asrtpâŠ¥= id. Then, following the descrip-
tion of kernels in Kâ„“(D) from Example 38, we get:
kerâŠ¥(asrtp)(x) = 1 âˆ’ker(asrtp)(x) = 1 âˆ’asrtp(âˆ—)
= 1 âˆ’(1 âˆ’p(x)) = p(x).
We check that we get an isomorphism Endâ‰¤id(X) âˆ¼= Pred(X). Let f : X â†’
D(X+1) satisfy f â‰¤id, where id(x) = 1|xâŸ©. Then f(x)(xâ€²) Ì¸= 0 â‡’xâ€² = x.
Taking p(x) = f(x)(x) then yields f = asrtp.
Next, these assert maps satisfy:
 asrtp
asrtq

(x) = p(x) Â· q(x)|xâŸ©+ (1 âˆ’p(x) Â· q(x))| âˆ—âŸ©
=
 asrtq
asrtp

(x).
The product predicate p & q is thus the pointwise multiplication (p &
q) = p(x) Â· q(x).
It is instructive to see why Kâ„“(D) is not a Boolean eï¬€ectus: It satisï¬es:
 asrtp
asrtpâŠ¥

(x) = p(x) Â· (1 âˆ’p(x))|xâŸ©+ (1 âˆ’p(x) Â· (1 âˆ’p(x)))| âˆ—âŸ©.
If asrtp asrtpâŠ¥= 0, then p(x)Â·(1âˆ’p(x)) = 0 for each x. But this requires
that p(x) is a Boolean predicate, with p(x) âˆˆ{0, 1} for each x, so that p
restricts to X â†’{0, 1}. But of course, not every predicate in Kâ„“(D) is
Boolean.
3. The eï¬€ectus CvNAop of commutative von Neumann algebras is commu-
tative. For an eï¬€ect e âˆˆ[0, 1]A in such a commutative algebra A , we
deï¬ne asrte : A â†’A by asrte(a) = eÂ·a. Clearly, this is a linear subunital
map. We use commutativity to show that it is positive. For a â‰¥0, say
a = b Â· bâˆ—we obtain a positive element:
asrte(a) = e Â· a = âˆše Â· âˆše Â· b Â· bâˆ—= âˆše Â· b Â· bâˆ—Â· âˆše = (âˆše Â· b) Â· (âˆše Â· b)âˆ—.
Here we use that each positive element x has a positive square root âˆšx
and is self-adjoint, that is, satisï¬es x = xâˆ—.
67

Like before, we have asrte > asrteâŠ¥= id, so that asrte â‰¤id. Further,
following the description in Example 38,
kerâŠ¥(asrte) = asrte(1) = e Â· 1 = e.
Showing that kerâŠ¥is an isomorphism requires more work. Let f : A â†’A
be a subunital positive map below the identity. This means f(a) â‰¤a for
all a â‰¥0. Deï¬ne g : A âŠ•A â†’A by g(x, y) = f(x)+yâˆ’f(y). This map is
positive, because if x, y â‰¥0, then f(x) â‰¥0 and y âˆ’f(y) â‰¥0, since f(y) â‰¤
y, and thus g(x, y) â‰¥0. Clearly, g is unital. More generally, g(x, x) = x,
which can be written more abstractly as g â—¦âˆ†= id, where the diagonal
âˆ†: A â†’A âŠ•A preserves multiplication. Hence â€˜Tomiyamaâ€™ [Tom57]
applies, see [Jac15a, Lemma 38], so that z Â· g(x, y) = g(âˆ†(z) Â· (x, y)) =
g(z Â· x, z Â· y). The element g(1, 0) = f(1) is central in A since:
x Â· g(1, 0) = g
 âˆ†(x) Â· (1, 0)

= g(x, 0) = g
 (1, 0) Â· âˆ†(x)

= g(1, 0) Â· x.
We thus obtain:
f(x) = g(x, 0) = g(1, 0) Â· x = f(1) Â· x = asrtf(1)(x) = asrtkerâŠ¥(f)(x).
Finally, we have, for arbitrary eï¬€ects e, d âˆˆ[0, 1]A ,
 asrte
asrtd

(a) = e Â· (d Â· a) = d Â· (e Â· a) =
 asrtd
asrte

(a).
As a result, the product predicate e & d is given by multiplication Â· in the
von Neumann algebra.
The assert maps, if they exist, give rise to many interesting properties.
Lemma 57. Let B be a commutative eï¬€ectus in total form.
1. Each PCM Endâ‰¤id(X) is an eï¬€ect algebra; in fact, with composition
, id
it is a commutative eï¬€ect monoid.
2. The assert map Pred(X) â†’Endâ‰¤id(X) is an (iso)morphism of eï¬€ect
algebras, and makes Pred(X) with & also a commutative eï¬€ect monoid.
3. p
f = 0 iï¬€asrtp
f = 0.
4. asrts = s for each scalar s: 1 â†’1.
5. asrt[p,q] = asrtp + asrtq : X + Y â†’X + Y .
6. The instrument map instrp = âŸ¨âŸ¨asrtp, asrtpâŠ¥âŸ©âŸ©: X â†’X + X satisï¬es âˆ‡â—¦
instrp = id.
7. p & q = q
asrtp, and thus p & q â‰¤q and also p & q â‰¤p.
8.
 asrtp
âœ·(q) = (p & q) > pâŠ¥.
9. The following points are equivalent, for an arbitrary predicate p.
68

(a) asrtp
asrtp = asrtp
(b) p & p = p
(c) asrtp
asrtpâŠ¥= 0
(d) p & pâŠ¥= 0
(e) p is sharp, that is, p âˆ§pâŠ¥= 0.
The instrument map instrp : X â†’X+X from point (6) can be understood as
a â€˜caseâ€™ expression, sending the input to the left component in X +X if p holds,
and to the right component otherwise. The property âˆ‡â—¦instrp = id says that
this instrument map has no side-eï¬€ects. We will encounter instrument maps in
a non-commutative setting in Section 15 where they do have side-eï¬€ects. Such
side-eï¬€ects are an essential aspect of the quantum world. They donâ€™t exist in
the current commutative setting.
Proof We handle these points one-by-one.
1. First we have to produce an orthosupplement for an arbitrary f âˆˆEndâ‰¤id(X).
Since f â‰¤id, we have f > g = id for some g âˆˆEnd(X).
Clearly
g â‰¤id. It is unique with this property, since if f > h = id = f > g,
then kerâŠ¥(f)>kerâŠ¥(g) = 1 = kerâŠ¥f >kerâŠ¥(h). Hence kerâŠ¥(g) = kerâŠ¥(h)
by cancellation in the eï¬€ect algebra Pred(X). But then g = h since kerâŠ¥
is an isomorphism.
We see that id = 0âŠ¥âˆˆEndâ‰¤id(X).
If id âŠ¥f in Endâ‰¤id(X), then
kerâŠ¥(id) = 1 âŠ¥kerâŠ¥(f). Hence kerâŠ¥(f) = 0 in Pred(X), and thus f = 0
since kerâŠ¥reï¬‚ects 0.
The partial composition operation
on Endâ‰¤id(X) preseves >, 0 by Propo-
sition 13 (2). Moreover, the top element id âˆˆEndâ‰¤id(X) obviously satis-
ï¬es p
id = p = id
p. Hence Endâ‰¤id(X) is an eï¬€ect monoid, see Deï¬ni-
tion 18. We show that it is commutative. For arbitrary maps f, g : X â†’X
write p = kerâŠ¥(f) and q = kerâŠ¥(g), so that f = asrtp and g = asrtq. Then
we are done by Deï¬nition 55 (2):
f
g = asrtp
asrtq = asrtq
asrtp = g
f.
2. We have asrt1 = id, since 1 = kerâŠ¥(id). Next, if p âŠ¥q in Pred(X), then
kerâŠ¥(asrtp) = p âŠ¥q = kerâŠ¥(asrtq), and thus asrtp âŠ¥asrtq since kerâŠ¥
reï¬‚ects âŠ¥. In that case asrtp>q = asrtp > asrtq since:
kerâŠ¥(asrtp>q) = p > q = kerâŠ¥(asrtp) > kerâŠ¥(asrtq)
= kerâŠ¥ asrtp > asrtq

.
By construction, kerâŠ¥: Endâ‰¤id(X)
âˆ¼
=
âˆ’â†’Pred(X) sends
to &, so that
Pred(X) becomes a commutative eï¬€ect monoid, and kerâŠ¥an isomorphism
of eï¬€ect monoids.
3. By Lemma 7, using that 1
asrtp = kerâŠ¥(asrtp) = p,
asrtp
f = 0 â‡â‡’1
asrtp
f = 0 â‡â‡’p
f = 0.
69

4. We obtain asrts = s for a scalar s from Lemma 39 (1):
kerâŠ¥(asrts) = s = kerâŠ¥(s).
5. The equation asrt[p,q] = asrtp + asrtq follows from:
kerâŠ¥ asrtp + asrtq

= 1
[Îº1
asrtp, Îº2
asrtq]
= [1
Îº1
asrtp, 1
Îº2
asrtq]
= [1
asrtp, 1
asrtq]
since coprojections are total
= [kerâŠ¥(asrtp), kerâŠ¥(asrtq)]
= [p, q]
= kerâŠ¥(asrt[p,q]).
6. For a predicate p âˆˆPred(X) we have by deï¬nition: ker(asrtp) = pâŠ¥=
kerâŠ¥(asrtp). Hence we can use the pairing from Lemma 6 and can form
the (total) instrument map instrp = âŸ¨âŸ¨asrtp, asrtpâŠ¥âŸ©âŸ©: X â†’X + X. We
obtain âˆ‡â—¦instrp = id from:
â€¹âˆ‡â—¦instrpâ€º = âˆ‡â—¦â€¹instrpâ€º
(27)
= âˆ‡â—¦
 (Îº1 â—¦asrtp) > (Îº2 â—¦asrtpâŠ¥)

= (âˆ‡â—¦Îº1 â—¦asrtp) > (âˆ‡â—¦Îº2 â—¦asrtpâŠ¥)
= asrtp > asrtpâŠ¥
= â€¹idâ€º.
7. Simply: p & q = kerâŠ¥(asrtq
asrtp) = 1
asrtq
asrtp = q
asrtp.
Since asrtp â‰¤id, we get p & q = q
asrtp â‰¤q
id = q. By commutativity
we obtain: p & q = q & p â‰¤p.
8. We have:
 asrtp
âœ·(q) =
 asrtp
âœ·(qâŠ¥âŠ¥)
=
 asrtp
âœ·(qâŠ¥)âŠ¥> ker(asrtp)
by Lemma 39 (10)
= (q
asrtp) > pâŠ¥
= (p & q) > pâŠ¥.
9. The equivalences (9a) â‡”(9b) and (9c) â‡”(9d) are obvious, via the iso-
morphism kerâŠ¥. We prove (9a) â‡”(9c) and (9e) â‡”(9a).
For (9a) â‡’(9c), let predicate p satisfy asrtp
asrtp = asrtp. Then:
asrtp = asrtp
id = asrtp
(asrtp > asrtpâŠ¥)
= (asrtp
asrtp) > (asrtp
asrtpâŠ¥)
= asrtp > (asrtp
asrtpâŠ¥).
Hence asrtp
asrtpâŠ¥= 0 by Lemma 41 (2).
70

In the reverse direction, assuming asrtp
asrtpâŠ¥= 0 we obtain:
asrtp = asrtp
id = asrtp
(asrtp > asrtpâŠ¥)
= (asrtp
asrtp) > (asrtp
asrtpâŠ¥)
= (asrtp
asrtp) > 0
= asrtp
asrtp.
For (9c) â‡’(9e) we assume asrtp
asrtpâŠ¥= 0. Let q â‰¤p and q â‰¤pâŠ¥. If
we show q = 0, then p âˆ§pâŠ¥= 0. First, the inequality q â‰¤p gives:
q
asrtpâŠ¥â‰¤p
asrtpâŠ¥= 1
asrtp
asrtpâŠ¥= 1
0 = 0.
Hence:
q
asrtp = (q
asrtp) > (q
asrtpâŠ¥) = q
(asrtp > asrtpâŠ¥) = q
id = q.
But now the inequality q â‰¤pâŠ¥gives the required result:
q = q
asrtp â‰¤pâŠ¥
asrtp = 1
asrtpâŠ¥
asrtp = 1
0 = 0.
Finally, for (9e) â‡’(9c) let p âˆ§pâŠ¥= 0. We have p & pâŠ¥â‰¤p and also
p & pâŠ¥â‰¤pâŠ¥by point (7). Hence 0 = p & pâŠ¥= kerâŠ¥(asrtp
asrtpâŠ¥).
Since kerâŠ¥reï¬‚ects 0, we obtain asrtp
asrtpâŠ¥= 0.
â–¡
We show how Bayesâ€™ rule can be described abstractly in the current setting.
A type-theoretic formulation of these ideas is elaborated in [AJ15].
Example 58. Let (C, I) be a commutative eï¬€ectus, in partial form, with nor-
malisation, as described in Remark 30.
Consider a total state Ï‰: 1 â†’X
and a predicate p: X â†’I on the same object X.
We obtain a substate
asrtp â—¦Ï‰: 1 â†’X with:
1 â—¦asrtp â—¦Ï‰ = p â—¦Ï‰
(16)
= Ï‰ |= p.
We thus have by Lemma 7:
asrtp â—¦Ï‰ = 0 â‡â‡’
 Ï‰ |= p

= 0.
Now let the validity Ï‰ |= p be non-zero. Then we can normalise the substate
asrtp â—¦Ï‰. We write the resulting total â€˜conditionalâ€™ state as Ï‰|p : 1 â†’X. It
satisï¬es by construction, see (19):
Ï‰|p â—¦(Ï‰ |= p) = asrtp â—¦Ï‰,
(33)
where composition â—¦on the left is scalar multiplication, see Lemma 23. This
new â€˜conditionalâ€™ state Ï‰|p should be read as the update of state Ï‰ after learning
p.
We claim that we now have the following abstract version of Bayesâ€™ rule: for
an arbitrary predicate q on X,
 Ï‰|p |= q

Â·
 Ï‰ |= p

=
 Ï‰ |= p & q

.
(34)
71

In presence of division, this equation can be recast in more familiar form:
Ï‰|p |= q = Ï‰ |= p & q
Ï‰ |= p
.
The proof of Bayesâ€™ equation (34) is easy:
 Ï‰|p |= q

Â·
 Ï‰ |= p

= q â—¦Ï‰|p â—¦
 Ï‰ |= p

(33)
= q â—¦asrtp â—¦Ï‰
= (p & q) â—¦Ï‰
= Ï‰ |= p & q.
This abstract description suggests how to do conditional probability in a non-
commutative setting, in presence of assert maps, see Section 15, and see also [LS13].
At this abstract level the total probability law, also known as the rule of belief
propagation [LS13] also holds: for a state Ï‰ on X, an n-test p1, . . . , pn on X,
and an arbitrary predicate q on X,
 Ï‰ |= q

= >i
 Ï‰|pi |= q

Â·
 Ï‰ |= pi

.
The proof is left to the interested reader.
In the current setting we can take the commutative eï¬€ectus Kâ„“(D) as exam-
ple. For a total state Ï‰ âˆˆD(X) on a set X and a (fuzzy) predicate p âˆˆ[0, 1]X
with Ï‰ |= p = P
x Ï‰(x) Â· p(x) Ì¸= 0 we obtain as normalised state Ï‰|p âˆˆD(X),
Ï‰|p =
X
x
Ï‰(x) Â· p(x)
Ï‰ |= p
x

.
Then indeed, for q âˆˆ[0, 1]X,
Ï‰|p |= q = P
x Ï‰p(x) Â· q(x) = P
x
Ï‰(x) Â· p(x) Â· q(x)
Ï‰ |= p
= Ï‰ |= p & q
Ï‰ |= p
.
We brieï¬‚y mention the continuous probabilistic case, given by the Kleisli
category Kâ„“(G) of the Giry monad G on measurable spaces. For a measurable
space X, with set Î£X of measurable subsets, let Ï‰ âˆˆG(X) be a probablity
distribution. Each measurable subset M âˆˆÎ£X gives rise to predicate 1M : X â†’
[0, 1] with 1M(x) = 1 if x âˆˆM and 1M(x) = 0 otherwise. We claim that the
conditional state Ï‰|1M âˆˆG(X), as described above, is the conditional probability
measure Ï‰(âˆ’| M), if Ï‰(M) Ì¸= 0.
Indeed, the subprobability measure asrt1M â—¦Ï‰: Î£X â†’[0, 1] is given by
A 7â†’
R
1Mâˆ©A dÏ‰ = Ï‰(M âˆ©A). Normalisation gives the conditional probability:
Ï‰|1M(A) = Ï‰(M âˆ©A)
Ï‰(M)
= Ï‰(A | M).
We turn to Boolean eï¬€ectuses and collect some basic results.
Lemma 59. Let B now be a Boolean eï¬€ectus, that is, a commutative eï¬€ectus
in which asrtp
asrtpâŠ¥= 0 holds for each predicate p.
1. All assert maps are idempotent, that is, asrtp
asrtp = asrtp, and all
predicates p are sharp, that is, p âˆ§pâŠ¥= 0.
72

2. The predicate p & q is the meet/conjunction pâˆ§q in Pred(X). Disjunctions
then also exist via De Morgan: p âˆ¨q = (pâŠ¥âˆ§qâŠ¥)âŠ¥.
3. p âŠ¥q iï¬€asrtp
asrtq = 0 iï¬€p âˆ§q = 0.
4. If p âŠ¥q, then p > q = p âˆ¨q.
5. Conjunction âˆ§distributes over disjunction âˆ¨, making each eï¬€ect algebra
Pred(X) a Boolean algebra.
Proof Most of these points are relatively easy, except the last one.
1. Directly by Lemma 57 (9).
2. We have p & p = kerâŠ¥(asrtp
asrtp) = kerâŠ¥(asrtp) = p.
This allows
us to show that p & q is the meet of p, q. We already have p & q â‰¤p
and p & q â‰¤q by Lemma 57 (7). Next, let r be a predicate with r â‰¤p
and r â‰¤q. Since product r & (âˆ’) preserves >, by Lemma 57 (1), it is
monotone. Hence: r = r & r â‰¤p & q.
3. The equivalence asrtp
asrtq = 0 iï¬€p âˆ§q = 0 follows from the previous
point and Lemma 57 (9). So let p âŠ¥q, so that q â‰¤pâŠ¥. Then p âˆ§q â‰¤
p âˆ§pâŠ¥= 0. Conversely, if asrtp
asrtq = 0 then:
asrtp = asrtp
id = asrtp
(asrtq > asrtqâŠ¥)
= (asrtp
asrtq) > (asrtp
asrtqâŠ¥)
= 0 > (asrtp
asrtqâŠ¥)
= asrtp
asrtqâŠ¥.
Hence p = p âˆ§qâŠ¥, so that p â‰¤qâŠ¥, and thus p âŠ¥q.
4. Let p âŠ¥q. We intend to prove that the sum p > q, if it exists, is the join
p âˆ¨q. In any eï¬€ect algebra, p > q is an upperbound of both p and q, so
we only need to prove that it is the least upperbound. Let p â‰¤r and
q â‰¤r. The inequality p â‰¤r says p âŠ¥râŠ¥and thus asrtrâŠ¥
asrtp = 0 by
the previous point. Similarly q â‰¤r gives asrtrâŠ¥
asrtq = 0. But then:
asrtrâŠ¥
asrtp>q = asrtrâŠ¥
 asrtp > asrtq

=
 asrtrâŠ¥
asrtp

>
 asrtrâŠ¥
asrtq

= 0 > 0 = 0.
Hence p > q âŠ¥râŠ¥, again by the previous point, and thus p > q â‰¤r.
5. This result can be traced back to [BF95, Thm. 3.11]. However, we give our
own proof of distributivity p âˆ§(q âˆ¨r) = (p âˆ§q) âˆ¨(p âˆ§r), for all predicates
p, q, r âˆˆPred(X). We repeatedly use the equivalence
x â‰¤yâŠ¥â‡â‡’x âˆ§y = 0
(âˆ—)
from point (3).
The inequality p âˆ§(q âˆ¨r) â‰¥(p âˆ§q) âˆ¨(p âˆ§r) always holds, so we need to
prove the inequality:
p âˆ§(q âˆ¨r) â‰¤(p âˆ§q) âˆ¨(p âˆ§r) =

(p âˆ§q)âŠ¥âˆ§(p âˆ§r)âŠ¥âŠ¥.
73

That is, by (âˆ—) we have to prove:
p âˆ§(q âˆ¨r) âˆ§(p âˆ§q)âŠ¥âˆ§(p âˆ§r)âŠ¥= 0.
We pick an arbitrary predicate x for which:
(a) x â‰¤p
(b) x â‰¤p âˆ¨r
(c) x â‰¤(p âˆ§q)âŠ¥
(d) x â‰¤(p âˆ§r)âŠ¥.
We need to prove x = 0. The inequality (a) is equivalent to x âˆ§p = x.
By (âˆ—), (c) and (d) are equivalent to x âˆ§p âˆ§q = 0 and x âˆ§p âˆ§r = 0. But
then xâˆ§q = 0 and xâˆ§r = 0, so that x â‰¤qâŠ¥and x â‰¤râŠ¥again by (âˆ—). We
now have x â‰¤qâŠ¥âˆ§râŠ¥= (pâˆ¨r)âŠ¥, which, together with (b) and point (??)
gives the required conclusion:
x â‰¤(p âˆ¨r) âˆ§(p âˆ¨r)âŠ¥= 0.
â–¡
Remark 60. The commutation requirement asrtp
asrtq = asrtq
asrtp from
Deï¬nition 55 (2) holds automatically in a Boolean eï¬€ectus.
More precisely,
it follows from the â€˜Booleanâ€™ requirement asrtp
asrtpâŠ¥= 0 in Deï¬nition 55,
assuming the assert isomorphism in point (1). This works as follows.
Let p, q be arbitrary predicates on the same object. The associated assert
maps satisfy:
0 = asrtp
asrtpâŠ¥= asrtp
id
asrtpâŠ¥
= asrtp
 asrtq > asrtqâŠ¥

asrtpâŠ¥
=
 asrtp
asrtq
asrtpâŠ¥

>
 asrtp
asrtqâŠ¥
asrtpâŠ¥

.
By Proposition 41 (1) we obtain:
asrtp
asrtq
asrtpâŠ¥
(a)
= 0.
Similarly,
asrtpâŠ¥
asrtq
asrtp
(b)
= 0.
We can now derive commutation of assert maps:
asrtp
asrtq = asrtp
asrtq
 asrtp > asrtpâŠ¥

=
 asrtp
asrtq
asrtp

>
 asrtp
asrtq
asrtpâŠ¥

(a)
=
 asrtp
asrtq
asrtp

> 0
(b)
=
 asrtp
asrtq
asrtp

>
 asrtpâŠ¥
asrtq
asrtp

=
 asrtp > asrtpâŠ¥

asrtq
asrtp
= asrtq
asrtp.
It is not known if this commutation property can be derived from the assert
isomorphism in Deï¬nition 55 (1).
The next result justiï¬es the name Boolean eï¬€ectuses. It uses the category
BA of Boolean algebras, which is a subcategory BA Ö’â†’EA of the category of
eï¬€ect algebras.
Proposition 61. For a Boolean eï¬€ectus B, all predicates are sharp, and the
predicate functor restricts to Pred: B â†’BAop.
74

Proof For each X âˆˆB the collection Pred(X) contains only sharp predicates
and is a Boolean algebra, by Lemma 59 (5). We have to prove that for each
map f : Y â†’X in B the total substitution functor f âˆ—: Pred(X) â†’Pred(Y ) is
a map of Boolean algebras. For this it suï¬ƒces that f âˆ—preserves disjunctions âˆ¨.
First, let p, q âˆˆPred(X) be disjoint, that is, p âˆ§q = 0. By Lemma 59 (3)
and (4), using that f âˆ—is a map of eï¬€ect algebras,
f âˆ—(p âˆ¨q) = f âˆ—(p > q) = f âˆ—(p) > f âˆ—(q) = f âˆ—(p) âˆ¨f âˆ—(q).
For arbitrary p, q we can always rewrite the join p âˆ¨q in a Boolean algebra as
a disjoint join:
p âˆ¨q = (p âˆ§qâŠ¥) âˆ¨(p âˆ§q) âˆ¨(q âˆ§pâŠ¥).
Since substitution f âˆ—preserves disjoint joins we get:
f âˆ—(p âˆ¨q) = f âˆ—(p âˆ§qâŠ¥) âˆ¨f âˆ—(p âˆ§q) âˆ¨f âˆ—(q âˆ§pâŠ¥)
= f âˆ—(p âˆ§qâŠ¥) âˆ¨f âˆ—(p âˆ§q) âˆ¨f âˆ—(p âˆ§q) âˆ¨f âˆ—(q âˆ§pâŠ¥)
= f âˆ— (p âˆ§qâŠ¥) âˆ¨(p âˆ§q)

âˆ¨f âˆ— (p âˆ§q) âˆ¨(q âˆ§pâŠ¥)

= f âˆ—(p) âˆ¨f âˆ—(q).
â–¡
Later, in Section 13, we return to Boolean eï¬€ectuses and describe their close
relationship to extensive categories. But we ï¬rst need the notions of compre-
hension and quotient, see Section 11 and 12.
10
Monoidal eï¬€ectuses
In this section we shall consider eï¬€ectuses with tensors âŠ—. Such tensors are used
for parallel composition, which is an important part of quantum theory. For
background information on symmetric monoidal categories we refer to [Mac71].
Deï¬nition 62. An eï¬€ectus in total form B is called monoidal if it is a sym-
metric monoidal category such that:
1. the tensor unit is the ï¬nal object 1;
2. the tensor distributes over ï¬nite coproducts (+, 0); this means that the
following canonical maps are isomorphisms:
(X âŠ—A) + (Y âŠ—A)
/ (X + Y ) âŠ—A
0
/ 0 âŠ—A
(35)
This says that the functor (âˆ’) âŠ—A preserves ï¬nite coproducts (+, 0). By
symmetry A âŠ—(âˆ’) then also preserves (+, 0).
We recall the notation that is standardly used for monoidal natural isomor-
phisms, and add notation for the distributivity isomorphism (35).
1 âŠ—X
Î»
âˆ¼
= / X
X âŠ—Y
Î³
âˆ¼
= / Y âŠ—Y
X âŠ—(Y âŠ—Z)
Î±
âˆ¼
= / (X âŠ—Y ) âŠ—Z
X âŠ—I
Ï=Î»â—¦Î³/ X
(X âŠ—A) + (Y âŠ—A)
[Îº1âŠ—id,Îº2âŠ—id] .
âˆ¼=
(X + Y ) âŠ—A
dis
n
75

Because the ï¬nal object 1 is the tensor unit there are projections X â†
X âŠ—Y â†’Y deï¬ned in:
X
X âŠ—Y
Ï€1
o
idâŠ—!
vâ™¥â™¥â™¥â™¥â™¥â™¥â™¥â™¥â™¥
Ï€2
/
!âŠ—id
(P
P
P
P
P
P
P
P
P
Y
X âŠ—1
Ï
âˆ¼
=
O
1 âŠ—Y
Î»
âˆ¼
=
O
(36)
These projections take the marginal, see Example 64. They are natural in the
sense that Ï€i â—¦(f1 âŠ—f2) = fi â—¦Ï€i. A monoidal category in which the tensor unit
is ï¬nal is sometimes called semicartesian.
We have described tensors in the â€˜totalâ€™ case, for eï¬€ectuses. But they can
equivalently be described in the â€˜partialâ€™ case. This is the topic of the next
result.
Proposition 63. Let B be an eï¬€ectus in total form. Then: B is monoidal
eï¬€ectus if and only if
â€¢ Par(B) is symmetric monoidal, and the monoidal and distributivity iso-
morphisms (35) are total â€” so that âŠ—distributes over (+, 0) in Par(B);
â€¢ the tensor f âŠ—g of two total morphisms f, g in Par(B) is again total;
â€¢ the ï¬nal object 1 âˆˆB forms a tensor unit in Par(B).
When we talk about a â€˜monoidal eï¬€ectus in partial formâ€™ we mean an eï¬€ectus
in partial form that satisï¬es the properties described above for the category of
partial maps Par(B), with 1 as tensor unit. The above second point is equivalent
to: the following diagram of partial maps commutes.
X âŠ—Y
âœˆâœˆâœˆ
1âŠ—1
{âœˆâœˆâœˆ
â‡â‡â‡
1
!â‡â‡â‡
1 âŠ—1
âˆ¼
=
/ 1
Proof Given the tensor âŠ—on B we obtain âŠ—on Par(B) in the same way on
objects. Given partial maps h: X â†’A and k: Y â†’B in Par(B) we obtain
h âŠ—k: X âŠ—Y â†’A âŠ—B in Par(B) as:
X âŠ—Y
hâŠ—k

(A + 1) âŠ—(B + 1)
âˆ¼(A âŠ—B) + (A âŠ—1) + (1 âŠ—B) + (1 âŠ—1)
[Îº1,Îº2â—¦!,Îº2â—¦!,Îº2â—¦!]

(A âŠ—B) + 1
Then â€¹fâ€º âŠ—â€¹gâ€º = â€¹f âŠ—gâ€º. Remaining details are left to the reader.
â–¡
Example 64. We shall look at monoidal structure in three of our four running
examples. It is not clear if order unit groups have tensors.
1. The eï¬€ectus Sets has ï¬nite products (Ã—, 1), where functors A Ã— (âˆ’) pre-
serve ï¬nite coproducts. Obviously, the ï¬nal object is the unit for Ã—.
76

2. The eï¬€ectus Kâ„“(D) for discrete probability has tensors because the distri-
bution monad D is monoidal: there are natural maps D(X) Ã— D(Y ) â†’
D(X Ã— Y ) which commute appropriately with the unit and multiplication
of the monad.
These maps send a pair (Ï‰, Ï) âˆˆD(X) Ã— D(Y ) to the
distribution in D(X Ã— Y ) given by (x, y) 7â†’Ï‰(x) Â· Ï(y).
The resulting tensor on Kâ„“(D) is given on objects by cartesian product Ã—.
For morphisms f : A â†’D(X) and g : B â†’D(Y ) there is map f âŠ—g in
Kâ„“(D) given by the composite:
A Ã— B
fÃ—g / D(X) Ã— D(Y )
/ D(X Ã— Y )
the projection map X âŠ—Y â†’X in Kâ„“(D), is, following (36), the function
X Ã— Y
Ï€1
/ D(X)
with
Ï€1(x, y) = 1|xâŸ©
When applied to a state Ï‰ âˆˆD(X Ã— Y ) = Stat(X Ã— Y ) we obtain the
marginal distribution Stat(Ï€1)(Ï‰) = (Ï€1)âˆ—(Ï‰) âˆˆStat(X) given by:
(Ï€1)âˆ—(Ï‰) =
X
x
  P
y Ï‰(x, y)
x

.
3. The eï¬€ectus vNAop of von Neumann algebras is also monoidal.
Here
it is essential that the morphisms of vNA are completely positive. The
details are quite complicated, see e.g. [Tak01] and [Cho14] for distribu-
tivity results using the â€˜minimalâ€™ tensor. The tensor unit is the algebra
C of complex numbers, which is ï¬nal in vNAop. Distribution of âŠ—over
coproducts (âŠ•, 0) is investigated in [Cho14].
The next result is proven explicitly in [Jac15a]. Here we give a more abstract
argument, using partial maps.
Corollary 65. In a monoidal eï¬€ectus the eï¬€ect monoid of scalars Pred(1) is
commutative.
Proof It is a well-known fact that the endomaps I â†’I on the tensor unit
in a monoidal category form a commutative monoid under composition. This
relies on the â€˜Eckmann-Hiltonâ€™ argument see e.g. [KL80].
We apply this to
the monoidal category Par(B) of a monoidal eï¬€ectus B. The scalars are pre-
cisely the partial maps 1 â†’1 on the tensor unit 1, and their multiplication is
partial/Kleisli composition, see Deï¬nition 19.
â–¡
We need to know a bit more about the monoidal structure in categories of
partial maps.
Lemma 66. Let B be a monoidal eï¬€ectus in total form. Then, in Par(B),
1. f âŠ—0 = 0: X âŠ—Y â†’A âŠ—B;
2. the following diagram commutes:
X1 âŠ—A + X2 âŠ—A
âˆ¼
=
/
P
P
P
P
P
âœ„i
(P
P
P
P
(X1 + X2) âŠ—A
â™¦â™¦â™¦â™¦
âœ„iâŠ—id
wâ™¦â™¦â™¦â™¦
Xi âŠ—A
77

3. f âŠ—(g1 > g2) = (f âŠ—g1) > (f âŠ—g2).
4. The functor â€¹âˆ’â€º: B â†’Par(B) preserves projections: these projections
can be described in Par(B) as:
â€¹Ï€1â€º =

X âŠ—Y
idâŠ—1 / X âŠ—1
Ï
âˆ¼
= / X

â€¹Ï€2â€º =

X âŠ—Y
1âŠ—id / 1 âŠ—Y
Î»
âˆ¼
= / Y

These projection maps are natural only wrt. total maps.
Proof We follow the relevant deï¬nitions.
1. We have f âŠ—0 = 0 via the following diagram, using that 0 is the zero
object in Par(B).
X âŠ—A
fâŠ—!
/
â™
â™
â™
â™
â™
!
)â™
â™
â™
â™
â™
Y âŠ—0
idâŠ—!
/
â‰€
Y âŠ—B
0
â¦
â¦
â¦
â¦
â¦
!
5â¦
â¦
â¦
â¦
â¦
2. We calculate in Par(B), for i = 1,
(âœ„1 âŠ—id)
[Îº1 âŠ—id, Îº2 âŠ—id]
= [([id, 0] âŠ—id)
(Îº1 âŠ—id), ([id, 0] âŠ—id)
(Îº2 âŠ—id)]
= [id âŠ—id, 0 âŠ—id]
= [id, 0]
by point (1)
= âœ„1.
3. Let b: Y â†’B + B be a bound for g1, g2 : Y â†’B. Then we take as new
bound:
c =

X âŠ—Y
fâŠ—b / A âŠ—(B + B)
âˆ¼
=
/ A âŠ—B + A âŠ—B

Then, c is a bound for f âŠ—gi, since by point (2),
âœ„i
c = (id âŠ—âœ„i)
(f âŠ—b) = f âŠ—(âœ„i âŠ—b) = f âŠ—gi.
Hence:
(f âŠ—g1) > (f âŠ—g2) = âˆ‡
c = (id âŠ—âˆ‡)
(f âŠ—b)
= f âŠ—(âˆ‡
b)
= f âŠ—(g1 > g2).
4. We use that the functor â€¹âˆ’â€º: B â†’Par(B) preserves the tensor, and that
1: X â†’1 is the unique map to the ï¬nal object in Par(B). Hence the ï¬rst
projection in Par(B) is:
Ï
(id âŠ—1) = Ï
(â€¹idâ€º âŠ—â€¹!â€º) = (Ï âŠ—id) â—¦â€¹id âŠ—!â€º
= Îº1 â—¦Ï â—¦(id âŠ—!)
= â€¹Ï€1â€º.
â–¡
78

In Proposition 13 we have seen that homsets of partial maps X â†’Y in an
eï¬€ectus form a partial commutative monoid (PCM). In the presence of tensors
one also obtains scalar multiplication on such homsets.
Lemma 67. If B is a monoidal eï¬€ectus in total form, then each partial homset
Par(B)(X, Y ) is a partial commutative module; partial pre- and post-composition
preserves scalar multiplication, and thus the module structure.
Moreover, the homsets B(X, Y ) are convex sets, and the partial homsets
Par(B)(X, Y ) are subconvex sets; again this structure is preserved by pre- and
post-composition.
Proof For a partial map f : X â†’Y and a scalar s: 1 â†’1 we deï¬ne sÂ·f : X â†’Y
in Par(B) as:
s Â· f =

X
âˆ¼
= / 1 âŠ—X
sâŠ—f
/ 1 âŠ—Y
âˆ¼
= / Y

It is obviously an action, and preserves 0, > in each argument by Lemma 66.
We only show that the homset B(X, Y ) is convex. We essentially proceed
as in (the proof of) Lemma 27: for scalars r1, . . . , rn âˆˆPred(1) with >i ri = 1,
the bound b: 1 â†’n Â· 1 with âœ„i
b = ri and âˆ‡
b = 1: 1 â†’1 is a total map of
the form b = Îº1 s. For an n-tuple of total maps fi : X â†’X we now deï¬ne the
convex sum P
i rifi to be the composite in B:
X
âˆ¼
= / 1 âŠ—X
sâŠ—id/ (n Â· 1) âŠ—X
âˆ¼
= / n Â· (1 âŠ—X)
âˆ¼
= / n Â· X
[f1,...,fn] / Y
â–¡
In Deï¬nition 24 we have described when substates 1 â†’X are pure, via
scalar multiplication for such states. With the scalar multiplication for arbitrary
partial maps we can extend the deï¬nition of purity.
Deï¬nition 68. A partial map f : X â†’Y in a monoidal eï¬€ectus is called pure
if for each pair of orthogonal partial maps f1, f2 : X â†’Y with f = f1 >f2 there
is a scalar s with:
f1 = s Â· f
and
f2 = sâŠ¥Â· f.
An object X is called pure if the partial identity map id : X â†’X is pure, in the
above sense.
It can be shown that a von Neumann algebra A is pure if and only if it is
a factor, that is, its center is C, the algebra of compex numbers. The proof will
be given elsewhere.
Here is another notion that requires tensors. It is seen as the key property
of quantum mechanics according to [CDP11].
It will be further elaborated
elsewhere.
Deï¬nition 69. The puriï¬cation of a substate Ï‰: 1 â†’X is a pure substate
Ï: 1 â†’X âŠ—Y with Ï€1
Ï = Ï‰.
79

10.1
Commutative eï¬€ectuses via copiers
This section concentrates on special tensors âŠ—which come equipped with copier
operations X â†’XâŠ—X. It is shown that in presence of such copiers â€” satisfying
suitable requirements â€” an eï¬€ectus is commutative. This result is the logical
contrapositive of the familiar fact that no-cloning holds in the quantum world:
if we do have cloning, we are not in the quantum, but in the probabilistic, world.
Deï¬nition 70. We say that a monoidal eï¬€ectus B in total form has copiers if
for each object X âˆˆB there is a copier, or diagonal, map Î´: X â†’X âŠ—X such
that the following diagrams commute:
X
X âŠ—X
âˆ¼
=
Î³

X
Î´ 
X
Î´
X
Î´ /
âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
â—
â—
â—
â—
â—
â—
â—
â—
â—
â—
â—
â—
â—
â—
â—
â—
X âŠ—X
Ï€1
O
Ï€2

X
Î´
;âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
âœˆ
Î´
#â—
â—
â—
â—
â—
â—
â—
X âŠ—X
idâŠ—Î´ 
X âŠ—X
Î´âŠ—id

X
X âŠ—X
X âŠ—(X âŠ—X)
Î±
âˆ¼
= / (X âŠ—X) âŠ—X
and additionally, for each partial map f : X â†’X which is side-eï¬€ect-free, that
is satisï¬es f â‰¤id, one has in Par(B):
(f âŠ—id)
â€¹Î´â€º = â€¹Î´â€º
f = (id âŠ—f)
â€¹Î´â€º.
(37)
(The two equations are equivalent.)
We now deï¬ne an assert map in terms of copying. Itâ€™s easiest to do this in
partial form. For a predicate p: X â†’1 write asrtp for the composite:
asrtp =

X
â€¹Î´â€º / X âŠ—X
pâŠ—id/ 1 âŠ—X
Î»
âˆ¼
= / X

(38)
Theorem 71. A monoidal eï¬€ectus with copiers is commutative.
Proof Let B be a monoidal eï¬€ectus in total form, with copiers. We reason in
Par(B). We ï¬rst show that the map asrtp : X â†’X from (38) is side-eï¬€ect-free,
i.e. that it is below the (partial) identity X â†’X. This follows from:
asrtp > asrtpâŠ¥
=
 Î»
(p âŠ—id)
â€¹Î´â€º

>
 Î»
(pâŠ¥âŠ—id)
â€¹Î´â€º

= Î»
 (p âŠ—id) > (pâŠ¥âŠ—id)

â€¹Î´â€º
by Proposition 13 (2)
= Î»
 (p > pâŠ¥) âŠ—id

â€¹Î´â€º
by Lemma 66 (3)
= Î»
 1 âŠ—id

â€¹Î´â€º
= â€¹Ï€2â€º
â€¹Î´â€º
by Lemma 66 (4)
= id.
Next we show that the mapping p 7â†’asrtp makes the map kerâŠ¥: Endâ‰¤id(X) â†’
80

Pred(X) bijective, see Deï¬nition 55 (1).
kerâŠ¥(asrtp) = 1
Î»
(p âŠ—id)
â€¹Î´â€º
= Î»
(id âŠ—1)
(p âŠ—id)
â€¹Î´â€º
= Ï
(p âŠ—id)
(id âŠ—1)
â€¹Î´â€º
since Î» = Ï: 1 âŠ—1 â†’1
= p
Ï
(id âŠ—1)
â€¹Î´â€º
= p
â€¹Ï€1â€º
â€¹Î´â€º
by Lemma 66 (4)
= p.
In the other direction, let f : X â†’X satisfy f â‰¤id. The associated predicate
kerâŠ¥(f) = 1
f : X â†’1 satisï¬es:
asrtkerâŠ¥(f) = Î»
(1 âŠ—id)
(f âŠ—id)
â€¹Î´â€º
= â€¹Ï€1â€º
â€¹Î´â€º
f
by (37) and Lemma 66 (4)
= f.
Finally we have to prove that the assert maps commute: asrtp
asrtq =
asrtq
asrtp. Since the kernel-supplement map kerâŠ¥is bijective it suï¬ƒces to
prove the middle equation in:
kerâŠ¥ asrtq
asrtp

= p & q = q & p = kerâŠ¥ asrtp
asrtq

.
Hence we are done by:
p & q = q
asrtp
by Lemma 57 (7)
= q
Î»
(p âŠ—id)
â€¹Î´â€º
= Î»
(id âŠ—q)
(p âŠ—id)
â€¹Î´â€º
= Î»
Î³
(p âŠ—q)
â€¹Î´â€º
since Î» = Ï = Î»
Î³ : 1 âŠ—1 â†’1
= Î»
(q âŠ—p)
Î³
â€¹Î´â€º
= p
Î»
(q âŠ—id)
â€¹Î´â€º
= q & p.
â–¡
We conclude by describing copiers in two of our examples.
Examples 72. In the commutative eï¬€ectus Kâ„“(D) one has copiers Î´: X â†’
X âŠ—X given by:
Î´(x) = 1|(x, x)âŸ©.
These copiers are not natural in X. But we do not need naturality for the
above theorem. We do need to check equation (37). So let f : X â†’Dâ‰¤1(X)
be side-eï¬€ect-free map. Then f is of the form f(x) = p(x)|xâŸ©, for a predicate
p âˆˆ[0, 1]X, see Example (56) (2). But then:
 (f âŠ—id) â—¦Î´

(x) = p(x)|(x, x)âŸ©=
 Î´ â—¦f

(x).
In the commutative eï¬€ectus CvNAop of commutative von Neumann alge-
bras copiers Î´: A âŠ—A â†’A are given by multiplication:
Î´(a âŠ—b) = a Â· b.
81

This map is positive since the multiplication of two positive elements is positive
again in a commutative von Neumann algebra.
If f : A â†’A is a subunital map below the identity, then f(x) = f(1) Â· x,
see Example 56 (3). Hence the equation 37 holds:
 Î´ â—¦(f âŠ—id)

(a âŠ—b) = Î´
 f(a) âŠ—b

= (f(1) Â· a) Â· b
= f(1) Â· (a Â· b) =
 f â—¦Î´

(a âŠ—b).
11
Comprehension
Comprehension is the operation that assigns to a predicate p on a type/object
X a new type/object {X|p} which intuitively contains those elements of X
that satisfy p. This comprehension type comes equipped with an inclusion map
Ï€p : {X|p} â†’X which we call a comprehension map.
In categorical logic comprehension is described nicely via an adjunction, see
e.g. [Jac99], like any logical operation that comes equipped with an introduc-
tion and elimination rule.
The slogan is: comprehension is right adjoint to
truth. Later in Section 12 we shall see a similar situation for quotients, namely:
quotients are left adjoint to falsity.
This truth functor exists as functor that maps an object X to the truth/top
element 1(X) in the set Pred(X) of predicates on X. Our ï¬rst task is to combine
these set Pred(X) into a single category Pred(B) of predicates in an eï¬€ectus B.
In the partial case there is a slightly diï¬€erent category of predicates.
Deï¬nition 73. Let B be an eï¬€ectus in total form. We write Pred(B) for the
category with:
â€¢ objects are pairs (X, p) where p âˆˆPred(X) is a predicate p: X â†’1 + 1 on
X; often we simply talk about objects p in Pred(B) when the carrier X is
clear from the context;
â€¢ morphisms f : (X, p) â†’(Y, q) in Pred(B) are maps f : X â†’Y in B with
an inequality:
p â‰¤f âˆ—(q).
We recall that f âˆ—(q) = q â—¦f is total substitution, which is a map of eï¬€ect
modules by Theorem 21.
We obtain a category Pred(B) by Exercise 1 (1).
It comes equipped with a
forgetful functor Pred(B) â†’B which is so trivial that we donâ€™t bother to give it
a name.
There are truth and falsity functors 1, 0: B â†’Pred(B) given by the truth/top
element 1(X) âˆˆPred(X) and the falsity/bottom 0(X) âˆˆPred(X) respectively.
These functors form left and right adjoints to the forgetful functor in:
Pred(B)
âŠ£
âŠ£

B
0
>
1
`
(39)
82

The forgetful functor Pred(B) â†’B is an example of a â€˜ï¬brationâ€™, or â€˜indexed
categoryâ€™, which is a basic structure in categorical logic and type theory [Jac99].
Here however we use this functor concretely, without going into the general
theory.
The adjunction 0 âŠ£forget âŠ£1 in (39) exists because there are obvious
bijective correspondences:
X
f
/ Y
in B
===============
(X, p)
f
/ (Y, 1) = 1(Y )
in Pred(B)
And:
X
f
/ Y
in B
======================
0(Y ) = (X, 0)
f
/ (Y, q)
in Pred(B)
These trivial correspondences exist because one always has p â‰¤f âˆ—(1) = 1 and
0 â‰¤f âˆ—(q).
There is a similar, but slightly diï¬€erent, way to combine predicates in a
category in the partial case.
Deï¬nition 74. Let (C, I) be an eï¬€ectus in partial form. We write Predâœ·(C)
for the category with:
â€¢ objects (X, p), where p: X â†’I is a predicate on X;
â€¢ morphisms f : (X, p) â†’(Y, q) are maps f : X â†’Y in C satisfying:
p â‰¤f âœ·(q)
where f âœ·(q) = (qâŠ¥â—¦f)âŠ¥is partial substitution, which is monotone and
preserves truth by Lemma 36. This yields a category by Exercise 1 (2).
Like in the total case we have falsity and truth functors as left and right adjoints
to the forgetful functor.
Predâœ·(C)
âŠ£
âŠ£

C
0
>
1
`
(40)
The adjoint correspondences in (40) work just like in the total case. They
use that partial substution f âœ·preserves truth.
The above deï¬nition for an eï¬€ectus in partial form applies in particular to
the category Par(B) of partial maps of an eï¬€ectus B. This is the topic of the
next result.
Lemma 75. Let B be an eï¬€ectus in total form, with its inclusion functor
â€¹âˆ’â€º: B â†’Par(B).
Then we have a diagram in which everything from left
to right commutes:
Pred(B)
âŠ£
âŠ£

/ Predâœ·(Par(B))
âŠ£
âŠ£

B
0
>
1
`
â€¹âˆ’â€º
/ Par(B)
0
>
1
`
83

Proof The functor â€¹âˆ’â€º: B â†’Par(B) lifts to Pred(B) â†’Predâœ·(Par(B)) since
a map f : (X, p) â†’(Y, q) in Pred(B) yields a map â€¹fâ€º: (X, p) â†’(Y, q). The
reason is Exercise 1 (3), giving: p â‰¤f âˆ—(q) = â€¹fâ€ºâœ·(q).
â–¡
We now come to the deï¬nition of comprehension, as right adjoint to truth.
We ï¬rst give seperate formulations for the total and partial case, but we prove
that they are equivalent later on â€” see Theorem 78. Comprehension will be
a functor from predicates to their underlying objects.
We shall write it as
(X, p) 7â†’{X|p}. When we consider it as a functor we write {âˆ’|âˆ’}.
Deï¬nition 76. We give separate formulations of essentially the same notion.
1. An eï¬€ectus in total form B has comprehension when its truth functor
1: B â†’Pred(B) has a right adjoint {âˆ’|âˆ’} such that for each predicate
p: X â†’1 + 1 and object Y âˆˆB the canonical map
{X|p} + Y
/ {X + Y | [p, 1]}
(41)
is an isomorphism.
2. An eï¬€ectus in partial form (C, I) has comprehension if its truth functor
1: C â†’Predâœ·(C) has a right adjoint {âˆ’|âˆ’} and each counit component
{X|p} â†’X in C is a total map.
Formally this counit is a map in Predâœ·(C) of the form Ï€p : (1, {X|p}) â†’
(X, p), but in the deï¬nition we have written it as a map in B, for simplicity.
These comprehension maps Ï€p should not be confused with the tensor projec-
tions Ï€i in (36).
Example 77. We describe comprehension for our four running examples. We
shall alternate between the total and partial descriptions. This comprehension
structure occurs already in [CJWW15], except for order unit groups.
1. Recall that predicates on an object/set X in the eï¬€ectus Sets correspond
to subsets of X. The category Pred(Sets) has such subsets (P âŠ†X) as
objects; morphisms f : (P âŠ†X) â†’(Q âŠ†Y ) are functions f : X â†’Y
satisfying P âŠ†f âˆ’1(Q), that is: x âˆˆP â‡’f(x) âˆˆQ.
The comprehension functor Pred(Sets) â†’Sets is given by (Q âŠ†Y ) 7â†’Q.
The adjoint correspondences for 1 âŠ£{âˆ’|âˆ’} amount to:
1(X) = (X âŠ†X)
f
/ (Q âŠ†Y )
====================
X
g
/ Q = {Y |Q}
Obviously, if X âŠ†f âˆ’1(Q), then f(x) âˆˆQ for each x âˆˆX, so that f
restricts to a unique map f : X â†’Q = {Y |Q} with Ï€Q â—¦f = f, where
Ï€Q : {Y |Q} Ö’â†’Y is the inclusion.
For a predicate P âŠ†X the predicate [P, 1] âŠ†X + Y used in (41) is given
by [P, 1] = {Îº1x | x âˆˆP} âˆª{Îº2y | y âˆˆY }. Hence it is immediate that we
have: {X|P} + Y = P + Y = [P, 1] = {X + Y | [P, 1]}.
84

2. For discrete probability we use the eï¬€ectus in partial form Kâ„“(Dâ‰¤1) âˆ¼=
Par(Kâ„“(D)).
The category Predâœ·(Kâ„“(Dâ‰¤1)) has fuzzy predicates p âˆˆ
[0, 1]X as objects.
A morphism f : (p âˆˆ[0, 1]X) â†’(q âˆˆ[0, 1]Y ) is a
function f : X â†’Dâ‰¤1(Y ) satisfying, for each x âˆˆX,
p(x) â‰¤f âœ·(q)(x)
(22)
= P
y f(x)(y) Â· q(y) + 1 âˆ’P
y f(x)(y).
Comprehension sends a predicate q âˆˆ[0, 1]Y to the set {Y |q} = {y âˆˆ
Y | q(y) = 1} of elements where the predicate q holds with certainty.
Letâ€™s check the correspondences:
(1 âˆˆ[0, 1]X)
f
/ (q âˆˆ[0, 1]Y )
in Predâœ·(Kâ„“(Dâ‰¤1))
=========================
X
g
/ {y âˆˆY | q(y) = 1}
in Kâ„“(Dâ‰¤1)
Let f : X â†’Dâ‰¤1(Y ) satisfy 1 â‰¤P
y f(x)(y) Â· q(y) + 1 âˆ’P
y f(x)(y) for
each x âˆˆX. Hence P
y f(x)(y) â‰¤P
y f(x)(y)Â·q(y). This can only happen
if f(x)(y) > 0 implies q(y) = 1, for each x. But this means that we can
write each f(x) âˆˆDâ‰¤1(Y ) as subconvex sum f(x) = P
y f(x)(y)|yâŸ©with
q(y) = 1, and thus y âˆˆ{Y |q}. Hence we have f(x) âˆˆDâ‰¤1({Y |q}), so that
f restricts to a unique function f : X â†’Dâ‰¤1({Y |q}) with Ï€Q â—¦f = f,
where the comprehension map Ï€Q : {Y |q} â†’Dâ‰¤1(Y ) is given by Ï€Q(y) =
1|yâŸ©. Clearly, it is total.
3. The eï¬€ectus OUSop of order unit groups also has comprehension. The
description is rather confusing because we work in the opposite category.
It turns out that in this model comprehension is given by a quotient! We
follow the relevant description meticulously, in the total case.
The category Pred(OUGop) of predicates has eï¬€ects e âˆˆ[0, 1]G in order
unit groups G as objects. A morphism f : (e âˆˆ[0, 1]G) â†’(d âˆˆ[0, 1]H)
is a map f : G â†’H in OUGop with e â‰¤f âˆ—(d). This means that f is a
homomorphism of order unit groups f : H â†’G with e â‰¤f(d) in G.
For an eï¬€ect d âˆˆH we write âŸ¨dâŸ©H âŠ†H for the subset given by:
âŸ¨dâŸ©H = {x âˆˆH | âˆƒn âˆˆN. âˆ’n Â· d â‰¤x â‰¤n Â· d}.
(42)
It is not hard to see that âŸ¨dâŸ©H is a subgroup of H. It is an ideal, since it
satisï¬es: âˆ’x â‰¤y â‰¤x and x âˆˆâŸ¨dâŸ©G implies y âˆˆâŸ¨dâŸ©H. In fact, âŸ¨dâŸ©H is the
smallest ideal containing d. It inherits the order from H and is an order
unit group itself, with d âˆˆâŸ¨dâŸ©H as unit.
We now deï¬ne comprehension as quotient group:
{H|d} = H/âŸ¨dâŠ¥âŸ©H
with
(
H
Ï€d
/ {H|d}
x âœ¤
/ x + âŸ¨dâŠ¥âŸ©H
First we have to check that {H|d} is an order unit group. It is easy to
see that the quotient of an ordered Abelian group with an ideal is again
an ordered Abelian group, so we concentrate on checking that {H|d} has
85

an order unit.
We claim that Ï€d(1) = 1 + âŸ¨dâŠ¥âŸ©H is the order unit in
H/âŸ¨dâŠ¥âŸ©H = {H|d}. Indeed, for an arbitrary x âˆˆH there is an n âˆˆN with
âˆ’n Â· 1 â‰¤x â‰¤n Â· 1. But then:
âˆ’n Â· Ï€d(1) = âˆ’n Â· 1 + âŸ¨dâŠ¥âŸ©H â‰¤x + âŸ¨dâŠ¥âŸ©H â‰¤n Â· 1 + âŸ¨dâŠ¥âŸ©H = n Â· Ï€d(1).
The claimed comprehension adjunction involves a bijective correspondence
between:
1(G) = (1 âˆˆ[0, 1]G)
f
/ (H, d)
in Pred
 OUGop
====================
G
g
/ {H|d}
in OUGop
That is, between maps in OUG:
H
f
/ G with f(d) = 1
=====================
{H|d}
g
/ G
This works as follows.
â€¢ Let f : H â†’G in OUG satisfy f(d) = 1. Then for each x âˆˆâŸ¨dâŠ¥âŸ©H
we have f(x) = 0. Indeed, if âˆ’n Â· dâŠ¥â‰¤x â‰¤n Â· dâŠ¥, then, because
f(dâŠ¥) = f(1 âˆ’d) = f(1) âˆ’f(d) = 1 âˆ’1 = 0, we get:
0 = âˆ’n Â· f(dâŠ¥) = f(âˆ’n Â· dâŠ¥) â‰¤f(x) â‰¤f(n Â· dâŠ¥) = n Â· f(dâŠ¥) = 0.
Thus there is a unique group homomorphism f : {H|d} = H/âŸ¨dâŠ¥âŸ©H â†’
G by f(x+ âŸ¨dâŠ¥âŸ©H) = f(x). This map f is clearly monotone and uni-
tal.
â€¢ The other direction is easy: given g : {H|d} â†’G, take g = g â—¦
Ï€d : H â†’G. Then:
g(d) = g
 Ï€d(d)

= g
 d + âŸ¨dâŠ¥âŸ©H

= g
 d + dâŠ¥+ âŸ¨dâŠ¥âŸ©H

= g
 1 + âŸ¨dâŠ¥âŸ©H

= g
 1{H|d}

= 1.
Clearly, f = f â—¦Ï€d = f.
And g = g holds by uniqueness, since g(x) =
g(Ï€d(x)) = g(x + âŸ¨dâŠ¥âŸ©H).
Finally, for e âˆˆ[0, 1]G the canonical map {G âŠ•H|(e, 1)} â†’{G|e} âŠ•H is
the function:
(G âŠ•H)/âŸ¨(e, 1)âŠ¥âŸ©
/ G/âŸ¨eâŠ¥âŸ©âŠ•H
(x, y) + âŸ¨(e, 1)âŠ¥âŸ©âœ¤
/ (x + âŸ¨eâŠ¥âŸ©, y).
The equivalence relation on G âŠ•H induced by the ideal âŸ¨(e, 1)âŠ¥âŸ©=
âŸ¨(eâŠ¥, 0)âŸ©is given by (x, y) âˆ¼(xâ€², yâ€²) iï¬€(xâˆ’xâ€², yâˆ’yâ€²) âˆˆâŸ¨(eâŠ¥, 0)âŸ©. The latter
means that there is an n âˆˆN with âˆ’nÂ·(eâŠ¥, 0) â‰¤(xâˆ’xâ€², yâˆ’yâ€²) â‰¤nÂ·(eâŠ¥, 0).
This is equivalent to: âˆ’n Â· eâŠ¥â‰¤x âˆ’xâ€² â‰¤n Â· eâŠ¥and y = yâ€². The above
function is thus well-deï¬ned, and clearly an isomorphism, with inverse
(x + âŸ¨eâŠ¥âŸ©, y) 7â†’(x, y) + âŸ¨(e, 1)âŠ¥âŸ©.
86

4. The eï¬€ectus in partial form Par(vNAop) of von Neumann algebras and
subunital maps also has comprehension. The relevant category of predi-
cates Predâœ·(Par(vNAop)) has eï¬€ects e âˆˆ[0, 1]A in a von Neumann alge-
bra A as objects. Morphisms f : (e âˆˆ[0, 1]A ) â†’(d âˆˆ[0, 1]B) are subunital
completely positive normal maps f : B â†’A with e â‰¤f(d) in A .
Recall the sharp predicates on a von Neumann algebra are precisely the
projections. For an eï¬€ect d âˆˆ[0, 1]B we write âŒŠdâŒ‹âˆˆ[0, 1]B for the greatest
sharp element s âˆˆB with s â‰¤d. The deï¬nition âŒˆdâŒ‰= âŒŠdâŠ¥âŒ‹âŠ¥then yields
the least sharp element above d.
The projection âŒˆdâŒ‰is known as the support projection of d. In other texts
it is often denoted as r(d), as it is as an the projection onto the closed
range of d. Before we construct the comprehension in vNAop, we list a
few properties of âŒˆdâŒ‰, which will be useful later on.
(a) The ascending sequence d â‰¤d
1/2 â‰¤d
1/4 â‰¤Â· Â· Â· has supremum âŒˆdâŒ‰.
This can be shown using the spectral theorem.
It follows âŒˆdâŒ‰=
âŒˆ
âˆš
dâŒ‰= âŒˆd2âŒ‰.
(b) We have d = âŒˆdâŒ‰Â· d = d Â· âŒˆdâŒ‰. In fact, âŒˆdâŒ‰is the least projection with
this property. This is a consequence of Lemma 99. In combination
with the previous point we obtain, for instance:
âˆš
dÂ·âŒˆdâŒ‰=
âˆš
dÂ·âŒˆ
âˆš
dâŒ‰=
âˆš
d = âŒˆdâŒ‰Â·
âˆš
d.
Now we can deï¬ne comprehension as:
{B|d} = âŒŠdâŒ‹BâŒŠdâŒ‹= {âŒŠdâŒ‹Â· x Â· âŒŠdâŒ‹| x âˆˆB}.
This subset {B|d} is itself a von Neumann algebra, with âŒŠdâŒ‹as unit. The
associated comprehension map is the map Ï€d : B â†’{B|d} in vNA given
by Ï€d(x) = âŒŠdâŒ‹Â· x Â· âŒŠdâŒ‹.
We must show that given a von Neumann algebra A and a subunital
map f : B â†’A with f(d) = f(1) there is a unique subunital map
g : âŒŠdâŒ‹BâŒŠdâŒ‹â†’B with g(âŒŠdâŒ‹Â· x Â· âŒŠdâŒ‹) = f(x). Put g(x) = f(x); the diï¬ƒ-
culty it to show that f(âŒŠdâŒ‹Â· x Â· âŒŠdâŒ‹) = f(d). For the details, see [WW15].
We sketch the proof here. By a variant of Cauchy-Schwarz inequality for
the completely positive map f (see [Pau02, Exc. 3.4]) we can reduce this
problem to proving that f(âŒŠdâŒ‹) = f(1), that is, f(âŒˆdâŠ¥âŒ‰) = 0. Since âŒˆdâŠ¥âŒ‰is
the supremum of dâŠ¥â‰¤(dâŠ¥)
1/2 â‰¤(dâŠ¥)
1/4 â‰¤Â· Â· Â· and f is normal, f(âŒˆdâŠ¥âŒ‰) is
the supremum of f(dâŠ¥) â‰¤f((dâŠ¥)
1/2) â‰¤f((dâŠ¥)
1/4) â‰¤Â· Â· Â· , all of which turn
out to be zero by Cauchy-Schwarz since f(d) = f(1). Thus f(âŒˆdâŠ¥âŒ‰) = 0,
and we are done.
We note that with the same argument, one shows that for any 2-positive
normal subunital map h: A â†’B, we have, for all eï¬€ects a âˆˆ[0, 1]A ,
h(a) = 0 â‡â‡’h(âŒˆaâŒ‰) = 0.
(43)
We come to the promised result that relates comprehension in the total and
in the partial case.
87

Theorem 78. An eï¬€ectus in total form B has comprehension iï¬€its eï¬€ectus in
partial form Par(B) has comprehension.
In both cases the comprehension maps Ï€p : {X|p} â†’X are monic â€” in B
and in Par(B) respectively.
Proof Since the left adjoint truth functors 1: B â†’Pred(B) and 1: Par(B) â†’
Predâœ·(Par(B)) are faithful in both cases, the counits of the adjunctions are
monic by a general categorical result â€” see e.g. (the dual of) [Mac71, IV.3 Thm.1].
These counits are monic maps ({X|p}, 1) â†’(X, p) in the categories Pred(B)
and Predâœ·(Par(B)) respectively. It is easy to see, using the truth functor 1,
that the underlying maps are then monic in B and Par(B).
First, let 1: B â†’Pred(B) have a right adjoint {âˆ’|âˆ’}. The counit is a map
Ï€p : ({X|p}, 1) â†’(X, p) in Pred(B) satisï¬es 1 â‰¤Ï€âˆ—
p(p) = p â—¦Ï€p by deï¬nition.
The underlying map Ï€p : {X|p} â†’X is monic in B, as just noted.
We ï¬rst investigate the canonical map (41), call it Ïƒ, is the unique one in:
{X|p} + Y
Ïƒp
/
Ï€p+id
&â–²
â–²
â–²
â–²
â–²
â–²
â–²
{X + Y | [p, 1]}
w
Ï€[p,1]
wâ™¦â™¦â™¦â™¦â™¦â™¦â™¦â™¦
X + A
(44)
This map Ïƒ exists by comprehension because:
(Ï€p + id)âˆ—([p, 1]) = [p, Îº1 â—¦!] â—¦(Ï€p + id)
= [p â—¦Ï€p, Îº1 â—¦!] = [Îº1 â—¦!, Îº1 â—¦!] = Îº1 â—¦[!, !] = Îº1 â—¦! = 1.
By assumption, this Ïƒ is an isomorphism, for each predicate p and object Y .
We now show that the truth functor 1: B â†’Predâœ·(Par(B)) has a right
adjoint, on an object (X, p) given by {X|p}. There is total map â€¹Ï€pâ€º = Îº1 â—¦
Ï€1 : {X|p} â†’X in Par(B), which satisï¬es by Exercise 1 (3):
â€¹Ï€pâ€ºâœ·(p) =
 Ï€p
âˆ—(p) = p â—¦Ï€p = 1.
Let f : Y â†’X be an arbitrary partial map satisfying 1 â‰¤f âœ·(p) = [p, Îº1] â—¦
f = [p, 1] â—¦f = f âˆ—([p, 1]). Then there is a unique total map f : Y â†’{X +
1 | [p, 1]} with Ï€[p,1] â—¦f = f. We now take bf = Ïƒâˆ’1 â—¦f : Y â†’{X|p} + 1, using
the isomorphism from (44) with Y = 1. Then:
â€¹Ï€pâ€º
bf = (Ï€p + id) â—¦Ïƒâˆ’1 â—¦f
(44)
= Ï€[p,1] â—¦f = f.
If g : Y â†’{X|p} also satisï¬es â€¹Ï€1â€º
g = f, then Ïƒ â—¦g : Y â†’{X + 1 | [p, 1]}
satisï¬es Ï€[p,1] â—¦Ïƒp â—¦g = (Ï€p + id) â—¦g = â€¹Ï€pâ€º
g = f. Hence Ïƒ â—¦g = f, and thus
g = Ïƒâˆ’1 â—¦f = bf.
In the other direction, we show how comprehension in the partial case yields
comprehension in the total case with the distributivity isomorphism (41). There-
fore, assume that a right adjoint {âˆ’|âˆ’} to 1: B â†’Predâœ·(Par(B)) exists so that
each counit map {X|p} â†’X is total. We shall write this counit as â€¹Ï€pâ€º, for
Ï€p : {X|p} â†’X in B. As noted in the very beginning of this proof, the map
â€¹Ï€pâ€º is monic in Par(B). Further, we have:
p â—¦Ï€p =
 Ï€p
âˆ—(p) = â€¹Ï€pâ€ºâœ·(p) = 1.
88

The last equation holds because the counit is a map â€¹Ï€pâ€º: ({X|p}, 1) â†’(X, p)
in Predâœ·(Par(B)).
We now show that there is also a right adjoint to the truth functor 1: B â†’
Pred(B), on objects given by (X, p) 7â†’{X|p}.
Let f : Y â†’X be a total map satisfying f âˆ—(p) = 1. Then â€¹fâ€º = Îº1 â—¦f : Y â†’
X in Par(B) satisï¬es â€¹fâ€ºâœ·(p) = f âˆ—(p) = 1. Hence there is a unique partial map
f : Y â†’{X|p} with â€¹Ï€pâ€º
f = â€¹fâ€º. The latter means that the outer diagram
below commutes in the eï¬€ectus B.
Y
f
&
f
"
b
f
$
{X|p}
Ï€p
/

Îº1

â´âœ¤
X
Îº1

{X|p} + 1 Ï€p+id/ X + 1
The rectangle in the middle is a pullback by (9). This mediating map bf is what
we need, since it satisï¬es Ï€pâ—¦bf = f by construction. Moreover, if g : Y â†’{X|p}
in B also satisï¬es Ï€p â—¦g = f, then â€¹gâ€º = Îº1 â—¦g : Y â†’{X|p} in Par(B)
satisï¬es â€¹Ï€pâ€º
â€¹gâ€º = â€¹Ï€p â—¦gâ€º = â€¹fâ€º. Hence â€¹gâ€º = f by uniqueness. But then
Îº1 â—¦g = â€¹gâ€º = f = Îº1 â—¦bf, and so g = bf since Îº1 is monic. Thus we have shown
that the truth functor 1: B â†’Pred(B) has a right adjoint.
We still have to prove that the canonical map Ïƒ: {X|p}+Y â†’{X+Y | [p, 1]}
from (44) is an isomorphism. The inverse Ïƒâˆ’1 for Ïƒ is obtained via the following
pullback (1) from the deï¬nition of eï¬€ectus:
{X + Y | [p, 1]}
(!+id)â—¦Ï€[p,1]
&
f
'
Ïƒâˆ’1
(
{X|p} + Y
!+id
/
id+!

â´âœ¤
1 + Y
id+!

{X|p} + 1
!+id / 1 + 1
The auxiliary map f in this diagram is the unique one with â€¹Ï€pâ€º f = (id + !) â—¦
Ï€[p,1] : {X + Y | [p, 1]} â†’X + 1. It exists since:
 (id + !) â—¦Ï€[p,1]
âœ·(p) = [p, 1] â—¦(id + !) â—¦Ï€[p,1]
= [p, 1] â—¦Ï€[p,1]
= Ï€âˆ—
[p,1]([p, 1])
= 1.
We get (Ï€p + id)â—¦Ïƒâˆ’1 = Ï€[p,1] : {X + Y | [p, 1]} â†’X + Y via a similar pullback,
89

with X + Y in the upper left corner, since:
(! + id) â—¦(Ï€p + id) â—¦Ïƒâˆ’1 = (! + id) â—¦Ïƒâˆ’1
= (! + id) â—¦Ï€[p,1]
(id + !) â—¦(Ï€p + id) â—¦Ïƒâˆ’1 = (Ï€p + id) â—¦(id + !) â—¦Ïƒâˆ’1
= (Ï€p + id) â—¦f
= (id + !) â—¦Ï€[p,1].
From this we can conclude Ïƒ â—¦Ïƒâˆ’1 = id, using that Ï€[p,1] is monic in B, and:
Ï€[p,1] â—¦Ïƒ â—¦Ïƒâˆ’1 = (Ï€p + id) â—¦Ïƒâˆ’1 = Ï€[p,1].
We obtain Ïƒâˆ’1 â—¦Ïƒ = id via uniqueness of mediating maps in the above pullback
deï¬ning Ïƒâˆ’1:
(! + id) â—¦Ïƒâˆ’1 â—¦Ïƒ = (! + id) â—¦Ï€[p,1] â—¦Ïƒ
= (! + id) â—¦(Ï€p + id)
= (! + id)
(id + !) â—¦Ïƒâˆ’1 â—¦Ïƒ = f â—¦Ïƒ
(âˆ—)
= (id + !).
The latter, marked equation uses that the map â€¹Ï€pâ€º is monic in Par(B):
â€¹Ï€pâ€º
(f â—¦Ïƒ) = (Ï€p + id) â—¦f â—¦Ïƒ
= (id + !) â—¦Ï€[p,1] â—¦Ïƒ
= (id + !) â—¦(Ï€p + id)
= â€¹Ï€pâ€º
(id + !).
â–¡
In the remainder of this section we list several properties of comprehension.
Some of these properties are more naturally formulated in the total case, and
some in the partial case. Therefore we split these results up in two parts.
Lemma 79. Let B be an eï¬€ectus with comprehension, in total form.
1. A (comprehension) projection map Ï€p : {X|p} ÖŒ X can be characterised
either as the equaliser in B:
{X|p} / Ï€p
/ X
p
%
1=Îº1â—¦!
9 1+1
or as pullback:
{X|p}

Ï€p

!
/
â´âœ¤
1
Îº1

X
p
/ 1 + 1
2. One has pâŠ¥â—¦Ï€p = 0, and moreover the diagrams below are, respectively,
an equaliser and a pullback in B.
{X|pâŠ¥} /
Ï€pâŠ¥/ X
p
%
0=Îº2â—¦!
9 1+1
{X|pâŠ¥}

Ï€pâŠ¥

!
/
â´âœ¤
1
Îº2

X
p
/ 1 + 1
90

3. A projection Ï€p : {X|p} ÖŒ X is an isomorphism if and only if p = 1.
4. The comprehension {X|0} is initial in B.
5. Projection maps are closed under pullback in B: for each predicate p on
X and map f : Y â†’X we have a pullback in B:
{Y |f âˆ—(p)}
/

Ï€fâˆ—(p)

â´âœ¤
{X|p}

Ï€p

Y
f
/ X
(45)
6. The pullback of a coprojection along an arbitrary map exists in B, and is
given as in:
{X|p}
/

Ï€p 
â´âœ¤
Y
Îº1

X
f
/ Y + Z
where
p = (! + !) â—¦f : X â†’1 + 1
In particular, the coprojection Y ÖŒ Y + Z is itself (isomorphic to) a
comprehension map, namely to Y âˆ¼= {Y + Z | [1, 0]} ÖŒ Y + Z.
7. Projections of orthogonal predicates are disjoint: if p âŠ¥q, then the diagram
below is a pullback.
0 â´âœ¤

/ {X|p}

Ï€p

{X|q} /
Ï€q
/ X
8. For predicates p on X and q on Y the sum map Ï€p+Ï€q : {X|p}+{Y |q} â†’
X + Y is monic in B.
9. For predicates p on X and q on Y there is a (canonical) isomorphism as
on the left below. Using point (1), this implies that the square on the right
is a pullback.
{X|p} + {Y |q} âˆ¼
 
Ï€p+Ï€q
 â†
â†
â†
â†
â†
â†
â†
{X + Y | [p, q]}
~
Ï€[p,q]
~â‘¥â‘¥â‘¥â‘¥â‘¥â‘¥â‘¥
X + Y
{X|p} + {Y |q}

Ï€p+Ï€q

/
â´âœ¤
1
Îº1

X + Y
[p,q]
/ 1 + 1
Proof We use the formulation of comprehension for eï¬€ectuses in Deï¬nition 76 (1).
1. This is just a reformulation of the universal property of comprehension.
2. We have pâŠ¥â—¦Ï€p = [Îº2, Îº1]â—¦pâ—¦Ï€p = [Îº2, Îº1]â—¦Îº1â—¦! = Îº2â—¦! = 0. If f : Y â†’X
satisï¬es pâ—¦f = 0, then pâŠ¥â—¦f = [Îº2, Îº1]â—¦pâ—¦f = [Îº2, Îº1]â—¦Îº2â—¦! = Îº1â—¦! = 1.
Hence f factors through {X|pâŠ¥} making the diagrams in point (2) an
equaliser and a pullback.
91

3. We ï¬rst show that Ï€1 : {X|1} ÖŒ X is an isomorphism. The identity map
id : X â†’X trivially satisï¬es 1 = idâˆ—(1). Hence there is a unique map
f : X â†’{X|1} with Ï€1 â—¦f = id. The equation f â—¦Ï€1 = id follows because
the projections are monic: Ï€1 â—¦(f â—¦Ï€1) = Ï€1 = Ï€1 â—¦id.
Conversely, if Ï€p : {X|p} ÖŒ X is an isomorphism, then, using the pullback
in point (1) we obtain p = 1 by writing:
p =

X
Ï€âˆ’1
p
âˆ¼
=
/ {X|p}
!
/ 1 / Îº1
/ 1 + 1

=

X
1
/ 1 + 1

4. The projection Ï€0 : {X|0} ÖŒ X gives rise to an equality of predicates
1 = 0: {X|0} â†’1 + 1 via:
1 = Ï€âˆ—
0(0) = 0 â—¦Ï€0 = 0.
Hence we have a situation:
{X|0}
!
"
!
"
" 0

/
/
â´âœ¤
1
Îº1

1 /
Îº2
/ 1 + 1
Proposition 4 says that the rectangle is a pullback, and that 0 is strict.
This means that the map {X|0} â†’0 is an isomorphism.
5. The dashed arrow in diagram (45) exists since:
(f â—¦Ï€f âˆ—(p))âˆ—(p) = p â—¦f â—¦Ï€f âˆ—(p) = f âˆ—(p) â—¦Ï€f âˆ—(p) = 1.
The square (45) is a pullback, since if g : Z â†’Y and h: Z â†’{X|p}
satisfy f â—¦g = Ï€p â—¦h, then g factors through Ï€f âˆ—(p) since:
gâˆ— f âˆ—(p)

= p â—¦f â—¦g = p â—¦Ï€p â—¦h = 1 â—¦h = 1.
6. First we have to check that the rectangle in point (6) commutes. It arrises
in a situation:
{X|p}
/

Ï€p 
Y
Îº1

!
/
â´âœ¤
1
Îº1 
X
f
/
p
5
Y + Z
!+! / 1 + 1
The outer rectangle is a pullback by point (1). Hence the rectangle on the
left is a pullback, by the Pullback Lemma.
92

7. We use that diagram (45) is a pullback, with f = Ï€q.
It yields that
{{X|q}|Ï€âˆ—
q(p)} forms a pullback. But since p âŠ¥q, and so p â‰¤qâŠ¥, we have
Ï€âˆ—
q(p) â‰¤Ï€âˆ—
q(qâŠ¥) = 0. This gives {{X|q}|Ï€âˆ—
q(p)} âˆ¼= 0 by point (4). Hence
the rectangle in point (7) is a pullback.
8. Let f, g : Y â†’{X|p}+{X|q} satisfy (Ï€p +Ï€q)â—¦f = (Ï€p +Ï€q)â—¦g. We must
show that f = g. The next diagram is a pullback in B, see Deï¬nition 2.
{X|p} + {X|q}
â´âœ¤
!+id /
id+!

1 + {X|q}
id+!

{X|p} + 1
!+id
/ 1 + 1
Hence we are done if we can prove f1 = g1 and f2 = g2 where:
(
f1 = (id + !) â—¦f
g1 = (id + !) â—¦g
(
f2 = (! + id) â—¦f
g2 = (! + id) â—¦g
We recall from Theorem 78 that the projection maps â€¹Ï€qâ€º = Îº1 â—¦Ï€q are
monic in Par(B). We then get:
â€¹Ï€pâ€º
f1 = (Ï€p + id) â—¦(id + !) â—¦f
= (id + !) â—¦(Ï€p + Ï€q) â—¦f
= (id + !) â—¦(Ï€p + Ï€q) â—¦g
= (Ï€p + id) â—¦(id + !) â—¦g
= â€¹Ï€pâ€º
g1.
Similarly one gets f2 = g2.
9. For the isomorphism {X|p} + {Y |q} âˆ¼= {X + Y | [p, q]} we deï¬ne total
maps in both directions. First, consider the map Îº1â—¦Ï€p : {X|p} â†’X +Y ,
satisfying:
 Îº1 â—¦Ï€p
âˆ—([p, q]) = [p, q] â—¦Îº1 â—¦Ï€p = p â—¦Ï€p = 1.
This yields a unique map Ï•1 : {X|p} â†’{X + Y | [p, q]} with Ï€[p,q] â—¦Ï•1 =
Îº1 â—¦Ï€p. In a similar way we get Ï•2 : {Y |q} â†’{X + Y | [p, q]} with Ï€[p,q] â—¦
Ï•2 = Îº2 â—¦Ï€q. The cotuple Ï• = [Ï•1, Ï•2]: {X|p} + {Y |q} â†’{X + Y | [p, q]}
gives a map in one direction. It satisï¬es, by construction:
Ï€[p,q] â—¦Ï• = [Ï€[p,q] â—¦Ï•1, Ï€[p,q] â—¦Ï•2] = [Îº1 â—¦Ï€p, Îº2 â—¦Ï€q] = Ï€p + Ï€q.
For the other direction we consider the map âœ„1 â—¦Ï€[p,q] : {X + Y | [p, q]} â†’
X + 1. It satisï¬es:
 âœ„1 â—¦Ï€[p,q]
âœ·(p) = [p, Îº1] â—¦(id + !) â—¦Ï€[p,q] = [p, 1] â—¦Ï€[p,q]
= Ï€âˆ—
[p,q]([p, 1])
â‰¥Ï€âˆ—
[p,q]([p, q])
= 1.
93

Hence by (the partial version of) comprehension there is a uniqe map
Ïˆ1 : {X + Y | [p, q]} â†’{X|p} + 1 with (Ï€p + id) â—¦Ïˆ1 = âœ„1 â—¦Ï€[p,q]. In
a similar way there is a unique Ïˆ2 : {X + Y | [p, q]} â†’{Y |q} + 1 with
(Ï€q + id) â—¦Ïˆ2 = âœ„2 â—¦Ï€[p,q]. We then obtain the map Ïˆ = âŸ¨âŸ¨Ïˆ1, Ïˆ2âŸ©âŸ©: {X +
Y | [p, q]} â†’{X|p} + {Y |q}, like in Lemma 6. This pairing exists since:
ker(Ïˆ1) = [Îº2, Îº1] â—¦(! + id) â—¦Ïˆ1
= [Îº2, Îº1] â—¦(! + id) â—¦(Ï€p + id) â—¦Ïˆ1
= âœ„2 â—¦âœ„1 â—¦Ï€[p,q]
= (! + id) â—¦âœ„2 â—¦Ï€[p,q]
= (! + id) â—¦(Ï€q + id) â—¦Ïˆ2
= (! + id) â—¦Ïˆ2
= kerâŠ¥(Ïˆ2).
By (12) and the uniqueness of âŸ¨âŸ¨âˆ’, âˆ’âŸ©âŸ©we obtain:
(Ï€p + Ï€q) â—¦Ïˆ = âŸ¨âŸ¨â€¹Ï€pâ€º
Ïˆ1, â€¹Ï€qâ€º
Ïˆ2âŸ©âŸ©
= âŸ¨âŸ¨âœ„1 â—¦Ï€[p,q], âœ„2 â—¦Ï€[p,q]âŸ©âŸ©= Ï€[p,q].
Our ï¬nal aim is to show that Ï• and Ïˆ are each others inverses. This is
easy since both Ï€[p,q] and Ï€p + Ï€q are monic â€” the latter by point (8).
Hence we are done with:
Ï€[p,q] â—¦Ï• â—¦Ïˆ = (Ï€p + Ï€q) â—¦Ïˆ = Ï€[p,q]
(Ï€p + Ï€q) â—¦Ïˆ â—¦Ï• = Ï€[p,q] â—¦Ï• = (Ï€p + Ï€q).
â–¡
We turn to comprehension properties in the partial case. Of particular in-
terest is Diagram (46) below, which shows that in presence of comprehension,
kernel predicates give rise to kernel maps.
Lemma 80. Let (C, I) be an eï¬€ectus with comprehension, in partial form.
1. For each predicate p one has p â—¦Ï€p = 1 and pâŠ¥â—¦Ï€p = 0.
2. The category C has â€˜totalâ€™ kernel maps: for each map f : X â†’Y the
following diagram is an equaliser:
{X| ker(f)} / Ï€ker(f) / X
f
)
0
5 Y
(46)
where the comprehension map Ï€ker(f) is total, by deï¬nition.
3. For each map f, the composite f â—¦Ï€kerâŠ¥(f) is total.
4. Comprehension maps are closed under pullback in C: for each map f : X â†’
Y and predicate p on Y there is a pullback:
{Y |f âœ·(p)}
/

Ï€fâœ·(p)

â´âœ¤
{X|p}

Ï€p

X
f
/ Y
(47)
94

5. In presence of images, every map f : X â†’Y factors through the compre-
hension map of its image:
X
f
/
(
Y
{Y |im(f)}
6
Ï€im(f)
=
Proof We use the formulation of comprehension in the partial case from Deï¬-
nition 76 (2).
1. By deï¬nition the counit is a map Ï€p : ({X|p}, 1) â†’(X, p) in Predâœ·(C).
This means 1 â‰¤Ï€âœ·
p (p) = (pâŠ¥â—¦Ï€p)âŠ¥. Hence pâŠ¥â—¦Ï€p = 0.
Since Ï€p is total, pre-composition (âˆ’) â—¦Ï€p is a map of eï¬€ect algebras, see
Lemma 52 (4). Therefore:
p â—¦Ï€p = pâŠ¥âŠ¥â—¦Ï€p =
 pâŠ¥â—¦Ï€p
âŠ¥= 0âŠ¥= 1.
2. For the kernel predicate ker(f) = (1 â—¦f)âŠ¥: X â†’I of a map f : X â†’Y
consider the comprehension map Ï€ker(f) : {X| ker(f)} ÖŒ X. It satisï¬es,
by the previous point:
1 â—¦f â—¦Ï€ker(f) = kerâŠ¥(f) â—¦Ï€ker(f) = 0.
Hence f â—¦Ï€ker(f) = 0 by Deï¬nition 51 (3).
Next, let g : Z â†’X satisfy f â—¦g = 0 â—¦g = 0. Then:
gâœ· ker(f)

= ker(f â—¦g)
by Lemma 39 (5)
= ker(0)
= 1
by Lemma 39 (2).
Hence there is a necessarily unique map g : Z â†’{X| ker(f)} with Ï€ker(f) â—¦
g = g.
3. For each f : X â†’Y we have a total map f â—¦Ï€kerâŠ¥(f) since by point (1):
1 â—¦f â—¦Ï€kerâŠ¥(f) = kerâŠ¥(f) â—¦Ï€kerâŠ¥(f) = 1.
4. The dashed arrow in diagram (47) exists because by Exercise 1 (2):
(f â—¦Ï€f âœ·(p))âœ·(p) = Ï€âœ·
f âœ·(p)
 f âœ·(p)

= 1.
Next, assume we have maps g : Z â†’X and h: Z â†’{X|p} with f â—¦g =
Ï€p â—¦h. The map g then factors through Ï€f âœ·(p) since:
gâœ· f âœ·(p)

= (g â—¦f)âœ·(p) = (Ï€p â—¦h)âœ·(p) = hâœ· Ï€âœ·
p (p)

= hâœ·(1) = 1.
5. By deï¬nition f âœ·(im(f)) = 1, so that f factors through Ï€im(f).
â–¡
95

12
Quotients
Comprehension sends a predicate p on X to the object {X|p} of elements of X
for which p holds. Quotients form a dual operation: it sends a predicate p on
X to the object X/p in which elements for which p holds are identiï¬ed with 0.
We brieï¬‚y describe comprehension and quotients for vector spaces and Hilbert
spaces (like in [CJWW15]). Let LSub(Vect) and CLSub(Hilb) be the cate-
gories of linear (resp. closed linear) subspaces S âŠ†V , where V is a vector (resp.
Hilbert) space. Morphisms are maps between the underlying spaces that re-
strict appropriately. The obvious forgetful functors LSub(Vect) â†’Vect and
CLSub(Hilb) â†’Hilb have two adjoints on each side:
LSub(Vect)
âŠ£
âŠ£

âŠ£
(SâŠ†V )
7â†’V/S
)
âŠ£
(SâŠ†V )
7â†’S
u
CLSub(Hilb)
âŠ£
âŠ£

âŠ£
(SâŠ†V )
7â†’SâŠ¥
)
âŠ£
(SâŠ†V )
7â†’S
u
Vect
0
>
1
`
Hilb
0
>
1
`
We see that in both cases comprehension is right adjoint to the truth functor
0, and is given by mapping a subspace S âŠ†V to S itself. This is like for Sets,
see Example 77 (1).
Categorically, quotients have dual description to comprehension: not as right
adjoint to truth, but as left adjoint to falsity 0. We brieï¬‚y describe the associ-
ated dual correspondences, on the left below for vector spaces, and on the right
for Hilbert spaces.
(S âŠ†V )
f
/ ({0} âŠ†W)
=====================
V/S
g
/ W
(S âŠ†V )
f
/ ({0} âŠ†W)
=====================
SâŠ¥
g
/ W
The correspondence on the left says that a linear map f : V â†’W with S âŠ†
f âˆ’1({0}) = ker(f) corresponds to a map g : V/S â†’W. Indeed, this g is given
by g(v + S) = f(v). This is well-deï¬ned, because f(v) = f(vâ€²) if v âˆ¼vâ€², since
the latter means v âˆ’vâ€² âˆˆS, and thus f(v) âˆ’f(vâ€²) = f(v âˆ’vâ€²) = 0. This is the
standard universal property of quotients in algebra.
The situation is more interesting for Hilbert spaces. A map f : V â†’W with
S âŠ†ker(f) is completely determined by what it does on the orthosupplement
V âŠ¥, since each vector v âˆˆV can be written as sum v = x + y with x âˆˆS and
y âˆˆSâŠ¥. Hence f(v) = f(y). This explains why f corresponds uniquely to a
map g : SâŠ¥â†’W, namely its restriction.
Below we shall see more examples where quotients are given by complements
of comprehension. But ï¬rst we have to say what it means for an eï¬€ectus to
have quotients. Recall that comprehension can be deï¬ned both for eï¬€ectuses in
total and partial form in an equivalent manner, see Theorem 78. In contrast,
quotients only makes sense in the partial case.
Deï¬nition 81. We say that an eï¬€ectus in partial form (C, I) has quotients if
its zero functor 0: C â†’Predâœ·(C) has a left adjoint.
We say that an eï¬€ectus in total form B has quotients if its category Par(B)
of partial maps has quotients.
96

For an eï¬€ectus in partial form C with both comprehension and quotients we
have a â€˜quotient-comprehension chainâ€™, like for vector and Hilbert spaces:
Predâœ·(C)
âŠ£
âŠ£

âŠ£
Quotient
(X,p)7â†’X/p
*
âŠ£
Comprehension
(X,p)7â†’{X|p}
t
C
0
>
1
`
We shall study such combinations in Section 14.
The unit of the quotient adjunction is a map in Predâœ·(C) which we write
as:
(X, p)
Î¾p
/ (X/p, 0)
Hence by deï¬nition it is a map Î¾p : X â†’X/p in C satisfying p â‰¤f âœ·(0) = ker(f).
Example 82. Each of our four running examples of eï¬€ectuses has quotients.
1. For the eï¬€ectus Sets, the associated category Par(Sets) is the category of
sets and partial functions. For a predicate P âŠ†X we deï¬ne the quotient
set X/P as comprehension of the complement:
X/P
def
= {X|Â¬P} = {x âˆˆX | x Ì¸âˆˆP},
(48)
analogously to the Hilbert space example described above. This gives a
left adjoint to the zero functor 0: Par(Sets) â†’Predâœ·(Par(Sets)), since
there are bijective correspondences:
(P âŠ†X)
f
/ 0(Y ) = (âˆ…âŠ†Y )
=================
{X|Â¬P}
g
/ Y
Indeed, given f : (P âŠ†X) â†’0(Y ) in Predâœ·(Par(Sets)), then f : X â†’Y
is a partial function satisfying P âŠ†f âœ·(0) = {x | f(x) = âˆ—}, see (21).
Thus f is determined by its outcome on the complement Â¬P, so that we
can simply deï¬ne a corresponding partial function f : {X|Â¬P} â†’Y as
f(x) = f(x). And, in the other direction, for g : {X|Â¬P} â†’Y we deï¬ne
the extension g: X â†’Y as:
g(x) =
(
âˆ—i.e. undeï¬ned
if x âˆˆP
g(x)
if x âˆˆÂ¬P
By construction, this g is a map (P âŠ†X) â†’(âˆ…âŠ†Y ) in Predâœ·(Par(Sets))
since:
ker(g) = gâœ·(0) = {x | g(x) = âˆ—} âŠ‡P.
It is easy to see f = f and g = g. The unit Î¾P : X â†’X/P is the partial
function with Î¾P (x) = x if x âˆˆP and Î¾P (x) undeï¬ned otherwise.
97

2. We recall that the category of partial maps for the eï¬€ectus Kâ„“(D) for
discrete probability is the Kleisli category Kâ„“(Dâ‰¤1) of the subdistribution
monad Dâ‰¤1, see Example 9. For a predicate p âˆˆ[0, 1]X on a set X we
take as quotient:
X/p
def
= {x âˆˆX | p(x) < 1}.
(49)
The quotient adjunction involves bijective correspondences:
(p âˆˆ[0, 1]X)
f
/ (0 âˆˆ[0, 1]Y ) = 0(Y )
=========================
X/p
g
/ Y
This works as follows.
â€¢ Given f : (p âˆˆ[0, 1]X) â†’(0 âˆˆ[0, 1]Y ) in Predâœ·(Kâ„“(Dâ‰¤1)), then
f : X â†’Dâ‰¤1(Y ) satisï¬es p(x) â‰¤f âœ·(0)(x) = ker(f)(x) = 1 âˆ’
P
y f(x)(y) for each x âˆˆX, see (23).
We then deï¬ne f : X/p â†’
Dâ‰¤1(Y ) as:
f(x) = P
y
f(x)(y)
pâŠ¥(x)
y

= P
y
f(x)(y)
1âˆ’p(x)
y

This is well-deï¬ned, since p(x) Ì¸= 1 for x âˆˆX/p.
â€¢ In the other direction, given a function g : X/p â†’Dâ‰¤1(Y ) we deï¬ne
g : X â†’Dâ‰¤1(Y ) as:
g(x) = P
y pâŠ¥(x) Â· g(x)(y)
y

This g is a morphism (p âˆˆ[0, 1]X) â†’(0 âˆˆ[0, 1]Y ) in Predâœ·(Kâ„“(Dâ‰¤1)),
since we have an inequality p â‰¤ker(g) via:
ker(g)(x) = 1 âˆ’P
y g(x)(y) = 1 âˆ’P
y pâŠ¥(x) Â· g(x)(y)
= p(x) + pâŠ¥(x) âˆ’pâŠ¥(x) Â· P
y g(x)(y)
= p(x) âˆ’pâŠ¥(x) Â· (1 âˆ’P
y g(x)(y))
= p(x) + pâŠ¥(x) Â· ker(g)(x)
â‰¥p(x).
Clearly, the mappings f 7â†’f and g 7â†’g are each otherâ€™s inverses. The
unit map Î¾p : X â†’X/p is given by Î¾p(x) = pâŠ¥(x)|xâŸ©= (1 âˆ’p(x))|xâŸ©.
We notice that also in this case we can express the quotient object as
comprehension, namely:
X/p = {x âˆˆX | p(x) < 1} = {x âˆˆX | âŒˆpâŠ¥âŒ‰(x) = 1} = {X|âŒˆpâŠ¥âŒ‰},
where, in general, âŒˆqâŒ‰is the least sharp predicate above q, given by:
âŒˆqâŒ‰(x) =
(
1
if q(x) > 0
0
if q(x) = 0
(50)
98

3. For the eï¬€ectus of order unit groups we recall from Example 10 that
the category Par(OUGop) of partial maps in OUGop contains positive
subunital group homomorphisms as maps. Because of the â€˜oppositeâ€™ in-
volved, we deï¬ne quotients via subgroups, in the following way. For an
eï¬€ect e âˆˆ[0, 1]G in an order unit group G we take:
G/e
def
= âŸ¨eâŠ¥âŸ©G,
(51)
where âŸ¨eâŠ¥âŸ©G âŠ†G is the subgroup given by âŸ¨eâŸ©G = {x âˆˆG | âˆƒn âˆˆN. âˆ’n Â·
eâŠ¥â‰¤x â‰¤n Â· eâŠ¥}, see Example 77 (3). We write the inclusion âŸ¨eâŠ¥âŸ©G âŠ†G
as a map Î¾e : âŸ¨eâŠ¥âŸ©G â†’G. This is a positive group homomorphism, which
is subunital since:
Î¾e(1G/e) = Î¾e(eâŠ¥) = eâŠ¥âˆˆ[0, 1]G.
The quotient adjunction involves a bijective correspondence between:
(G, e)
f
/ 0(H)
in Predâœ·
 OUGop
===============
G/e
g
/ H
in Par(OUGop)
That is, between positive subunital (PsU) group homomorphisms:
H
f
/ G with e â‰¤f âœ·(0)
======================
H
g
/ G/e
where f âœ·(0) = ker(f) = f(1)âŠ¥, see (24). This works as follows.
â€¢ Given f : H â†’G with e â‰¤ker(f) = f(1)âŠ¥, we have f(1) â‰¤eâŠ¥. For
each x âˆˆH there is an n with âˆ’n Â· 1 â‰¤x â‰¤n Â· 1. Using that f is
positive/monotone we get:
âˆ’n Â· eâŠ¥â‰¤âˆ’n Â· f(1) = f(âˆ’n Â· 1) â‰¤f(x)
â‰¤f(n Â· 1) = n Â· f(1) â‰¤n Â· eâŠ¥.
Hence f(x) âˆˆâŸ¨eâŠ¥âŸ©G, so that we can simply deï¬ne f : H â†’âŸ¨eâŠ¥âŸ©G =
G/e as f(x) = f(x).
â€¢ Given g : H â†’G/e = âŸ¨eâŠ¥âŸ©G, deï¬ne g = Î¾e â—¦g : H â†’G. This is a
subunital map with:
gâœ·(0) = g(1)âŠ¥= Î¾eâŠ¥(g(1))âŠ¥= g(1)âŠ¥
â‰¥
 1âŸ¨eâŠ¥âŸ©G
âŠ¥=
 eâŠ¥âŠ¥= e.
We have f = Î¾e â—¦f = f, and g = g by injectivity of Î¾e.
â–¡
4. In the eï¬€ectus vNAop of von Neumann algebras the partial maps are also
the subunital ones, see Example 11. The quotient of an eï¬€ect e âˆˆ[0, 1]A
in a von Neumann algebra A is deï¬ned as:
A /e
def
= âŒˆeâŠ¥âŒ‰A âŒˆeâŠ¥âŒ‰= {âŒˆeâŠ¥âŒ‰Â· x Â· âŒˆeâŠ¥âŒ‰| x âˆˆA }.
(52)
99

It uses the â€˜ceilingâ€™ âŒˆeâŠ¥âŒ‰= âŒŠeâŒ‹âŠ¥from Example 77 (4). The quotient map
Î¾e : A â†’A /e in vNAop is given by the subunital function A /e â†’A
with:
Î¾e(x) =
âˆš
eâŠ¥Â· x Â·
âˆš
eâŠ¥.
(53)
This map incorporates LÂ¨uders rule, see e.g. [BS98, Eq.(1.3)].
The proof that these constructions yield a left adjoint to the zero functor
is highly non-trivial. For details we refer to [WW15]. We conclude that
once again quotient objects can be expressed via comprehension:
{A |âŒˆeâŠ¥âŒ‰} = âŒŠâŒˆeâŠ¥âŒ‰âŒ‹A âŒŠâŒˆeâŠ¥âŒ‰âŒ‹= âŒˆeâŠ¥âŒ‰A âŒˆeâŠ¥âŒ‰= A /e.
We continue with a series of small results that hold for quotients.
Lemma 83. Let (C, I) be an eï¬€ectus with quotients, in partial form.
1. The unit Î¾p : X â†’X/p satisï¬es ker(Î¾p) = p and thus kerâŠ¥(Î¾p) = pâŠ¥.
2. The unit map Î¾p : X â†’X/p is epic in C.
3. For a predicate q: X/p â†’I one has q â—¦Î¾p â‰¤pâŠ¥.
4. The functor
Predâœ·(C)
Î¾(âˆ’)
/ Quot(C)
is full and faithful â€” where Quot(C) is the obvious category with epis Ö‰
as objects and commuting squares between them as arrows.
5. The universal property of quotient amounts to: for each f : X â†’Y with
p â‰¤ker(f) there is a unique f : X/p â†’Y with f â—¦Î¾p = f. But we can say
more: if there is an equality p = ker(f), then f is total.
6. There are total isomorphisms Î¾0 : X
âˆ¼
=
âˆ’â†’X/0 and 0
âˆ¼
=
âˆ’â†’X/1.
7. For each predicate p on X there is a total â€˜decompositionâ€™ map dcp : X â†’
X/pâŠ¥+ X/p, namely the unique map in:
X
Î¾pâŠ¥
xqqqqqqqqqqq
Î¾p
&â–²
â–²
â–²
â–²
â–²
â–²
â–²
â–²
â–²
â–²
â–²
dcp

X/pâŠ¥
X/pâŠ¥+ X/p
âœ„1
o
âœ„2 / X/p
(54)
Using the pairing notation of Lemma 6, we can describe it as dcp =
âŸ¨âŸ¨Î¾pâŠ¥, Î¾pâŸ©âŸ©, and thus also as total sum dcp = (Îº1 â—¦Î¾pâŠ¥) > (Îº2 â—¦Î¾p) of
two maps X â†’X/pâŠ¥+ X/p, see Lemma 43.
8. Each total map f : Y â†’X1 + X2 can be decomposed in the subcategory
Tot(C) Ö’â†’C of total maps as f = (f1 + f2) â—¦dcp where p = (! + !) â—¦f and
f1, f2 are total, and uniquely determined.
9. For predicates p on X and q on Y the sum map Î¾p+Î¾q : X+Y â†’X/p+Y/q
is epic in C.
100

10. For predicates p on X and q on Y there is a total (canonical) isomorphism
in:
(X/p) + (Y/q)
âˆ¼
=
/ (X + Y )/[p, q]
X + Y
Î¾p+Î¾q
ffâ–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼
Î¾[p,q]
8 8q
q
q
q
q
q
q
q
11. Partial projections âœ„i are (isomorphic to) quotient maps, via total iso-
morphisms:
X + Y
Î¾[0,1]
}}â‘¤â‘¤â‘¤â‘¤â‘¤â‘¤
âœ„1
 â‚â‚â‚â‚â‚â‚
X + Y
Î¾[1,0]
}}â‘¤â‘¤â‘¤â‘¤â‘¤â‘¤
âœ„1
 â‚â‚â‚â‚â‚â‚
(X + Y )/[0, 1]
âˆ¼
=
/ X
(X + Y )/[1, 0]
âˆ¼
=
/ Y
12. For a predicate p on X there is an isomorphism of eï¬€ect modules:
Pred(X/pâŠ¥)
pÂ·(âˆ’)
,
âˆ¼=
â†“p = {q âˆˆPred(X) | q â‰¤p}
(âˆ’)/p
m
(55)
As a result, if X/p âˆ¼= 0, then p = 1.
13. Quotient maps are closed under composition, up to total isomorphisms.
Given a predicate p on X and q on X/p, there is an isomorphism as on
the left below. It uses the operation pâŠ¥Â· (âˆ’) = (âˆ’) â—¦Î¾p from point (12).
(X/p)/q
âˆ¼
total X/(pâŠ¥Â· qâŠ¥)âŠ¥
(X/p)/(râŠ¥/pâŠ¥)âŠ¥
âˆ¼
total
X/r
X/p
Î¾q
[[âœ¼âœ¼âœ¼âœ¼
X/p
Î¾(pâŠ¥/râŠ¥)âŠ¥
ddâââââ
X
Î¾p
ZZâœºâœºâœº
Î¾(pâŠ¥Â·qâŠ¥)âŠ¥
F Fâ˜â˜â˜â˜â˜â˜â˜â˜â˜â˜
X
Î¾p
ccâ‹â‹â‹â‹â‹
Î¾r
GGâœâœâœâœâœâœâœâœâœ
Equivalently, for predicates p, r on X with p â‰¤r, there is a total isomor-
phism as on the right above.
14. If our eï¬€ectus C has images, then it has cokernel maps: for each map
f : X â†’Y we have a coequaliser in C of the form:
X
f
+
0
3 Y
coker(f)
def
= Î¾im(f)/ / Y/im(f)
Thus: coker(f) = 0 iï¬€im(f) = 1, that is, iï¬€f is internally epic.
The decomposition property of maps from point (8) plays an important role
in Section 13 when we relate extensive categories and (Boolean) eï¬€ectuses.
Proof We reason in the eï¬€ectus in partial form C and do not use diï¬€erent
notation for partial and total maps.
101

1. Since the unit Î¾p is a map (X, p) â†’(X/p, 0) in Predâœ·(C) we have an
inequality p â‰¤Î¾âœ·
p (0) = ker(Î¾p) by deï¬nition. In order to get an equation
p = ker(Î¾p), notice that the predicate pâŠ¥: X â†’I is a map (X, p) â†’(I, 0)
in Predâœ·(C), since:
(pâŠ¥)âœ·(0) =
 0âŠ¥â—¦pâŠ¥âŠ¥=
 1I â—¦pâŠ¥âŠ¥=
 idI â—¦pâŠ¥âŠ¥= p.
Hence there is a unique map p: X/p â†’I with p â—¦Î¾p = pâŠ¥. But then we
are done by Lemma 39 (1) and (6): p = ker(pâŠ¥) = ker(p â—¦Î¾p) â‰¥ker(Î¾p).
2. Let maps f, g : X/p â†’Y satisfy f â—¦Î¾p = g â—¦Î¾p = h, say. This h: X â†’Y
then satisï¬es p = ker(Î¾p) â‰¤ker(f â—¦Î¾p) = ker(h) = hâœ·(0). Hence there is a
unique h: X/p â†’Y with h â—¦Î¾p = h. But then f = h = g by uniqueness.
3. For a predicate q on X/p one has:
q â—¦Î¾p =
 qâŠ¥âŠ¥â—¦Î¾p
âŠ¥âŠ¥= Î¾âœ·
p (qâŠ¥)âŠ¥â‰¤Î¾âœ·
p (0)âŠ¥
since 0 â‰¤qâŠ¥
= ker(Î¾p)âŠ¥
= pâŠ¥
by point (1).
4. Letâ€™s assume we have a commuting diagram in C of the form:
X
Î¾p 
f
/ Y
Î¾q

X/p
g
/ Y/q
We have to prove p â‰¤f âœ·(q), making f a map (X, p) â†’(Y, q) in Predâœ·(C).
This follows from:
p = ker(Î¾p) = Î¾âœ·
p (0) â‰¤Î¾âœ·
p
 gâœ·(0)

= f âœ· Î¾âœ·
q (0)

= f âœ· ker(Î¾q)

= f âœ·(q).
5. Clearly, p â‰¤ker(f) = f âœ·(0) means that f is a map (X, p) â†’(Y, 0) in
Predâœ·(C). Hence the unique map f : X/p â†’Y is the adjoint transpose.
If we have an equation p = ker(f), then we can show that f is total, by
using that the unit map Î¾p is epic:
1 â—¦f â—¦Î¾p = 1 â—¦f = kerâŠ¥(f) = pâŠ¥= kerâŠ¥(Î¾p) = 1 â—¦Î¾p.
6. We ï¬rst show X/0 âˆ¼= X. The identity map in X satisï¬es: ker(idX) = 0.
Hence by point (5) there is a unique total map f : X/0 â†’X satisfying
f â—¦Î¾0 = id. The map Î¾0 is also total since 1â—¦Î¾0 = kerâŠ¥(Î¾0) = 0âŠ¥= 1. We
now get Î¾0 â—¦f = idX by using that Î¾0 is epic: (Î¾0 â—¦f) â—¦Î¾0 = Î¾0 = id â—¦Î¾0.
Next, for the isomorphism X/1 âˆ¼= 0, we notice that the zero map 0: X â†’0
in C satisï¬es ker(0) = (0âŠ¥â—¦0)âŠ¥= 0âŠ¥= 1, so that there is a unique total
map f : X/1 â†’0 with f â—¦Î¾1 = 0.
Obviously, f â—¦!X/1 = id0, where
!X/1 : 0 â†’X/1 is total. We also have !X/1 â—¦f = idX/1, since Î¾1 is epic
and: (!X/1 â—¦f) â—¦Î¾1 = !X/1 â—¦0 = 0 = Î¾1. This last equation holds by
Deï¬nition 51 (3) since 1 â—¦Î¾1 = kerâŠ¥(Î¾1) = 1âŠ¥= 0.
102

7. The diagram (54) uniquely deï¬nes dcp = âŸ¨âŸ¨Î¾pâŠ¥, Î¾pâŸ©âŸ©as described in Lemma 6.
It satisï¬es [Îº2, Îº1] â—¦dcp = dcpâŠ¥since:
âœ„1 â—¦[Îº2, Îº1] â—¦dcp = [[id, 0] â—¦Îº2, [id, 0] â—¦Îº1] â—¦dcp
= [0, id] â—¦dcp = âœ„2 â—¦dcp = Î¾p.
Similarly one proves âœ„2 â—¦[Îº2, Îº1] â—¦dcp = Î¾pâŠ¥, so that:
[Îº2, Îº1] â—¦dcp = âŸ¨âŸ¨Î¾p, Î¾pâŠ¥âŸ©âŸ©= dcpâŠ¥.
8. Let f : Y â†’X1 + X2 be total, and write p = (! + !) â—¦f : Y â†’1 + 1 in
the subcategory Tot(C) of total maps. The partial map âœ„1 â—¦f : Y â†’X1
satisï¬es:
ker
 âœ„1 â—¦f

=
 (! + id) â—¦(id + !) â—¦f
âŠ¥= pâŠ¥.
Hence there is a unique total map f1 : Y/pâŠ¥â†’X1 with f1 â—¦Î¾pâŠ¥= âœ„1 â—¦f.
Similarly, from ker
 âœ„2 â—¦f

= p we obtain a unique total f2 : Y/p â†’X2
with f2 â—¦Î¾p = âœ„2 â—¦f. But then in Tot(C), using Lemma 6:
(f1 + f2) â—¦dcp = (f1 + f2) â—¦âŸ¨âŸ¨Î¾pâŠ¥, Î¾pâŸ©âŸ©= âŸ¨âŸ¨f1 â—¦Î¾pâŠ¥, f2 â—¦Î¾pâŸ©âŸ©
= âŸ¨âŸ¨âœ„1 â—¦f, âœ„2 â—¦fâŸ©âŸ©
= f.
9. In an arbitrary category, if f : X Ö‰ A, g : Y Ö‰ B are both epic, then so
is the sum f + g.
10. We ï¬rst have to say what the canonical map Ï„ : (X + Y )/[p, q] â†’(X/p) +
(Y/q) is. Consider the sum map Î¾p + Î¾q in C with:
kerâŠ¥(Î¾p + Î¾q) = 1 â—¦(Î¾p + Î¾q) = [1, 1] â—¦(Î¾p + Î¾q)
by Lemma 52 (3)
= [1 â—¦Î¾p, 1 â—¦Î¾q]
= [kerâŠ¥(Î¾p), kerâŠ¥(Î¾q)]
= [pâŠ¥, qâŠ¥]
= [p, q]âŠ¥
by Theorem 21.
This last step uses the isomorphism of eï¬€ect modules Pred(X + Y ) âˆ¼=
Pred(X) Ã— Pred(Y ). The resulting equation ker(Î¾p + Î¾q) = [p, q] yields
by point (5) a unique total map Ï„ : (X + Y )/[p, q] â†’X/p + Y/q with
Ï„ â—¦Î¾[p,q] = Î¾p + Î¾q.
In the other direction, consider the two composites:
X
Îº1 *â±
â±
â±
â±
â±
X + Y
Î¾[p,q] / (X + Y )/[p, q]
Y
Îº2
4â¤
â¤
â¤
â¤
â¤
â¤
103

The ï¬rst one satisï¬es:
ker
 Î¾[p,q] â—¦Îº1

=
 1 â—¦Î¾[p,q] â—¦Îº1
âŠ¥=
 kerâŠ¥(Î¾[p,q]) â—¦Îº1
âŠ¥
=
 [pâŠ¥, qâŠ¥] â—¦Îº1
âŠ¥
= p.
Similarly, ker
 Î¾[p,q]â—¦Îº2

= q. Hence there are unique total maps f : X/p â†’
(X + Y )/[p, q] and g : Y/q â†’(X + Y )/[p, q] with f â—¦Î¾p = Î¾[p,q] â—¦Îº1
and g â—¦Î¾q = Î¾[p,q] â—¦Îº2. We claim that the cotuple [f, g]: X/p + Y/q â†’
(X + Y )/[p, q] is the inverse of the canonical map Ï„.
We obtain [f, g] â—¦Ï„ = id from the fact that Î¾â€™s are epic:
[f, g] â—¦Ï„ â—¦Î¾[p,q] = [f, g] â—¦(Î¾p + Î¾q) = [f â—¦Î¾p, g â—¦Î¾q]
= [Î¾[p,q] â—¦Îº1, Î¾[p,q] â—¦Îº2]
= Î¾[p,q].
In the other direction we use that the sum map Î¾p + Î¾q in C is epic:
Ï„ â—¦[f, g] â—¦(Î¾p + Î¾q) = Ï„ â—¦[f â—¦Î¾p, g â—¦Î¾q]
= [Ï„ â—¦Î¾[p,q] â—¦Îº1, Ï„ â—¦Î¾[p,q] â—¦Îº2]
= [(Î¾p + Î¾q) â—¦Îº1, (Î¾p + Î¾q) â—¦Îº2]
= (Î¾p + Î¾q).
11. By points (10) and (6) we have isomorphisms:
X + Y
Î¾[0,1]
ssâ¢â¢â¢â¢â¢â¢â¢â¢â¢â¢â¢â¢â¢â¢â¢â¢â¢â¢â¢â¢
Î¾0+Î¾1sss
yysss
id+!
â…â…â…
 â…â…
âœ„1
) )â˜
â˜
â˜
â˜
â˜
â˜
â˜
â˜
â˜
â˜
â˜
â˜
â˜
(X + Y )/[0, 1]
âˆ¼
(X/0) + (Y/1)
âˆ¼
X + 0
âˆ¼
X
12. For a predicate q â‰¤p, we have pâŠ¥â‰¤qâŠ¥= ker(q). Hence there is a unique
predicate, written as q/p: X/pâŠ¥â†’I, with (q/p) â—¦Î¾pâŠ¥= q. In the other
direction, for r: X/pâŠ¥â†’I we write p Â· r = r â—¦Î¾pâŠ¥: X â†’I. Then p Â· r â‰¤p
follows from:
(p Â· r)âŠ¥= ker(p Â· r) = ker(r â—¦Î¾pâŠ¥) â‰¥ker(Î¾pâŠ¥)
by Lemma 39 (6)
= pâŠ¥.
By construction, p Â· (q/p) = q. But also (p Â· r)/p = r, because Î¾â€™s are epic,
and: ((pÂ·r)/p)â—¦Î¾pâŠ¥= pÂ·r = râ—¦Î¾pâŠ¥. It requires a bit of work to verify that
these mappings (âˆ’)/p and p Â· (âˆ’) preserve the eï¬€ect module structure.
Finally, if X/p âˆ¼= 0, then â†“pâŠ¥âˆ¼= Pred(X/p) âˆ¼= Pred(0) âˆ¼= 1. But then
â†“pâŠ¥= {0}, so that pâŠ¥= 0 and thus p = 1.
13. Let p be a predicate on X and q on X/p. Then by Lemma 39 (5):
ker(Î¾q â—¦Î¾p) = Î¾âœ·
p (ker(Î¾q)) = Î¾âœ·
p (q) =
 qâŠ¥â—¦Î¾p
âŠ¥=
 pâŠ¥Â· qâŠ¥âŠ¥.
104

Hence there is a unique (total) map f : X/(pâŠ¥Â· qâŠ¥)âŠ¥â†’(X/p)/q with
f â—¦Î¾X/(pâŠ¥Â·qâŠ¥)âŠ¥= Î¾q â—¦Î¾p. In the other direction we proceed in two steps.
First, by construction, pâŠ¥Â· qâŠ¥â‰¤pâŠ¥, so p â‰¤(pâŠ¥Â· qâŠ¥)âŠ¥. This yields a map
g : X/p â†’X/(pâŠ¥Â· qâŠ¥)âŠ¥with g â—¦Î¾p = Î¾(pâŠ¥Â·qâŠ¥)âŠ¥. We wish to show that
there is a total map h: (X/p)/q â†’X/(pâŠ¥Â· qâŠ¥)âŠ¥with h â—¦Î¾q = g. This
works if ker(g) = q: X/p â†’I. Because the Î¾â€™s are epic in C we are done
by:
kerâŠ¥(g) â—¦Î¾p = 1 â—¦g â—¦Î¾p = 1 â—¦Î¾(pâŠ¥Â·qâŠ¥)âŠ¥= kerâŠ¥(Î¾(pâŠ¥Â·qâŠ¥)âŠ¥)
= pâŠ¥Â· qâŠ¥
= qâŠ¥â—¦Î¾p.
We now have (total) maps (X/p)/q â‡„X/(pâŠ¥Â·qâŠ¥)âŠ¥, which are each otherâ€™s
inverses because they commute with the Î¾â€™s.
We leave it to the reader to construct similar maps (X/p)/(râŠ¥/pâŠ¥)âŠ¥â‡„
X/r for p â‰¤r.
14. Assuming images in C we have for each map f : X â†’Y a predicate
im(f): Y â†’I, with quotient map Î¾im(f) : Y â†’Y/im(f). We claim that
Î¾im(f) â—¦f = 0: X â†’X/im(f). This follows by Deï¬nition 51 (3) from:
1 â—¦Î¾im(f) â—¦f = kerâŠ¥(Î¾im(f)) â—¦f = imâŠ¥(f) â—¦f = f âœ·(im(f))âŠ¥= 1âŠ¥= 0.
Now suppose we have a map g : Y â†’Z with g â—¦f = g â—¦0 = 0. Then
im(f) â‰¤ker(g) by Lemma 47 (7). This yields the required unique map
g: Y/im(f) â†’Z with g â—¦Î¾im(f) = g.
Finally, if im(f) = 1, then Y/im(f) = Y/1 âˆ¼= 0, by point (6), so that
coker(f) = Î¾im(f) : Y â†’0 is the zero map. Conversely, let coker(f) = 0.
By Lemma 39 (1) we have ker(imâŠ¥(f)) = im(f): Y â†’I. Hence there is
a unique map g : X/im(f) â†’I with imâŠ¥(f) = g â—¦Î¾im(f) = g â—¦coker(f) =
g â—¦0 = 0. But then im(f) = 1.
â–¡
Several of the points in Lemma 83 are used to prove that quotients give
rise to a factorisation system.
Such a system is given by two collections of
map, called â€˜abstract monosâ€™ and â€˜abstract episâ€™, satisfying certain properties,
see e.g. [BW85] for details.
Proposition 84. Each eï¬€ectus with quotients in partial form has a factorisa-
tion system given by internal monos (i.e. total maps) and quotient maps Î¾.
Proof An arbitrary map f : X â†’Y can be factored as:
X
f
/
Î¾ker(f)
' '
Y
X/ ker(f)
f â€², total
=
The fact that the map f â€² is total follows from Lemma 83 (5).
105

By Lemma 39 (8) the total (internally monic) maps are closed under com-
position. The Î¾â€™s are also closed under composition, by Lemma 83 (13). The
intersection of the these two classes consists of isomorphisms: if Î¾p : X â†’X/p is
total, then 1 = 1â—¦Î¾p = kerâŠ¥(Î¾p) = pâŠ¥, so that p = 0, making Î¾p = Î¾0 : X â†’X/0
an isomorphism, see Lemma 83 (6).
Finally we check the diagonal-ï¬ll-in property. In a commuting diagram as on
the left below, there is a unique diagonal as on the right, making both triangles
commute.
X
Î¾p
/ /
g

X/p
h

X
Î¾p
/ /
g

X/p
h

z
Y
f
total
/ Z
Y
f
total
/ Z
We have by Lemma 39 (7) and (6), using that f is total,
ker(g) = ker(f â—¦g) = ker(h â—¦Î¾p) â‰¥ker(Î¾p) = p.
Hence there is a unique map k: X/p â†’Y with k â—¦Î¾p = g. We obtain f â—¦k = h
by using that Î¾p is epic.
â–¡
13
Boolean eï¬€ectuses and extensive categories
The main result of this section says that a Boolean eï¬€ectus with comprehen-
sion is the same thing as an extensive category. This is an important coinci-
dence of two categorical notions, which gives a deeper understanding of what
Boolean eï¬€ectuses are. These extensive categories are well-known from the lit-
erature [CLW93] and capture well-behaved coproducts.
In this section we shall work in the â€˜totalâ€™ language of eï¬€ectuses, and not
the â€˜partialâ€™ version.
The reason is that we will work towards a correspon-
dence between extensive categories and certain eï¬€ectuses in total formâ€” and
not between extensive categories and eï¬€ectuses in partial form.
We recall from Deï¬nition 55 that an eï¬€ectus is Boolean if it is commutative
â€” with assert maps asrtp : X â†’X + 1 for predicates p: X â†’1 + 1 as inverse
to kerâŠ¥â€” which satisfy asrtp
asrtpâŠ¥= 0. We start with an auxiliary result
about comprehension in commutative eï¬€ectuses.
Lemma 85. In a commutative eï¬€ectus B with comprehension the following two
diagrams are equalisers in B.
{X|pâŠ¥} /
Ï€pâŠ¥/ X
asrtp )
0
6 X+1
{X|p} / Ï€p
/ X
asrtp )
Îº1
6 X+1
Proof The equaliser on the left in B is in essence the kernel map property in
Par(B) from Lemma 80 (2). For the one on the right we recall that asrtp â‰¤id
in the homset of partial maps X â†’X, by deï¬nition. Hence:
asrtp â—¦Ï€p = asrtp
â€¹Ï€pâ€º â‰¤id
â€¹Ï€pâ€º = Îº1 â—¦Ï€p.
106

We wish to show that this inequality is actually an equality. So let f : X â†’X
satisfy (asrtp â—¦Ï€p) > f = (Îº1 â—¦Ï€p). Applying the map of eï¬€ect algebras kerâŠ¥=
(! + id) â—¦(âˆ’) on both sides yields in Pred({X|p}),
1 = Îº1 â—¦! = Îº1 â—¦! â—¦Ï€p = kerâŠ¥(Îº1 â—¦Ï€1)
= kerâŠ¥(asrtp â—¦Ï€p) > kerâŠ¥(f)
= ((! + id) â—¦asrtp â—¦Ï€p) > kerâŠ¥(f)
= (p â—¦Ï€p) > kerâŠ¥(f)
= 1 > kerâŠ¥(f).
Hence kerâŠ¥(f) = 0 by cancellation in the eï¬€ect algebra Pred({X|p}), and thus
f = 0 by Lemma 39 (2). But then Îº1 â—¦Ï€p = (asrtp â—¦Ï€p) > f = asrtp â—¦Ï€p.
Next, let f : Y â†’X in B satisfy asrtp â—¦f = Îº1 â—¦f. Then:
f âˆ—(p) = p â—¦f = (! + id) â—¦asrtp â—¦f
= (! + id) â—¦Îº1 â—¦f = Îº1 â—¦! â—¦f = Îº1 â—¦! = 1.
Hence f factors in a unique way through Ï€p.
â–¡
We turn to extensive categories. There are several equivalent formulations,
see [CLW93], but we use the most standard one.
Deï¬nition 86. A category is called extensive if it has ï¬nite coproducts (+, 0)
such that pullbacks along coprojections exist, and in every diagram of the form,
Z1
/

Z

Z2
o

X
Îº1
/ X + Y
Y
Îº2
o
the two rectangles are pullbacks if and only if the top row is a coproduct, that
is, the induced map Z1 + Z2 â†’Z is an isomorphism.
There are many examples of extensive categories, with â€˜well-behavedâ€™ co-
products. For instance, every topos â€” including Sets â€” is an extensive cate-
gory, see e.g. [CLW93]. At the end of this section we list some concrete examples.
For the record we recall the following basic observation from [CLW93]. The
ï¬rst point is the anologue of Proposition 4 for eï¬€ectuses.
Lemma 87. In an extensive category,
1. coprojections are are monic and disjoint, and the initial object 0 is strict;
2. If the rectangles on the left below are pullbacks, for i = 1, 2, then the
rectangle on the right is a pulback too.
Ai
fi

gi
/
â´âœ¤
X
f

A1 + A2
f1+f2

[g1,g2] /
â´âœ¤
X
f

Bi
hi
/ Y
B1 + B2
[h1,h2]
/ Y
107

Proof For the ï¬rst point, consider the rectangles:
0
/

Y
Îº2

Y
X
Îº1
/ X + Y
Y
Îº2
o
The top row is a coproduct diagram. Hence the two rectangles are pullbacks.
The one on the left says that coprojections are disjoint, and the one on the right
says that Îº2 is monic.
For strictness of 0, we have to prove that a map f : X â†’0 is an isomorphism.
Consider the diagram:
X
f

â´âœ¤
X
Îº1â—¦f=Îº2â—¦f

X
f

âœ¤â´
0
Îº1
/ 0 + 0
Y
Îº2
o
The two rectangles are pullbacks because the coprojections are monic. Hence the
top row is a coproduct diagram, so that the codiagonal âˆ‡= [id, id]: X+X â†’X
is an isomorphism. Using âˆ‡â—¦Îº1 = id = âˆ‡â—¦Îº2 we get Îº1 = Îº2 : X â†’X + X.
Now we can now prove that ! â—¦f : X â†’0 â†’X is the identity, via:
! â—¦f = [! â—¦f, idX] â—¦Îº1 = [! â—¦f, idX] â—¦Îº2 = idX.
We turn to the second point. Let a: Z â†’X and b: Z â†’B1 + B2 satisfy
f â—¦a = [h1, h2] â—¦b. Form the pullbacks on the left, and the mediating maps ci
on the right:
Z1 /
k1
/
b1

â´âœ¤
Z
b

Z2
o
k2
o
b2

âœ¤â´
B1 /
Îº1
/ B1 + B2
B2
o
Îº2
o
and
Zi
bi

aâ—¦ki
 
ci
 
Ai
fi

gi
/
â´âœ¤
X
f

Bi
hi
/ Y
The outer diagram on the right commutes since:
f â—¦a â—¦ki = [h1, h2] â—¦b â—¦ki = [h1, h2] â—¦Îºi â—¦bi = hi â—¦bi.
The unique mediating map is c = (c1 + c2) â—¦[k1, k2]âˆ’1 : Z â†’A1 + A2.
â–¡
Proposition 88. Each extensive category with a ï¬nal object is a Boolean ef-
fectus with comprehension.
Proof This is quite a bit of work. So let A be an extensive category with a
ï¬nal object 1. We start by showing that A is an eï¬€ectus. We ï¬rst concentrate
108

on the two pullbacks in Deï¬nition 2:
X + Y
id+! /
!+id

X + 1
!+id

X
!
/

Îº1

1
Îº1

1 + Y
id+! / 1 + 1
X + Y
!+! / 1 + 1
(âˆ—)
For convenience, we start with the diagram on the right. We consider it as
turned left-part of the following diagram:
X / Îº1
/
!

X + Y
!+!

Y
o
Îº2
o
!

1 /
Îº1
/ 1 + 1
1
o
Îº2
o
Since the top row is a coproduct diagram, both rectangles are pullbacks in an
extensive category, by deï¬nition.
For the diagram on the left in (âˆ—), it suï¬ƒces, by Lemma 87 (2) to prove that
the two diagrams below are pullbacks.
X
Îº1
/
!

X + 1
!+id

Y
!
/ 1
Îº2
/ X + 1
!+id

1
Îº1
/ 1 + 1
Y
!
/ 1
Îº2
/ 1 + 1
The rectangle on the left is a pullback just like the diagram on the right in (âˆ—).
Similarly, the right-rectangle on the right is a pullback. The left-rectangle on
the right is obviously a pullback, so we are done by the Pullback Lemma.
The next step is to prove that the two maps Â·Â·Â·
Â·Â·âœâœ= [id, Îº2], Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœ= [[Îº2, Îº1], Îº2]
are jointly monic. We sketch how to proceed. If f, g : Y â†’(1 + 1) + 1 satisfy
Â·Â·Â·
Â·Â·âœâœâ—¦f = Â·Â·Â·
Â·Â·âœâœâ—¦g and Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœâ—¦f = Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœâ—¦g then we decompose f, g each in three parts,
via pulbacks with approriate coprojections 1 â†’(1 + 1)+ 1, and show that these
three parts are equal. This is left to the interested reader.
We now know that the extensive category A that we started from is an
eï¬€ectus. We turn to predicates and comprehension. For each predicate p: X â†’
1 + 1 in A we choose a pullback:
{X|p}

/
Ï€p
/
â´âœ¤
X
p

1 /
Îº1
/ 1 + 1
(56)
We will need a number of facts about these maps Ï€p : {X|p} ÖŒ X.
(a). The following diagrams are also pullbacks.
X
p

{X|pâŠ¥}
o
Ï€pâŠ¥
o

{X|p} + Y
[!,!]=!

/Ï€p+id/ X + Y
[p,1]

1 + 1
1
o
Îº2
o
1 /
Îº1
/ 1 + 1
109

The combination of the left diagram and Diagram (56) tells us that the
cotuple [Ï€p, Ï€pâŠ¥]: {X|p} + {X|pâŠ¥} â†’X is an isomorphism. The conse-
quence of the pullback on the right is that {X | [p, 1]} âˆ¼= {X|p} + Y , so
that the eï¬€ectus A has comprehension, see Deï¬nition 76.
It is easy to see that the above diagram on the left is a pullback: if
f : Y â†’X satisï¬es p â—¦f = Îº2 â—¦!, then:
pâŠ¥â—¦f = [Îº2, Îº1] â—¦p â—¦f = [Îº2, Îº1] â—¦Îº2 â—¦! = Îº1 â—¦! = 1.
Hence f factors uniquely through Ï€pâŠ¥in (56).
The above rectangle on the right is a pullback diagram since one can apply
Lemma 87 (2) to Diagram (56) and a trivial pullback.
(b). The pair of comprehension maps Ï€p, Ï€pâŠ¥is jointly epic.
Indeed, if f â—¦Ï€p = g â—¦Ï€p and f â—¦Ï€pâŠ¥= g â—¦Ï€pâŠ¥, then:
f â—¦[Ï€p, Ï€pâŠ¥] = [f â—¦Ï€p, f â—¦Ï€pâŠ¥] = [g â—¦Ï€p, g â—¦Ï€pâŠ¥] = g â—¦[Ï€p, Ï€pâŠ¥].
Hence f = g since the cotuple [Ï€p, Ï€pâŠ¥] is an isomorphism.
We now deï¬ne for each predicate p: X â†’1 + 1 an â€˜assertâ€™ map X â†’X + 1
as:
asrtp
def
=

X
[Ï€p,Ï€pâŠ¥]âˆ’1
/ {X|p} + {X|pâŠ¥}
Ï€p+! / X + 1

Again we prove a number of basic facts.
(i). asrtp â—¦Ï€p = Îº1 â—¦Ï€p and asrtp â—¦Ï€pâŠ¥= 0.
From [Ï€p, Ï€pâŠ¥] â—¦Îº1 = Ï€p we obtain [Ï€p, Ï€pâŠ¥]âˆ’1 â—¦Ï€p = Îº1. Hence:
asrtp â—¦Ï€p = (Ï€p + !) â—¦[Ï€p, Ï€pâŠ¥]âˆ’1 â—¦Ï€p = (Ï€p + !) â—¦Îº1 = Îº1 â—¦Ï€p.
Similarly:
asrtp â—¦Ï€pâŠ¥= (Ï€p + !) â—¦[Ï€p, Ï€pâŠ¥]âˆ’1 â—¦Ï€pâŠ¥= (Ï€p + !) â—¦Îº2 = Îº2 â—¦! = 0.
(ii). asrtp â‰¤id in the homset of partial maps X â†’X, since asrtp>asrtpâŠ¥= id,
via the bound b = Îº1 â—¦(Ï€p +Ï€pâŠ¥)â—¦[Ï€p, Ï€pâŠ¥]âˆ’1 : X â†’(X +X)+1. Indeed:
âœ„1
b = (id + !) â—¦(Ï€p + Ï€pâŠ¥) â—¦[Ï€p, Ï€pâŠ¥]âˆ’1
= (Ï€p + !) â—¦[Ï€p, Ï€pâŠ¥]âˆ’1
= asrtp
âœ„2
b = [Îº2 â—¦!, Îº1] â—¦(Ï€p + Ï€pâŠ¥) â—¦[Ï€p, Ï€pâŠ¥]âˆ’1
= [Îº2 â—¦!, Îº1 â—¦Ï€pâŠ¥] â—¦[Ï€p, Ï€pâŠ¥]âˆ’1
= (Ï€pâŠ¥+ !) â—¦[Îº2, Îº1] â—¦[Ï€p, Ï€pâŠ¥]âˆ’1
= (Ï€pâŠ¥+ !) â—¦[Ï€pâŠ¥, Ï€p]âˆ’1
= asrtpâŠ¥
asrtp > asrtpâŠ¥= âˆ‡
b
= Îº1 â—¦âˆ‡â—¦(Ï€p + Ï€pâŠ¥) â—¦[Ï€p, Ï€pâŠ¥]âˆ’1
= Îº1
110

(iii). This mapping p 7â†’asrtp is the inverse of kerâŠ¥: Endâ‰¤id(X) â†’Pred(X).
First, we have:
kerâŠ¥(asrtp) = (! + id) â—¦(Ï€p + !) â—¦[Ï€p, Ï€pâŠ¥]âˆ’1
= (! + !) â—¦[Ï€p, Ï€pâŠ¥]âˆ’1
= p.
Conversely, let f : X â†’X satisfy f â‰¤id. We need to prove f = asrtp, for
p = kerâŠ¥(f) = 1
f = (! + id) â—¦f. Consider the diagram:
{X|p} /
Ï€p
/
h

â´âœ¤
X
f

{X|pâŠ¥}
o
Ï€pâŠ¥
o
!

âœ¤â´
X /
Îº1
/
!

â´âœ¤
X + 1
!+id

1
o
Îº2
o
âœ¤â´
1 /
Îº1
/ 1 + 1
Y
o
Îº2
o
We ï¬rst show h = Ï€p. Since f â‰¤id we can write f > g = id for some map
g : X â†’X. Then:
1 = 1
id = 1
(f > g) = (1
f) > (1
g) = p > (1
g).
Hence 1
g = pâŠ¥. Then: 1
(g â—¦Ï€p) = pâŠ¥â—¦Ï€p = 0, so that g â—¦Ï€p = 0 by
Lemma 7. We now get Ï€p = h from:
Îº1 â—¦Ï€p = (f > g) â—¦Ï€p = (f â—¦Ï€p) > (g â—¦Ï€p) = (Îº1 â—¦h) > 0 = Îº1 â—¦h.
Finally we obtain f = asrtp from:
f â—¦[Ï€p, Ï€pâŠ¥] = [f â—¦Ï€p, f â—¦Ï€pâŠ¥] = [Îº1 â—¦Ï€p, Îº2 â—¦!] = Ï€p + !.
(iv). asrtp
asrtpâŠ¥= 0.
We simply calculate:
asrtp
asrtpâŠ¥= [asrtp, Îº2] â—¦(Ï€pâŠ¥+ !) â—¦[Ï€pâŠ¥, Ï€p]âˆ’1
= [asrtp â—¦Ï€pâŠ¥, Îº2 â—¦!] â—¦[Ï€pâŠ¥, Ï€p]âˆ’1
(i)
= [Îº2 â—¦!, Îº2 â—¦!] â—¦[Ï€pâŠ¥, Ï€p]âˆ’1
= 0 â—¦[Ï€pâŠ¥, Ï€p]âˆ’1
= 0.
(v). Commutation of asserts â€” that is, asrtp
asrtq = asrtq
asrtp â€” follows
from the previous point, as described in Remark 60.
We may now conclude that the extensive category A is an eï¬€ectus with
comprehension, by point (a), which is commutative, by points (ii) â€“ (v), and
Boolean in particular, by point (iv).
â–¡
111

We now arrive at the main result of this section.
Theorem 89. Let B be a category with ï¬nite coproducts and a ï¬nal object.
Then: B is extensive if and only if it is a Boolean eï¬€ectus with comprehension.
In this situation quotients come for free.
Proof By Proposition 88 we only have to prove that a Boolean eï¬€ectus B with
comprehension is extensive. From Proposition 61 we know that all predicates
are sharp and form Boolean algebras.
For a predicate p on X we have the map asrtp : X â†’X with kerâŠ¥(asrtp) = p.
In a Boolean eï¬€ectus we have:
asrtâœ·
p (p) =
 pâŠ¥
asrtp
âŠ¥=
 1
asrtpâŠ¥
asrtp
âŠ¥=
 1
0
âŠ¥= 1.
We then have a factorisation in Par(B) of the form:
{X|p}
 â€¹Ï€pâ€º

X
Î¾pâŠ¥
3
asrtp
/ X
The notation Î¾ for these maps is deliberate, because they yield quotients. But
ï¬rst we show that:
Î¾pâŠ¥
â€¹Ï€pâ€º = id
and
Î¾pâŠ¥
â€¹Ï€pâŠ¥â€º = 0.
(âˆ—)
The proof uses that â€¹Ï€pâ€º is monic in Par(B):
â€¹Ï€pâ€º
Î¾pâŠ¥
â€¹Ï€pâ€º = asrtp
â€¹Ï€pâ€º
= Îº1 â—¦Ï€1
by Lemma 85
= â€¹Ï€pâ€º
â€¹Ï€pâ€º
Î¾pâŠ¥
â€¹Ï€pâŠ¥â€º = asrtp
â€¹Ï€pâŠ¥â€º
= 0
by Lemma 85
= â€¹Ï€pâ€º
0.
We now show that Î¾pâŠ¥: X â†’{X|p} is a quotient map, where {X|p} is the
quotient object X/pâŠ¥. First we have:
ker(Î¾pâŠ¥) =
 1
Î¾pâŠ¥
âŠ¥=
 1
â€¹Ï€pâ€º
Î¾pâŠ¥
âŠ¥=
 1
asrtp
âŠ¥= pâŠ¥.
Next, if f : X â†’Y satisï¬es pâŠ¥â‰¤ker(f), then:
1
f
asrtpâŠ¥= kerâŠ¥(f)
asrtpâŠ¥â‰¤p
asrtpâŠ¥
= 1
asrtp
asrtpâŠ¥= 1
0 = 0.
This gives f
asrtpâŠ¥= 0, by Lemma 7, and thus:
f = f
id = f
(asrtp > asrtpâŠ¥) = (f
asrtp) > (f
asrtpâŠ¥) = f
asrtp.
112

We obtain f = f â—¦Ï€p : {X|p} â†’Y as mediating map, since:
f
Î¾pâŠ¥= f
â€¹Ï€pâ€º
Î¾pâŠ¥= f
asrtp = f.
This map f is unique, since if g : {X|p} â†’Y also satisï¬es g
Î¾pâŠ¥= f, then:
f = f
â€¹Ï€pâ€º = g
Î¾pâŠ¥
â€¹Ï€pâ€º
(âˆ—)
= g
id = g.
Now that we have quotient maps we can form the total â€˜decompositionâ€™ map
dcp = âŸ¨âŸ¨Î¾pâŠ¥, Î¾pâŸ©âŸ©: X â†’{X|p} + {X|pâŠ¥} from Lemma 83 (7). We claim that
this map dcp is an isomorphism, with the cotuple [Ï€p, Ï€pâŠ¥] as inverse. We ï¬rst
prove dcp â—¦Ï€p = Îº1 and dcp â—¦Ï€pâŠ¥= Îº2 by using (11):
dcp â—¦Ï€p = âŸ¨âŸ¨Î¾pâŠ¥, Î¾pâŸ©âŸ©â—¦Ï€p = âŸ¨âŸ¨Î¾pâŠ¥â—¦Ï€p, Î¾p â—¦Ï€pâŸ©âŸ©
(âˆ—)
= âŸ¨âŸ¨Îº1, 0âŸ©âŸ©= âŸ¨âŸ¨âœ„1 â—¦Îº1, âœ„2 â—¦Îº1âŸ©âŸ©= Îº1
dcp â—¦Ï€pâŠ¥= âŸ¨âŸ¨Î¾pâŠ¥, Î¾pâŸ©âŸ©â—¦Ï€pâŠ¥= âŸ¨âŸ¨Î¾pâŠ¥â—¦Ï€p, Î¾p â—¦Ï€pâŠ¥âŸ©âŸ©
(âˆ—)
= âŸ¨âŸ¨0, Îº1âŸ©âŸ©= âŸ¨âŸ¨âœ„1 â—¦Îº2, âœ„2 â—¦Îº2âŸ©âŸ©= Îº2.
At this stage we can prove one part of the claim that the decomposition map
dcp is an isomorphism:
dcp â—¦[Ï€p, Ï€pâŠ¥] = [dcp â—¦Ï€p, dcp â—¦Ï€pâŠ¥] = [Îº1, Îº2] = id.
For the other direction, we take b = Îº1 â—¦(Ï€p + Ï€pâŠ¥) â—¦dcp : X â†’X + X and
claim that b is a bound for the pair of maps asrtp, asrtpâŠ¥: X â†’X. This is the
case, since:
âœ„1
b = (id + !) â—¦(Ï€p + Ï€pâŠ¥) â—¦dcp = (Ï€p + id) â—¦(id + !) â—¦dcp
= (Ï€p + id) â—¦Î¾pâŠ¥
= asrtp
âœ„2
b = [Îº2 â—¦!, Îº1] â—¦(Ï€p + Ï€pâŠ¥) â—¦dcp = [Îº2, Îº1 â—¦Ï€pâŠ¥] â—¦(! + id) â—¦dcp
= [Îº2, Îº1 â—¦Ï€pâŠ¥] â—¦[Îº2, Îº1] â—¦Î¾p
= (Ï€pâŠ¥+ id) â—¦Î¾p
= asrtpâŠ¥.
Since the assert map is a homomorphism of eï¬€ect algebras we have:
Îº1 = asrtp > asrtpâŠ¥= (âˆ‡+ id) â—¦b = Îº1 â—¦âˆ‡â—¦(Ï€p + Ï€pâŠ¥) â—¦dcp
= Îº1 â—¦[Ï€p, Ï€pâŠ¥] â—¦dcp.
But then [Ï€p, Ï€pâŠ¥] â—¦dcp = id, making dcp an isomorphism, as required.
We are ï¬nally in a position to show that the eï¬€ectus B is an extensive
category, see Deï¬nition 86. Let f : Z â†’X +Y be an arbitrary map in B. Write
113

p = (! + !) â—¦f : Z â†’1 + 1, and consider the following diagram.
{Z|p} /
Ï€p
/


â´âœ¤
Z
f

{Z|pâŠ¥}
o
Ï€pâŠ¥
o


âœ¤â´
Y
/
Îº1
/

â´âœ¤
Y + Z
!+!

Z
o
Îº2
o

âœ¤â´
1 /
Îº1
/ 1 + 1
1
o
Îº2
o
The two lower pullbacks exist because B is an eï¬€ectus. The two outer ones, with
the curved arrows, exist because B has comprehension. The two upper squares,
with the dashed arrows are then pulbacks by the Pullback Lemma. Thus, the
pullbacks along f of the coprojections Y â†’Y +Z â†Z exist. Moreover, we have
just seen that the cotuple [Ï€p, Ï€pâŠ¥] of the pulled-back maps is an isomorphism.
This is one part of Deï¬nition 86.
For the other part, consider a similar diagram where the top row is already
a coproduct diagram:
Z1
f1

/ Îº1
/ Z1 + Z2
f

Z2
f2

o
Îº2
o
X /
Îº1
/ X + Y
Y
o
Îº2
o
Then:
f = f â—¦[Îº1, Îº2] = [f â—¦Îº1, f â—¦Îº2] = [Îº1 â—¦f1, Îº2 â—¦f2] = f1 + f2.
But the above two rectangles are then pullbacks by Lemma 3 (1).
â–¡
We thus see that a Boolean eï¬€ectus with comprehension corresponds to the
well-established notion of extensive category. It is an open question whether
there is a similar alternative notion for a commutative eï¬€ectus, capturing prob-
abilistic computation.
Each topos is an extensive category, and thus an eï¬€ectus. Notice that in
a topos-as-eï¬€ectus the predicates are the maps X â†’1 + 1, and not the more
general predicates X â†’â„¦, where â„¦is the subobject classiï¬er. There are many
extensive categories that form interesting examples of eï¬€ectuses, such as: the
category Top of topological spaces, and it subcategory CH Ö’â†’Top of com-
pact Hausdorï¬€spaces; the category Meas of measurable spaces; the opposite
CRngop of the category of commutative rings, see [CJWW15].
14
Combining comprehension and quotients
In previous sections we have studied comprehension and quotients separately.
We now look at the combination, and derive some more results. First we need
the following observation.
114

Lemma 90. Let C be an eï¬€ectus in partial form which has comprehension and
also has quotients. Write for a predicate p on an object X âˆˆC:
{X|p}
Î¸p
def
= Î¾pâŠ¥â—¦Ï€p
/ X/pâŠ¥
(57)
Then:
1. this map Î¸p is total;
2. if Î¸p is an isomorphism, then p is sharp.
Proof The ï¬rst point is easy: Î¸p is total by Lemma 80 (1) and Lemma 83 (1):
1 â—¦Î¸p = 1 â—¦Î¾pâŠ¥â—¦Ï€p = kerâŠ¥(Î¾pâŠ¥) â—¦Ï€p = p â—¦Ï€p = 1.
For the second point let Î¸p be an isomorphism, and let q âˆˆPred(X) satisfy
q â‰¤p and q â‰¤pâŠ¥. In order to prove that p is sharp, we must show q = 0. From
pâŠ¥â‰¤qâŠ¥= ker(q) we get a predicate q/p in Pred(X/pâŠ¥) with q/p â—¦Î¾pâŠ¥= q, see
Lemma 83 (12). Then:
q/p = q/p â—¦Î¸p â—¦Î¸âˆ’1
p
= q/p â—¦Î¾pâŠ¥â—¦Ï€p â—¦Î¸âˆ’1
p
= q â—¦Ï€p â—¦Î¸âˆ’1
p
â‰¤pâŠ¥â—¦Ï€p â—¦Î¸âˆ’1
p
= 0 â—¦Î¸âˆ’1
p
= 0.
Hence q = q/p â—¦Î¾pâŠ¥= 0 â—¦Î¾pâŠ¥= 0.
â–¡
We now consider the condition which enforces an equivalence in the above
second point.
Deï¬nition 91. We say that an eï¬€ectus in partial form has both quotients and
comprehension if it has comprehension, like in Deï¬nition 76 (2), and quotients,
like in Deï¬nition 81, such that for each sharp predicate p âˆˆPred(X) the total
map Î¸p : {X|p} â†’X/pâŠ¥in (57) is an isomorphism.
We then deï¬ne, for each such sharp p âˆˆPred(X) the map:
asrtp
def
=

X
Î¾pâŠ¥/ / X/pâŠ¥
Î¸âˆ’1
p
âˆ¼
=
/ {X|p} / Ï€p
/ X

.
(58)
Example 92. We brieï¬‚y illustrate the map Î¸p : {X|p} â†’X/pâŠ¥from (57) in
our running examples.
In the eï¬€ectus Sets we have for a predicate P âŠ†X {X|P} = P and also
Q/P âŠ¥= {X|P âŠ¥âŠ¥} = P. The map Î¸ is the identity, and is thus always an
isomorphism. Indeed, in this Boolean eï¬€ectus Sets every predicate is sharp.
More generally, consider an extensive category B with ï¬nal object, as a
Boolean eï¬€ectus with both comprehension and quotients, see Theorem 89. The
quotient that is constructed in the proof is of the form Î¾pâŠ¥: X â†’{X|p}. Hence
we have Î¸p = id : {X|p} â†’X/pâŠ¥.
In the eï¬€ectus Kâ„“(D) we have for a predicate p âˆˆ[0, 1]X an inclusion:
{X|p} = {x | p(x) = 1}  
Î¸p
/ {x | p(x) > 0} = X/pâŠ¥
115

When p is sharp, we have p(x) âˆˆ{0, 1}, so that Î¸p is the identity.
Next we consider the eï¬€ectus OUGop of order unit groups. For an eï¬€ect
e âˆˆ[0, 1]G in an order unit group G we have a map (in the opposite direction):
G/eâŠ¥= âŸ¨eâŸ©G
Î¸e
/ G/âŸ¨eâŠ¥âŸ©G = {G|e}
x âœ¤
/ x + âŸ¨eâŠ¥âŸ©G
This map is unital since:
Î¸e(1G/eâŠ¥) = e + âŸ¨eâŠ¥âŸ©G = e + eâŠ¥+ âŸ¨eâŠ¥âŸ©G = 1 + âŸ¨eâŠ¥âŸ©G = 1{G|e}.
It can be shown that this map Î¸e is an isomorphism for sharp e, if one assumes
that G satisï¬es interpolation, see [Goo86] for details.
Finally, in our eï¬€ectus vNAop of von Neumann algebras we also have, for
an eï¬€ect e âˆˆ[0, 1]A , a map of the form:
A /eâŠ¥= âŒˆeâŒ‰A âŒˆeâŒ‰
Î¸e
/ âŒŠeâŒ‹A âŒŠeâŒ‹= {A |e}
x âœ¤
/ x
This map is well-deï¬ned since âŒˆeâŒ‰Â· âŒŠeâŒ‹= âŒˆeâŒ‰= âŒŠeâŒ‹Â· âŒˆeâŒ‰, using a more general
fact: a â‰¤âŒˆeâŒ‰â‡’a Â· âŒˆeâŒ‰= a = âŒˆeâŒ‰Â· a.
In case e is sharp we get âŒˆeâŒ‰= e = âŒŠeâŒ‹, so that the above map Î¸e is an
isomorphism.
We collect some more results about the maps Î¸. Since these maps are total,
we switch to the total perspective.
Lemma 93. Let eï¬€ectus in total form B have quotients and comprehension.
1. For each predicate p âˆˆPred(X) the two squares below are pullbacks in B.
X/pâŠ¥

Îº1

{X|p}
Î¸p
o
!
/

Ï€p

1
Îº2

X/pâŠ¥+ 1
X
Î¾pâŠ¥
o
Î¾p
/ X/p + 1
(59)
2. For each predicate p on X, the following triangle commutes.
{X|p} + {X|pâŠ¥}
[Ï€p,Ï€pâŠ¥]
&â–¼
â–¼
â–¼
â–¼
â–¼
â–¼
â–¼
â–¼
â–¼
Î¸p+Î¸pâŠ¥/ X/pâŠ¥+ X/p
X
dcp
9t
t
t
t
t
t
t
t
(60)
Thus, for sharp p the decomposition map dcp is a split epi, and the cotuple
[Ï€p, Ï€pâŠ¥] is a split mono, in B.
3. The maps Î¸ commute with the distributivity isomorphisms from Lemma 79 (9)
and Lemma 83 (10), as in:
{X|p} + {Y |q}
â‰€
Î¸X+Î¸Y
/ X/pâŠ¥+ Y/qâŠ¥
â‰€
{X + Y | [p, q]}
Î¸[p,q]
/ (X + Y )/[p, q]âŠ¥= (X + Y )/[pâŠ¥, qâŠ¥]
116

Proof Recall that we are in an eï¬€ectus in total form.
1. The left square in (59) commutes because Î¸p is total. It forms a pullbacks
since if f : Y â†’X/pâŠ¥and g : Y â†’X satisfy Îº1 â—¦f = Î¾pâŠ¥â—¦g, then g
factors uniquely as g = Ï€p â—¦g since:
gâˆ—(p) = p â—¦g = kerâŠ¥(Î¾pâŠ¥) â—¦g = (! + id) â—¦Î¾pâŠ¥â—¦g
= (! + id) â—¦Îº1 â—¦Î¸p
= Îº1 â—¦! â—¦Î¸p
= Îº1 â—¦!
= 1.
Then Î¸p â—¦g = f because the coprojection Îº1 is monic:
Îº1 â—¦Î¸p â—¦g = Î¾pâŠ¥â—¦Ï€p â—¦g = Î¾pâŠ¥â—¦g = Îº1 â—¦f.
The rectangle on the right in (59) commutes by Lemma 7 since:
(! + id) â—¦Î¾p â—¦Ï€p = kerâŠ¥(Î¾p) â—¦Ï€p = pâŠ¥â—¦Ï€p = 0.
It is a pullback: if f : Y â†’X satisï¬es Î¾p â—¦f = Îº2 â—¦! = 0, then f factors
uniquely through Ï€p since:
f âˆ—(p) = p â—¦f = ker(Î¾p) â—¦f = [Îº2, Îº1] â—¦(! + id) â—¦Î¾p â—¦f
= [Îº2, Îº1] â—¦(! + id) â—¦Îº2 â—¦!
= Îº1 â—¦!
= 1.
2. We use the commuting rectangles (59) and the equations (11) to get:
dcp â—¦Ï€p = âŸ¨âŸ¨Î¾pâŠ¥, Î¾pâŸ©âŸ©â—¦Ï€p = âŸ¨âŸ¨Î¾pâŠ¥â—¦Ï€p, Î¾p â—¦Ï€pâŸ©âŸ©
= âŸ¨âŸ¨Îº1 â—¦Î¸p, 0âŸ©âŸ©
= âŸ¨âŸ¨âœ„1 â—¦Îº1 â—¦Î¸p, âœ„2 â—¦Îº1 â—¦Î¸pâŸ©âŸ©= Îº1 â—¦Î¸p
dcp â—¦Ï€pâŠ¥= âŸ¨âŸ¨Î¾p, Î¾pâŠ¥âŸ©âŸ©â—¦Ï€pâŠ¥= âŸ¨âŸ¨Î¾p â—¦Ï€pâŠ¥, Î¾pâŠ¥â—¦Ï€pâŠ¥âŸ©âŸ©
= âŸ¨âŸ¨0, Îº1 â—¦Î¸pâŠ¥âŸ©âŸ©
= âŸ¨âŸ¨âœ„1 â—¦Îº2 â—¦Î¸pâŠ¥, âœ„2 â—¦Îº2 â—¦Î¸pâŠ¥âŸ©âŸ©= Îº2 â—¦Î¸pâŠ¥.
Hence we see that the triangle (60) commutes:
dcp â—¦[Ï€p, Ï€pâŠ¥] = [dcp â—¦Ï€p, dcp â—¦Ï€pâŠ¥] = [Îº1 â—¦Î¸p, Îº2 â—¦Î¸pâŠ¥] = Î¸p + Î¸pâŠ¥.
3. We show that the composite:
{X + Y | [p, q]}
Ï•
âˆ¼
= / {X|p} + {Y |q}
Î¸X+Î¸Y/ X/pâŠ¥+ Y/qâŠ¥Ïˆ
âˆ¼
= / (X + Y )/[p, q]âŠ¥
117

satisï¬es the equation that deï¬nes Î¸[p,q] as Îº1 â—¦Î¸[p,q] = Î¾[p,q]âŠ¥â—¦Ï€[p,q].
Îº1 â—¦Ïˆ â—¦(Î¸p + Î¸q) â—¦Ï•
= (Ïˆ + id) â—¦Îº1 â—¦[Îº1 â—¦Î¸p, Îº2 â—¦Î¸q] â—¦Ï•
= (Ïˆ + id) â—¦[(Îº1 + id) â—¦Îº1 â—¦Î¸p, (Îº2 + id) â—¦Îº1 â—¦Î¸q] â—¦Ï•
= (Ïˆ + id) â—¦[(Îº1 + id) â—¦Î¾pâŠ¥â—¦Ï€p, (Îº2 + id) â—¦Î¾qâŠ¥â—¦Ï€q] â—¦Ï•
= (Ïˆ + id) â—¦[(Îº1 + id) â—¦Î¾pâŠ¥, (Îº2 + id) â—¦Î¾qâŠ¥] â—¦(Ï€p + Ï€q) â—¦Ï•
= (Ïˆ
(Î¾p + Î¾q)) â—¦Ï€[p,q]
= Î¾[p,q] â—¦Ï€[p,q].
â–¡
We continue with properties of the assert map (58) for sharp predicates
p. We have seen â€˜assertâ€™ maps in Section 9 as inverse of the kernel-supplement
map kerâŠ¥: Endâ‰¤id(X) â†’Pred(X). This isomorphism of eï¬€ect algebras is a key
aspect of commutative eï¬€ectuses (including Boolean ones). The assert map (57)
in this section is at the same time more general and also more restricted: it is
not necessarily side-eï¬€ect free, that is, below the identity, nor a map of eï¬€ect
algebras; and it is deï¬ned only for sharp predicates.
Lemma 94. Let (C, I) be an eï¬€ectus with quotients and comprehension, in
partial form. Let p be a sharp predicate on X âˆˆC.
1. asrtp â—¦asrtp = asrtp and asrtp â—¦asrtpâŠ¥= 0.
2. ker(asrtp) = pâŠ¥, and so kerâŠ¥(asrtp) = p.
3. asrt0 = 0 and asrt1 = id.
4. For each f : X â†’Y one has:
pâŠ¥â‰¤ker(f) â‡â‡’f â—¦asrtp = f.
5. The following two diagrams are equalisers in C.
{X|pâŠ¥} /
Ï€pâŠ¥/ X
asrtp )
0
6 X
{X|p} / Ï€p / X
asrtp )
id
6 X
6. Similarly, the next diagram is a coequaliser.
X
asrtp )
id
6 X
Î¾pâŠ¥/ / X/pâŠ¥
7. Let f : X â†’X be a side-eï¬€ect free endomap, that is f â‰¤idX in the
poset Endâ‰¤id(X) of endomaps on X below the identity. If the predicate
p = kerâŠ¥(f) = 1 â—¦f is sharp, then f = asrtp.
Moreover, in that case the decomposition map dcp from Lemma 83 (7) is
a total isomorphism:
X
dcp
âˆ¼
=
/ X/pâŠ¥+ X/p
118

Proof Recall that asrtp = Ï€p â—¦Î¸âˆ’1
p
â—¦Î¾pâŠ¥: X â†’X, see (58).
1. We compute:
asrtp â—¦asrtp = Ï€p â—¦Î¸âˆ’1
p
â—¦Î¾pâŠ¥â—¦Ï€p â—¦Î¸âˆ’1
p
â—¦Î¾pâŠ¥
= Ï€p â—¦Î¸âˆ’1
p
â—¦Î¸p â—¦Î¸âˆ’1
p
â—¦Î¾pâŠ¥
= Ï€p â—¦Î¸âˆ’1
p
â—¦Î¾pâŠ¥
= asrtp
asrtp â—¦asrtpâŠ¥
= Ï€p â—¦Î¸âˆ’1
p
â—¦Î¾pâŠ¥â—¦Ï€pâŠ¥â—¦Î¸âˆ’1
pâŠ¥â—¦Î¾p
(59)
= Ï€p â—¦Î¸âˆ’1
p
â—¦0 â—¦Î¸âˆ’1
p
â—¦Î¾pâŠ¥
= 0.
2. Applying Lemma 39 (7) with the total map Ï€p â—¦Î¸âˆ’1
p
yields:
ker(asrtp) = ker
 Ï€p â—¦Î¸âˆ’1
p
â—¦Î¾pâŠ¥

= ker(Î¾pâŠ¥) = pâŠ¥.
3. We have asrt0 = 0 since kerâŠ¥(asrt0) = 0 and kerâŠ¥reï¬‚ects 0, see Lemma 40.
Further, there are isomorphisms X/0 âˆ¼= X âˆ¼= {X|1} by Lemma 83 (6) and
Lemma 79 (3). Hence:
asrt1 =

X
Î¾0
âˆ¼
=
/ X/0
Î¸âˆ’1
1
âˆ¼
=
/ {X|1}
Ï€1
âˆ¼
=
/ X

= id,
since by deï¬nition Î¸1 = Î¾0 â—¦Ï€1, and so Î¸âˆ’1
1
= Ï€âˆ’1
1
â—¦Î¾âˆ’1
0 .
4. We need to prove the equivalence pâŠ¥â‰¤ker(f) â‡â‡’f â—¦asrtp = f. This is
done in two steps.
â€¢ If pâŠ¥â‰¤ker(f), then we can write f = f â—¦Î¾pâŠ¥, so that:
f â—¦asrtp = f â—¦Î¾pâŠ¥â—¦Ï€p â—¦Î¸âˆ’1
p
â—¦Î¾pâŠ¥= f â—¦Î¸p â—¦Î¸âˆ’1
p
â—¦Î¾pâŠ¥
= f â—¦Î¾pâŠ¥
= f.
â€¢ And if f â—¦asrtp = f, then by Lemma 39 (6),
ker(f) = ker(f â—¦asrtp) â‰¥ker(asrtp) = pâŠ¥.
5. The ï¬rst kernel map equaliser is an instance of Lemma 80 (2), since
ker(asrtp) = pâŠ¥. For the other one, notice that:
asrtp â—¦Ï€p = Ï€p â—¦Î¸âˆ’1
p
â—¦Î¾pâŠ¥â—¦Ï€p = Ï€p â—¦Î¸âˆ’1
p
â—¦Î¸p = Ï€p.
And if f : Y â†’X satisï¬es asrtp â—¦f = f, then f factors uniquely through
Ï€p via the composite: Î¸âˆ’1
p
â—¦Î¾pâŠ¥â—¦f : Y â†’{X|p}.
119

6. First,
Î¾pâŠ¥â—¦asrtp = Î¾pâŠ¥â—¦Ï€p â—¦Î¸âˆ’1
p
â—¦Î¾pâŠ¥
(59)
= Î¸p â—¦Î¸âˆ’1
p
â—¦Î¾pâŠ¥= Î¾pâŠ¥.
Next, if f : X â†’Y satisï¬es f â—¦asrtp = f, then pâŠ¥â‰¤ker(f) by point (4),
so that f = f â—¦Î¾pâŠ¥, for a necessarily uniqe f : X/pâŠ¥â†’Y .
7. Let f : X â†’X satisfy f â‰¤id, say via f > g = id. Further, the predicate
p = kerâŠ¥(f) = 1 â—¦f is sharp, by assumption.
Then 1 â—¦g = pâŠ¥by
uniqueness of orthosupplements:
p > (1 â—¦g) = 1 â—¦(f > g) = 1 â—¦id = 1.
As a result, 1â—¦g â—¦Ï€p = pâŠ¥â—¦Ï€p = 0, so that g â—¦Ï€p = 0 by Deï¬nition 51 (3).
Hence:
f â—¦Ï€p = (f â—¦Ï€p) > (g â—¦Ï€p) = (f > g) â—¦Ï€p = id â—¦Ï€p = Ï€p.
By deï¬nition, pâŠ¥= ker(f), so that there is a unique total map f : X/pâŠ¥â†’
X with f = f â—¦Î¾pâŠ¥. But then:
Ï€p = f â—¦Ï€p = f â—¦Î¾pâŠ¥â—¦Ï€p = f â—¦Î¸p.
Hence f = Ï€p â—¦Î¸âˆ’1
p , using that p is sharp. Now we can conclude f =
f â—¦Î¾pâŠ¥= Ï€p â—¦Î¸âˆ’1
p
â—¦Î¾pâŠ¥= asrtp. In a similar way one obtains g = asrtpâŠ¥.
In this situation the decomposition map dcp = âŸ¨âŸ¨Î¾pâŠ¥, Î¾pâŸ©âŸ©: X â†’X/pâŠ¥+
X/p is an isomorphism.
We already know that it has a right inverse
[Ï€p, Ï€pâŠ¥] â—¦(Î¸âˆ’1
p
+ Î¸âˆ’1
pâŠ¥) by Lemma 93 (2). We also have:
[Ï€p, Ï€pâŠ¥] â—¦(Î¸âˆ’1
p
+ Î¸âˆ’1
pâŠ¥) â—¦dcp
= âˆ‡â—¦(Ï€p + Ï€pâŠ¥) â—¦(Î¸âˆ’1
p
+ Î¸âˆ’1
pâŠ¥) â—¦âŸ¨âŸ¨Î¾pâŠ¥, Î¾pâŸ©âŸ©
(12)
= âˆ‡â—¦âŸ¨âŸ¨Ï€p â—¦Î¸âˆ’1
p
â—¦Î¾pâŠ¥, Ï€pâŠ¥â—¦Î¸âˆ’1
pâŠ¥â—¦Î¾pâŸ©âŸ©
= âˆ‡â—¦âŸ¨âŸ¨asrtp, asrtpâŠ¥âŸ©âŸ©
= f > g
= id.
â–¡
If we add two more assumptions we can prove a lot more. At this stage we
start using images that are sharp.
Proposition 95. Let C be an eï¬€ectus with quotients and comprehension, in
partial form, which additionally:
â€¢ has sharp images
â€¢ and satisï¬es, for all sharp predicates p, q âˆˆPred(X),
p â‰¤q
â‡â‡’
{X|p}!
Ï€p
!âˆ
âˆ
âˆ
/ {X|q}
}
Ï€q
}â‘£â‘£â‘£
X
(61)
120

Then we can prove the following series of results.
1. Take for an arbitrary predicate p,
âŒŠpâŒ‹
def
=
im(Ï€p)
and
âŒˆpâŒ‰
def
=
âŒŠpâŠ¥âŒ‹âŠ¥.
Then: âŒŠpâŒ‹is the greatest sharp predicate below p, and âŒˆpâŒ‰is the least sharp
predicate above p.
2. Let p âˆˆPred(X). For each total map f : Y â†’X one has:
f âˆ—(p) = 1 â‡â‡’f âˆ—(âŒŠpâŒ‹) = 1
and
f âˆ—(p) = 0 â‡â‡’f âˆ—(âŒˆpâŒ‰) = 0. (62)
For an arbitrary map g : Y â†’X we have:
gâœ·(p) = 1 â‡â‡’gâœ·(âŒŠpâŒ‹) = 1.
3. For a sharp predicate p âˆˆPred(X), the map asrtp : X â†’X from (58)
satisï¬es im(asrtp) = p. Hence by Lemma 83 (14) we have a cokernel map:
X
asrtp )
0
6 X
Î¾p / / X/p
4. For f : X â†’Y and p âˆˆPred(X) put:
P
f(p)
def
= im
 f â—¦Ï€p

.
Then there is an adjunction:
ShaPred(X)
P
f
-
âŠ¥
ShaPred(Y )
âŒŠf âœ·(âˆ’)âŒ‹
m
(63)
where ShaPred describes the subposet of sharp predicates.
5. Comprehension maps Ï€ are closed under composition, up-to-isomorphism.
6. The posets ShaPred(X) Ö’â†’Pred(X) of sharp predicates are orthomodular
lattices.
7. Comprehension maps Ï€ and internal epis form a factorisation system in
C.
Proof The fact that images are assumed to be sharp plays an important role.
1. By deï¬nition the image âŒŠpâŒ‹= im(Ï€p): X â†’I is a sharp predicate. This
âŒŠpâŒ‹is below p by minimality of images, and Ï€âœ·
p (p) = (pâŠ¥â—¦Ï€p)âŠ¥= 0âŠ¥= 1.
If s âˆˆPred(X) is sharp with s â‰¤p, then Ï€s factors through Ï€âŒŠpâŒ‹since:
{X|s} %
Ï€s
%â‘
â‘
â‘
â‘
â‘
â‘
â‘
/ {X|p}

Ï€p 
âˆ¼
= / {X|âŒŠpâŒ‹}
x
Ï€âŒŠpâŒ‹
xqqqqqqqq
X
(64)
121

The dashed arrow exists since by deï¬nition Ï€âœ·
p (âŒŠpâŒ‹) = Ï€âœ·
p (im(Ï€p)) = 1.
Hence we get s â‰¤âŒŠpâŒ‹by (61).
We now have âŒŠpâŠ¥âŒ‹â‰¤pâŠ¥, and thus p â‰¤âŒŠpâŠ¥âŒ‹âŠ¥= âŒˆpâŒ‰. If p â‰¤s, where s is
sharp, then sâŠ¥â‰¤pâŠ¥, so that sâŠ¥â‰¤âŒŠpâŠ¥âŒ‹, and thus âŒˆpâŒ‰= âŒŠpâŠ¥âŒ‹âŠ¥â‰¤s.
2. Let f : Y â†’X be a total map. If f âˆ—(âŒŠpâŒ‹) = 1, then f âˆ—(p) = 1 since
âŒŠpâŒ‹â‰¤p. In the other direction, if f âˆ—(p) = 1, then f factors through Ï€p.
But f then also factors through Ï€âŒŠpâŒ‹, by the isomorphism in Diagram (64),
so that f âˆ—(âŒŠpâŒ‹) = 1.
We now get:
f âˆ—(p) = 0 â‡â‡’f âˆ—(pâŠ¥) = f âˆ—(p)âŠ¥= 1
â‡â‡’f âˆ—(âŒŠpâŠ¥âŒ‹) = 1
as just shown
â‡â‡’f âˆ—(âŒˆpâŒ‰) = f âˆ—(âŒŠpâŠ¥âŒ‹âŠ¥) = f âˆ—(âŒŠpâŠ¥âŒ‹)âŠ¥= 0.
For an arbitrary map g : Y â†’X, if gâœ·(âŒŠpâŒ‹) = 1, then gâœ·(p) = 1 since
gâœ·is monotone by Lemma 36. In the other direction, if gâœ·(p) = 1, then
im(g) â‰¤p by minimality of images, and thus im(g) â‰¤âŒŠpâŒ‹by point (1).
But then 1 = gâœ·(im(g)) â‰¤gâœ·(âŒŠpâŒ‹).
3. For a sharp predicate p we have:
im(asrtp) = im(Ï€p â—¦Î¸âˆ’1
p
â—¦Î¾pâŠ¥) = im(Ï€p)
by Lemma 47 (6), (11)
= âŒŠpâŒ‹
= p
since p is sharp.
4. Let f : X â†’Y be an arbitrary map. We need to prove for sharp predicates
p âˆˆPred(X) and q âˆˆPred(Y ),
P
f(p) = im(f â—¦Ï€p) â‰¤q â‡â‡’p â‰¤âŒŠf âœ·(q)âŒ‹.
This works in the following way.
â€¢ Let P
f(p) = im(f â—¦Ï€p) â‰¤q. We have:
1 = (f â—¦Ï€p)âœ·(im(f â—¦Ï€p)) â‰¤(f â—¦Ï€p)âœ·(q) = Ï€âœ·
p
 f âœ·(q)

.
This implies that we have a map {X|p} â†’{X|f âœ·(q)} commuting
with the projections.
We thus get p â‰¤f âœ·(q) by (61), and thus
p â‰¤âŒŠf âœ·(q)âŒ‹.
â€¢ In the other direction, let p â‰¤âŒŠf âœ·(q)âŒ‹â‰¤f âœ·(q). Then:
1 = Ï€âœ·
p (p) â‰¤Ï€âœ·
p
 f âœ·(q)

= (f â—¦Ï€p)âœ·(q).
But then P
f(p) = im(f â—¦Ï€p) â‰¤q by minimality of images.
122

5. For two sharp predicates p âˆˆPred(X) and q âˆˆPred({X|p}) consider the
sharp predicate on X given by:
P
Ï€p(q) = im(Ï€p â—¦Ï€q).
Notice that by Lemma 47 (4),
P
Ï€p(q) = im(Ï€p â—¦Ï€q) â‰¤im(Ï€p) = âŒŠpâŒ‹= p.
(âˆ—)
We are done if we can show that there are necessarily unique maps Ï•, Ïˆ
in a commuting square:
{{X|p}|q}

Ï€q

Ï•
-
âˆ¼=
{X| P
Ï€p(q)}
 Ï€P
Ï€p (q)

Ïˆ
m
{X|p} /
Ï€p
/ X
The existence of the map Ï• is easy since comprehension maps are total
and thus:
1 = (Ï€p â—¦Ï€q)âœ· im(Ï€p â—¦Ï€q)

= (Ï€p â—¦Ï€q)âˆ—  P
Ï€p(q)

.
In order to show the existence of the map Ïˆ we use ad hoc notation for:
p âŠ“q =

X
Î¾pâŠ¥/ X/pâŠ¥
Î¸âˆ’1
p
âˆ¼
=
/ {X|p}
q
/ I

Then:
Ï€âˆ—
p(p âŠ“q) = (p âŠ“q) â—¦Ï€p = q â—¦Î¸âˆ’1
p
â—¦Î¾pâŠ¥â—¦Ï€p = q â—¦Î¸âˆ’1
p
â—¦Î¸p = q.
And thus:
(Ï€p â—¦Ï€q)âœ·(p âŠ“q) = (Ï€p â—¦Ï€q)âˆ—(p âŠ“q) = Ï€âˆ—
q
 Ï€âˆ—
p(p âŠ“q)

= Ï€âˆ—
q(q) = 1.
The latter yields P
Ï€p(q) = im(Ï€p â—¦Ï€q) â‰¤p âŠ“q by minimality of images.
We now go back to the inequality P
Ï€p(q) â‰¤p from (âˆ—). It gives a total
map f : {X| P
Ï€p(q)} â†’{X|p} with Ï€p â—¦f = Ï€P
Ï€p(q). This f factors
through Ï€q, and thus restricts to the required map Ïˆ, since:
f âˆ—(q) = q â—¦f = q â—¦Î¸âˆ’1
p
â—¦Î¸p â—¦f
= q â—¦Î¸âˆ’1
p
â—¦Î¾pâŠ¥â—¦Ï€p â—¦f
= (p âŠ“q) â—¦Ï€P
Ï€p(q)
â‰¥P
Ï€p(q) â—¦Ï€P
Ï€p(q)
= 1.
123

6. We ï¬rst show how to obtain conjunction âˆ§for sharp predicates.
For
p, q âˆˆShaPred(X) deï¬ne:
p âˆ§q = P
Ï€p Ï€âˆ—
p(q) = im
 Ï€p â—¦Ï€âˆ—
p(q)

.
Since projections are closed under pullback â€” see Lemma 79 (5) â€” we
have a total isomorphism Ï• between two pullbacks in:
{{X|p}|Ï€âˆ—
p(q)}
Ï•
âˆ¼
=
*
Ï€Ï€âˆ—p(q)
*
(
{{X|q}|Ï€âˆ—
q(p)}
/
 Ï€Ï€âˆ—q (p)

{X|p}

Ï€p

{X|q} /
Ï€q
/ X
Hence we can prove that p âˆ§q is a lower bound of both p and q via
Lemma 47 (4):
p âˆ§q = im
 Ï€p â—¦Ï€âˆ—
p(q)

â‰¤im(Ï€p) = âŒŠpâŒ‹= p
p âˆ§q = im
 Ï€p â—¦Ï€âˆ—
p(q)

= im
 Ï€q â—¦Ï€âˆ—
q(p) â—¦Ï•

â‰¤im(Ï€q) = âŒŠqâŒ‹= q.
We show that pâˆ§q is the greatest lower bound in ShaPred(X): inequalities
r â‰¤p and r â‰¤q yield maps f : {X|r} â†’{X|p} and g : {X|r} â†’{X|q}
with Ï€p â—¦f = Ï€r = Ï€q â—¦g. The above pullback gives a mediating map
h: {X|r} â†’{{X|p}|Ï€âˆ—
p(q)} with Ï€Ï€âˆ—p(q) â—¦h = f. But then we are done:
r = âŒŠrâŒ‹= im(Ï€r) = im(Ï€p â—¦f) = im(Ï€p â—¦Ï€Ï€âˆ—p(q) â—¦h)
â‰¤im(Ï€p â—¦Ï€Ï€âˆ—p(q))
= p âˆ§q.
We now also have joins p âˆ¨q in ShaPred(X) via De Morgan: p âˆ¨q =
(pâŠ¥âˆ§qâŠ¥)âŠ¥. We prove the orthomodularity law in the following way. Let
p â‰¤q; we have to prove p âˆ¨(pâŠ¥âˆ§q) = q. This is done essentially as
in [HJ10, Prop. 1].
p âˆ¨(pâŠ¥âˆ§q) = (p âˆ§q) âˆ¨(pâŠ¥âˆ§q)
= P
Ï€q(p) âˆ¨P
Ï€q(pâŠ¥)
= P
Ï€q(p âˆ¨pâŠ¥)
since P
Ï€p is left adjoint, see (63)
= P
Ï€q(1)
since p is sharp
= P
Ï€q(Ï€âˆ—
q(1))
= q âˆ§1
= q.
7. We ï¬nally have to show that comprehension maps form the â€˜abstract
monosâ€™ in a factorisation system, with internal epis as â€˜abstract episâ€™.
124

We recall the factorisation from Lemma 80 (5):
X
f
/
ie(f)
(
Y
{Y |im(f)}
6
Ï€im(f)
=
The map ie(f) is the â€˜internal epiâ€™ part of f. Let p: {Y |im(f)} â†’I be a
predicate with ie(f)âœ·(p) = 1. If we can show that p = 1, then we know
that the map ie(f) is indeed internally epic. First we have:
0 = ie(f)âœ·(p)âŠ¥= pâŠ¥â—¦ie(f) = pâŠ¥â—¦Î¸âˆ’1
im(f) â—¦Î¸im(f) â—¦ie(f)
= pâŠ¥â—¦Î¸âˆ’1
im(f) â—¦Î¾imâŠ¥(f) â—¦Ï€im(f) â—¦ie(f)
= pâŠ¥â—¦Î¸âˆ’1
im(f) â—¦Î¾imâŠ¥(f) â—¦f.
Lemma 47 (3) then yields:
pâŠ¥â—¦Î¸âˆ’1
im(f) â—¦Î¾imâŠ¥(f) â‰¤imâŠ¥(f).
But we also have, by Lemma 83 (3),
pâŠ¥â—¦Î¸âˆ’1
im(f) â—¦Î¾imâŠ¥(f) â‰¤imâŠ¥(f)âŠ¥= im(f).
Since images are sharp, by deï¬nition, we obtain:
pâŠ¥â—¦Î¸âˆ’1
im(f) â—¦Î¾imâŠ¥(f) = 0.
The fact that the map Î¸âˆ’1
im(f) â—¦Î¾imâŠ¥(f) is epic â€” see Lemma 83 (2) â€”
yields pâŠ¥= 0, and thus p = 1, as required.
There are a few more requirements of a factorisation system that we need
to check: the internal epis are closed under composition, by Lemma 47 (9);
the comprehension maps are closed under composition, by point (5). We
show that an internally epic comprehension map is an isomorphism. Let
Ï€p be internally epic, that is, 1 = im(Ï€p) = âŒŠpâŒ‹, so that Ï€âŒŠpâŒ‹= Ï€1 is an
isomorphism by Lemma 79 (3). But Ï€p is then an isomorphism too, by
the isomorphism in (64).
Finally we have to check that the diagonal-ï¬ll-in property holds: in a
commuting rectangle as below, we need a diagonal.
Y
f
internal epi
/
g

Z
h

w
{X|p} /
Ï€p
/ X
We are done if we can show that h factors through Ï€p, that is, if hâœ·(p) = 1.
By Lemma 47 (10) this is equivalent to f âœ· hâœ·(p)

= 1. But:
f âœ· hâœ·(p)

= gâœ· Ï€âœ·
p (p)

= gâœ·(1) = 1.
â–¡
125

As a result of points (4) and (6) in Proposition 95 the assignment X 7â†’
ShaPred(X) gives a functor C â†’OMLatGal, where OMLatGal is the dagger
kernel category of orthomodular lattices, with Galois connections between them,
as used in [Jac10b] (see also [HJ10]).
Remark 96. In an eï¬€ectus as considered in Proposition 95 we have two fac-
torisation systems, namely:
â€¢ the one with internal monos and quotient maps Î¾ from Proposition 84;
â€¢ the one with comprehension maps Ï€ and internal epis from Propostion 95 (7).
The question is how they are related. What is called the â€˜ï¬rst isomorphism
theoremâ€™ gives an answer. This â€˜theoremâ€™ is the familiar phenomenom, that can
be expressed informally as X/ ker(f) âˆ¼= im(f), for each map f : X â†’Y . It
holds for many algebraic structures. However, this â€˜theoremâ€™ does not hold in
eï¬€ectuses, in general.
Abstractly this isomorphism is obtained via a canonical map from the â€˜coim-
ageâ€™ to the â€˜imageâ€™, which is then an isomorphism. In the setting of an eï¬€ectus
(in partial form), this canonical map is the dashed one described in the following
diagram â€” which is the same as diagram (2) in [Gra92] for the ideal of zero
maps.
{X| ker(f)} / Ï€ker(f) / X
f
+
0
3
Î¾âŒŠker(f)âŒ‹
Y
Î¾im(f) / / Y/im(f)
X/âŒŠker(f)âŒ‹
/ {Y |im(f)}
O
Ï€im(f)
O
We brieï¬‚y explain this diagram, starting on the right.
â€¢ The map Î¾im(f) is the cokernel of f, see Lemma 83 (14). The upgoing
projection Ï€im(f) is its kernel map, because ker(Î¾im(f)) = im(f).
â€¢ On the left, the projection Ï€ker(f) is the kernel map of f, see Lemma 80 (2).
Its cokernel is the downgoing map Î¾âŒŠker(f)âŒ‹since im(Ï€ker(f)) = âŒŠker(f)âŒ‹.
The dashed arrow exist, because the evident maps X/âŒŠker(f)âŒ‹â†’Y and X â†’
{Y |im(f)} restrict appropriately.
This canonical dashed map is in general not an isomorphism. For instance,
for a partial map f : X â†’D(Y + 1) in the Kleisli category of the distribution
monad D we have:
X/âŒŠker(f)âŒ‹= {x âˆˆX | âŒŠker(f)âŒ‹< 1}
= {x âˆˆX | ker(f) = 0}
= {x âˆˆX | f(x)(âˆ—) = 0}
{Y |im(f)} = {y âˆˆY | im(f)(y) = 1}
= {y âˆˆY | âˆƒx âˆˆX. f(x)(y) > 0}.
The canonical map X/âŒŠker(f)âŒ‹â†’{Y |im(f)} in the above diagram is given by
x 7â†’P
y,f(x)(y)>0 f(x)(y)
y

, which is not an isomorphism.
126

More generally, a total internally epic map need not be an isomorphism. The
situation is reminiscent of Quillen model categories as used in homotopy theory
(see [Qui67]), where one has two factorisation systems, and mediating maps
like the dashed one above which are not necessarily isomorphisms. However, in
model categories the relevant classes of maps satisfy closure properties which
do not hold here.
We have already hinted a few times that an eï¬€ectus, in partial form, is
similar to, but more general, and less well-behaved, than an Abelian category.
For such an Abelian category A we do have a quotient-comprehension chain:
Sub(A)
âŠ£
âŠ£

âŠ£
Quotient
(UÖŒX)7â†’X/U
*
âŠ£
Comprehension
(UÖŒX)7â†’U
t
A
0
>
1
`
Quotients are obtained via cokernels: for a subobject m: U ÖŒ X one takes the
codomain of the cokernel coker(m): X Ö‰ X/U as quotient unit. In such an
Abelian category the ï¬rst isomorphism theorem does hold.
The general theory that we are after will bear some resemblance to recent
work in (non-Abelian) homological algebra, see in particular [Wei14], where ad-
junction chains like above are studied, but also [Jan94, Gra12]. There, part
of the motivation is axiomatising the category of (non-Abelian) groups, follow-
ing [Mac50]. As a result, stronger properties are used than occur in the current
setting, such as the ï¬rst isomorphism theorem and left adjoints to substitution,
corresponding to biï¬brations, which do not hold in general here.
We still have to check that the assumptions in Proposition 95 make sense.
This concentrates on the equivalence in (61) saying that for sharp predicates
p, q one has p â‰¤q iï¬€Ï€p â‰¤Ï€q, that is, Ï€p factors through Ï€q. We check this for
the eï¬€ectus examples Sets â€” in fact, more generally, for Boolean eï¬€ectuses â€”
for Kâ„“(D), and vNAop.
This equivalence (61) obviously holds in the eï¬€ectus Sets, since the com-
prehension of a predicate P âŠ†X is given by P itself. It is less trivial that
the equivalence (61) also holds for Boolean eï¬€ectuses / extensive categories, see
Theorem 89. Recall that all predicates are automatically sharp in the Boolean
case, see Lemma 59 (1).
Lemma 97. Let A be an extensive category, understood as a Boolean eï¬€ectus
with comprehension. Then p â‰¤q iï¬€Ï€p â‰¤Ï€q for all predicates p, q on the same
object.
Proof We proceed in two steps, where we ï¬rst prove that Ï€p â‰¤Ï€q implies
Ï€qâŠ¥â‰¤Ï€pâŠ¥, and only then that it also implies p â‰¤q.
So let Ï€p â‰¤Ï€q, say via a (necessarily unique) map Ï•: {X|p} â†’{X|q} with
Ï€q â—¦Ï• = Ï€p.
1. We ï¬rst need to produce a map {X|qâŠ¥} â†’{X|pâŠ¥} commuting with the
127

projections. Consider the following diagram in A.
A /
g1
/
f1

â´âœ¤
{X|qâŠ¥}
 Ï€qâŠ¥

B
o
g2
o
f2

âœ¤â´
X
[Ï€p,Ï€pâŠ¥]âˆ’1
âˆ¼
= 
{X|p} /
Îº1
/ {X|p} + {X|pâŠ¥}
{X|pâŠ¥}
o
Îº2
o
We now have a situation:
A
f1 
g1
'
âˆ¼
=
&
{X|p}
Ï•
+
0
/

â´âœ¤
{X|qâŠ¥}
 Ï€qâŠ¥

{X|q} /
Ï€q
/ Y + 1
The outer diagram commutes since:
Ï€qâŠ¥â—¦g1 = [Ï€p, Ï€pâŠ¥] â—¦[Ï€p, Ï€pâŠ¥]âˆ’1 â—¦Ï€qâŠ¥â—¦g1
= [Ï€p, Ï€pâŠ¥] â—¦Îº1 â—¦f1
= Ï€p â—¦f1
= Ï€q â—¦Ï• â—¦f1.
Thus, A âˆ¼= 0, since 0 is strict, by Lemma 87 (1).
Since the cotuple
[g1, g2]: A + B â†’{X|qâŠ¥} is an isomorphism, we obtain that g2 : B â†’
{X|qâŠ¥} is an isomorphism. But then f2 â—¦gâˆ’1
2
: {X|qâŠ¥} â†’{X|pâŠ¥} is the
required map, since:
Ï€pâŠ¥â—¦f2 â—¦gâˆ’1
2
= [Ï€p, Ï€pâŠ¥] â—¦Îº2 â—¦f2 â—¦gâˆ’1
2
= [Ï€p, Ï€pâŠ¥] â—¦[Ï€p, Ï€pâŠ¥]âˆ’1 â—¦Ï€qâŠ¥
= Ï€qâŠ¥.
2. Our second aim is to prove p â‰¤q, assuming Ï€p â‰¤Ï€q via the map Ï•. We
deï¬ne a predicate r = Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœâ—¦((pâ—¦Ï€q)+!)â—¦[Ï€q, Ï€qâŠ¥]âˆ’1 : X â†’1+1, and claim
that p > r = q. This proves p â‰¤q.
As bound b: X â†’(1 + 1) + 1 we take b = ((p â—¦Ï€q) + !) â—¦[Ï€q, Ï€qâŠ¥]âˆ’1. Then
Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœâ—¦b = r holds by construction. We have:
Â·Â·Â·
Â·Â·âœâœâ—¦b = [id, Îº2] â—¦((p â—¦Ï€q) + !) â—¦[Ï€q, Ï€qâŠ¥]âˆ’1
= [p â—¦Ï€q, Îº2 â—¦!] â—¦[Ï€q, Ï€qâŠ¥]âˆ’1
= p.
The last equation follows from:
[p â—¦Ï€q, Îº2 â—¦!] = p â—¦[Ï€q, Ï€qâŠ¥]
and thus from
p â—¦Ï€qâŠ¥= 0.
128

As just shown we have Ï€qâŠ¥â‰¤Ï€pâŠ¥, say via a map Ïˆ. Then:
p â—¦Ï€qâŠ¥= p â—¦Ï€pâŠ¥â—¦Ïˆ = 0 â—¦Ïˆ = 0.
We now obtain:
p > r = (âˆ‡+ id) â—¦b = (âˆ‡+ id) â—¦((p â—¦Ï€q) + !) â—¦[Ï€q, Ï€qâŠ¥]âˆ’1
= ((! â—¦Ï€q) + !) â—¦[Ï€q, Ï€qâŠ¥]âˆ’1
= (! + !) â—¦[Ï€q, Ï€qâŠ¥]âˆ’1
= q,
where the latter equation holds since:
q â—¦[Ï€q, Ï€qâŠ¥] = [q â—¦Ï€q, q â—¦Ï€qâŠ¥] = [Îº1 â—¦!, Îº2 â—¦!] = ! + !.
â–¡
Example 98. In the eï¬€ectus Kâ„“(D) we have p â‰¤q iï¬€Ï€p â‰¤Ï€q for sharp p, q.
Recall from Example 77 (2) that {X|p} = {x | p(x) = 1}, where p(x), q(x) âˆˆ
{0, 1} because p, q are sharp. Let Ï€p â‰¤Ï€q, say via a function Ï•: {X|p} â†’
D({X|q}) with Ï€q â—¦Ï• = Ï€q. We have to prove p(x) = 1 â‡’q(x) = 1. So assume
p(x) = 1, so that x âˆˆ{X|p}. Write Ï•(x) = P
i ri|xi âŸ©with xi âˆˆ{X|q}. The
equation Ï€p = Ï€q â—¦Ï• yields:
1|xâŸ©= Ï€p(x) =
 Ï€q â—¦Ï•

(x) = P
i ri|xi âŸ©.
This can only happen if Ï•(x) = 1|xâŸ©, so that x âˆˆ{X|q}. Hence q(x) = 1.
Before showing the equivalence (61) for von Neumann we give a general order
result.
Lemma 99. Let A be a von Neumann algebra with eï¬€ects a, p âˆˆ[0, 1]A . If p
is a projection (i.e. is sharp), then the following are equivalent.
1. a â‰¤p
2. ap = a
3. pa = a
4. pap = a
In particular, if a â‰¤p, then a and p commute.
Proof We will prove (1) â‡’(2) â‡’(3) â‡’(4) â‡’(1). Without loss of generality,
we may assume A is a von Neumann algebra of operators on a Hilbert space H .
(1) â‡’(2) Assume a â‰¤p. By deï¬nition, âŸ¨av | vâŸ©â‰¤âŸ¨pv | vâŸ©for all v âˆˆH .
Thus âˆ¥âˆšavâˆ¥2 = âŸ¨av | vâŸ©â‰¤âŸ¨pv | vâŸ©= âˆ¥pvâˆ¥2. Hence pv = 0 implies av = 0.
In particular, as p(1 âˆ’p)v = 0 we have a(1 âˆ’p)v = 0. We compute av =
apv + a(1 âˆ’p)v = apv. Hence a = ap.
(2) â‡’(3) Assume ap = a. Directly a = aâˆ—= (ap)âˆ—= pâˆ—aâˆ—= pa.
(3) â‡’(4) Assume pa = a. Clearly pap = ap = (pa)âˆ—= aâˆ—= a.
(4) â‡’(1) Assume pap = a. For any v âˆˆH , we have âŸ¨av | vâŸ©= âŸ¨papv | vâŸ©=
âŸ¨apv | pvâŸ©â‰¤âŸ¨pv | pvâŸ©= âŸ¨p2v | vâŸ©= âŸ¨pv | vâŸ©. Consequently a â‰¤p.
â–¡
129

Example 100. The equivalence (61), namely p â‰¤q iï¬€Ï€p â‰¤Ï€q for sharp p, q,
also holds in the eï¬€ectus vNAop of von Neumann algebra. Let p, q âˆˆ[0, 1]A be
sharp, that is, be projections, so that p Â· p = p and q Â· q = q. We ï¬rst prove that
im(Ï€p) = p, and similarly for q. Since Ï€âœ·
p (p) = 1 we always have im(Ï€p) â‰¤p, so
we only have to prove â€˜â‰¥â€™.
Recall from Example 77 (4) that the projection Ï€p is the map Ï€p : A â†’pA p
in vNA given by p(x) = pxp. Here we use that p is sharp, and thus âŒŠpâŒ‹= p.
According to (29) the image of Ï€p is given by:
im(Ï€p) =
^
{s âˆˆA | s is a projection with Ï€p(s) = psp = p = Ï€p(1)}.
We thus need to prove s â‰¥p for a projection s with psp = p. Write t = sâŠ¥=
1 âˆ’s, so that ptp = pp âˆ’psp = p âˆ’p = 0. Hence:
0 = âˆ¥ptpâˆ¥= âˆ¥pttpâˆ¥= âˆ¥(pt) Â· (pt)âˆ—âˆ¥= âˆ¥ptâˆ¥2.
But then 0 = pt = p âˆ’ps, so that ps = s. Hence p â‰¤s by Lemma 99.
We can now reason abstractly: if Ï€p â‰¤Ï€q via a map Ï•: {X|p} â†’{X|q}
with Ï€q â—¦Ï• = Ï€q in vNAop, then we are done by Lemma 47 (4):
p = im(Ï€p) = im(Ï€q â—¦Ï•) â‰¤im(Ï€q) = q.
This concludes the example.
15
Towards non-commutative eï¬€ectus theory
In the preceding sections we have presented the ï¬rst steps of the theory of eï¬€ec-
tuses. These sections provide a solid foundation. At this stage we have reached
the boundaries of what we know for sure. We add one more section that is of a
more preliminary nature. It contains a list of postulates for a class of eï¬€ectuses
that is intended to capture the essential aspects of von Neumann algebras. Al-
though this â€˜axiomatisationâ€™ is by no means ï¬xed, we do already have a name
for this notion, namely telos. It is an eï¬€ectus satisfying the postulates 102 â€“
105 below. Thus, we are the ï¬rst to admit that the notion of telos is poorly
deï¬ned. But by making our current thoughts about this topic explicit, we hope
to generate more research, leading eventually to a properly deï¬ned concept.
In the previous sections we have frequently associated a partial â€˜assertâ€™ map
asrtp : X â†’X + 1 with a predicate p: X â†’1 + 1.
This predicate-action
correspondence occurs for instance in:
â€¢ Deï¬nition 55 where the (unique) existence of assert maps as inverse of
kernel-supplements is the essence of the deï¬nitions of â€˜commutativeâ€™ and
â€˜Booleanâ€™ eï¬€ectus;
â€¢ Deï¬nition 91 where the map asrtp can be deï¬ned, but only for a sharp
predicate p.
(Proposition 94 (7) says that when these two cases overlap, the relevant assert
maps coincide.)
These assert maps asrtp : X â†’X + 1 incorporate the side-eï¬€ect map asso-
ciated with a predicate p. This predicate-action correspondence is similar to
130

the situation in Hilbert spaces, where a projection may be described either as
a closed subset (a predicate), or as a function that projects all elements into
this subset (an â€˜assertâ€™ map). These assert maps express the dynamic character
of quantum computation. They incorporate the side-eï¬€ect of an observation, if
any. In the commutative (and Boolean) case the assert maps have no side-eï¬€ect
â€” technically, since such assert maps are below the identity. But in the proper
quantum case assert maps need not be below the identity. This is already clear
for the assert maps associated with sharp elements in Deï¬nition 91.
We thus have:
Situation
Question
Assert maps are fully deter-
mined
in
the
commutative
(and Boolean) case, and also
for sharp elements.
Can
we
also
deï¬ne
assert
maps in general, in the non-
commutative non-sharp case,
via a certain property, or do
we have to assume them as
separate structure?
This question arises in particular in the eï¬€ectus vNAop of von Neumann alge-
bras.
Recall from Diagram (58) in Deï¬nition 91 that for a sharp predicate p the
associated assert map is deï¬ned via:
asrtp =

X
Î¾pâŠ¥/ / X/pâŠ¥
Î¸âˆ’1
p
âˆ¼
=
/ {X|p} / Ï€p / X

.
(65)
This deï¬nition relies on the assumption that the map Î¸p = Î¾pâŠ¥â—¦Ï€p : {X|p} â†’
X/pâŠ¥is an isomorphism when p is sharp. That assumption does not hold in
general, for non-sharp p.
Still, in the commutative eï¬€ectus Kâ„“(Dâ‰¤1), in partial form, we have, for
a fuzzy predicate p âˆˆ[0, 1]X, an assert map asrtp : X â†’Dâ‰¤1(X) given by
asrtp(x) = p(x)|xâŸ©.
Intruigingly, this assert map can also be described via
quotient and comprehension, as composite in Kâ„“(Dâ‰¤1) of the form:
X
Î¾pâŠ¥/ X/pâŠ¥= {x | p(x) > 0} = {X|âŒˆpâŒ‰}
Ï€âŒˆpâŒ‰
/ X
x âœ¤
/ p(x)|xâŸ©âœ¤
/ p(x)|xâŸ©
Here we use that there is an equality (or isomorphism) {X|âŒˆpâŒ‰} â†’X/pâŠ¥. The
map Î¸p used above is a special case, since âŒˆpâŒ‰= p for a sharp predicate p.
It turns out that we can do the same for von Neumann algebras. For an eï¬€ect
e âˆˆ[0, 1]A in a von Neumann algebra A we can deï¬ne, formally in Par(vNAop),
asrte =

A
Î¾e
/ A /eâŠ¥= âŒˆeâŒ‰A âŒˆeâŒ‰= âŒŠâŒˆeâŒ‰âŒ‹A âŒŠâŒˆeâŒ‰âŒ‹= {A |âŒˆeâŒ‰}
Ï€âŒˆeâŒ‰/ A

The equality in the middle was already mentioned at the end of Example 82 (4).
As subunital map asrte : A â†’A this composite becomes:
asrte(a) = Î¾eâŠ¥
 Ï€âŒˆeâŒ‰(a)

= Î¾eâŠ¥
 âŒˆeâŒ‰a âŒˆeâŒ‰

= âˆše âŒˆeâŒ‰a âŒˆeâŒ‰âˆše
= âˆše a âˆše.
(66)
131

In this way we obtain LÂ¨uders rule, see [BS98, Eq.(1.3)]. The problem of deï¬nin-
ing assert maps via comprehension and quotient is thus reduced to having an
isomorphism {X|âŒˆpâŒ‰} âˆ¼= X/pâŠ¥. But: which isomorphism?
We have not found, in general, a canonically deï¬ned isomorphism {X|âŒˆpâŒ‰} âˆ¼=
X/pâŠ¥in an eï¬€ectus that gives rise to the canonical description (66) in the
eï¬€ectus of von Neumann algebras. This remains largely an unsolved problem,
although the situation is clearer in the special case of von Neumann algebras, see
Subsection 15.1 below. A related question is: is this apparent lack of canonicity
a â€˜bugâ€™ or a â€˜featureâ€™?
Accepting for the time being that there is no such canonical isomorphism
{X|âŒˆpâŒ‰} âˆ¼= X/pâŠ¥, there are two possible ways forward.
1. Simply assume some isomorphism {X|âŒˆpâŒ‰} âˆ¼= X/pâŠ¥and use it to deï¬ne an
assert map as in (65), but with Ï€âŒˆpâŒ‰instead of Ï€p. Then we can see which
requirements we need for this isomorphism in order to prove reasonable
properties about assert maps.
2. Simply assume maps asrtp : X â†’X + 1 satisfying some reasonable prop-
erties which induce an isomorphism {X|âŒˆpâŒ‰} âˆ¼= X/pâŠ¥.
In the sequel we shall follow the second approach. We have already seen various
properties of assert maps â€” e.g. in Lemmas 57 and 94. Hence we can check
if they hold in the eï¬€ectus vNAop, and if so, use them as a basis for our
preliminary axiomatisation of what we call a telos.
(This same approach is followed in [Jac15a], where instrument maps instrp =
âŸ¨âŸ¨asrtp, asrtpâŠ¥âŸ©âŸ©: X â†’X +X are assumed, satisfying certain properties, instead
of assert maps. But the diï¬€erence between using instruments or assert maps is
inessential.)
Below we describe a number of postulates that together give a preliminary
description of the notion of telos. Each postulate contains a requirement, and
a short discussion about its rationale and consequences.
Postulate 101. Each telos is a monoidal eï¬€ectus with sharp images. We shall
describe it in partial form (with special object I, as usual).
In the sequel the monoidal structure, see Section 10, plays a modest role, but
it should be included since it is important for combining operations. Similarly,
images are a basic ingredient, see Subsection 7.2.
The next postulate introduces assert maps as actions that are associated with
predicates. Given such maps, we deï¬ne an â€˜andthenâ€™ operation & on predicates,
as before: p & q = q â—¦asrtp, for predicates p, q on the same object. In the
current general situation & is not commutative, like in Section 9.
Postulate 102. For each predicate p on an object X in a telos there is an
assert map asrtp : X â†’X such that:
1. ker(asrtp) = pâŠ¥, or equivalently, kerâŠ¥(asrtp) = p;
2. im(asrtp) = âŒˆpâŒ‰, where âŒˆpâŒ‰is the least sharp predicate above p;
3. if f â‰¤idX, then f = asrtp for p = kerâŠ¥(f) = 1 â—¦f;
4. asrt[p,q] = asrtp + asrtq : X + Y â†’X + Y for p âˆˆPred(X), q âˆˆPred(Y );
132

5. asrtpâŠ—q = asrtp âŠ—asrtq : X âŠ—Y â†’X âŠ—Y , where pâŠ—q: X âŠ—Y â†’I âŠ—I âˆ¼= I.
6. asrtp â—¦asrtp = asrtp&p;
7. asrtp â—¦f = f â—¦asrtf âœ·(p) for any predicate p and any map f : Y â†’X that
preserves sharp elements: f âœ·(q) is sharp if q is sharp.
We check that these properties hold in our leading example of a telos: the
opposite vNAop of the category of von Neumann algebras.
Example 103. The eï¬€ectus vNAop of von Neumann algebras, with assert maps
given by asrtp(x) = âˆšp x âˆšp as in (66), satisï¬es the previous postulate. Clearly
our chosen asrtp map is subunital, linear and positive. It is also completely
positive [Sti55, Thm. 1] and normal [Sak71, Lem. 1.7.4].
See also appendix
of [WW15]. We cover the diï¬€erent postulates one at a time.
1. Obviously, kerâŠ¥(asrtp) = asrtp(1) = âˆšp 1 âˆšp = p.
2. From âˆšp âŒˆpâŒ‰= âˆšp we obtain âˆšp âŒˆpâŒ‰âŠ¥âˆšp = 0 and thus âŒˆpâŒ‰âŠ¥â—¦asrtp = 0.
But then asrtâœ·
p (âŒˆpâŒ‰) = (âŒˆpâŒ‰âŠ¥â—¦asrtp)âŠ¥= 1, and thus im(asrtp) â‰¤âŒˆpâŒ‰by
minimality of images.
Now we prove the reverse inequality âŒˆpâŒ‰â‰¤im(asrtp). Write b = imâŠ¥(asrtp).
We have b â—¦asrtp = 0 by Lemma 47 (3), so that asrtp(b) = 0 by (25).
That is: âˆšp b âˆšp = 0.
By the Câˆ—-identity âˆ¥b âˆšpâˆ¥2 = âˆ¥âˆšp b âˆšpâˆ¥= 0.
Hence b âˆšp = 0. But then also âˆšp b = (b âˆšp)âˆ—= 0. Thus p and b com-
mute. By (43) we obtain âŒˆpâŒ‰b = 0 = b âŒˆpâŒ‰. Since both âŒˆpâŒ‰and b are
sharp we obtain that the sum âŒˆpâŒ‰+ b is sharp too, and thus an eï¬€ect.
The latter yields âŒˆpâŒ‰+ b â‰¤1, and thus imâŠ¥(asrtp) = b â‰¤âŒˆpâŒ‰âŠ¥. Conse-
quently âŒˆpâŒ‰â‰¤im(asrtp) as desired.
3. In Example 56 (3) we have already shown that a subunital map f : A â†’A
with f â‰¤id is of the form f(x) = f(1) x, where the element f(1) âˆˆ
[0, 1]A is central in A . Hence
p
f(1) is central too, so that the eï¬€ect
p = kerâŠ¥(f) = f(1) satiesï¬es:
asrtp(x) =
p
f(1) x
p
f(1) = f(1) x = f(x).
4. Simply:
asrt[p,q](x, y) =
p
(p, q) (x, y)
p
(p, q)
= (âˆšp x âˆšp, âˆšq y âˆšq)
= (asrtp âŠ•asrtq)(x, y).
5. The linear span of predicates p âŠ—q is ultraweakly dense in A âŠ—B, see
e.g. [Cho14, Prop. 4.5.3]. As our chosen asrt map is ultraweakly continuous
and linear, it is suï¬ƒcient to show the equality for product-predicates:
asrtpâŠ—q(x âŠ—y) = âˆšp âŠ—q (x âŠ—y) âˆšp âŠ—q
= (âˆšp âŠ—âˆšq) (x âŠ—y) (âˆšp âŠ—âˆšq)
= (âˆšp x âˆšp) âŠ—(âˆšq y âˆšq)
= asrtp(x) âŠ—asrtq(y)
= (asrtp âŠ—asrtq)(x âŠ—y).
133

For the last step, see e.g. [Cho14, Prop. 4.5.5].
6. Note that p & p = âˆšp p âˆšp = p2 and so:
asrtp(asrtp(x)) = âˆšp âˆšp x âˆšp âˆšp
= p x p
=
p
p2 x
p
p2 = asrtp&p(x).
7. A completely positive map f : A â†’B preserves projections if and only if
it is multiplicative. Hence if f is sharp, then it is a (unital) and preserves
multiplication and thus square roots too. Hence:
f âˆ— asrtp(x)

= f
 âˆšp x âˆšp

=
p
f(p) f(x)
p
f(p) = asrtf âˆ—(p)
 f(x)

.
This concludes the example.
Point (1) allows us to deï¬ne (total) instrument maps like in Lemma 57 (6):
X
instrp
def
= âŸ¨âŸ¨asrtp,asrtpâŠ¥âŸ©âŸ©
/ X + X
(67)
The side-eï¬€ect associated with the predicate p is the map âˆ‡â—¦instrp : X â†’X.
We call p side-eï¬€ect free if this map âˆ‡â—¦instrp is the identity. Also, it allows us
to deï¬ne sequential composition â€˜andthenâ€™ on predicates (on the same object)
as:
p & q = q â—¦asrtp,
(68)
see Lemma 57 (7). Moreover, we can deï¬ne conditional states Ï‰|p in a quantum
context as normalisation of asrtp â—¦Ï‰, like in Example 58, if we additionally
assume normalisation in a telos.
Postulate 104. Each assert map in a telos has a total kernel map â€” that is,
a kernel map which is total â€” written as:
{X|pâŠ¥} /
Ï€pâŠ¥
total
/ X
asrtp
)
0
5 X
The comprehension notation is deliberate, since this kernel map Ï€pâŠ¥is a compre-
hension map (for pâŠ¥), as in Deï¬nition 76 (2): let f : Y â†’X satisfy f âœ·(pâŠ¥) = 1.
Then:
0 = f âœ·(pâŠ¥)âŠ¥= p â—¦f = kerâŠ¥(asrtp) â—¦f = 1 â—¦asrtp â—¦f.
But then asrtp â—¦f = 0, by Lemma 7, so that f factors through the kernel map
Ï€pâŠ¥.
Notice that the assert maps are structure, but their kernel maps are deter-
mined up to isomorphism, since they form comprehension maps and thus a right
adjoint to the truth functor.
134

Postulate 105. Postulate 102 (2) tells that im(asrtp) = âŒˆpâŒ‰. In particular,
asrtâœ·
p (âŒˆpâŒ‰) = 1, so that we obtain a factorisation:
{X|âŒˆpâŒ‰}
 Ï€âŒˆpâŒ‰

X
Î¾pâŠ¥
3
asrtp
/ X
using that the kernel maps Ï€ are comprehension maps, see Postulate 104. Then,
using Lemma 39 (7),
ker(Î¾pâŠ¥) = ker(Ï€âŒˆpâŒ‰â—¦Î¾pâŠ¥) = ker(asrtp) = pâŠ¥.
We postulate that in a telos these maps Î¾p are universal, forming quotients.
In this way the equation X/pâŠ¥= {X|âŒˆpâŒ‰} that we discussed in the beginning
of this section is built in. Moreover, if p is sharp, then âŒˆpâŒ‰= p, so that we have
an equality X/pâŠ¥= {X|p}, as in Deï¬nition 91. Below, in Proposition 106 (6) it
is shown that this means that the canonical map Î¸p from (57) is an isomorphism.
Hence the properties of Lemmas 93 and 94 hold in a telos.
Since the Î¾â€™s are quotient maps and im(asrtp) = âŒˆpâŒ‰we have a coequaliser
(cokernel map) diagram by Lemma 83 (14):
X
asrtp )
0
6 X
Î¾âŒˆpâŒ‰/ / X/âŒˆpâŒ‰
This concludes our description of the notion of telos. We continue with some
basic properties that hold in a telos about the assert maps and the â€˜andthenâ€™
operator p & q, written as p â—¦q in [GG02], and as [p?](q) in [Jac15a]. Below
we prove the ï¬rst three of the ï¬ve requirements for andthen in [GG02, Â§Â§3], see
points (2) and (3) below. We also prove that sharpness is related to idempotency
of &, like in Câˆ—-algebras.
Proposition 106. Let C be a telos, that is, C is an eï¬€ectus in partial form,
satisfying the postulates 102 â€“ 105. Then the following properties hold.
1. The assert maps satisfy asrt1 = id : X â†’X and asrt0 = 0: X â†’X for
the truth and falsity predicates 1, 0 on X; moreover, asrts = s: I â†’I for
each scalar s.
2. For each predicate p on X âˆˆC we have a map of eï¬€ect algebras:
Pred(X)
p&(âˆ’)
/ â†“p
As a result, p & q â‰¤p. Moreover, by point (1):
1 & p = p = p & 1
and
0 & p = 0 = p & 0.
3. If p & q = 0, then p & q = q & p.
4. For a predicate p âˆˆPred(X) the following side-eï¬€ect freeness formulations
are equivalent.
135

(a) asrtp â‰¤id;
(b) asrtpâŠ¥â‰¤id;
(c) âˆ‡â—¦instrp = id.
5. There are equivalences:
p is sharp â‡â‡’p & p = p.
6. For a sharp predicate p, the map Î¸p = Î¾pâŠ¥â—¦Ï€p : {X|p} â†’X/pâŠ¥from (57)
is the identity. In particular, a telos has both comprehension and quotients
as in Deï¬nition 91.
7. For each predicate p the image of the comprehension map Ï€p is given by
im(Ï€p) = âŒŠpâŒ‹. Further, for sharp predicates p, q on the same object we
have p â‰¤q iï¬€Ï€p â‰¤Ï€q, like in (61). Hence Proposition 95 applies in a
telos.
Proof We must be careful not to assume more about the assert maps than is
postulated above.
1. We use Postulate 102 (3) each time. First, the identity map id : X â†’X
evidently satisï¬es id â‰¤id, so that id = asrt1â—¦id = asrt1.
Similarly,
0 â‰¤id, so that 0 = asrt1â—¦0 = asrt0. Further, we have id = 1: I â†’I, see
Lemma 52 (2). Hence every scalar s: I â†’I satisï¬es s â‰¤1 = id, and thus
s = asrt1â—¦s = asrtidâ—¦s = asrts.
2. By Proposition 13 (2) we have:
p & (q1 > q2) = (q1 > q2) â—¦asrtp
= (q1 â—¦asrtp) > (q2 â—¦asrtp) = (p & q1) > (p & q2).
As a result, p & (âˆ’) is monotone, and in particular p & q â‰¤p. Since p &
1 = p we obtain that p & (âˆ’) is a map of eï¬€ect algebras Pred(X) â†’â†“p.
3. Let p & q = 0, then q â—¦asrtp = p & q = 0, so that q â‰¤imâŠ¥(asrtp) = âŒˆpâŒ‰âŠ¥
by Lemma 47 (3). But then âŒˆqâŒ‰â‰¤âŒˆpâŒ‰âŠ¥, since âŒˆpâŒ‰âŠ¥is sharp, and thus
p â‰¤âŒˆpâŒ‰â‰¤âŒˆqâŒ‰âŠ¥= imâŠ¥(asrtq). Hence, again by Lemma 47 (3), q & p =
p â—¦asrtq = 0 = p & q.
4. For the implication (4a) â‡’(4b), let asrtp â‰¤id. Then there is a map
f : X â†’X with asrtp > f = id. This f then also satisï¬es f â‰¤id, so that
f = asrtq for q = kerâŠ¥(f) by Postulate 102 (3). We have:
1 = kerâŠ¥(id) = kerâŠ¥(asrtp > f) = kerâŠ¥(asrtp) > kerâŠ¥(f) = p > kerâŠ¥(f).
Hence pâŠ¥= kerâŠ¥(f) = q. But then asrtpâŠ¥= asrtq = f â‰¤id.
For the implication (4b) â‡’(4c) we assume asrtpâŠ¥â‰¤id. By reasoning as
before, we get asrtpâŠ¥> f = id for f = asrtp â‰¤id. Hence asrtp > asrtpâŠ¥=
id, so that we are done as in the proof of Lemma 57 (6).
136

Finally, for (4c) â‡’(4a), assume an equality of total maps âˆ‡â—¦instrp =
id : X â†’X. Then:
asrtp > asrtpâŠ¥
= (âˆ‡â—¦Îº1 â—¦asrtp) > (âˆ‡â—¦Îº2 â—¦asrtpâŠ¥)
= âˆ‡â—¦
 (Îº1 â—¦asrtp) > (Îº2 â—¦asrtpâŠ¥)

(27)
= âˆ‡â—¦âŸ¨âŸ¨asrtp, asrtpâŠ¥âŸ©âŸ©
= âˆ‡â—¦instrp
= id.
Hence asrtp â‰¤asrtp > asrtpâŠ¥= id.
5. We use equivalences:
p is sharp â‡â‡’im(asrtp) = âŒˆpâŒ‰â‰¤p
â‡â‡’pâŠ¥â‰¤imâŠ¥(asrtp)
â‡â‡’p & pâŠ¥= pâŠ¥â—¦asrtp = 0
by Lemma 47 (3)
(âˆ—)
â‡â‡’(p & p)âŠ¥= 0 in â†“p
â‡â‡’p & p = p.
The marked equivalence uses that p & (âˆ’) is a map of eï¬€ect algebras
Pred(X) â†’â†“p, see point (2). Hence it preserves orthosupplements.
6. Let p be a sharp predicate.
Then p & p = p by point (5), and thus
asrtp â—¦asrtp = asrtp&p = asrtp by Postulate 102 (6). Using that p = âŒˆpâŒ‰,
this last equation yields:
Ï€p â—¦Î¾pâŠ¥â—¦Ï€p â—¦Î¾pâŠ¥= asrtp â—¦asrtp = asrtp = Ï€p â—¦Î¾pâŠ¥.
But then Î¸p = Î¾pâŠ¥â—¦Ï€p = id, since Ï€p is monic, and Î¾pâŠ¥is epic.
7. For an arbitrary predicate p we have im(Ï€âŒˆpâŒ‰) = im(Ï€âŒˆpâŒ‰â—¦Î¾pâŠ¥) = im(asrtp) =
âŒˆpâŒ‰, since Î¾pâŠ¥is externally, and thus internally, epic. In particular, im(Ï€q) =
q if q is sharp.
We always have im(Ï€p) â‰¤p by minimality of images. We show that im(Ï€p)
is the greatest sharp predicate below p. If q is sharp, and q â‰¤p, then there
is a (total) map f : {X|q} â†’{X|p} with Ï€p â—¦f = Ï€q. But then we are
done: q = im(Ï€q) â‰¤im(Ï€p), where the inequality follows from minimality
of images, and:
Ï€âœ·
q
 im(Ï€p)

= Ï€âˆ—
q
 im(Ï€p)

= f âˆ—Ï€âˆ—
p
 im(Ï€p)

= f âˆ—(1) = 1.
Next we prove the equivalence p â‰¤q â‡â‡’Ï€p â‰¤Ï€q for sharp predicates
p, q on the same object. The direction (â‡’) always holds. For (â‡) we use
p = im(Ï€p) â‰¤im(Ï€q) = q.
â–¡
Remark 107. Let us try to ï¬nd out in which sense assert maps satisfying the
above postulates are uniquely determined. To this end, assume we have two
sets of assert maps, written as asrtp and asrtâ€²
p.
137

They both have kernel maps like in Postulate 104, written as:
{X|pâŠ¥} /
Ï€pâŠ¥/ X
asrtp )
0
6 X
{X|pâŠ¥}â€² /
Ï€â€²
pâŠ¥/ X
asrtâ€²
p )
0
6 X
In Postulate 104 we have seen that the kernel maps form comprehension maps,
and are thus determined up-to-isomorphism. This means that for each predicate
p there is a (total) isomorphism Ï•p in a commuting triangle:
{X|p}!
Ï€p
!âˆ
âˆ
âˆ
âˆ
âˆ
Ï•p
âˆ¼
=
/ {X|p}â€²
}
Ï€â€²
p
}â‘¢â‘¢â‘¢â‘¢â‘¢
X
By factoring like in Postulate 105, we obtain two maps Î¾pâŠ¥and Î¾â€²
pâŠ¥in:
{X|âŒˆpâŒ‰}
w
Ï€âŒˆpâŒ‰
wâ™¦â™¦â™¦â™¦â™¦â™¦â™¦â™¦â™¦
âˆ¼
=
Ï•âŒˆpâŒ‰

âˆ¼
=
Ïˆp
y
X
Î¾pâŠ¥
0 0
asrtp
,
Î¾â€²
pâŠ¥
. .
asrtâ€²
p
1 X
{X|âŒˆpâŒ‰}â€²
g
Ï€â€²
âŒˆpâŒ‰
gâ–â–â–â–â–â–â–â–â–
Since both Î¾ and Î¾â€² are universal quotient maps, there is a second isomorphism,
written as Ïˆp, with Ïˆpâ—¦Î¾pâŠ¥= Î¾â€²
pâŠ¥. The endo map Ï•âˆ’1
âŒˆpâŒ‰â—¦Ïˆp : {X|âŒˆpâŒ‰} â†’{X|âŒˆpâŒ‰}
satisï¬es:
Ï€âŒˆpâŒ‰â—¦
 Ï•âˆ’1
âŒˆpâŒ‰â—¦Ïˆp

â—¦Î¾pâŠ¥= Ï€â€²
âŒˆpâŒ‰â—¦Î¾â€²
pâŠ¥= asrtâ€²
p.
15.1
Uniqueness of assert maps, in von Neumann algebras
We have deï¬ned a telos to be a special type of eï¬€ectus (Postulate 101) endowed
with a family of assert maps (Postulate 102) that gives us comprehension (Pos-
tulate 104) and quotients (Postulate 105). We have devoted much eï¬€ort to see
whether this list of postules (or any extension of it) uniquely determines the
assert maps. In this section, we will show that for the telos of von Neumann
algebras, vNAop, the assert maps are uniquely determined, and are given by
asrtp(x) = âˆšpxâˆšp, if we add Postulate 108 to the list. Whether the assert
maps are uniquely determined by these postulates in general remains an open
problem.
We shall call a map f : X â†’Y a comprehension projection, of simply a
comprehension map if there is a sharp predicate q on Y with an isomorphism:
X
f âœ»âœ»âœ»âœ»
âˆ¼{Y |q}

Ï€q
âœ„âœ„âœ„
Y
Such a comprehension is automatically monic.
138

Postulate 108. Let p be any predicate on X and Ï€: 1 ÖŒ X a state that is
also a comprehension map (in a telos). Then:
im(p âˆ—Ï€) = âŒˆp & im(Ï€)âŒ‰,
where p âˆ—Ï€ = asrtp â—¦Ï€ and p & im(Ï€) = im(Ï€) â—¦asrtp as in (68).
The substate p âˆ—Ï€ is an unnormalised version of the conditional state Ï€|p of
Example 58, which makes sense even if the validity probability Ï€ |= p is zero.
If (Ï€ |= p) Ì¸= 0, we have
Ï€|p â—¦(Ï€ |= p) = p âˆ—Ï€.
Before we come to the main result, we show that this additional postulate
holds in the telos of von Neumann algebras. In doing so we use the following
two properties. For a non-zero r âˆˆ[0, 1],
im(r Â· f) = im(f)
and
âŒˆr Â· pâŒ‰= p,
(69)
for a subunital map f and a projection p.
Example 109. The postulate 108 is true in the eï¬€ectus vNAop with the stan-
dard asrt-maps asrtp(x) = âˆšp Â· x Â· âˆšp from Example 103.
To demonstrate
this, we will ï¬rst study states that are comprehension maps. Let A be a von
Neumann algebra. We will state and prove a number of claims.
1. For a sharp predicate s on A , the mapping:
â†“s
/ Pred({A |s}) = [0, 1]{A |s}
a âœ¤
/ Ï€âˆ—
s(a) = Ï€s(a) = sas
is an order isomorphism â€” where the downset â†“s is a subset of Pred(A ) =
[0, 1]A . Recall that {A |s} = sA s, see Example 77 (4).
To see this, note that sas â‰¤s for any sas âˆˆ[0, 1]{A |s} since s is the unit
element in {A |s} = sA s. Hence there is an inclusion-map j : [0, 1]sA s â†’
â†“s. It is the inverse to the above map Ï€âˆ—
s since:
Ï€âˆ—
s
 j(sas)

= s(sas)s = sas
since s is a projection
j
 Ï€âˆ—
s(a)

= sas = a
by Lemma 99 since a â‰¤s.
2. A comprehension map Ï€s : A â†’{A |s} for a sharp predicate s on A is a
state if and only if s is a minimal projection.
First, if Ï€s is a state, then {A |s} âˆ¼= C, so that by the previous point we
have an order isomorphism:
â†“s âˆ¼= Pred
 {A |s}
 âˆ¼= Pred(C) = [0, 1].
If t âˆˆâ†“s is a projection, then it corresponds to sharp element in [0, 1]. But
there are only two sharp elements in [0, 1], namely 0 and 1, so that t = 0
or t = s. Hence s is a minimal projection.
Conversely, if s is a minimal projection, then Pred({A |s}) âˆ¼= â†“s has only
two projections. This means that the von Neumann algebra {A |s} itself
has two projections, and is thus isomorphic two the unique von Neumann
algebra C with two projections.
139

3. Let H be any Hilbert space with element v âˆˆH . The projection |vâŸ©âŸ¨v | âˆˆ
B(H ) is minimal, and the corresponding state Ï€v : B(H) â†’C given by
Ï€v(t) = âŸ¨tv | vâŸ©is a comprehension map. One calls a state of this form Ï€v
a vector state. The image in B(H ) of such a vector state Ï€v is given by
the projection |vâŸ©âŸ¨v |. Any state B(H ) â†’C which is a comprehension
map is of this form.
4. Any state that is a projection is of the form Ï€: B(H ) âŠ•B â†’C, where
Ï€(a, b) = âŸ¨av | vâŸ©for some vector v âˆˆH . The image of Ï€ is then the pair
(|vâŸ©âŸ¨v |, 0) âˆˆB(B) âŠ•B.
To show this, assume Ï€: A â†’C is a comprehension map for a (conse-
quently minimal) projection s. Let c(s) denote the central carrier of s that
is: c(s) âˆˆ[0, 1]A is the least central projection above s âˆˆ[0, 1]A . We will
show {A |c(s)} âˆ¼= c(s)A is a (type I) factor, in which the projection c(s)s
is minimal.
Let z â‰¤c(s) be any central projection in c(s)A . If we can show z = 0
or z = c(s), we may conclude c(s)A is a factor. Note z is central in A
as za = zc(s)a = c(s)az = az for any a âˆˆA . Clearly zs is a projection
below s. Hence by minimality of s, we have zs = s or zs = 0. For the ï¬rst
case, assume zs = s. Then s â‰¤z by Lemma 99. Hence c(s) â‰¤z â‰¤c(s).
Thus z = c(s), as desired. Now, we cover the other case zs = 0. That
is: zsâŠ¥= z. Hence z â‰¤sâŠ¥by Lemma 99. So s â‰¤zâŠ¥. Hence c(s) â‰¤zâŠ¥.
Thus z â‰¤c(s)âŠ¥and z â‰¤c(s). Consequently z = 0.
A fundamental result says that each such (type I) factor is given by
bounded operators on a Hilbert space, see e.g. [Top71, Corrolary 10].
Thus, let c(s)A âˆ¼= B(H ) for some Hilbert space H . Consequently, there
is an isomorphism Ï‘: A â†’B(H ) âŠ•c(s)âŠ¥A such that Ï€ = Ï€â€² â—¦Ï€1 â—¦Ï‘,
where Ï€â€² : B(H ) â†’C is a comprehension map for the minimal projection
corresponding to c(s)s and hence a vector state.
5. We will now show that the additional postulate 108 holds in the te-
los vNAop for the canonical asrt-maps from Example 103. Let Ï€ be a state
that is also a comprehension map. With the previous in mind, we may
assume without loss of generality that Ï€ is of the form Ï€: B(H )âŠ•B â†’C
with Ï€(a, b) = âŸ¨av | vâŸ©for some v âˆˆH . Let e = (e1, e2) and d = (d1, d2)
be arbitrary eï¬€ects on B(H ) âŠ•B. Note that:
(e âˆ—Ï€)(d) = Ï€
 asrte(d)

= Ï€
 âˆše1d1âˆše1, âˆše2d2âˆše2

= âŸ¨âˆše1d1âˆše1 v | vâŸ©
= âŸ¨d1âˆše1 v | âˆše1 vâŸ©.
Suppose âˆše1v = 0. Then (e âˆ—Ï€)(d) = âŸ¨d1âˆše1v | âˆše1vâŸ©= 0, so that im(e âˆ—
Ï€) = 0. Also âŒˆe & im(Ï€)âŒ‰= 0 since:
e & im(Ï€) = e & (|vâŸ©âŸ¨v |, 0)
see point (4)
= asrte(|vâŸ©âŸ¨v |, 0)
= (|âˆše1vâŸ©âŸ¨vâˆše1 |, âˆše20âˆše2)
= 0.
140

For the other case, assume âˆše1v Ì¸= 0. Then, using what we have seen
above:
(e âˆ—Ï€)(d) = âŸ¨d1âˆše1v | âˆše1vâŸ©= âˆ¥âˆše1vâˆ¥2âŸ¨d1
âˆše1v
âˆ¥âˆše1vâˆ¥|
âˆše1v
âˆ¥âˆše1vâˆ¥âŸ©.
This means e âˆ—Ï€ is a scaled vector state with:
im(e âˆ—Ï€) = (|
âˆše1v
âˆ¥âˆše1vâˆ¥âŸ©âŸ¨
âˆše1v
âˆ¥âˆše1vâˆ¥|, 0)
by (69) and point (4)
=
1
âˆ¥âˆše1vâˆ¥2 (|âˆše1vâŸ©âŸ¨âˆše1v |, 0)
= âŒˆ(|âˆše1vâŸ©âŸ¨âˆše1v |, 0) âŒ‰
by (69)
= âŒˆe & im(Ï€)âŒ‰.
Hence, in both cases im(e âˆ—Ï€) = âŒˆe & im(Ï€)âŒ‰, as desired.
Now we are ready to show there is only one choice of assert maps in vNAop
that satisï¬es all the postulates â€” including 108. The result is a reformulation
of a result from [WW15], which in turn is inspired by the characterization of the
sequential product in Hilbert spaces by Gudder and LatrÂ´emoli`ere, see [GL08].
Our Postulate 108 should be compared with their Condition 1.
Theorem 110. For each von Neumann algebra A and p âˆˆ[0, 1]A , let
asrtp : A âˆ’â†’A
be a completely positive normal subunital map. Assume that these assert maps
on vNAop satisfy Postulate 101, 102, 104, 105, and 108.
Then for every von Neumann algebra A , predicate p âˆˆ[0, 1]A , and x âˆˆA ,
asrtp(x) = âˆšp x âˆšp.
(70)
Proof Let H be a Hilbert space. We will ï¬rst show that Equation (70) holds
for A = B(H ). Let p âˆˆ[0, 1]B(H ) be given.
By the discussion in Remark 107 we already have the following connection
between the canonical assert map a 7â†’âˆšpaâˆšp and the one, asrtp, we are given:
there is an automorphism Ï‘ on âŒˆpâŒ‰B(H )âŒˆpâŒ‰such that, for all a âˆˆB(H ),
asrtp(a) = âˆšp Ï‘( âŒˆpâŒ‰aâŒˆpâŒ‰) âˆšp.
Since âŒˆpâŒ‰B(H )âŒˆpâŒ‰is a type I factor (i.e. isomorphic to a B(K )), it is known
(see Theorem 3 of [Kap52]) that Ï‘ must be what is called an inner automor-
phism, that is, there is an unitary u âˆˆâŒˆpâŒ‰B(H )âŒˆpâŒ‰such that, Ï‘(a) = uâˆ—au
for all a âˆˆâŒˆpâŒ‰B(H )âŒˆpâŒ‰. Note that âŒˆpâŒ‰u = u since u âˆˆâŒˆpâŒ‰B(H )âŒˆpâŒ‰, and thus
we have, for all a âˆˆB(H ),
asrtp(a) = âˆšp uâˆ—a u âˆšp.
Of course, our ultimate goal should be to show that u = 1, or at least that
u = Î» Â· 1 for some Î» âˆˆC with |Î»| = 1. Our ï¬rst step is to prove up = pu.
To this end, we extract some information about u from Postulate 108.
Let x âˆˆH with âˆ¥xâˆ¥= 1 be given. Let Ï€: B(H ) â†’C be given by Ï€(a) =
141

âŸ¨x | axâŸ©for a âˆˆB(H ). Then by Example 109 we know that Ï€ is a comprehen-
sion. Thus, by Postulate 108, we know that, in vNAop,
im(asrtp â—¦Ï€) = âŒˆp & im(Ï€)âŒ‰.
(71)
Before we continue, observe that for y âˆˆH with âˆ¥yâˆ¥â‰¤1 we have
âŒˆ|yâŸ©âŸ¨y | âŒ‰= im( âŸ¨y | (âˆ’) yâŸ©) ) = ( projection onto yC â‰¡{Î»y: Î» âˆˆC} ).
Now, let us unfold Equation (71).
( projection onto (âˆšpuâˆ—x)C ) = âŒˆ| âˆšpuâˆ—x âŸ©âŸ¨âˆšpuâˆ—x | âŒ‰
= âŒˆâˆšpuâˆ—|xâŸ©âŸ¨x | uâˆšp âŒ‰
= âŒˆp & im(Ï€) âŒ‰
= im(asrtp â—¦Ï€)
= im( âŸ¨x | âˆšpuâˆ—(âˆ’)uâˆšpx âŸ©)
= im( âŸ¨uâˆšpx | (âˆ’) uâˆšpx âŸ©)
= ( projection onto (uâˆšpx)C )
Hence, for every x âˆˆH with âˆ¥xâˆ¥= 1 there is Î± âˆˆC with Î± Ì¸= 0 such that
âˆšpuâˆ—x = Î± Â· uâˆšpx.
By scaling it is clear that this statement is also true for all x âˆˆH (and not just
for x âˆˆH with âˆ¥xâˆ¥= 1). While a priori Î± might depend on x, we will show
that there is Î± âˆˆC\{0} such that âˆšpuâˆ—= Î± Â· uâˆšp.
First note that âˆšpuâˆ—x = 0 iï¬€uâˆšpx = 0 for all x âˆˆH . Thus we may
factor âˆšpuâˆ—and uâˆšp through the quotient map q: H â†’H /K, where
K = {x âˆˆH : âˆšpuâˆ—x = 0} = {x âˆˆH : uâˆšpx = 0}.
(Here H /K is just the quotient of H as vector space.) Let t, s: H /K â†’H
be given by s â—¦q = âˆšpuâˆ—and t â—¦q = uâˆšp. Then s and t are injective, and
writing V = H /K, it is not hard to see that for every x âˆˆV there is Î± âˆˆC\{0}
with s(x) = Î± Â· t(x).
We will show that there is Î± âˆˆC\{0} with s = Î± Â· t. If V = {0} then this is
clear, so assume that V Ì¸= {0}. Pick x âˆˆV with x Ì¸= 0, and let Î± âˆˆC\{0} be
such that s(x) = Î±Â·t(x). Let y âˆˆV be given; we must show that s(y) = Î±Â·t(y).
Now, either t(x) and t(y) are linearly independent or not.
Suppose that t(x) and t(y) are linearly independent. Let Î², Î³ âˆˆC\{0} be
such that s(y) = Î² Â· t(y) and s(x + y) = Î³ Â· t(x + y). Then
(Î³ âˆ’Î±) Â· t(x) + (Î³ âˆ’Î²) Â· t(y) = 0.
Thus, as t(x) and t(y) are linearly independent, Î³ âˆ’Î± = 0 and Î³ âˆ’Î² = 0, and
so Î± = Î². Hence s(y) = Î± Â· t(y).
Suppose that t(x) and t(y) are linearly dependent. Since x Ì¸= 0, we have
t(x) Ì¸= 0â€”as t is injectiveâ€”, and thus t(y) = Ìºt(x) for some Ìº âˆˆC. Then
t(y âˆ’Ìºx) = 0, and so y = Ìºx since t is injective. Then
s(y) = Ìºs(x) = ÌºÎ±t(x) = Î±t(y).
142

Thus, in any case, s(y) = Î±t(y). Hence s = Î± Â· t. Thus âˆšpuâˆ—= Î± Â· uâˆšp.
It follows that p = âˆšpuâˆ—uâˆšp = Î± Â· uâˆšpuâˆšp = uâˆšpâˆšpuâˆ—= upuâˆ—, and so
pu = up. Then also âˆšpu = uâˆšp. Thus âˆšpuâˆ—= Î±uâˆšp = Î±âˆšpu.
Now, note that (âˆšpuâˆ—)âˆ—= uâˆšp, and so uâˆšp = Î±âˆ—âˆšpuâˆ—= Î±âˆ—Î±uâˆšp. Then
if uâˆšp Ì¸= 0 we get Î±âˆ—Î± = 1, and if uâˆšp then we can put Î± = 1 and still have
both âˆšpuâˆ—= Î±uâˆšp and Î±âˆ—Î± = 1.
It follows that, for all b âˆˆB(H ),
âˆšpuâˆ—b uâˆšp = âˆšpu b uâˆ—âˆšp.
By the universal property of the quotient, we conclude that uâˆ—(âˆ’)u = u(âˆ’)uâˆ—,
and thus u2b = bu2 for all b âˆˆB(H ). Hence u2 is central in B(H ).
Since B(H ) is a factor, we get u2 = Î» Â· 1 for some Î» âˆˆC. Then by Postu-
late 102 (6) and using âˆšpu = uâˆšp, we get, for all b âˆˆB(H ),
p b p = âˆšpuâˆ—âˆšpuâˆ—buâˆšpuâˆšp = (asrtp â—¦asrtp)(b) = asrtp&p(b).
Note that p & p = asrtp(p) = âˆšpuâˆ—puâˆšp = p2. Thus, for all b âˆˆB(H ),
asrtp2(b) = p b p.
Since every element of [0, 1]B(H ) is a square, we have proven Equation (70)
when A â‰¡B(H ).
Now, let us consider the general case (so A need not be of the form B(H )).
Let Ï‰: A â†’C be any normal state on A . Let a âˆˆA be given. As normal
states are separating, it suï¬ƒces to prove that Ï‰(asrtp(a)) = Ï‰(âˆšpaâˆšp). Let
Ìº: A â†’B(K ) be the GNS-representation of A for the state Ï‰ with cyclic
vector x âˆˆK . Let Ï€: B(K ) â†’C be given by Ï€(b) = âŸ¨x | bxâŸ©for all b âˆˆA .
Then we have Ï‰ = Ï€ â—¦Ìº (in vNA). Thus:
Ï‰(asrtp(a)) = Ï€(Ìº(asrtp(a)))
= Ï€(asrtÌº(p)(Ìº(a)))
by Postulate 102 (7)
= Ï€(
p
Ìº(p)Ìº(a)
p
Ìº(p))
by uniqueness for B(K )
= Ï€(Ìº(âˆšpaâˆšp))
= Ï‰(âˆšpaâˆšp)
Hence asrtp(a) = âˆšpaâˆšp. We have proven Equation (70).
â–¡
16
Conclusions and future work
This text collects deï¬nitions and results about the new notion of eï¬€ectus in
categorical logic. Already at this early stage it is clear that the theory of eï¬€ec-
tuses includes many examples that are of interest in quantum (and probability)
theory.
But much remains to be done.
We list a few directions for further
research.
1. Which constructions exist to obtain new eï¬€ectuses from old, such as prod-
ucts, slices, (co)algebras of a (co)monad, etc.? A related matter is the def-
inition of an appropriate notion of morphism of eï¬€ectuses: one can take a
functor that preserves ï¬nite coproducts and the ï¬nal object; alternatively,
one can take adjoints as morphisms, like in geometric morphisms between
toposes.
143

2. Tensors in eï¬€ectuses have been discussed in Section 10, but only in a
very superï¬cial way.
They deserve more attention, leading to a closer
connection with the work done in the Oxford school (see the introduction).
For instance, the combination of tensors âŠ—and coproducts + could lead
to a 3-dimensional graphical calculus that combines (parallel) composition
and eï¬€ect logic.
3. The approach in this text is very much logic-oriented. Connections with
quantum theory are touched upon, but should be elaborated further. In
particular, the formulation (and correctness!) of concrete quantum proto-
cols in the present setting is missing.
4. An internal language for eï¬€ectuses, along the lines of [Ada14, AJ15], may
be useful for the veriï¬cation of probabilistic and/or quantum protocols.
5. The possibility of doing homological algebra (in abstract form, see [Gra92,
Gra12] also deserves attention.
Acknowledgements
This document beneï¬tted from discussion with and/or feedback from: Robin
Adams, Tobias Fritz, Robert Furber, Aleks Kissinger, Mathys Rennela, Sam
Staton, Sean Tull, Sander Uijlen, and Fabio Zanasi. We like to thank them all.
144

References
[AC04]
S. Abramsky and B. Coecke. A categorical semantics of quantum
protocols.
In Logic in Computer Science, pages 415â€“425. IEEE,
Computer Science Press, 2004.
[Ada14]
R. Adams. QPEL: Quantum program and eï¬€ect language. In B. Co-
ecke, I. Hasuo, and P. Panangaden, editors, Quantum Physics and
Logic (QPL) 2014, number 172 in Elect. Proc. in Theor. Comp.
Sci., pages 133â€“153, 2014.
[AJ15]
R. Adams and B. Jacobs.
A type theory for probabilistic and
Bayesian reasoning. See arxiv.org/abs/1511.09230, 2015.
[AM80]
M. Arbib and E. Manes.
Partially additive categories and ï¬‚ow-
diagram semantics. Journal of Algebra, 62(1):203â€“227, 1980.
[BF95]
M. Bennett and D. Foulis. Phi-symmetric eï¬€ect algebras. Phys.
Review Letters, 25(12):1699â€“1722, 1995.
[BS98]
P. Busch and J. Singh. LÂ¨uders theorem for unsharp quantum mea-
surements. Phys. Letters A, 249:10â€“12, 1998.
[BW85]
M. Barr and Ch. Wells. Toposes, Triples and Theories. Springer,
Berlin, 1985. Revised and corrected version available from URL:
www.cwru.edu/artsci/math/wells/pub/ttt.html.
[CD11]
B. Coecke and R. Duncan.
Interacting quantum observables:
categorical algebra and diagrammatics.
New Journ. of Physics,
13(4):043016, 2011.
[CDP10]
G. Chiribella, G.M. Dâ€™Ariano, and P. Perinotti. Probabilistic the-
ories with puriï¬cation. Phys. Rev. A, 81:062348, 2010.
[CDP11]
G. Chiribella, G.M. Dâ€™Ariano, and P. Perinotti.
Informational
derivation of quantum theory. Phys. Rev. A, 84:012311, 2011.
[CHK14]
B. Coecke, C. Heunen, and A. Kissinger. Categories of quantum
and classical channels. Quantum Information Processing, pages 1â€“
31, 2014.
[Cho14]
K. Cho. Semantics for a quantum programming language by op-
erator algebras. In B. Coecke, I. Hasuo, and P. Panangaden, edi-
tors, Quantum Physics and Logic (QPL) 2014, number 172 in Elect.
Proc. in Theor. Comp. Sci., pages 165â€“190, 2014.
[Cho15]
K. Cho. Total and partial computation in categorical quantum foun-
dations. In C. Heunen, P. Selinger, and J. Vicary, editors, Quantum
Physics and Logic (QPL) 2015, number 195 in Elect. Proc. in Theor.
Comp. Sci., pages 116â€“135, 2015.
[CJ13]
D. Coumans and B. Jacobs. Scalars, monads and categories. In
C. Heunen, M. Sadrzadeh, and E. Grefenstette, editors, Quan-
tum Physics and Linguistics. A Compositional, Diagrammatic Dis-
course, pages 184â€“216. Oxford Univ. Press, 2013.
145

[CJWW15] K. Cho, B. Jacobs, A. Westerbaan, and B. Westerbaan. Quotient
comprehension chains. In C. Heunen, P. Selinger, and J. Vicary,
editors, Quantum Physics and Logic (QPL) 2015, number 195 in
Elect. Proc. in Theor. Comp. Sci., pages 136â€“147, 2015.
[CK95]
F. Chovanec and F. KË†opka. D-lattices. Int. Journ. Theor. Physics,
34(8):1297â€“1302, 1995.
[CK15]
B. Coecke and A. Kissinger.
Categorical quantum mechanics I:
Causal quantum processes. http://arxiv.org/abs/1510.05468,
2015.
[CKar]
B. Coecke and A. Kissinger. Picturing Quantum Processes. A First
Course in Quantum Theory and Diagrammatic Reasoning. Cam-
bridge Univ. Press, 2016, to appear.
[CL13]
B. Coecke and R. Lal. Causal categories: Relativistically interacting
processes. Found. Physics, 43(4):458â€“501, 2013.
[CLW93]
A. Carboni, S. Lack, and R. Walters. Introduction to extensive and
distributive categories. Journ. of Pure & Appl. Algebra, 84(2):145â€“
158, 1993.
[DP00]
A. DvureË‡censkij and S. PulmannovÂ´a.
New Trends in Quantum
Structures. Kluwer Acad. Publ., Dordrecht, 2000.
[FB94]
D. Foulis and M. Bennett. Eï¬€ect algebras and unsharp quantum
logics. Found. Physics, 24(10):1331â€“1352, 1994.
[FJ15]
R. Furber and B. Jacobs.
From Kleisli categories to commuta-
tive Câˆ—-algebras: Probabilistic Gelfand duality. Logical Methods in
Comp. Sci., 11(2):1â€“28, 2015.
[GG94]
R. Giuntini and H. Greuling. Toward a formal language for unsharp
properties. Found. Physics, 19:769â€“780, 1994.
[GG02]
S. Gudder and R. Greechie. Sequential products on eï¬€ect algebras.
Reports on Math. Physics, 49(1):87â€“111, 2002.
[GL08]
S Gudder and F. Latremoliere. Characterization of the sequential
product on quantum eï¬€ects. arXiv preprint arXiv:0803.3867, 2008.
[Goo86]
K. Goodearl. Partially Ordered Abelian Groups with Interpolation,
volume 20 of Mathematical Surveys. Amer. Math. Soc., 1986.
[Gra92]
M. Grandis.
On the categorical foundations of homological and
homotopical algebra. Cah. de Top. et GÂ´eom. Diï¬€. CatÂ´egoriques,
30:135â€“175, 1992.
[Gra12]
M. Grandis. Homological Algebra: The Interplay of Homology with
Distributive Lattices and Orthodox Semigroups. World Scientiï¬c,
Singapore, 2012.
[Hag00]
E. Haghverdi. Unique decomposition categories, geometry of inter-
action and combinatory logic. Math. Struct. in Comp. Sci., 10:205â€“
231, 2000.
146

[HJ10]
C. Heunen and B. Jacobs. Quantum logic in dagger kernel cate-
gories. Order, 27(2):177â€“212, 2010.
[HV15]
C. Heunen and J. Vicary.
Categories for Quantum Theory: an
Introduction, volume 17 of Oxford Graduate Texts in Math. Oxford
Univ. Press, 2015.
[HZ12]
T. Heinosaari and M. Ziman. The Mathematical Language of Quan-
tum Theory. From Uncertainty to Entanglement. Cambridge Univ.
Press, 2012.
[Jac99]
B. Jacobs. Categorical logic and type theory. North Holland, Ams-
terdam, 1999.
[Jac10a]
B. Jacobs. Convexity, duality, and eï¬€ects. In C. Calude and V. Sas-
sone, editors, IFIP Theoretical Computer Science 2010, number
82(1) in IFIP Adv. in Inf. and Comm. Techn., pages 1â€“19. Springer,
Boston, 2010.
[Jac10b]
B. Jacobs. Orthomodular lattices, Foulis semigroups and dagger
kernel categories. Logical Methods in Comp. Sci., 6(2), 2010.
[Jac13]
B. Jacobs. Measurable spaces and their eï¬€ect logic. In Logic in
Computer Science. IEEE, Computer Science Press, 2013.
[Jac15a]
B. Jacobs. New directions in categorical logic, for classical, proba-
bilistic and quantum logic. Logical Methods in Comp. Sci., 11(3):1â€“
76, 2015.
[Jac15b]
B. Jacobs.
A recipe for state and eï¬€ect triangles.
In L. Moss
and P. Sobocinski, editors, Conference on Algebra and Coalgebra
in Computer Science (CALCO 2015), LIPIcs, 2015.
[Jan94]
Z. Janelidze. On the form of subobjects in semi-abelian and regular
protomodular categories.
Appl. Categorical Struct., 22(5-6):755â€“
766, 1994.
[JM12a]
B. Jacobs and J. Mandemaker. Coreï¬‚ections in algebraic quantum
logic. Found. of Physics, 42(7):932â€“958, 2012.
[JM12b]
B. Jacobs and J. Mandemaker. The expectation monad in quantum
foundations.
In B. Jacobs, P. Selinger, and B. Spitters, editors,
Quantum Physics and Logic (QPL) 2011, volume 95 of Elect. Proc.
in Theor. Comp. Sci., pages 143â€“182, 2012.
[Joh02]
P. Johnstone.
Sketches of an Elephant: A Topos Theory Com-
pendium. Number 44 in Oxford Logic Guides. Oxford Univ. Press,
2002. 2 volumes.
[JWW15]
B. Jacobs, B. Westerbaan, and A. Westerbaan. States of convex
sets. In A. Pitts, editor, Foundations of Software Science and Com-
putation Structures, number 9034 in Lect. Notes Comp. Sci., pages
87â€“101. Springer, Berlin, 2015.
147

[Kad56]
R. Kadison. Operator algebras with a faithful weakly-closed repre-
sentation. Annals of Mathematics, pages 175â€“181, 1956.
[Kap52]
Irving Kaplansky. Algebras of type I. Annals of Mathematics, pages
460â€“472, 1952.
[KL80]
M. Kelly and M. Laplaza. Coherence for compact closed categories.
Journ. of Pure & Appl. Algebra, 19:193â€“213, 1980.
[Koz81]
D. Kozen. Semantics of probabilistic programs. Journ. Comp. Syst.
Sci, 22(3):328â€“350, 1981.
[Koz85]
D. Kozen. A probabilistic PDL. Journ. Comp. Syst. Sci, 30(2):162â€“
178, 1985.
[KR97]
R. Kadison and J. Ringrose. Fundamentals of the theory of operator
algebras. American Mathematical Soc., 1997.
[LS13]
M. Leifer and R. Spekkens.
Towards a formulation of quantum
theory as a causally neutral theory of Bayesian inference. Phys.
Rev. A, 88(5):052130, 2013.
[MA86]
E. Manes and M. Arbib. Algebraic Approaches to Program Seman-
tics. Texts and Monogr. in Comp. Sci. Springer, Berlin, 1986.
[Mac50]
S. Mac Lane. An algebra of additive relations. Bull. Amer. Math.
Soc., 56:485â€“516, 1950.
[Mac71]
S. Mac Lane. Categories for the Working Mathematician. Springer,
Berlin, 1971.
[MM92]
S. Mac Lane and I. Moerdijk. Sheaves in Geometry and Logic. A
First Introduction to Topos Theory. Springer, New York, 1992.
[Nag74]
R. Nagel. Order unit and base norm spaces. In A. HartkÂ¨amper
and H. Neumann, editors, Foundations of Quantum Mechanics and
Ordered Linear Spaces, number 29 in Lect. Notes Physics, pages
23â€“29. Springer, Berlin, 1974.
[Pau02]
V. Paulsen. Completely bounded maps and operator algebras, vol-
ume 78. CUP, 2002.
[Qui67]
D. Quillen. Homotopical algebra. Number 43 in Lect. Notes Math.
Springer, Berlin, 1967.
[Ren14]
M. Rennela. Towards a quantum domain theory: Order-enrichment
and ï¬xpoints in wâˆ—-algebras. Electronic Notes in Theoretical Com-
puter Science, 308:289â€“307, 2014.
[Sak71]
S. Sakai. Câˆ—-algebras and W âˆ—-algebras, volume 60 of Ergebnisse der
Mathematik und ihrer Grenzgebiete. Springer, 1971.
[Sti55]
W. Stinespring. Positive functions on Câˆ—-algebras. Proceedings of
the American Mathematical Society, 6(2):211â€“216, 1955.
148

[SU15]
S. Staton and S. Uijlen. Eï¬€ect algebras, presheaves, non-locality
and contextuality. In M. HalldÂ´orsson, K. Iwama, N. Kobayashi,
and B. Speckmann, editors, Int. Coll. on Automata, Languages and
Programming, number 9135 in Lect. Notes Comp. Sci., pages 401â€“
413. Springer, Berlin, 2015.
[Tak01]
M. Takesaki. Theory of Operator Algebras I, volume 124 of Ency-
clopedia of Mathematical Sciences. Springer, 2nd edition, 2001.
[Tom57]
J. Tomiyama. On the projection of norm one in W âˆ—-algebras. Pro-
ceedings of the Japan Academy, 33(10):608â€“612, 1957.
[Top71]
D. Topping.
Lectures on von Neumann algebras.
Van Nostrand
Reinhold, 1971.
[Tul16]
S. Tull. Operational theories of physics as categories. forthcoming,
2016.
[Wei14]
T. Weighill. Biï¬brational duality in non-abelian algebra and the
theory of databases. MSc Thesis, 2014.
[Wes13]
B. Westerbaan.
Sequential product on eï¬€ect logics.
Mas-
terâ€™s thesis,
Radboud Univ. Nijmegen,
2013.
Available at
http://westerbaan.name/~bas/math/master.pdf.
[Wil12]
A. Wilce. Symmetry and self-duality in categories of probabilistic
models. In B. Jacobs, P. Selinger, and B. Spitters, editors, Quantum
Physics and Logic (QPL) 2011, volume 95 of Elect. Proc. in Theor.
Comp. Sci., pages 275â€“279, 2012.
[WW15]
B.
Westerbaan
and
A.
Westerbaan.
A
universal
prop-
erty
of
sequential
measurement.
Preprint
available
at
http://westerbaan.name/~bas/math/univ-prop-seq-prod.pdf,
2015.
149

Notation Index
[f, g], cotuple of maps f, g, 7
B(H ), space of operators on a Hilbert
space H , 40
End(X), homset of partial maps X â†’
X, 65
Â·Â·Â·
Â·Â·âœâœ, 11
Pred(X), collection of predicates on
an object X, 11
SStat(X), collection of substates of
an object X, 11
ShaPred(X), collection of sharp pred-
icates on an object X, 121
Stat(X), collection of states of an
object X, 11
Â·Â·Â·
Â·Â·âœ´âœ´âœâœâœâœ, 11
asrtp, assert map for predicate p
in a commutative eï¬€ectus, 66
in a monoidal eï¬€ectus with copiers,
80
asrtp, assert map for predicate p
in a telos, 133
when p is sharp, 115
!, unique map from an initial, or to
a ï¬nal, object, 8
{X|p}, comprehension of predicate
p on X, 84
âŸ¨âŸ¨f, gâŸ©âŸ©, partial pairing of f, g, 16
, ground map, 41
im(f), image of a map f, 54
imâŠ¥(f), image-supplement of a map
f, 54
instrp, instrument map for predicate
p, 68, 134
Îºi, i-th coprojection, 7
ker(f), kernel of a map f, 46
kerâŠ¥(f), kernel-supplement of a map
f, 47
|xâŸ©, element x as part of a formal
sum, 18
â€¹hâ€º = Îº1 â—¦h, embedding into Kleisli
category of the lift monad,
8
|=, validity given by the Born rule,
38
âˆ‡= [id, id], codiagonal, 8
Ï‰|p, conditional state, 71
1,
truth predicate, 10
truth functor, 82
âŠ¥, orthogonality, 26
>, partial sum, 26
, composition in the Kleisli cate-
gory of the lift monad, 7
Ï€i, i-th projection in a monoidal ef-
fectus, 76
+ sum of partial maps, 9
â†’, partial map, 7
âœ„i, i-th partial projection, 9
Endâ‰¤id(X), set of partial maps X â†’
X below the identity, 66
, composition, 7
+, sum of total maps, 7
tr, trace operation, 40
â†’, total map, 7
0,
falsity functor, 82
falsity predicate, 10
zero map, 8
p & q, sequential composition of pred-
icates p, q, 66
pâŠ¥, orthosupplement of predicate p,
10
xâŠ¥, orthosupplement in an eï¬€ect al-
gebra, 29
Ab, category of Abelian groups, 20
BA, category of Boolean algebras,
74
Caus(A), category of causal maps,
41
ConvM, category of convex sets over
an eï¬€ect monoid M, 36
CvNA, category of commutative von
Neumann algebras, 23
EA, category of eï¬€ect algebras, 29
EModM, category of eï¬€ect mod-
ules over an eï¬€ect monoid
M, 32
Kâ„“(âˆ’), Kleisli category, 19
OAb, category of ordered Abelian
groups, 20
OUG, category of order unit groups,
20
150

OUS, category of order unit spaces,
21
PCM, category of partial commu-
tative monoids, 26
Predâœ·(C), category of predicates in
an eï¬€ectus in partial form
C, 83
Par(B) Kleisli category of the lift
monad on B, 8
Pred(B) category of predicates in
an eï¬€ectus in total form B,
82
Sets, category of sets, 18
Tot(C), category of total maps in a
FinPAC with eï¬€ects C, 60
vNA, category of von Neumann al-
gebras, 21
copier, 80
D, distribution monad, 18
G, Giry monad, 19
M, multiset monad, 43
Dâ‰¤1, subdistribution monad, 19
semicartesian, 76
gâœ·, modal predicate transformer for
partial map g, 10
gâœ¸, modal predicate transformer for
partial map g, 10
f âˆ—, substitution predicate transformer
for total map f, 10
fâˆ—, state transformer associated with
total map f, 37
151

Subject Index
W âˆ—-algebra, 22
Abelian
â€“ group, 20
â€“ category, 126
aï¬ƒne function, 36
Bayesâ€™ rule, 71
biproduct, 41
â€“ category, 41
grounded â€“ category, 41
Boolean
â€“ eï¬€ectus, 66
â€“ algebra, 29, 73
Born rule, 38
bound, 27
Câˆ—-algebra, 22
cancellation, 29, 51
category
biproduct â€“, 41
extensive â€“, 107
ï¬nitely additive â€“, 58
grounded biproduct â€“, 41
causal map, 41
cokernel
â€“ map, 46
â€“ in an eï¬€ectus, 101
â€“ predicate, 46
commutative
â€“ eï¬€ectus, 66
â€“ von Neumann algebra, 23
completely positive map, 23
comprehension, 84
conditional state, 71
convex
â€“ combination, 18
â€“ set, 36
dinaturality, 51
distribution
â€“ monad, 18
discrete probability â€“, 19
eï¬€ect
â€“ monoid, 31
â€“ algebra, 29
â€“ module, 32
eï¬€ectus, 11
â€“ with comprehension, 84
â€“ in partial form, 64
â€“ in total form, 64
â€“ with quotients, 96
â€“ with both quotients and com-
prehension, 115
Boolean â€“, 66
commutative â€“, 66
monoidal â€“, 75
extensive category, 107
factorisation system
â€“ via comprehension maps, 121
â€“ via quotient maps, 105
ï¬nitely additive category, 58
FinPAC, see ï¬nitely additive cate-
gory
â€“ with eï¬€ects, 60
fuzzy predicate, 19
Giry monad, 19
ground map, 41
grounded biproduct category, 41
group
Abelian â€“, 20
order unit â€“, 20
image, 54
sharp â€“, 54
internal
â€“ mono, 47
â€“ epi, 54
involutive map, 22
kernel, 46
â€“ predicate, 46
â€“ map, 46
â€“ in an eï¬€ectus, 94
monad
distribution â€“, 18
Giry â€“, 19
subdistribution â€“, 19
monoid
eï¬€ect â€“, 31
152

partial commutative â€“, 26
monoidal eï¬€ectus, 75
multiplicative map, 22
normal map, 23
normalisation, 40, 51, 71
order unit
â€“ group, 20
â€“ space, 21
orthomodular lattice, 121
partial
â€“ map, 8
â€“ pairing, 16
â€“ projection, 9
PCM, see partial commutative monoid
positive
â€“ element, 22
â€“ map, 20
â€“ sum, 29, 51
completely â€“, 23
positive map between von Neumann
algebras, 22
predicate
â€“ functor, 33
â€“ in an eï¬€ectus, 11
fuzzy â€“, 19
PsU, positive subunital, 21
PU, positive unital, 20
pullback lemma, 12
pure state, 35
â€“ of a qubit, 23
qubit, 23
quotients, 96
re-indexing, 10
scalar multiplication
â€“ in an eï¬€ect module, 32
â€“ on homsets, in presence of ten-
sor, 79
â€“ on substates, 35
self-adjoint, 22
sharp
â€“ element of an eï¬€ect algebra,
53
â€“ predicate
â€“ on a qubit, 23
â€“ on a von Neumann algebra,
86
collection of â€“, 121
side-eï¬€ect free map, 66
state
â€“ functor, 37
â€“ in an eï¬€ectus, 11
conditional â€“, 71
pure â€“, 35
â€” of a qubit, 23
state and eï¬€ect triangle, 38
strict initial object, 14
subconvex combination, 19
subdistribution monad, 19
substate in an eï¬€ectus, 11
substitution, 10
subunital map
â€“ between von Neumann alge-
bras, 22
â€“ in an order unit group, 21
telos, 130
total map
â€“ in a FinPAC with eï¬€ects, 60
â€“ in a category of partial maps,
8
ultraweak
â€“ continuity, 25
â€“ convergence, 25
â€“ topology, 25
unital map
â€“ between von Neumann alge-
bras, 22
â€“ in an order unit group, 20
von Neumann algebra, 22
commutative â€“, 23
153

