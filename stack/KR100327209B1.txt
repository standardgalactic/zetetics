등록특허 10-0327209
 
(19) 대한민국특허청(KR)
(12) 등록특허공보(B1)
(51) 。Int. Cl. 6
G06F 3/033
(45) 공고일자
(11) 등록번호
(24) 등록일자
2002년04월17일
10-0327209
2002년02월22일
(21) 출원번호
10-1998-0016969
(65) 공개번호
특1999-0084901
(22) 출원일자
1998년05월12일
(43) 공개일자
1999년12월06일
(73) 특허권자
삼성전자 주식회사
윤종용
경기 수원시 팔달구 매탄3동 416
(72) 발명자
이진철
경기도 안양시 동안구 호계동 1063-11
(74) 대리인
권석흠
이영필
심사관 : 류동현
(54) 첨펜의자취를이용한소프트웨어키보드시스템및그에따른키코드인식방법
요약
    
본 발명은 첨펜의 자취를 이용한 소프트웨어 키보드시스템 및 그 에 따른 키코드 인식방법에 관한 것으로서, 키보드 이
미지나 다른 정보를 표시하는 스크린, 투명하며 상기 스크린 위에 덮여 있고, 사용자가 첨펜을 이용하여 누르는 위치에 
따라 좌표값을 발생하는 터치패널, 상기 터치패널에서 발생하는 아날로그좌표값을 디지털좌표값으로 변환시키는 아날
로그/디지털변환기, 사용자가 상기 터치패널 위에 접촉시켜 좌표값이나 연속된 좌표값을 입력시키기 위한 첨펜, 상기 
스크린에 표시되는 키보드를 구성하는 키들의 이름과 각 키에 배열된 복수의 키코드들에 대한 방향정보를 포함하는 키
보드정보를 저장하는 메모리, 및 상기 스크린에 상기 키보드 이미지를 표시하도록 제어하고, 상기 아날로그/디지털변환
기에서 출력된 상기 첨펜의 자취에 대한 디지털값을 입력하여, 상기 메모리로부터 키보드정보를 읽어, 상기 첨펜의 자
취의 방향범위를 검색하고, 검색된 방향범위에 해당되는 키코드를 발생시키는 중앙처리장치를 포함하여, 하나의 키에 
여러 개의 코드를 부여함으로써 키의 개수를 줄일 수 있기 때문에, 키보드의 크기는 작아지면서도 키의 크기는 작아지
지 않으므로 키의 사용이 용이하다.
    
대표도
도 1
명세서
 
- 1 -

등록특허 10-0327209
 
도면의 간단한 설명
도 1은 본 발명에 의한 첨펜의 자취를 이용한 소프트웨어 키보드시스템의 구성블럭도이다.
도 2는 도 1에 도시된 터치패널/스크린의 상세 구성도이다.
도 3은 도 1에 도시된 메모리에 키보드 정보가 저장된 예를 나타낸 도면이다.
도 4a 내지 4b는 스크린에 나타난 키보드 이미지 및 그에 따른 키코드 배열의 일 예를 나타낸 도면이다.
도 5a 내지 도 5b는 스크린에 나타낸 키보드 이미지 및 그에 따른 키코드 배열의 다른 예를 나타낸 도면이다.
도 6은 자취의 방향을 구하는 방법과 코드의 방향범위의 예를 도시한 도면이다.
도 7a 내지 도 7d는 발생된 키코드의 이미지를 변경하는 일 예를 나타낸 도면이다.
도 8a 내지 도 8d는 발생된 키코드의 이미지를 변경하는 다른 예를 나타낸 도면이다.
도 9는 첨펜의 자취를 구하는 방법에 대한 흐름도이다.
도 10은 키코드발생을 설명하기 위한 흐름도이다.
도 11은 도 10에 도시된 첨펜의 자취방향을 계산하는 단계의 상세 흐름도이다.
도 12의 a 내지 도 12의 d는 본 발명에 따른 자취방향을 구하는 다른 방법을 설명하기 위한 도면이다.
발명의 상세한 설명
    발명의 목적
    
발명이 속하는 기술 및 그 분야의 종래기술
본 발명은 터치스크린을 이용한 소프트웨어 키보드시스템에 관한 것으로서, 특히, 하나의 키에 복수개의 키코드를 부여
하고, 그 키 위에서 움직이는 첨펜의 자취를 판단하여, 그에 해당되는 하나의 키코드를 발생하는 첨펜의 자취를 이용한 
소프트웨어 키보드시스템 및 그에 따른 키코드 인식방법에 관한 것이다.
전자수첩이나, 손바닥 PC(Palm PC 또는 Hand-held PC) 등과 같은 소형 휴대용 PC들은 정보를 입력하기 불편한 단
점이 있다. 즉, 작은 면적 위에 수십 개의 키를 갖는 키보드를 제공하는 제품의 특성 때문에, 각 키들의 크기는 작아질 
수밖에 없고, 사용자가 이 작은 키들을 이용하여 실수없이 빠르게 정보를 입력하기란 결코 쉽지 않다.
이러한 문제점을 해결하기 위해, 터치스크린을 이용한 소프트웨어 키보드를 제품에 적용하는 것이 일반적인 추세이다. 
다음에 설명되는 종래기술들은 터치스크린을 이용한 소프트웨어키보드를 이용하는 시스템의 일예들이다.
AT& T사의 특허(USP NO. 4,725,694)에 의하면, CPU가 터치패널이 부착된 스크린에 전체 키보드의 이미지를 디스
플레이한 경우로서, 사용자가 터치패널을 누르면, CPU는 눌러진 터치패널의 위치를 인식하여, 그 위치가 키보드 이미
지 영역의 키이면, 그 키가 실제로 눌러진 것처럼 키이미지를 표시하고, 그 키에 부여된 코드를 발생시키도록 동작한다.
그러나, AT& T사의 특허는 전체 키보드를 한 스크린에 나타내야 하기 때문에, 스크린의 크기가 작은 경우, 각 키들의 
크기가 작아져서, 사용자가 각 키들의 영역을 정확히 선택하기가 어렵고, 일반적으로 터치패널의 표면이 미끄럽고 오차
가 있기 때문에 사용자가 의도하지 않은 키가 선택될 가능성이 높다.
 
- 2 -

등록특허 10-0327209
 
또한, Apple사의 특허(USP NO. 5,612,719)에 의하면, CPU가 터치패널이 부착된 스크린에 동작버튼(gesture bott
om) 이미지를 디스플레이한 후, 사용자가 동작버튼 이미지 영역 위의 터치패널을 누르거나 그 위를 움직이는 경우, 펜
의 움직임에 따라, 각각 몇 개의 다른 동작모드가 실행된다. 즉, 첨펜이 스크린 위에 놓여 있을 때와, 또는 그렇지 않을 
때와, 또는 pop-up 메뉴를 표시할 때 등에 따라 서로 다른 동작모드가 실행되게 한다.
그러나, 이 경우 예약된 어떤 특정한 펜의 움직임에 대해서는 pop-up 메뉴를 나타나게 하여 사용자가 추가 기능을 선
택할 수 있도록 하고 있지만, 사용자가 추가기능을 선택하기 위해, pop-up 메뉴를 띄우고, 띄워진 pop-up 메뉴에서 
원하는 다른 메뉴를 선택하는 두 단계의 입력과정을 거쳐야 한다.
    
발명이 이루고자 하는 기술적 과제
본 발명은 상술한 문제점을 해결하기 위해 창출된 것으로서, 하나의 키에 복수개의 키코드들을 부여하고, 그 키 위에서 
그려진 첨펜의 자취에 따라, 상기 부여된 키코드 중에 하나의 키코드를 발생시키는 첨펜의 자취방향을 이용한 소프트웨
어 키보드시스템을 제공하는 것을 제1목적으로 하고, 그에 따른 키코드 인식방법을 제공하는 것을 제2목적으로 한다.
    발명의 구성 및 작용
    
상기의 제1목적을 달성하기 위한 본 발명에 따른, 터치스크린을 이용한 소프트웨어 키보드시스템은 키보드 이미지나 다
른 정보를 표시하는 스크린; 투명하며 상기 스크린 위에 덮여 있고, 사용자가 첨펜을 이용하여 누르는 위치에 따라 좌표
값을 발생하는 터치패널; 상기 터치패널에서 발생하는 아날로그좌표값을 디지털좌표값으로 변환시키는 아날로그/디지
털변환기; 사용자가 상기 터치패널 위에 접촉시켜 좌표값이나 연속된 좌표값을 입력시키기 위한 첨펜; 상기 스크린에 
표시되는 키보드를 구성하는 키들의 이름과 각 키에 배열된 복수의 키코드들에 대한 방향정보를 포함하는 키보드정보
를 저장하는 메모리; 및 상기 스크린에 상기 키보드 이미지를 표시하도록 제어하고, 상기 아날로그/디지털변환기에서 
출력된 상기 첨펜의 자취에 대한 디지털값을 입력하여, 상기 메모리로부터 키보드정보를 읽어, 상기 첨펜의 자취의 방
향범위를 검색하고, 검색된 방향범위에 해당되는 키코드를 발생시키는 중앙처리장치를 포함하는 것이 바람직하다.
    
상기 중앙처리장치는 발생된 키코드의 이미지를 사용자가 구별할 수 있도록 잠시동안 다른 키코드 이미지와 구별시켰
다가 원상태로 환원시킨다.
상기 메모리는 각 키에 배열된 복수의 키코드와 그에 대응되는 방향범위를 매칭시켜 기록된 키코드배열정보와, 상기 키
코드배열정보와 키의 이름을 매칭시켜 기록된 키배열정보가 기록된다.
상기 스크린에 표시된 키보드는 한 개의 키에 각각 다른 방향정보를 갖는 적어도 2개 이상의 키코드가 할당된다.
상기 방향정보는 키에 대한 첨펜의 자취방향의 최소값, 최대값 및 최소값과 최대값의 포함유무를 나타낸다.
상기의 제2목적을 달성하기 위한 본 발명에 따른, 키코드 인식방법은 (a) 키보드의 이미지를 표시하는 과정; (b) 첨펜
의 자취를 구하는 과정; (c) 상기 첨펜의 자취가 상기 키보드 이미지의 영역 내에 있고, 어떤 키의 영역 내에 있는지를 
판단하는 과정; (d) 상기 키 위에서 그려지는 첨펜의 자취방향을 구하는 과정; 및 (e) 상기 자취방향에 따른 키코드정
보를 검색하여 그에 상응하는 키코드를 발생시키는 과정을 포함하는 것이 바람직하다.
상기 (e) 과정에서 발생된 키코드를 다른 키코드들과 구별되게 표시시키는 과정을 더 포함한다.
상기 첨펜의 자취를 구하는 과정(b)은 (b1) 상기 첨펜이 터치패널에 초기에 닿는 시작점 좌표를 구하는 과정; (b2) 일
정시간이 경과한 후, 다시 첨펜이 터치패널에 닿는 좌표를 구하는 과정; 및 (b3) 상기 (b2)과정이 끝점인가를 판단하
여 끝점이면 끝점을 구하고 아니면, (b2)과정을 반복하여 끝점을 구하는 과정을 포함한다.
 
- 3 -

등록특허 10-0327209
 
상기 어떤 키의 영역 내에 있는지를 판단하는 과정(c)은 자취의 모든 좌표들의 x, y값이 키의 영역으로 정의되는 x, y 
값 범위 내에 있는지를 검사하거나, 또는 자취의 일부 좌표들의 x, y값이 키의 영역으로 정의되는 x, y 값 범위 내에 있
는지를 검사한다.
상기 자취의 방향을 구하는 과정(d)은 (d1) 상기 자취의 시작점 좌표와 끝점 좌표로 만들어지는 벡터를 구하는 과정; 
(d2) 상기 구해진 벡터의 크기를 계산하는 과정; (d3) 상기 계산된 벡터의 크기와 기준 최소 벡터크기와 비교하는 과
정; 및 (d4) 상기 비교결과, 상기 벡터의 크기가 최소 벡터크기보다 작으면 상기 자취의 방향을 0도로 하고, 상기 벡터
의 크기가 최소 벡터크기보다 크면 상기 벡터가 수평선과 이루는 각을 계산하여 자취의 방향을 구하는 과정을 포함한다.
상기 벡터를 구하는 과정(d1)은, 첨펜이 터치패널 위에서 미끄러지는 특성을 고려하여 자취로부터 삐침 성분을 제거한 
후, 상기 벡터를 구한다.
상기 자취의 방향을 구하는 과정(d)은 상기 첨펜의 자취를 복수개 구하고, 상기 구해진 복수의 자취로부터 각각의 벡터
를 구한 후, 상기 구해진 벡터로부터 그 방향을 결정한 후, 결정된 방향을 평균하여 자취의 방향을 구한다.
이하, 첨부된 도면을 참조하여 본 발명을 보다 상세히 설명한다.
도 1은 본 발명에 의한 첨펜의 자취를 이용한 소프트웨어 키보드시스템의 구성블럭도이다.
도 1에 도시된 키보드시스템은 터치패널/스크린(100), 첨펜(stylus)(102), A/D변환기(104), 중앙처리장치(106), 
메모리(108) 및 클럭발생기(110)로 이루어진다.
도 2는 도 1에 도시된 터치패널/스크린의 상세 구성도로서, 스크린은 중앙처리장치(106)의 제어에 따라, 키보드 또는 
정보이미지를 나타내는 수단이고, 터치패널은 투명한 물질로 만들어지고 스크린 위에 덮여져 있으며, 사용자가 첨펜(1
02)을 이용하여 터치패널을 위치에 따라 터치패널의 가로방향과 세로방향에 대한 좌표값이 발생된다. 도 2에 도시된 
경우는 스크린과 터치패널이 일체화된 것이다.
첨펜(102)은 사용자가 터치패널 위에 접촉시키기 위한 수단으로, 원하는 키를 선택하기 위한 수단이다.
아날로그/디지털변환기(104)는 첨펜(102)이 터치패널(100) 위에서 움직임에 따라 발생하는 가로방향과 세로방향의 
아날로그 좌표값을 디지털 좌표값으로 변환시킨다.
메모리(108)는 롬(108a)과 램(108b)을 포함하고, 키보드에 관한 정보를 저장한다.
클럭발생기(110)는 중앙처리장치(106)와 다른 블럭들을 동기화시킨다.
    
중앙처리장치(106)는 스크린(100)에 키보드 이미지를 표시하도록 제어하고, 상기 터치패널(100)에 상기 첨펜(102)
이 닿아 움직이는 동안 발생한 좌표값을 출력하는 상기 아날로그/디지털변환기(104)를 통해 상기 좌표값을 이용하여, 
상기 키보드의 어떤 키의 영역 안에 있는지를 판단하고, 자취의 벡터크기를 구하고, 상기 벡터의 방향을 계산한 후, 상
기 메모리(108)의 키배열정보에서 상기 벡터가 그려진 키의 키정보를 검색하고, 상기 키정보에서 코드배열을 검색하고, 
상기 코드배열에서 상기 벡터의 방향을 포함하는 방향범위를 검색하여, 그에 대응되는 키코드를 발생시키고, 상기 키코
드의 이미지를 잠시동안 다른 키코드들과 구별되게 변환시켜 상기 키코드가 발생했음을 사용자에게 확인시켜 준다.
    
도 3은 도 1에 도시된 메모리에 키보드 정보가 저장된 예를 나타낸 도면으로서, 참조부호 108은 키보드 정보가 저장된 
메모리를 나타내고, 참조부호 306은 키보드를 구성하는 키들의 이름과 그에 대응되는 키정보를 나타내는 키배열정보를 
나타내고, 참조부호 308은 방향범위 정보와 그에 대응되는 키코드를 나타내는 코드배열정보를 나타낸다.
    
 
- 4 -

등록특허 10-0327209
 
메모리(108)에 저장된 키보드 정보(30)는 키배열정보(306)를 포함한다. 키배열정보(306)는 키보드 내에 있는 키들
의 이름, 예를 들어 ABCD, FGHIJ, ..., 등을 나타내는 키이름(302)과 그 키에 부여된 복수의 키코드들의 배열정보(3
08)가 저장된 메모리의 주소를 나타내는 키정보(304)가 대응되도록 구성되어 있다. 또한, 키코드 배열정보(308)는 그 
키가 가지고 있는 키코드(312)들과 대응되는 방향범위정보(310)를 갖고 있다. 방향범위정보(310)는 키 위에 그려지
는 첨펜의 자취방향범위의 최소값과 최대값을 나타낸다.
    
도 4a 내지 4b는 스크린에 나타난 키보드 이미지 및 그에 따른 키코드 배열의 일 예를 나타낸 도면이다.
도 4a에 있어서, 참조부호 40은 키보드이고, 참조부호 42는 키보드(40)를 구성하는 키이고, 참조부호 44는 키(42)에 
배열된 복수의 키코드들을 나타낸다. 도 4b는 키코드 배열의 일예로서, 각 키코드들은 각각 중복되지 않는 방향범위를 
갖는다.
    
도 4a에 도시된 경우, 키보드(40)가 열 개의 키들(42)을 가지고 있고, 하나의 키(42)는 '6', '5', 't', 'y'와 같은 4개 
또는 그 이하의 키코드들(44)을 가지고 있다. 또한 도 4b의 경우, 키(42)의 각 키코드들(44)은 방향범위가 주어지는
데, 키코드 '6'의 방향범위는 0도 보다 크거나 같고 90도 보다 작다. 키코드 '5'의 방향범위는 90도 보다 크거나 같고 
180도 보다 작다. 키코드 't'의 방향범위는 180도 보다 크거나 같고 270도 보다 작다. 코드 'y'의 방향범위는 270도 보
다 크거나 같고 360도 보다 작다.
    
도 5a 내지 도 5b는 스크린에 나타낸 키보드 이미지 및 그에 따른 키코드 배열의 다른 예를 나타낸 도면이다.
도 5a에 있어서, 참조부호 50은 키보드이고, 참조부호 52는 키보드(50)를 구성하는 키이고, 참조부호 54는 하나의 키
(52)에 배열된 키코드를 나타낸다. 도 5b는 키(52)에 대한 키코드들의 방향범위를 나타낸다.
    
도 5a의 경우, 키보드(50)가 세 개의 키(52)를 가지고 있고, 하나의 키(52)는 9개 또는 그 이하의 키코드들을 가지고 
있다. 또한 도 5b의 경우, 키(52)의 각 키코드는 방향범위가 주어져 있는데, 키코드 'y'의 방향범위는 22.5도보다 크거
나 같고 67.5도 보다 작다. 키코드 't'의 방향범위는 67.5도보다 크거나 같고 112.5도 보다 작다. 키코드 'r'의 방향범
위는 112.5도보다 크거나 같고 157.5도 보다 작다. 키코드 'f'의 방향범위는 157.5도보다 크거나 같고 202.5도 보다 
작다. 키코드 'v'의 방향범위는 202.5도보다 크거나 같고 247.5도 보다 작다. 키코드 'b'의 방향범위는 247.5도보다 크
거나 같고 292.5도 보다 작다. 키코드 'n'의 방향범위는 292.5도보다 크거나 같고 337.5도 보다 작다. 키코드 'h'의 방
향범위는 337.5도보다 크거나 같고 382.5도 보다 작다. 키코드 'g'의 방향범위는 중앙에 있으므로 0도이다.
    
도 6은 키 위에 그려지는 첨펜의 자취방향을 구하는 방법과 방향범위의 예를 나타낸 도면이다.
    
키(61)는 중앙에 하나의 키코드(A)와 네 모서리에 각각 하나씩의 키코드들(B, C, D, E)을 가지고 있고, 자취(69)의 
시작점(62)과 끝점(63)의 좌표값에 의해 만들어지는 벡터(64)의 크기가 산출된다. 산출된 벡터의 크기가 최소반경(
66)에 의해 만들어진 최소 벡터크기(65)와 비교하여, 최소 벡터크기(65) 이하이면 그 벡터(64)의 방향은 0도로 결정
하고, 그 벡터(64)의 크기가 최소 벡터크기(65) 이상이면 그 벡터(64)가 수평선(67)과 만드는 각(68)을 계산하여 방
향을 결정한다.
    
도 6에 도시된 일예는 자취의 벡터방향이 0도 보다 크고 90도 보다 작다. 여기서, 최소 벡터크기(65)는 키의 크기와 
터치패널의 오차범위 등을 고려하여 선택되는 값으로서 시스템마다 다르게 정의될 수 있다.
    
 
- 5 -

등록특허 10-0327209
 
도 3에 도시된 경우는 도 6에 도시된 키(61)의 키코드배열정보(308)의 예이고, 키(61)의 이름은 'ABCDE'로 주어져 
있다. 자취(69)의 방향이 0도 보다 크고 90도보다 작으므로 중앙처리장치(106)는 키코드 'B'를 발생시킨다. 즉, 이와 
같은 방법으로, 중앙처리장치(106)는 자취의 방향이 90도 보다 크거나 같고 180도 보다 작으면 키코드 'C'를 발생시
키고, 자취의 방향이 180도 보다 크거나 같고 270도 보다 작으면 키코드 'D'를 발생시키고, 자취의 방향이 270도 보다 
크거나 같고 360도 보다 작으면 키코드 'E'를 발생시킨다. 이 때, 중앙처리장치(106)가 키코드(312)를 발생시킬 경우, 
발생된 키코드의 이미지(61)를 변경하여 사용자가 확인할 수 있도록 한다.
    
도 7a 내지 도 7d는 발생된 키코드의 이미지를 변경하는 일 예를 나타낸 도면으로서, 4개의 키코드(1, 2, q, w)가 배열
된 키(71)에서 사용자가 첨펜을 이용하여 여러 방향으로 자취를 그리면, 그 자취의 방향에 따라 4개의 키코드 중에서 
한 개의 키코드가 발생하고, 발생된 키코드를 사용자에게 확인시키는 예이다.
도 7a는 키(71)의 왼쪽 위방향으로 자취(73)를 그려 키코드 '1'을 발생하는 예이고, 도 7b는 오른쪽 윗방향으로 자취
(75)를 그려 키코드'2'를 발생하는 예이고, 도 7c는 왼쪽 아랫방향으로 자취(77)를 그려 키코드 'q'를 발생하는 예이며, 
도 7d는 오른쪽 아랫방향으로 자취(79)를 그려 키코드 'w'를 발생하는 예이다.
중앙처리장치(106)는 이와 같이 발생된 키코드를 사용자가 확인할 수 있도록 그 이미지를 변경시킨다. 즉, 도 7a는 키
(71) 위에 그려진 자취(73)에 의해 선택된 키코드(74), 즉 '1'의 글꼴색과 배경색을 발생되지 않은 키코드들과 구별되
도록 다른색으로 바꾸는 것이다.
도 7b, 도 7c, 도 7d의 경우도 상기와 같이 선택된 키코드(78)(79), 즉 'q'와 'w'의 글꼴색과 배경색을 다른색으로 바
꾸는 것이다. 중앙처리장치(106)는 이와 같이 글꼴과 배경색이 변경된 키코드를 일정한 시간이 경과하거나 사용자가 
다른 자취를 그릴 때, 글꼴색과 배경색을 원래의 색으로 환원시킨다.
도 8a 내지 도 8d는 발생된 키코드의 이미지를 변경하는 다른 예를 나타낸 도면으로서, 하나의 키코드(s)가 중앙에 있
고 8개의 키코드들(e, w, q, a, z, x, c, d)이 네 모서리와 4면에 배치되어 있는 키(81)에서 사용자가 여러 방향으로 
자취를 그리고, 그 자취의 방향에 따라 9개 키코드 중에서 한 개의 키코드가 발생하고, 발생된 키코드를 사용자에게 확
인시키는 예이다.
도 8a는 왼쪽 윗방향으로 자취(82)를 그려 키코드'q'가 발생하는 예이고, 도 8b는 오른쪽 윗방향으로 자취(84)를 그려 
키코드 'e'를 발생하는 예이고, 도 8c는 윗방향으로 자취(86)를 그려 키코드 'w'를 발생하는 예이고, 도 8d는 최소 벡
터크기보다 작은 자취를 그려 키코드 's'를 발생하는 예이다.
중앙처리장치(106)는 이와 같이 발생된 코드를 사용자가 확인할 수 있도록 선택된 키코드만을 크게 보이게 하고, 그렇
지 않은 키코드들은 보이지 않게 한다.
도 8a는 키(81) 위에 그려진 자취(82)에 의해 선택된 키코드 'q'가 크게 보이도록 하고 다른 키코드들은 보이지 않게 
한다. 또한, 도 8b, 도 8c, 및 도 8d의 경우도 도 8a와 같이, 선택된 키코드 'e', 'w','s'가 크게 보이도록 하고 다른 키
코드들은 보이지 않게 한다.
도 4, 도 5에 도시된 바와 같이, 스크린(100)에 여러 개의 키들을 갖는 키보드 이미지가 나타나서, 도 6에 도시된 바와 
같이, 사용자는 어떤 키의 이미지 위의 터치패널에 첨펜으로 자취를 그리면, 중앙처리장치(106)는 아날로그/디지털변
환기(104)를 통해 디지털로 변환된 자취데이터를 얻는다. 여기서 자취는 첨펜이 터치패널에 닿아 있는 동안 일정한 시
간간격으로 얻는 첨펜의 좌표값들의 모임이다.
이어서, 중앙처리장치(106)에서 첨펜의 자취를 구하는 방법을 설명하면 다음과 같다. 도 9는 첨펜의 자취를 구하는 방
법에 대한 흐름도이다.
    
첨펜(102)이 터치패널(100)에 닿으면 터치패널(100)로부터 인터럽트신호(109)가 발생한다(90 단계). 인터럽트신
 
- 6 -

등록특허 10-0327209
 
호(109)가 발생하면 중앙처리장치(106)는 아날로그/디지털변환기(104)를 통해 첨펜(102)이 터치패널에 닿았는지를 
판단한다(92 단계). 첨펜(102)이 터치패널(100)에 닿았으면 중앙처리장치(106)는 아날로그/디지털변환기(104)를 
통해 첨펜(102)의 좌표값을 구한다(94 단계). 일정시간이 경과한 후(96 단계), 중앙처리장치(106)는 다시 아날로그
/디지털변환기(104)를 통해 첨펜(102)이 터치패널에 닿았는지를 판단한다(98 단계). 첨펜(102)이 여전히 터치패널
(100)에 닿아 있는 경우, 아날로그/디지털변환기(104)를 통해 첨펜(102)의 또 다른 좌표를 구한다(94 단계). 이와 
같은 단계를 반복하여(94 내지 98 단계), 중앙처리장치(106)는 첨펜(102)의 자취를 구할 수 있다.
    
이와 같이 구해진 첨펜의 자취에 상응하는 키코드를 발생시킨다. 도 10은 키코드발생을 설명하기 위한 흐름도이다.
먼저, 도 9에 도시된 흐름도를 통해, 중앙처리장치(106)는 첨펜(102)의 자취를 얻는다(100 단계).
또한, 중앙처리장치(106)는 구해진 첨펜(102)의 자취가 키보드 이미지의 영역 내에 있는지를 판단한다(102 단계). 
만약 첨펜(102)의 자취가 키보드 이미지 영역 내에 있을 경우, 중앙처리장치(106)는 그 자취가 어떤 키의 영역 내에 
있는지를 판단한다(104 단계). 첨펜(102)의 자취가 어떤 키의 영역 내에 있으면, 그 자취의 방향을 계산한다(106 단
계).
    
중앙처리장치(106)는 계산된 자취의 방향에 대응되는 키코드를 발생한다(108 단계) 즉, 중앙처리장치(106)는 도 3
에 도시된 바와 같이, 메모리(108)에 저장된 키보드정보들(30)로부터 키배열(306)을 검색하고, 키배열(306)로부터 
자취가 그려진 키의 키정보(304)를 검색하고, 키정보(304)로부터 코드배열(308)을 검색하고, 코드배열(308)에 있는 
각 코드의 방향범위들(310)과 자취의 방향을 비교하여 자취의 방향이 포함된 방향범위가 있는 경우, 그 방향범위와 대
응되는 키코드(312)를 발생시킨다.
    
중앙처리장치(106)는 발생된 키코드의 이미지를 다른 키코드들과 구별되도록 잠시동안 변경하여 사용자에게 확인시킨 
후(110 단계), 키의 본래의 이미지로 복원시킨다(118 단계). 즉, 도 7과 도 8을 통해 설명한 바와 같이, 발생된 키코
드를 사용자가 확인할 수 있도록 글꼴 또는 색상을 변경시키거나, 발생된 키코드만을 보여주는 방법이 사용된다.
도 11은 도 10에 도시된 첨펜의 자취방향을 계산하는 단계의 상세 흐름도이다.
도 6에 도시된 바와 같이, 자취(69)의 시작점(62)의 좌표값(x1, y1)과 끝점(63)의 좌표값(x2, y2)을 구한다(106a 
단계).
시작점과 끝점의 좌표로부터 벡터의 크기를 계산한다(106b 단계). 즉 두 점간의 거리를 구하는 다음과 같은 수학식1 
에 의해 벡터의 크기(D)가 계산된다.
수학식 1
D = ROOT { (x_2 -x_1 )^2 + (y_2 - y_1 )^2}
계산된 벡터의 크기(D)가 최소 벡터크기(65)보다 크거나 같은지를 판단한다(160c 단계). 만약, 벡터의 크기가 최소 
벡터크기보다 작으면 그 자취(69)의 방향을 0도로 결정하고(106d 단계), 그 벡터의 크기가 최소 벡터크기(65)보다 
크면 벡터(64)와 수평선(67)이 이루는 각(68)을 계산하여 자취(69)의 방향을 구한다(106e 단계). 즉 시작점(x1,y
1)과 끝점(x2, y2)이 이루는 벡터의 각에 의해 자취의 방향을 구한다.
한편, 본 발명의 다른 실시예로서, 도 2에 도시된 터치패널과 스크린이 각각 분리된 경우에도 적용될 수 있다. 이러한 
예로는 데스크탑 컴퓨터에서 입력수단으로 이용되는 터치패드가 있다. 이런 경우에는 중앙처리장치(106)가 스크린 위
에 키보드 이미지를 그리는 대신, 터치패드위에 키보드 이미지를 물리적인 방법으로 인쇄하거나 부착할 수 있다.
    
 
- 7 -

등록특허 10-0327209
 
또한, 키 위에 자취를 그릴 때, 자취를 구성하는 모든 점이 그 키 영역 안에 있지 않더라도 자취가 키영역안에 있는 것
으로 판단할 수 있다. 즉, 자취가 키 영역 안에 있는지를 판단하는 방법의 예는 다음과 같다. 첫째, 자취의 모든점의 좌
표값(x, y)들이 키의 영역으로 정의된 범위 내에 있으면 자취가 키의 영역안에 있다고 판단하는 방법과, 둘째, 자취의 
시작점의 좌표값(x1,y1)이 키의 영역으로 정의된 범위 내에 있으면 나머지 점들의 위치에 관계없이 자취가 키의 영역
에 있다고 판단하는 방법과, 셋째, 자취의 끝점의 좌표값이 키의 영역으로 정의된 범위 내에 있으면 나머지 점들의 위치
에 관계없이 자취가 키의 영역안에 있다고 판단하는 방법과, 넷째, 자취의 시작점(x1,y1)과 끝점(x2,y2)이 만드는 선
분 중에서 키의 영역으로 정의된 범위 내에 있는 부분의 길이가 전체성분의 길이의 절반을 넘으면 자취가 키의 영역에 
있다고 판단하는 방법이 있다.
    
    
또한, 자취의 방향을 구할 때, 자취의 시작점과 끝점 이외에 다른 점들을 이용할 수도 있다. 도 12의 a 내지 도 12의 d
는 본 발명에 따른 자취방향을 구하는 다른 방법을 설명하기 위한 도면이다. 도 12의 a와 도 12의 b에 도시된 바와 같
이 첨펜이 터치패널 위에서 미끄러지는 특성을 고려하여 자취로부터 삐침 성분을 제거한 후, 자취의 방향을 구하는 방
법과, 도 12의 d에 도시된 바와 같이, 자취의 여러 점을 이용하여 평균방향을 구하는 방법이 있을 수 있다. 즉, 첨펜의 
자취를 복수개 구하고, 상기 자취의 시작점에서 두 번째 점에 이르는 벡터를 구하는 방법으로, 각 점에서 그 다음 점에 
이르는 모든 벡터를 구한 후, 모든 벡터의 방향평균을 각 벡터의 길이에 비례하는 가중치를 두어 구하여, 상기 평균방향
이 자취의 방향이 되게 한다.
    
    발명의 효과
상술한 바와 같이 본 발명에 의하면, 하나의 키에 여러 개의 코드를 부여함으로써 키의 개수를 줄일 수 있기 때문에 키
보드의 크기는 작아지면서도 키의 크기는 작아지지 않으므로 키의 사용이 용이하며, 키가 두 개이상의 기능을 갖는 경
우 사용자는 두 단계의 입력작업으로 하나의 기능을 선택한 것에 비하면,, 키보드가 자취의 방향을 인식하여 다른 키를 
발생시키므로 한 단계의 입력만으로 복수개의 코드를 가진 키에서 원하는 키코드를 발생시킬 수 있다.
(57) 청구의 범위
청구항 1.
터치스크린을 이용한 소프트웨어 키보드시스템에 있어서,
키보드 이미지나 다른 정보를 표시하는 스크린;
투명하며 상기 스크린 위에 덮여 있고, 사용자가 첨펜을 이용하여 누르는 위치에 따라 좌표값을 발생하는 터치패널;
상기 터치패널에서 발생하는 아날로그좌표값을 디지털좌표값으로 변환시키는 아날로그/디지털변환기;
사용자가 상기 터치패널 위에 접촉시켜 좌표값이나 연속된 좌표값을 입력시키기 위한 첨펜;
상기 스크린에 표시되는 키보드를 구성하는 키들의 이름과 각 키에 배열된 복수의 키코드들에 대한 방향정보를 포함하
는 키보드정보를 저장하는 메모리; 및
상기 스크린에 상기 키보드 이미지를 표시하도록 제어하고, 상기 아날로그/디지털변환기에서 출력된 상기 첨펜의 자취
에 대한 디지털값을 토대로 상기 첨펜이 상기 키보드의 어떤 키의 영역 안에 있는지 판단하고, 상기 첨펜의 자취의 벡터
크기를 구하여 상기 메모리로부터 해당되는 키보드정보를 읽어, 상기 첨펜의 자취의 벡터 방향을 포함하는 방향범위를 
검색하고, 검색된 방향범위에 해당되는 키코드를 발생시키는 중앙처리장치를 포함하는 소프트웨어 키보드시스템.
청구항 2.
 
- 8 -

등록특허 10-0327209
 
제1항에 있어서, 상기 중앙처리장치는 발생된 키코드의 이미지를 사용자가 구별할 수 있도록 잠시동안 다른 키코드 이
미지와 구별시켰다가 원상태로 환원시킴을 특징으로 하는 소프트웨어 키보드시스템.
청구항 3.
제2항에 있어서, 상기 중앙처리장치는 상기 발생된 키코드의 이미지의 글꼴과 배경색을 다른 키코드의 이미지와 구별되
는 색으로 변환시킴을 특징으로 하는 소프트웨어 키보드시스템.
청구항 4.
제2항에 있어서, 상기 중앙처리장치는 상기 발생된 키코드의 글꼴을 다른 키코드의 글꼴보다 크게 표시하고, 다른 키코
드들을 표시하지 않는 것을 특징으로 하는 소프트웨어 키보드시스템.
청구항 5.
제1항에 있어서, 상기 메모리는 각 키에 배열된 복수의 키코드와 그에 대응되는 방향범위를 매칭시켜 기록된 키코드배
열정보와, 상기 키코드배열정보와 키의 이름을 매칭시켜 기록된 키배열정보가 기록됨을 특징으로 하는 소프트웨어 키보
드시스템.
청구항 6.
제1항에 있어서, 상기 스크린에 표시된 키보드는 한 개의 키에 각각 다른 방향정보를 갖는 적어도 2개 이상의 키코드가 
할당됨을 특징으로 하는 소프트웨어 키보드시스템.
청구항 7.
제6항에 있어서, 상기 방향정보는 키에 대한 첨펜의 자취방향의 최소값, 최대값 및 최소값과 최대값의 포함유무를 나타
냄을 특징으로 하는 소프트웨어 키보드시스템.
청구항 8.
터치패널을 이용하는 소프트웨어 키보드시스템에 있어, 키코드 인식방법에 있어서,
(a) 키보드의 이미지를 표시하는 과정;
(b) 첨펜의 자취를 구하는 과정;
(c) 상기 첨펜의 자취가 상기 키보드 이미지의 영역 내에 있고, 어떤 키의 영역 내에 있는지를 판단하는 과정;
(d) 상기 키 위에서 그려지는 첨펜의 자취방향을 구하는 과정; 및
(e) 상기 자취방향에 따른 키코드정보를 검색하여 그에 상응하는 키코드를 발생시키는 과정을 포함하는 키코드 인식방
법.
청구항 9.
제8항에 있어서, 상기 (e) 과정에서 발생된 키코드를 다른 키코드들과 구별되게 표시시키는 과정을 더 포함하는 것을 
특징으로 하는 키코드 인식방법.
청구항 10.
 
- 9 -

등록특허 10-0327209
 
제8항에 있어서, 상기 첨펜의 자취를 구하는 과정(b)은
(b1) 상기 첨펜이 터치패널에 초기에 닿는 시작점 좌표를 구하는 과정;
(b2) 일정시간이 경과한 후, 다시 첨펜이 터치패널에 닿는 좌표를 구하는 과정; 및
(b3) 상기 (b2)과정이 끝점인가를 판단하여 끝점이면 끝점을 구하고, 아니면 상기 (b2)과정부터 다시 반복하여 끝점
을 구하는 과정을 포함하는 것을 특징으로 하는 키코드 인식방법.
청구항 11.
제8항에 있어서, 상기 어떤 키의 영역 내에 있는지를 판단하는 과정(c)은
자취의 모든 좌표들의 x, y값이 키의 영역으로 정의되는 x, y 값 범위 내에 있는지를 검사함을 특징으로 하는 키코드 
인식방법.
청구항 12.
제8항에 있어서, 상기 어떤 키의 영역 내에 있는지를 판단하는 과정(c)은
자취의 일부 좌표들의 x, y값이 키의 영역으로 정의되는 x, y 값 범위 내에 있는지를 검사함을 특징으로 하는 키코드 
인식방법.
청구항 13.
제8항에 있어서, 상기 자취의 방향을 구하는 과정(d)은
(d1) 상기 자취의 시작점 좌표와 끝점 좌표로 만들어지는 벡터를 구하는 과정;
(d2) 상기 구해진 벡터의 크기를 계산하는 과정;
(d3) 상기 계산된 벡터의 크기와 기준 최소 벡터크기와 비교하는 과정; 및
(d4) 상기 비교결과, 상기 벡터의 크기가 최소 벡터크기보다 작으면 상기 자취의 방향을 0도로 하고, 상기 벡터의 크기
가 최소 벡터크기보다 크면 상기 벡터가 수평선과 이루는 각을 계산하여 자취의 방향을 구하는 과정을 포함하는 것을 
특징으로 하는 키코드 인식방법.
청구항 14.
제13항에 있어서, 상기 벡터를 구하는 과정(d1)은, 첨펜이 터치패널 위에서 미끄러지는 특성을 고려하여 자취로부터 
삐침 성분을 제거한 후, 상기 벡터를 구함을 특징으로 하는 키코드 인식방법.
청구항 15.
제8항에 있어서, 상기 자취의 방향을 구하는 과정(d)은
상기 첨펜의 자취를 복수개 구하고, 상기 자취의 시작점에서 시작하여 두 번째 점에 이르는 벡터를 구하는 방법으로 각 
점에서 시작하여 그 다음 점에 이르는 모든벡터를 구하고, 모든 벡터의 방향평균을 각 벡터의 길이에 비례하는 가중치
를 두어 구하여 상기 평균방향이 자취의 방향이 되도록 함을 특징으로 하는 키코드 인식방법.
 
- 10 -

등록특허 10-0327209
 
도면
도면 1
도면 2
 
- 11 -

등록특허 10-0327209
 
도면 3
도면 4a
 
- 12 -

등록특허 10-0327209
 
도면 4b
도면 5a
도면 5b
 
- 13 -

등록특허 10-0327209
 
도면 6
도면 7a
 
- 14 -

등록특허 10-0327209
 
도면 7b
도면 7c
도면 7d
도면 8a
 
- 15 -

등록특허 10-0327209
 
도면 8b
도면 8c
도면 8d
 
- 16 -

등록특허 10-0327209
 
도면 9
 
- 17 -

등록특허 10-0327209
 
도면 10
 
- 18 -

등록특허 10-0327209
 
도면 11
 
- 19 -

등록특허 10-0327209
 
도면 12
 
- 20 -

