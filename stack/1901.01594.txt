ON THE UNICITY OF FORMAL CATEGORY THEORIES
YONEDA STRUCTURES, YOSEGI BOXES, EQUIPMENTS
IVAN DI LIBERTI: AND FOSCO LOREGIAN;
Abstract. We prove an equivalence between cocomplete Yoneda structures and
certain proarrow equipments on a 2-category K. In order to do this, we recognize the
presheaf construction of a cocomplete Yoneda structure as a relative, lax idempotent
monad sending each admissible 1-cell f : A Ã‘ B to an adjunction P !f % P Ëšf. Each
cocomplete Yoneda structure on K arises in this way from a relative lax idempotent
monad â€˜with enough adjoint 1-cellsâ€™, whose domain generates the ideal of admissibles,
and the Kleisli category of such a monad equips its domain with proarrows. We call
these structures yosegi. Quite often, the presheaf construction associated to a yosegi
generates an ambidextrous Yoneda structure; in such a setting there exists a fully
formal version of Isbell duality.
Contents
1.
Introduction
1
2.
Preliminaries.
4
3.
Yosegi boxes
7
4.
Yosegi boxes are Yoneda structures are equipments
16
5.
The importance of being P 1
20
Appendix A.
Relative monads on 2-categories
28
Appendix B.
Algebras for relative 2-monads
33
References
37
1. Introduction
Category theory attempted many times to axiomatize the essential features of the
â€˜presheaf constructionâ€™ sending a small category A to rAop, Sets. Diï¬€erent facets of this
construction (the operation of free cocompletion, the properties of the Yoneda embedding,
Isbell duality, coend calculus and the theory of profunctors) suggest diï¬€erent directions
for its eï¬ƒcient formalization; yet, even now that category theory reached its maturity, a
â€˜tautologyâ€™ like the Yoneda lemma remains a profound and slightly mysterious statement.
The present paper tries to unveil part of this mystery.
The ï¬rst author is supported by grants GA17-27844S and MUNI/A/1103/2017. The second author is
supported by the Max Planck Inst. for Math. (Bonn), and wrote the present paper, in its entirety,
during his stay at the Institute. Both authors warmly thank prof. Davide Bernardini, for his kind help
reviewing a draft of the present paper. The reader interested in acquiring a copy of his â€˜Notes on Yoneda
structuresâ€™ can write him at davide.bernardini@uniroma1.it.
1
arXiv:1901.01594v1  [math.CT]  6 Jan 2019

2
DI LIBERTI AND LOREGIAN
We shall say at the outset that our work ï¬ts into a solid track of previous research:
in order to properly axiomatize the presheaf construction, the Australian school of cat-
egory theory introduced the main notion we will be working with, Yoneda structures
[SW78, Str81]; they give an eï¬ƒcient axiomatization for the properties of the Yoneda
embedding, regarded as a cornerstone of category theory. A solution to the problem
of which 2-categories harbor a form of Yoneda lemma, spelled out in the language of
internal ï¬brations, appeared earlier than (and somehow motivated) Yoneda structures in
[Str74b].
Alternative approaches are also possible:
â€š Woodâ€™s proarrow equipments (see our Deï¬nition 2.10, containing the original
deï¬nition in [Woo82, Woo85, RW88]) were introduced as an abstraction of the
bicategory of profunctors (see [BÂ´eer, CW05, CP89] and [Lor15, Â§5] for a sur-
vey) on which the 2-category cat of small categories embeds. This perspective
focuses on the idea that categories are no more than multi-object monoids, and
presheaves are modules over which these monoids act.
â€š Related to proarrow equipment is the notion of an hyperdoctrine, introduced by
Lawvere in [Law69] and expanded in [Pis12, Pis10] in view of its relation to
indexed category theory.
â€š The formalism of KZ-doctrines (called, in a more precise taxonomy, lax idempo-
tent 2-monads) axiomatizes the universal property of the presheaf construction
as free cocompletion; the notion was ï¬rst introduced by Kock in [Koc95], and a
link with Yoneda structure was ï¬rst indirectly suggested by [BF99], and explicitly
developed in [Wal18]. Here, the author sketches a very clear connection between
KZ-doctrines [Koc95] and Yoneda structures: a locally fully faithful KZ-doctrine
yields a Yoneda structure once a compatible ideal of admissible maps is speciï¬ed.
Yoneda structures, ï¬brational cosmoi [Str74a], and proarrow equipments, all endow a
2-category with additional information about a â€˜calculus of bimodulesâ€™ (the Yoneda em-
bedding yA : A Ã‘ rAop, Sets, or rather its mate homA : Aop Ë† A Ã‘ Set, is the identity
1-cell for A in the bicategory Prof of profunctors). On the other hand, a KZ-doctrine S
endows a 2-category K with a procedure to build S-cocomplete objects. These approaches
are arguably related in an explicit way: easily, the strict 2-category of small categories
A, B, . . . , cocontinuous functors f : P A Ã‘ P B between their presheaf categories and
natural transformations is the strictiï¬cation of the bicategory Prof.
The present work builds an explicit connection between the universal property of
rAop, Sets as free cocompletion, and the calculus of profunctors â€“embodied in the equiv-
alence between presheaves on A and discrete opï¬brations on A. Under suitable assump-
tions (those of our Theorem 4.3), it is possible to show that the three approaches yield
equivalent theories: given a certain special kind of KZ-doctrine, its Kleisli bicategory
contains a calculus of profunctors (see Â§4.2); given a suï¬ƒciently well-behaved proarrow
equipment (see Â§4.3 and the deï¬nition of a Yoneda equipment in 2.4) it is possible to
recover the KZ-doctrine it comes from.
The recent [FGHW16], oï¬€ered us the main tool towards this equivalence result. In the
paper, the authors introduce the notion of relative pseudomonads to keep track of the
fact that the presheaf construction A ÃÃ‘ rAop, Sets is not a monad stricto sensu, since it
can only take small categories as inputs: their Example 4.2 shows that when r
op, Sets is
regarded as a relative pseudomonad, its Kleisli bicategory consists of the bicategory Prof

YOSEGI AND YONEDA
3
of profunctors. It is natural to conjecture that this is a particular example of a much
general phenomenon involving the presheaf construction P of a generic Yoneda structure:
the present paper answers this conjecture in the positive, showing Theorem 4.3.
Following this result, every cocomplete Yoneda structure on a 2-category K yields a
relative pseudomonad P : A Ã‘ K via its presheaf construction, and the Kleisli bicat-
egory Kâ„“pP q is a proarrow equipment; it is in fact a proarrow equipment of a certain
well-behaved kind (Deï¬nition 4.1), since it comes equipped with a j-relative adjunction
between A and the Kleisli bicategory Kâ„“pP q (j : A Ä‚ K is the inclusion of â€˜admissibleâ€™
1-cells in K). Our Â§4.3 shows how such equipments allow one to reconstruct the Yoneda
structure they come from.
Thus, it is possible to recover an equivalence between the above approaches to formal
category theory, that correspond each other via the notion of a relative lax idempotent
monad â€˜with enough adjoint 1-cellsâ€™. We found the notion rich and interesting per se, and
thus indulged to concoct a special name for such monads: a functor P as in Deï¬nition 3.18
will be called a yosegi box, or a yosegi for short).
Overall, Theorem 4.3 produces a
satisfying answer to [Lor], clarifying to what extent Yoneda structures and proarrow
equipments can be considered on the same footing.
We conceived the deï¬nition of yosegi in Deï¬nition 3.18 in order to prove the equiva-
lence as a result of a chain of implications
â£yosegi
boxes
(
t
Yoneda
structures u
â£
Yoneda
equipments
(
Â§4.2
Â§4.1
Â§4.3
(in this diagram each label denotes which subsection proves the implication). Our The-
orem 4.3 provides a dictionary to translate results between the two settings of Yoneda
structures and equipments. Our Â§5.1 initiates a systematic study of which properties
of a yosegi endow the associated equipment and the associated Yoneda structure with
additional features. We show, for example, how a narrower and better-behaved class of
yosegis still covers all 2-categories of the form V-CAT.
Somehow, the deï¬nition of yosegi is engineered in order to axiomatize the presheaf
construction; on the other hand, it is willingly more general than those presheaf con-
structions appearing in the wild, where e.g. P is a â€˜representableâ€™ functor r
op, â„¦s for
some â„¦P K; such constructions are the most natural example of Yoneda structure, and
arise [Web07] when â„¦classiï¬es discrete opï¬brations in K. Reasonably mild assumptions
on K ensure that â„¦â€“ P p1q (this is true a fortiori when â„¦is a classiï¬er in a 2-topos
[Web07]).
In the present work, we wanted to avoid making further assumptions on K, like those
ensuring that the Yoneda structure is borne by a ï¬brational cosmos [Str74a, Str80] or a
2-topos structure on K. We could narrow our study to the yosegi giving rise to ï¬brational
cosmoi and the good Yoneda structures of Weber; in this respect, it is natural to wonder
which Yoneda equipments turn the representing object of P into a classiï¬er. We leave
the question open for future development.
Instead, here we concentrate on studying ambidextrous yosegi, where the yosegi P has
a left adjoint Q; this gives rise to a very rich theory, formalizing the behaviour of the
presheaf construction on Cat.

4
DI LIBERTI AND LOREGIAN
Ambidextrous yosegi correspond to cocomplete, ambidextrous Yoneda structure, where
both a covariant and a contravariant Yoneda embedding interact nicely: Deï¬nition 5.12
provides the precise deï¬nition for such a notion, that we expanded from a private com-
munication [Beres] (it is our sincere hope that our work will spur the author to make
this interesting survey available to the public); Remark 5.8 observes that ambidextrous
Yoneda structures correspond quite naturally to equipments where each 1-cell f : A Ã‘ B
is sent to a pair of adjoints Bpf, 1q % Bp1, fq in its Kleisli bicategory.
Like all theories where a sensible notion of duality is hard-coded, ambidexterity is a
particularly rich asset to K:
adïœ±) we can re-enact Isbell duality in an ambidextrous Yoneda structure. This is the
main topic investigated in Deï¬nition 5.14 and the subsequent claims. Moreover,
adïœ²) every respectable category theory must contain a full-ï¬‚edged co/end calculus; in
an ambidextrous yosegi we can deï¬ne the coend operation
Â´ B : rA_ Ë†A, Bs Ã‘ B
in Â§5.2.1, and in the particular case where B â€œ P 1, deï¬ne the bicategory of â€˜P -
profunctorsâ€™.
This last point, in particular, visibly closes the circle of equivalences between formal
category theories.
Appendices A and B contain a survey of technical results: Appendix A is entirely
devoted to an explicit description of the skew monoidal structure [Szl12] on a functor
category rX, Ys having as skew-monoidal unit a prescribed functor J : X Ã‘ Y: when
the left extension along J exists, and deï¬nes a functor J!, the skew monoidal structure
is deï¬ned by the rule F Å½ G :â€œ J!F Â¨ G (J!F is an endofunctor of Y, so the composition
makes sense). As noted in Remark A.2, Appendix A oï¬€ers a formal argument showing
[ACU10, Thm. 3.1] holds in fair generality for abstract 2-categories: relative monads can
now deï¬ned to be internal monoid in this skew monoidal structure, so theyâ€™re particular
functors T : X Ã‘ Y with maps Âµ : T Å½ T Ã± T and Î· : J Ã± T satisfying the monad
axioms: of course, since the Å½ skew monoidal structure is highly non-associative and
non-unital in full generality, we cannot expect but a feeble reminiscence of the monad
properties (as noted in Remark B.2, when T ï¬‚J Å½T or T ï¬‚T Å½J the notion of T-algebra
loses meaning: ï¬nding the minimal assumptions under which they can be deï¬ned is the
aim of Appendix B, where we sketch the basic theory of lax idempotent relative monads
and their algebras.
2. Preliminaries.
The present section collects the necessary amount of 1- and 2-dimensional category
theory we shall employ in the following discussion, mainly for ease of future reference.
The deï¬nition of pointwise and absolute extensions, relative adjunctions, and obviously
the deï¬nition of Yoneda structure come from [SW78] (we slightly diï¬€er from Street-
Waltersâ€™ terminology in that we do not mention â€˜axiom 3Ëšâ€™); the notion of cocomplete
Yoneda structure is a rielaboration of [BF99]; the deï¬nition of proarrow equipment is the
original one given in [Woo82], but see the subsequent [Woo85, RW88] for some variations
on the original axioms.
2.1. Conventions. Among diï¬€erent foundational conventions that one may adopt, we
implicitly ï¬x a universe U, whose elements are termed sets; small categories have a set

YOSEGI AND YONEDA
5
of morphisms; locally small categories are now small in a bigger universe U` Ä… U; this is
called the two-universe convention.
We shortly denote cat the 2-category of small categories, Cat the 2-category of U`-
small categories (each of whose hom is a set). Generic 1-categories are denoted with
uppercase Latin letters C, D, . . . with the sole exception of â€˜specialâ€™ categories of algebraic
structures, like e.g. sets, abelian groups and modules over a ring: Set, Ab . . . ; generic
2-categories are denoted in mathcal face, K, H, . . . , but again speciï¬c 2-categories like
cat, Cat are denoted in a sans-serif face.
Sometimes, when there is an adjunction between two 1-cells f, u, we adopt f
Î·
Ïµ u as
a compact notation to denote all at once that f is left adjoint to u, with unit Î·: 1 Ã± uf
and counit Ïµ: fu Ã± 1. Given a 1-cell f and a 2-cell Î±, the whiskering of f and Î±, i.e.
the horizontal composition of Î± and the identity 2-cell of f, is denoted f Ëš Î± or Î± Ëš f
(according to the side of whiskering).
Notation 2.1 (Conventions about extensions and lifts). While it is obvious that the
notions of right and left extension and lift correspond each other under the involutions
p
qop, p
qco, p
qcoop : K Ã‘ K (each taken with its appropriate variance), it is useful
to have a diagram illustrating at once these universal constructions: the deï¬nition of
Yoneda structure relies on the notion of left extension (and on a minor note, left lifting),
so we will usually refer to left extensions to outline formal deï¬nitions; however, all four
notions in (2.1) are perfectly dual: moving horizontally reverses the direction of 1-cells,
but not of 2-cells; moving vertically but not horizontally reverses the direction of 2-cells,
but not of 1-cells.
A
Ã±
Î·
g

f
/ B
C
langf
;
langf Ã‘ h
f Ã‘ hg
liftgf Ã‘ h
f Ã‘ gh
C
g

B
f
/
liftgf
;
A
Ã±
Î·
A
Ã±
Îµ
g

f
/ B
C
rangf
;
hg Ã‘ f
h Ã‘ rangf
h Ã‘ riftgf
gh Ã‘ f
C
g

B
f
/
riftgf
;
A
Ã±
Îµ
(2.1)
We say that a pair xu, Î·y exhibits the left extension langf of f : A Ã‘ B along g : A Ã‘ C,
but we indulge almost always to denote u â€œ langf. As it is customary, we say that a
left (resp., right) extension is pointwise if for every object C and k : X Ã‘ C the diagram
obtained pasting at g the comma object pg{kq (resp., pk{gq) is again a left extension
[Str81, 5.2], and that it is absolute if it is preserved by all 1-cells; the same nomenclature
applies to deï¬ne pointwise and absolute lifts.
Deï¬nition 2.2 (Relative adjunction). Let f : A Ã‘ X, g : X Ã‘ B be a pair of 1-cells
in a 2-category K, and j : A Ã‘ B; f is a j-relative left adjoint to g if there is a 2-cell
Î· : j Ã± gf such that the pair xf, Î·y exhibits the absolute left lifting of j along g.
Remark 2.3. If K â€œ Cat, a relative adjunction consists equivalently of a natural iso-
morphism Bpja, gxq â€“ Xpfa, xq or an isomorphism of profunctors Bpj, gq â€“ Xpf, 1q.

6
DI LIBERTI AND LOREGIAN
We now introduce the notion of Yoneda structure and proarrow equipment (Deï¬ni-
tion 2.10).
Deï¬nition 2.4 (Yoneda structure). A Yoneda structure on a 2-category K consists of
Yoneda data:
ydïœ±) An ideal JP of 1-cells called â€˜admissibleâ€™; arrows in this ideal determine admis-
sible objects in the class JP ,0 Ä K: A is admissible if such is its identity 1-cell.
ydïœ²) Each admissible object A has a â€˜Yoneda arrowâ€™ yA : A Ã‘ P A to an object called
the â€˜presheaf objectâ€™ of A.
ydïœ³) every admissible morphism f : A Ã‘ B with admissible domain ï¬ts into a triangle
A
P A
B
Ï‡f
Ã±
f
yA
Bpf,1q
(2.2)
ï¬lled by a 2-cell Ï‡ : yA Ã‘ Bpf, fq â€œ: Bpf, 1q Â¨ f.
These data satisfy the following properties:
yaïœ±) The pair xBpf, 1q, Ï‡fy exhibits the left extension LanfyA.
yaïœ²) The pair xf, Ï‡fy exhibits the absolute left lifting LiftBpf,1qyA.
yaïœ³) The pair x1P A, 1yAy exhibits the left extension LanyAyA.
yaïœ´) Given a pair of composable 1-cells A
fÃÃ‘ B
gÃÃ‘ C, the pasting of 2-cells
A
P A
B
P B
C
f
yA
yB
g
P f
Cpg,1q
Ï‡yBf
Ï‡g
(2.3)
exhibits the extension LangfyA â€œ Cpgf, 1q.
Remark 2.5 (A few remarks on the axioms). Note how axiom yaïœ²asserts that f is the
yA-relative left adjoint (see Deï¬nition 2.2) of Bpf, 1q. Axioms 3-4 together entail that
A ÃÃ‘ P A is a pseudofunctor, whose coherence morphisms are deï¬ned by the universal
property of left extensions; for example, deï¬ning P f as LanyBÂ¨fyA â€œ P BpyB Â¨ f, 1q it
follows from axiom yaïœ³that BpyA, 1q â€œ P p1Aq â€“ 1P A. The intuition behind this is
that the Yoneda embedding is a dense map: the left extension along itself exists, it is
pointwise and it is exhibited by the identity 1-cell 1P A.
Notation 2.6. For reasons that will appear evident in Notation 3.1, we denote the
correspondence f ÃÃ‘ P BpyB Â¨ f, 1q as P Ëšf.
Deï¬nition 2.7 (Cocomplete Yoneda Structure). Each axiom of Deï¬nition 2.4 encodes
a certain facet of the Yoneda lemma; a cocomplete Yoneda structure allows to mimic the
universal property of P A as free cocompletion of A, and it provides as well a weak form

YOSEGI AND YONEDA
7
of calculus of extensions. We say a Yoneda structure is cocomplete when in the triangle
A
P B
P A
f
yA
lanyAg
(2.4)
where f P JP ,
â€š the 1-cell lanyAf exists;
â€š exhibits the left adjoint lanyAf % P Bpf, 1q;
â€š lanyAf preserves lanyCg for every map g : C Ã‘ P A.
Remark 2.8. The existence of this Kan extension mirrors the notion of â€˜cocompleteness
with respect to a KZ-doctrineâ€™ employed by [Wal18].
Remark 2.9. In a cocomplete Yoneda structure there is an analogue of the â€˜nerve-
realizationâ€™ paradigm relating the left extension of a 1-cell along Yoneda to its nerve
Bpf, 1q: this was already exploited in [DLL18, 2.16]. It was originally conjectured by the
authors that, given the existence lanyAf in the diagram above, it was possible to derive
the adjunction lanyAf % Bpf, 1q from the axioms of Yoneda structure, especially yaïœ². In
Cat this is in fact possible because such a Kan extension is always pointwise. Apparently
the same results does not seem to follow in full generality. Instead, in a cocomplete
Yoneda structure yaïœ²can be derived by lanyAf % Bpf, 1q and thus is redundant.
As already said, the deï¬nition of proarrow equipment that follows comes from [RW88]
where it is spelled out for bicategories; for us, A is a strict 2-category.
Deï¬nition 2.10 (Proarrow equipment). Let pËš : A Ã‘ M be a functor between bi-
categories; pËš is said to equip A with proarrows or to be a proarrow equipment for A
if
peïœ±) pËš is locally fully faithful;
peïœ²) for every arrow f P A, pËšf has a right adjoint in M.
We will adhere to the customary tradition to treat A as a locally full sub-bicategory
of M, with the same objects.
3. Yosegi boxes
3.1. The presheaf construction on Cat. In the present section we study the pair
pCat, P q, where P : cat Ã‘ Cat is the presheaf construction sending A ÃÃ‘ rAop, Sets; this
is deï¬ned having domain the category cat of small categories, and codomain the locally
small ones; the embedding of cat into Cat will always be denoted as j : cat Ä‚ Cat: it is
an inclusion at the level of all cells.
We ï¬x a notation that can be easily generalized to the case of a pair pK, P q, where
P : A Ã‘ K is the presheaf construction of a Yoneda structure on K. The section is
designed in order to make the deï¬nition of yosegi in Deï¬nition 3.18 and the leading
argument in the proof of Theorem 4.3 appear natural and notationally straightforward.
Notation 3.1 (Presheaves). We consider the functor P : A ÃÃ‘ rAop, Sets as a covariant
correspondence on functors and natural transformations; more formally, P acts as a
correspondence cat Ã‘ Cat sending functors f : A Ã‘ B to adjoint pairs P !f : P A Ã”

8
DI LIBERTI AND LOREGIAN
P B : P Ëšf, and its action on 2-cells is determined by our desire to privilege the left
adjoint, inducing a 2-cell Î±! : P !f Ã± P !g for each Î± : f Ã± g.
Given f : A Ã‘ B,
the functor P Ëšf :â€œ P BpyB Â¨ f, 1q acts as pre-composition with f, whereas P !f is the
operation of left extension along f. The situation is conveniently depicted in the diagram
A
B
P A
P B
f
yA
yB
P !f
P Ëšf
(3.1)
Such diagram is ï¬lled by an isomorphism when it is closed by the 1-cell P !f and by the
cell Ï‡yBÂ¨f, as in Remark 2.5, when it is closed by P Ëšf.
Deï¬nition 3.2 (Small functor and small presheaf). Let X be a category; we call a
functor F : Xop Ã‘ Set a small presheaf if it results as a small colimit of representables;
equivalently, F is small if it exist a small subcategory i : A Ä‚ X and a legitimate presheaf
Â¯F : Aop Ã‘ Set of which the functor F is the left Kan extension along i.
Remark 3.3. The same deï¬nition applies, of course, to a functor F : X Ã‘ Y between
two large categories.
Notation 3.4 (Small presheaves). It turns out that the category of small presheaves on
X is legitimate in the same universe of X (while the category of all functors Xop Ã‘ Set
isnâ€™t). Given a locally small category there is a Yoneda embedding X Ã‘ rXop, Setss,
having the universal property of free cocompletion of X (see [AR18, Â§3]). We explicitly
record how the functor r
op, Setss : Cat Ã‘ Cat acts on 1- and 2-cells: the universal
property of r
op, Setss proved in [AR18] implies that in the square
A
B
rAop, Setss
rBop, Setss
f
yA
yB
(3.2)
the dotted arrow exists (it is the Yoneda extension of yB Â¨ f). The action of r
op, Setss
on 2-cells is uniquely determined as a consequence of this deï¬nition.
Remark 3.5. Unlike the previous case, the 1-cell LanyApyB Â¨ fq does not have a right
adjoint; the reason is simple: such an adjoint would correspond to
Â¨ f, which however
doesnâ€™t always restrict its action to small presheaves yielding a functor rBop, Setss Ã‘
rAop, Setss. Fortunately, it does if f satisï¬es a certain condition that we call propriety.
Deï¬nition 3.6 (Proper functor). A functor f : A Ã‘ B is called proper if for each
i : Â¯B Ã‘ B having small domain, the comma category pi{fq (exists and it is) is small.
In such an assumption, if Q P rY op, Setss, we can consider the diagram
pi{fq
E
X
Y
Set
Ã±
i1
Ã±
Â¯
Q
i
f
Q
(3.3)
since Q â€“ i! Â¯Q is pointwise, the whole diagram is still a left extension, so f ËšpQq â€“ i1
!p Â¯QÂ¨f 1q.

YOSEGI AND YONEDA
9
Remark 3.7. All functors with small domain are proper (so in particular every Yoneda
embedding yA : A Ã‘ rAop, Sets is proper); another suï¬ƒcient condition is to be fully
faithful; proper maps, extended to be deï¬ned on 2-categories, recover the notion of ideal
of admissibles in [SW78].
Lemma 3.8. Let j : cat Ä‚ Cat be the embedding of small categories in locally small ones.
For every large category X there is a natural isomorphism rXop, Setss â€“ LanjP pXq (a
convenient shorthand is to denote the left extension of P along j as j!P ; this is compatible
with the notation in Appendix A and we will adopt it without further mention). More
in particular, there is a canonical isomorphism between P Å½ P â€œ j!P Â¨ P and the functor
rpP
qop, Setss, where for a large category X, the category rXop, Setss designates small
presheaves Xop Ã‘ Set.
Proof. To show that the universal property of the Kan extension is fulï¬lled by rXop, Setss
we employ a density argument: given a functor H : Cat Ã‘ Cat, every natural transforma-
tion Î± : P Ã± H Â¨ j can be extended to a natural transformation Â¯Î± from small presheaves
to H, using the fact that each F P rXop, Setss can be presented as a small colimit of
representables: the components of Â¯Î±X are deï¬ned, if F â€“ i! ËœF P rXop, Setss for i : A Ã‘ X,
as
rXop, Setss
iËš
ÃÃ‘ rAop, Setss â€œ rAop, Sets
Î±A
ÃÃÃ‘ HjA â€œ HA Hi
ÃÃÃ‘ H.X
Corollary 3.9. From this it follows that there is a canonical integral isomorphism
rXop, Setss â€“
Ë† APcat
rX, Asop Ë† rA, Sets
(3.4)
(in particular, this speciï¬c coend exists even if it is indexed over a non-small category);
this will turn out to be useful in the proof of Lemma 3.11.
Remark 3.10. It is reasonable to expect j!P to be the small-presheaf construction;
this construction is the legitimate version of the Yoneda embedding associated to a
(possibly large) category X. It is important to stress our desire to exploit the results
in [FGHW16], but minding that P has additional structure (their approach qualiï¬es
P as a monad, but only in the sense that it is a j-pointed functor, endowed with a
unit Î· : j Ã‘ P and with a â€˜Kleisli extensionâ€™ map â€“instead of a monad multiplicationâ€“
sending each f : jA Ã‘ P B to f â€¹ : P A Ã‘ P B); in view of Deï¬nition-Proposition A.1,
now we would like to say that rcat, Cats is a skew-monoidal category with skew unit j,
and composition pF , Gq ÃÃ‘ j!F Â¨ G: this would yield â€˜iterated presheaf constructionsâ€™
P Å½ P , P Å½ P Å½ P , . . . , all seen as functors cat Ã‘ Cat. Unfortunately, given a functor
F : cat Ã‘ Cat it is impossible to ensure that j!F exists in general (cat is a U`-category,
and Cat canâ€™t be U`-cocomplete), thus â€“if anythingâ€“ the skew-monoidal structure of
Deï¬nition-Proposition A.1 does not exist globally. Fortunately some left extensions â€“
precisely those we needâ€“ exist, so we can still employ the â€˜localâ€™ existence of j!P and its
iterates to work as if it was part of a full monoidal structure.
It also turns out (and this is by no means immediate, see Lemma 3.12) that the unitors
Î»P : j Å½ P Ã‘ P and Ï±P : P Ã‘ P Å½ j and the associator Î³P : pP Å½ P q Å½ P Ã‘ P Å½ pP Å½ P q
are all invertible.
Apart from their relevance in view of our Theorem 4.3, the preliminary results in this
section legitimate the practice to naively consider iterated presheaf constructions: once

10
DI LIBERTI AND LOREGIAN
we consider small functors, the category rXop, Setss lives in the same universe of X, and
so do all categories rrAop, Setsop, Sets, rrrAop, Setsop, Setsop, Sets.
Lemma 3.11 (j!P preserves itself). There is a canonical isomorphism
ËœÎ³P P : j!pj!P Â¨ P q â€“ j!P Â¨ j!P .
(3.5)
Proof. Relying on the previous lemma, we compute the coend
j!pj!P Â¨ P q â€“
Ë† APcat
rA, Xs Ë† rpP Aqop, Setss
(3.6)
which is now isomorphic to rrXop, Setsop
s , Setss in view of the Yoneda reduction and of
Lemma 3.8 (note that the deï¬nition of Î»A.P A and Î»A.j!P A entail that Î»A.rP Aop, Sets
is covariant in A).
â–¡
Lemma 3.12. There are canonical isomorphisms Î»P : j Å½ P â€“ P , Ï±P : P â€“ P Å½ j and
Î³P P P : pP Å½ P q Å½ P â€“ P Å½ pP Å½ P q, determined as in sïœ±â€“sïœ³.
Proof. The isomorphisms come from the unit and associativity constraints of sïœ±-sïœ³; as
noted in Remark A.3, Ï± is invertible in every component because j is fully faithful, and
similarly Î» is invertible in every component if we show that j is a dense functor. Once
we have shown this, Lemma 3.11 above will conclude, since from (A.9) the associator
Î³P P P coincides with the composition ËœÎ³P P Ëš P .
Now, the functor j is dense, because the full subcategory of Cat on the generic com-
mutative triangle â–³r2s is dense. So cat, being a full supercategory of a dense category,
is dense.
â–¡
Remark 3.13. We often write Î·P , P Î·, ÂµP . . . to denote what should be written as Î·Å½P ,
P Å½Î·, ÂµÅ½P . . . Keeping in mind Remark A.5, that clariï¬es what is the formal deï¬nition
for Å½-whiskerings, there is non chance of confusion: Î· Å½ P â€œ j!Î· Ëš P , P Å½ Î· â€œ j!P Ëš Î·,
and similarly for every other whiskering.
We now would like to prove the following result:
Proposition 3.14. The presheaf construction P â€œ r
op, Sets is a lax idempotent j-
relative monad.
In order to do so, we have to deï¬ne what lax idempotent relative monads are: giving
a self-contained survey of this matter is the purpose of Appendix A and Appendix B. As
already said, we only slightly detour from the approach in [FGHW16]:
A relative monad T : X Ã‘ Y is the formal equivalent of a monad in the skew-monoidal
structure prX, Ys, Å½q; on rcat, Cats, such structure exists â€˜locallyâ€™ in the components we
need allowing us to work as if P really was a Å½-monoid. As already said, [FGHW16]
does not assume the existence of a multiplication map Âµ : P Å½ P Ã‘ P , replacing it with
coherently assigned â€˜Kleisli extensionsâ€™ to maps f : jA Ã‘ P B.
A relative monad is now lax idempotent (or a KZ-doctrine) if it satisï¬es the 2-dimen-
sional analogue of the notion of idempotency; in short, when the algebra structure on
an object A is unique up to isomorphism as soon as it exists. Following [GL12, 2.2],
P -algebras as cocomplete categories, thus, when an object is a P -algebra it is so in a
unique way (this is of course a behaviour of all formal cocompletion monads).
Proposition 3.15 (P is a yosegi, I). P is a j-relative monad if (as always) j : cat Ä‚ Cat
is the obvious inclusion.

YOSEGI AND YONEDA
11
Proof. As already noted, the relevant left extensions involved in this proof exist; now,
the diagrams we have to check the commutativity of are the following, once we deï¬ne the
Yoneda embedding yA : A Ã‘ P A as unit, and P ËšyA : P P A Ã‘ P A (it exists because
Remark 3.7) as multiplication of the desired monad.
[[(P A)op, Set]op
s , Set]s
[(P A)op, Set]s
[Aop, Set]
[[Aop, Set]op, Set]
[Aop, Set]
[(P A)op, Set]s
P A
[Aop, Set]
P !ÂµA
ÂµP A
ÂµA
yP A
ÂµA
P !yA
ÂµA
In order to show that they commute, we will exploit the adjunctions P !yA % P ËšyA and
P !ÂµA % P ËšÂµA (the functor P ËšÂµA exists because it must coincide with the Yoneda em-
bedding of rP Aop, Setss into rrP Aop, Setss
op, Setss; it must act as the Yoneda embedding
Q ÃÃ‘ rP Aop, Setssp
, Qq, and this evidently lands into the category of small presheaves
on rP Aop, Setss when restricted to small functors).
For what concerns the unit axiom, the commutativity of the left triangle can be
deduced from the chain of isomorphisms
ÂµA Â¨ yP A â€“ LanyP AyApyAq Â¨ yP A
â€“ LanyP ApLanyApyAqq Â¨ yP A
pyP A is f.f.q â€“ LanyApyAq
pyA is denseq â€“ idP A.
The right triangle corresponds to the composition
rAop, Sets
rrAop, Setsop, Setss
rAop, Sets
P
pQ ÃÃ‘ NatpQ, Pqq
pa ÃÃ‘ NatpyApaq, Pq â€“ Paq
which is again isomorphic to the identity of P A thanks to the Yoneda lemma.
In order to show that the multiplication is associative, we prove that P !ÂµA â€“ ÂµP A
as a consequence of the fact that there is an adjunction ÂµP
1 P Âµ, having moreover
invertible counit. The argument will be fairly explicit, building unit and counit from
suitable universal properties of the presheaf construction and from the deï¬nition for
P ËšÂµA and ÂµP A:
â€š P ËšÂµA sends Î¶ : P Aop Ã‘ Set into rP Aop, Setssp
, Î¶q (it plays the exact same rË†ole
of a large Yoneda embedding; this will entail that the counit of the adjunction
ÂµP % P ËšÂµ is invertible);
â€š ÂµP A acts sending Î»F.Î˜pFq P rrP Aop, Setss
op, Setss to Î»a.Î˜phomp
, aqq.
With these deï¬nitions, the composition ÂµP A Â¨ P ËšÂµA is in fact isomorphic to the identity
of rP Aop, Setss; we not ï¬nd the unit map: we refrain from showing the zig-zag identities
as they follow right away from the explicit description of the co/unit.
The unit will have as components morphisms Î˜ Ã± P ËšÂµApÂµP ApÎ˜qq natural in Î˜ P
rrP Aop, Setss
op, Setss: given one of these components, its codomain can be rewritten as

12
DI LIBERTI AND LOREGIAN
the coend
P ËšÂµApÂµP ApÎ˜qq â€œ Î»Ï‡.rP Aop, SetsspÏ‡, ÂµP ApÎ˜qq
â€“ Î»Ï‡.
Ë†
F PP A
SetpÏ‡pFq, ÂµP ApÎ˜qpFqq
â€“ Î»Ï‡.
Ë†
F PP A
SetpÏ‡pFq, Î˜pP Ap
, Fqqq
Ã Î»Ï‡.Î˜pÏ‡q
and we obtain the candidate morphism in the last line as follows: its component at
Ï‡ P rP Aop, Setss must be an arrow
Î˜pÏ‡q ÃÃ‘
Ë†
F PP A
SetpÏ‡pFq, Î˜pP Ap
, Fqqq
(3.7)
which is induced by a wedge
Î˜pÏ‡q Ã‘ SetpÏ‡pFq, Î˜pP Ap
, Fqqq;
(3.8)
such wedge comes from (the mate of) Î˜ar, Î˜â€™s function on arrows: the Yoneda lemma
now entails that such action induces a map
Ï‡pFq â€“ rP Aop, SetsspP Ap
, Fq, Ï‡q
Î˜ar
ÃÃÃÃ‘ SetpÎ˜pÏ‡q, Î˜pP Ap
, Fqqq
(3.9)
that by cartesian closure can be reported to
Î˜pÏ‡q ÃÃ‘ SetpÏ‡pFq, Î˜pP Ap
, Fqqq
(3.10)
Of course, this is a wedge in F, and we conclude.
â–¡
Proposition 3.16 (P is a yosegi, II). The monad P is lax idempotent in the sense of
Deï¬nition B.3: there exist an adjunction ÂµA
1 Î·P A.
Proof. The existence of an adjunction ÂµA
1 Î·P A. will imply all the equivalent conditions
in Proposition B.6, that we nevertheless recall in Remark 3.17 below for the convenience
of the reader. From the deï¬nition of these maps, there is a natural candidate to be the
counit, and this will be invertible as a consequence of the Yoneda lemma. Indeed, the
isomorphism 1 â€“ ÂµA Â¨ Î·P A corresponds to the map
Î»a.Fa ÃÃ‘ Î»G. hompG, Fq ÃÃ‘ Î»a. hompAp
, aq, Fq â€“ Fa.
(3.11)
The unit is instead given by the action of a certain functor on arrows, in a similar way
as above: given Ï‡ P rP Aop, Setss, there is a canonical map
Ï‡pFq Ã‘ P ApF, Î»a.Ï‡phomp
, aqqq
â€“
Ë†
aPA
SetpFa, Ï‡phomp
, aqqq
coming from (the mate of) a wedge
Fa â€“ P Aphomp
, aq, Fq Ã‘ SetpÏ‡pFq, Ï‡phomp
, aqqq
(3.12)
deï¬ned by the action on arrows of Ï‡.
â–¡

YOSEGI AND YONEDA
13
The following remark, which is a particular case of Proposition B.6, characterizes
P -algebras as categories whose Yoneda embedding yA has a left adjoint Î±. These are
the cocomplete categories [GL12, Â§2]; it is rather easy to see that one of the axioms
of P -algebras asserts that Î±pAp
, aqq â€“ a, and since Î± is a left adjoint it is uniquely
determined by sending a colimit of representables into the colimit in A of representing
objects (all such colimits, in particular, exist).
Remark 3.17. It turns out from the general theory of lax idempotent monads, sketched
in Appendix B, that P satisï¬es the following equivalent conditions:
plïœ±) for every pair of P -algebras a, b and morphism f : A Ã‘ B, the square
P A
P B
A
B
a
P f
b
f
plïœ²) if Î± : P A Ã‘ A is a P -algebra, there is an adjunction Î± % Î·A with invertible
counit;
plïœ³) there is an adjunction ÂµA % Î·P A with invertible counit.
In particular, we have shown condition plïœ³; since plïœ²holds, there is only a possible
choice up to isomorphism for a P -algebra structure on an object A, namely the arrow
playing the rË†ole of left adjoint to the Yoneda embedding.
3.2. Yosegi boxes. In the previous section we showed that the functor P ! : cat Ã‘ Cat
deï¬ning the presheaf construction in Notation 3.1 enjoys the following properties:
ybïœ±) every P !pfq ï¬ts into an adjunction P !pfq % P Ëšpfq;
ybïœ²) P ! is a relative monad with respect to the inclusion j : cat Ä‚ Cat;
ybïœ³) the monad P ! is lax idempotent.
Deï¬nition 3.18 (Yosegi box). Let now j : A Ä‚ K be the inclusion of a full sub-2-
category of K: every 2-functor P : A Ã‘ K satisfying the same properties ybïœ±, ybïœ², ybïœ³,
and such that moreover
ybïœ°) the monad P ! has fully faithful unit Î·A;
yb -ïœ±) The 1-cell P ËšÎ·A exists ( its existence is not implied by ybïœ±because Î·A does
not lie in A in general. Strictly speaking we are saying that the right adjoint to
j!P !pÎ·Aq exists).
will be called a yosegi box.1
Remark 3.19 (Applying a yosegi outside its domain). Whenever we write P C, but such
an object is not deï¬ned (because C lies in K âˆ–A), we mean j!P C. This slight abuse
of notation makes certain proofs more readable; the tacit convention to allow only the
letter A denote an admissible object of a Yoneda structure, or an object in the domain
of a yosegi P , shuts down many possible sources of confusion.
Remark 3.20 (Nervous 1-cells). Let f : A Ã‘ B be a 1-cell. When either its domain or
codomain does not lie in A the map P Ëšf is not guaranteed to exist by the axiom ybïœ±.
1Yosegi-zaiku ( å¯„æœ¨ç´°å·¥) is a kind of Japanese marquetry featuring elaborate inlaid and mosaic designs;
the amount of data described in Deï¬nition 3.18 can be thought as a set of tightly linked properties, each
of which is rich of adornments and properties.

14
DI LIBERTI AND LOREGIAN
The 1-cells for which it exists and for all g : A Ã‘ P C the cancellation rule
lanÎ·Ag Ë P Ëšf Ë Î·B â€“ langf
holds will be called nervous maps. This name is justiï¬ed by the existence of the nerve
construction: in a yosegi the 1-cell Bpf, 1q exists if and only if P Ëšf does, as in such case
P Ëšf â€“ LanÎ·BpBpf, 1qq. When P Ëšf exists, Bpf, 1q is deï¬ned as P Ëšf Ë Î·B. To the best
of our knowledge, the name nervous appeared for the ï¬rst time in [BG18], where the
notion of nervous monad is studied with a very similar spirit. The concept itself goes
back to [BF99] where nervous maps are called admissible. [Wal18] exploited this notion
for the same purpose of our Â§4.3.
Remark 3.21 (Cancellation rule). A compressed and operative version of the cancella-
tion rule above, that will be useful later in the text, is that in the span P C
gÃÃ A
fÃÃ‘ B
where f is nervous, lanfg exists and coincides with lanÎ·Apgq Ë lanfpÎ·Aq.
Remark 3.22 (Yosegi boxes and hyperdoctrines). The deï¬nition of yosegi box resembles
in many ways the deï¬nition of hyperdoctrine due to Lawvere [Law69]. There, the author
chooses as codomain of a certain 2-functor a prescribed family of categories, usually
having no connection with A; this resemblance is not surprising, as [Pis10, Pis12] shows
how a considerable amount of formal category theory can be recovered in the language
of hyperdoctrines.
3.3. Formal Kan Lemma. We want to provide a formal analogue of the following
well-known and very useful result:
Lemma 3.23 (Kan lemma). Given a span C
gÃÃ A
fÃÃ‘ B of categories, where B is
cocomplete and A is small, the following left extension exists:
A
B
C
f
g
langpfq
(3.13)
This result appears for example in [Bor94, 3.7.2], and it was originally due to Kan.
A yosegi box is a suï¬ƒciently rich structure to re-enact a formal analogue of this
theorem. As little as this result may appear, this serves as a ï¬rst motivation for Deï¬ni-
tion 3.18.
Lemma 3.24 (Formal Kan lemma). Let K be a 2-category, and P : A Ã‘ K a yosegi
box; given a span C
gÃÃ A
fÃÃ‘ B of 1-cells in K, where A P A, then if in the diagram
A
B
C
f
g
langpfq
(3.14)
the object B has a structure of P !-algebra and g is nervous, then the dotted left extension
langf exists.

YOSEGI AND YONEDA
15
Proof. The following argument essentially reconstructs [Bor94, 3.7.2]; consider the dia-
gram
A
B
C
P B
f
g
Î·B
langpÎ·Bfq
LB
(3.15)
Where langpÎ·Bfq exists because g is nervous (see Remark 3.21), and P B is a shorthand
for j!P B. We claim that the dotted arrow coincides with the composition LB Â¨langpÎ·Bfq
and together with a naturally determined 2-cell exhibits the desired left extension. Recall
that the 1-cell LB : P B Ã‘ B is precisely what gives B the structure of a P !-algebra,
and that this is exactly what happens for P â€œ r
op, Sets (as already noted, P !-algebras
for the presheaf construction of Cat are the cocomplete categories). The claim follows
from the equalities
LB Â¨ langpÎ·Bfq â€“ lanÎ·BpidBq Â¨ langpÎ·Bfq
3.21
â€“ langpfq.
(3.16)
â–¡
3.4. The adjoint functor theorem. The adjoint functor theorem represents one of the
most applicable results in basic category theory. Any respectable formal category theory
should not be exempt from providing a way to ensure that a colimit preserving map is
a left adjoint; we present here a formal version of this theorem, maybe equivalent, but
apparently more manageable than the one in [SW78].
Theorem 3.25 (Formal adjoint functor theorem). Let f : A Ã‘ B be a 1-cell of P !-
algebras; then the following are equivalent.
(1) f is a left adjoint;
(2) f is a nervous map and a morphism of P !-algebras.
Remark 3.26. Being a morphism of P !-algebras, in the context of ordinary categories
and for the classical presheaf construction, means that f preserves colimits, while being
a nervous map (Remark 3.20) corresponds to a very sharp version of the solution set
condition.
Proof. Letâ€™s start by 2 Ã± 1q. By the Formal Kan lemma Lemma 3.23, lanfp1q exists
(and we can explicitly construct it). Since f is a morphism of P !-algebras, it preserves
Lanfp1q, in fact:
f Â¨ lanfp1q â€“ f Â¨ lanfpLAÎ·Aq
â€“ f Â¨ LA Â¨ lanfpÎ·Aq
pf is a morphism of algebrasq â€“ lanyApfq Â¨ lanfpÎ·Aq
p3.21q â€“ lanff.
Now (see for example [SW78, Prop. 2]) this is equivalent to the fact that f has Lanf1
as right adjoint. In order to prove the converse implication note that when f has a right
adjoint r, the map Î·A Ë r has the universal property of Bpf, 1q; this implies that f is a

16
DI LIBERTI AND LOREGIAN
nervous map. The proof that f is a morphism of algebras is a reformulation of [SW78,
Prop. 15].
â–¡
4. Yosegi boxes are Yoneda structures are equipments
We introduce the notion of Yoneda equipment as a reï¬nement of Deï¬nition 2.10;
strengthening the original deï¬nition of Wood [Woo82] allows to recover the Yoneda struc-
ture, or rather the yosegi, of which the equipment is secretly the free functor in a Kleisli
construction.
Deï¬nition 4.1 (Yoneda equipment). In a triangle of 2-functors
A
K
M
Ã±
p
j
u
(4.1)
the inclusion j : A Ä‚ K is said to admit a Yoneda equipment p %
j
u if
â€š p is a proarrow equipment `a la Wood, in the sense of Deï¬nition 2.10;
â€š p is the j-relative left adjoint of u : M Ã‘ K;
â€š the relative monad up, having unit Î· : j Ã± up is lax idempotent in the sense of
Deï¬nition B.3 and such unit is fully faithful;
Remark 4.2. The inclusion j : cat Ä‚ Cat admits a Yoneda equipment via the canonical
equipment of cat with proarrows given by the bicategory Prof of profunctors
cat
Cat
Prof
p
j
u
(4.2)
where u is the forgetful functor regarding P A as an object of Cat; the unit of the relative
adjunction is precisely the Yoneda embedding.
Intuitively, the above deï¬nition already suggests a strategy to prove our main result,
and in fact weâ€™re only one step far from its proof: the canonical equipment of cat with
proarrows, i.e. the bicategory Prof, can be presented as the Kleisli bicategory of the
relative monad P ! (see [FGHW16]): naive as it may seem, our main observation is
that this is part of a general phenomenon: the Kleisli bicategory of every yosegi box
P : A Ã‘ K equips A with proarrows.
Theorem 4.3 (Main theorem). Let j : A Ä‚ K be the inclusion of a sub-2-category; the
following conditions are equivalent:
mïœ±) K has a cocomplete Yoneda structure in the sense of Deï¬nition 2.4, Deï¬nition 2.7,
with ideal of admissibles A, and such that j!P and P ËšÎ· exist;
mïœ²) the inclusion j : A Ä‚ K admits a Yoneda equipment p %
j
u;
mïœ³) There exists a yosegi P : A Ä‚ K with relative unit Î· : j Ã± P .

YOSEGI AND YONEDA
17
We use a separate subsection to show each of the following implications:
â£yosegi
boxes
(
t
Yoneda
structures u
â£
Yoneda
equipments
(
Â§4.2
Â§4.1
Â§4.3
In Â§4.1 we show that the presheaf construction of every cocomplete Yoneda structure
deï¬nes a yosegi; somehow, the results in this section appear obvious in light of section 3,
as our argument will simply be a formal analogue of Proposition 3.14. The argument is
quite elementary, but as far as we could ï¬nd, this is an original contribution.
Subsequently, we show in Â§4.2 how the Kleisli bicategory of a yosegi P equips the do-
main of P with proarrows; again, the argument boils down to check that Kâ„“pP q satisï¬es
the properties of Deï¬nition 2.10. Deï¬nition 4.1 is motivated by the fact that a proarrow
equipment obtained as Kleisli bicategory of a yosegi contains enough information to re-
build the yosegi, or rather the Yoneda structure, it comes from. The result in Â§4.2 can
be seen as an extension of [FGHW16, 4.2] from the canonical Yoneda structure on Cat
to a generic one on K.
Finally, we show in Â§4.3 how to recover a Yoneda structure from a Yoneda equipment;
this is not a surprising result; again, the argument is quite long but completely elementary
(it is essentially based on the intuition that equipments and cocomplete Yoneda structures
yield equivalent formal category theories), and yet -to the best of our knowledge- it is an
original contribution.
4.1. A Yoneda structure deï¬nes a yosegi box. Given a Yoneda structure with
admissibles A, we shall deï¬ne a lax idempotent 2-monad, relative to the inclusion j :
A Ä‚ K.
Keeping in mind the content of Proposition 3.15 and Proposition 3.16, the natural
candidate is of course the presheaf construction P of the Yoneda structure itself. The
correspondence P : A ÃÃ‘ P A that sends f : A Ã‘ B into P Ëšf â€œ LanyBÂ¨fpyAq deï¬nes a
pseudofunctor since axioms yaïœ³and yaïœ´hold. When the Yoneda structure is cocomplete,
each P Ëšf has a left adjoint given by the left extension LanyApyB Â¨ fq (see Remark 2.9).
This remark makes the claim that each f : A Ã‘ B is sent into an adjunction P !f % P Ëšf
appear straightforward.
We shall show that P ! deï¬nes a lax idempotent relative monad, with fully faithful
unit Î· : j Ã± P , and moreover P ËšÎ· and j!P exist.
Letâ€™s start by deï¬ning the candidate unit and multiplication:
â€š the Yoneda maps yA : A Ã‘ P A of the Yoneda structure deï¬ne the unit compo-
nents Î·A of the wannabe monad;
â€š we then deï¬ne ÂµA :â€œ P ËšÎ·A : P P A Ã‘ P A.
Let us observe that from this deï¬nition P !Î·A
Î²
Î± ÂµA.
Also, ÂµA is exactly the left
extension LanÎ·P AÎ·ApÎ·Aq, whence its left adjoint corresponds to LanÎ·ApÎ·P AÎ·Aq. This
will be a key remark (thatâ€™s why we label the co/unit of P !Î·A % ÂµA for future use): in
fact, once we have shown that this data gives rise to a monad, it will automatically be
lax idempotent.

18
DI LIBERTI AND LOREGIAN
Letâ€™s show that these data determine a monad then: ï¬rst we show the commutativity
of the unit diagrams
P A
P Å½ P A
P A
P A
Î·P A
ÂµA
P !Î·A
(4.3)
The left triangle commutes, thanks to the chain of isomorphisms
ÂµA Â¨ Î·P A â€“ LanÎ·P AÎ·ApÎ·Aq Â¨ Î·P A
â€“ LanÎ·P ApLanÎ·AÎ·Aq Â¨ Î·P A
â€“ LanÎ·ApÎ·Aq â€“ 1P A.
The right triangle commutes thanks to the chain of isomorphisms
ÂµA Â¨ P !pÎ·Aq â€“ LanÎ·P AÎ·ApÎ·Aq Â¨ LanÎ·ApÎ·P AÎ·Aq
Remark B.7 â€“ LanÎ·ApLanÎ·P AÎ·ApÎ·Aq Â¨ Î·P AÎ·Aq
â€“ LanÎ·ApÎ·Aq â€“ 1P A.
For what concerns the associativity property of Âµ, we have to show the commutativity
of
P Å½ P Å½ P A
P Å½ P As
P Å½ P A
P A
P !ÂµA
ÂµP A
ÂµA
ÂµA
(4.4)
Now, the maps P !Âµ and ÂµP A share the same universal property, exhibiting both the left
extension LanÎ·P P AÎ·P ApÎ·P Aq.
Corollary 4.4. We found an adjunction ÂµP A % P ËšÂµA with invertible counit ÂµP A Â¨
P ËšÂµA Ã± 1; this entails that the right adjoint P ËšÂµA is fully faithful.
Corollary 4.5. The functor P is a (j-relative) lax idempotent 2-monad.
Proof. Recall from Appendix B that P is lax idempotent if and only if P !Î·A % ÂµA; this
is precisely a consequence of the deï¬nition.
â–¡
4.2. A yosegi deï¬nes a proarrow equipment. We shall show that the Kleisli bicat-
egory of a yosegi is a proarrow equipment, and more precisely the free functor from A to
the bicategory of free P -algebras equips A with proarrows. Let us consider the diagram
A
K
Kâ„“pP q
Î·Ã±
p
j
u
(4.5)
where the relative adjunction p %
j
u has a relative unit Î· : j Ã± up. Our claim is that
the free functor p : A Ã‘ Kâ„“pP q satisï¬es axioms peïœ±â€“peïœ²yielding a proarrow equipment;
it will be a Yoneda equipment, as a direct consequence of the lax idempotency of P (by
construction, the composition up coincides with P !). Of course, the free functor can be
thought as the identity on objects: A P A has an associated P -algebra

YOSEGI AND YONEDA
19
â€š p is a locally fully faithful 2-functor: indeed, p acts as P ! on 0- and 1-cells, so we
have isomorphisms
LanÎ·ApÎ·B Â¨ fq ÃÃ‘ LanÎ·ApÎ·B Â¨ gq
f ÃÃ‘ g
(4.6)
as a consequence of LanÎ·A and yB being fully faithful.
â€š Every ppfq has a right adjoint in Kâ„“pP q: this is evident, since P is a yosegi.
4.3. A Yoneda equipment deï¬nes a Yoneda structure. Quite understandably, this
is the most diï¬ƒcult implication.
Let us ï¬rst recall what we have: a triangle
A
K
M
Î·Ã±
p
j
u
(4.7)
such that
eqïœ±) p is a proarrow equipment in the sense of Deï¬nition 2.10;
eqïœ²) Î· is the fully faithful relative unit of a relative adjunction p %
j
u;
eqïœ³) the composition P ! â€œ up is a j-relative lax idempotent 2-monad.
Remark 4.6. First of all we have to deï¬ne the admissible arrows; we say f P K is
admissible if the arrow P Ëšpfq exists (as always, we adopt the convention that if B R A,
then P B â€œ j!P B) and has the property indicated in Remark 3.20. Obviously, this class
of 1-cells is closed under composition, but thereâ€™s no hope it absorbs on the right. [Wal18,
Thm. 18] faces the same issue, which indicates it is likely impossible to provide better
than a composition-closed class of 1-cells, instead of a full ideal; since the nervous maps
of Remark 3.20 can play the rË†ole of such composition-closed class, we call them as a
whole the nerve of the Yoneda equipment.
We will show that K has a Yoneda structure having
â€š Yoneda embedding the relative units of eqïœ²;
â€š nerve triangles given by
A
B
P B
P A
f
Î·A
Î·B
P Ëšf
(4.8)
(thus the 1-cell Bpf, 1q is deï¬ned as P Ëšpfq Â¨ Î·B);
â€š ï¬lled by 2-cells Ï‡f, deï¬ned as the pasting
A
P A
B
P B
P A
f
Î·A
Î³
Ã±
P !f
Ã±
Î·B
P Ëšf
(4.9)
obtained from the unit of P !f % P Ëšf and the canonical 2-cell Î³.
We shall show that these data satisfy the axioms of Yoneda structure as stated in Deï¬-
nition 2.4, yaïœ±â€“yaïœ´.

20
DI LIBERTI AND LOREGIAN
yaïœ±) The triangles in (4.9) are left extensions: since P !f â€“ LanÎ·ApÎ·Bfq, the left
adjoint P Ëšf can be characterized as LanÎ·BfpÎ·Aq. But now this entails that
Bpf, 1q â€“ P Ëšf Â¨ Î·B
â€“ LanÎ·BpLanfpÎ·Aqq Â¨ Î·B
â€“ LanfÎ·A.
yaïœ²) The same triangles in (4.9) exhibits pf, Ï‡fq as LiftBpf,1qÎ·A; since Bpf, 1q is
deï¬ned as the composition P Ëšpfq Â¨ Î·B, and the left lifting Liftuvpwq along u Â¨ v
unload as LiftvpLiftuwq, we shall show that
LiftÎ·BpLiftP ËšfÎ·Aq â€“ f.
(4.10)
In order to check this, it suï¬ƒces to show that LiftP ËšfÎ·A â€“ Î·B Â¨ f; whereas this
is true indeed, the fully faithfulness of Î·B will imply the result.
But now, we have LiftP Ëšfp
q â€“ P !f Â¨
, and this already concludes:2 indeed
P !f Â¨ Î·A â€“ LanÎ·ApÎ·Bfq Â¨ Î·A
â€“ Î·B Â¨ f
Now, observe that LiftÎ·BpLiftP ËšfÎ·Aq â€“ LiftÎ·BpÎ·Bfq and that Î·B Â¨
is fully
faithful and a right adjoint for LiftÎ·Bp
q; this implies the existence of an isomor-
phism LiftÎ·BpÎ·Bfq â€“ f. A similar argument shows that the lifting is absolute,
i.e. that fg â€“ LiftP ËšfÂ¨Î·BpÎ·A Â¨ gq for every g : X Ã‘ A.
yaïœ³) the map Î·A is dense, namely LanÎ·ApÎ·Aq exists, is pointwise and isomorphic
to the identity 1P A; this follows from functoriality of P by a simple â€˜double
countingâ€™ argument, evaluating P Ëšp1Aq in two ways: since P Ëš is a functor,
P Ëšp1Aq â€“ 1P A; on the other hand, since P Ëšf â€“ LanÎ·BfpÎ·Aq it follows that
P Ëšp1Aq â€“ LanÎ·ApÎ·Aq.
yaïœ´) There is an isomorphism
LangfpÎ·Aq â€“ LanÎ·BfpÎ·Aq Â¨ LangpÎ·Bq;
(4.11)
this again follows from functoriality of P , together with lax idempotency: the
left hand side of the isomorphism equals P Ëšpgfq Â¨ Î·A; on the other side there
is P Ëšf Â¨ P Ëšg Â¨ Î·A. The two sides are visibly isomorphic, and this concludes the
proof.
â–¡
5. The importance of being P 1
5.1. Representable yosegi. Certainly, the presheaf construction of Cat satisï¬es more
properties than a generic cocomplete Yoneda structure: here we study some of these
properties, and in particular the fact that P is a â€˜semi-representableâ€™ functor of the form
r
op, â„¦s, a fact that admits an abstraction in Lemma 5.4. Note how such a characteri-
zation of semi-representable yosegi borrows a lot both from the deï¬nition of ï¬brational
cosmos (where P has a left pseudo-adjoint P :, the functor we call Q in Deï¬nition 5.3),
and the theory of Weberâ€™s 2-toposes (in [Web07] it is shown that SetËš Ã‘ Set is a clas-
sifying ï¬bration). Our axioms sit in the middle between these two poles: the aim of a
2It is indeed a general fact that an adjunction v % u induces an adjunction Liftu % v Â¨
by uniqueness
of adjoints (a similar result suitably dualized, holds for right liftings and extension, where maybe this is
more commonly encountered in practice).

YOSEGI AND YONEDA
21
future work [] will be to clarify which properties of â„¦turn the functor r
op, â„¦s into a
yosegi, endowing K with a Yoneda structure even if not with a 2-topos structure.
More in detail, the scope of the present section is to show how under very mild
assumptions on P and on the embedding A Ä‚ K, the presheaf construction is â€˜determined
by its value on 1â€™, in the sense that there is a natural isomorphism P A â€“ rA_, P 1s, for
a suitable restricted internal hom r
,
s : Aop Ë† K Ã‘ K. We freely employ the notion
of a duality involution, introduced in [Web07] in relation to discrete opï¬brations, and
formalized in [Shu16].
Notation 5.1. We make the following assumptions while ï¬xing a notation that will
accompany us all along the section:
rïœ±) j : A Ä‚ K is the inclusion of a full sub-2-category A of a 2-category K
rïœ²) K has ï¬nite limits and a duality involution p
q_ : Kco Ã‘ K (see [Shu16] for a
deï¬nition);
rïœ³) ï¬nite limits of objects in A still lie in A, and A_ P A;
rïœ´) A is enriched over K with a functor J
,
K : Aop Ë† A Ã‘ K;
rïœµ) for all A P A there is a functor rA,
s : K Ã‘ K and an isomorphisms
rA Ë† B, Cs â€“ rA, rB, Css
(5.1)
rïœ¶) when evaluated on both objects in A, there is a natural isomorphism
JA, A1K â€“ rA, A1s.
(5.2)
Remark 5.2. As a consequence of rïœ²K has ï¬nite products (and a terminal object). In
case K is cartesian closed, the assumptions in Notation 5.1 are obviously satisï¬ed: if K
is powered over A, we are asking that the powering and the enrichment coincide.
Somehow, this setting axiomatizes the properties of j : cat Ä‚ Cat; its codomain is
not a cartesian closed category, but for every A P cat and X P Cat there is a legitimate
category of functors rA, Xs P Cat.
Deï¬nition 5.3 (Powering relative left adjoint). Under the assumptions in Notation 5.1,
given a yosegi P : A Ã‘ K, its contravariant part P Ëš deï¬nes a functor Acoop Ã‘ K. A
powering relative left adjoint is now a functor Q : Acoop Ã‘ K with the property that
rA, QA1s_ â€“ rA1, P ËšAs, naturally in A, A1 P A.
Lemma 5.4. In the above assumptions, given a yosegi P : A Ã‘ K, the following
conditions are equivalent:
pïœ±) P Ëš has a powering-relative left adjoint Q.
pïœ²) P Ëš is semi-representable by P Ëšp1q, i.e. P ËšA â€“ rA_, P Ëš1s.
pïœ³) the functor P Ëšp
_q_ is the powering relative left adjoint Q;
Proof. To prove that pïœ±implies pïœ², we ï¬rst observe that Qp1q_ â€“ P Ëšp1q, in fact
Qp1q_ â€“ r1, Qp1qs_ â€“ r1, P Ëšp1qs â€“ P Ëšp1q.
Now it is enough to follow the chain of isomorphisms
P ËšA â€“ r1, P ËšAs â€“ rA, Q1s_
â€“ rA_, Qp1q_s â€“ rA_, P Ëšp1qs.

22
DI LIBERTI AND LOREGIAN
To prove that pïœ²implies pïœ³, we follow the chain of isomorphisms
rB, P ËšAs â€“ rB, rA_, P Ëš1ss
â€“ rA_, rB, P Ëš1ss
â€“ rA, rB, P Ëš1s_s_
â€“ rA, P ËšpB_q_s.
Finally, pïœ³trivially implies pïœ±.
â–¡
Remark 5.5. If any of these two conditions is satisï¬ed, Q and P determine each other
under the natural isomorphisms P pA_q_ â€“ QA and QpA_q_ â€“ P A. As a consequence,
the functor Q enjoys similar properties:
qïœ±) Q has a powering relative right adjoint;
qïœ²) Q is semi-representable by Qp1q â€œ P p1q_, i.e. QA â€“ rA_, Q1s.
qïœ³) the functor Qp
_q_ is the powering relative right adjoint.
Remark 5.6. In the case of the canonical Yoneda structure on Cat, Q is the â€˜covariant
presheaf constructionâ€™ A ÃÃ‘ rA, Setsop, and the covariant Yoneda embedding is obtained
from zop
A : Aop Ã‘ rA, Sets; the observation that Q % P dates back to Street and partly
motivates the deï¬nition of ï¬brational cosmos (see [Str74a], but more [Str80]).
In the following remarks we re-enact the essential features of the bicategory of pro-
functors, showing that the Kleisli bicategory of a representable yosegi enjoys many of the
properties of the bicategory Prof.
Proposition 5.7. Let f : A Ã” A1 : u be an adjunction in A, and let us employ the
shorthand Nf :â€œ A1pf, 1q : A1 Ã‘ P A, Mu :â€œ A1p1, fq : A Ã‘ QA1 to denote the extensions
in (2.2) and (5.4); then the 1-cells Nf, Mu correspond each other under the adjunction
isomorphism KpA1, P Aq â€“ KpA, QA1q.
Proof. Unit and counit of the adjunction Q Ïµ
Î· P are the maps
Î· : 1 Ã± P Q,
Î·A,P P K
Â´
A,
â€œ`
rA, â„¦sopË˜op, â„¦
â€°Â¯
â€œ K
Â´
A,
â€œ
rA, â„¦s, â„¦
â€°Â¯
Îµ : QP Ã± 1,
ÏµA,P P KcoopÂ´â€œ
rAop, â„¦s, â„¦
â€°op, A
Â¯
â€œ K
Â´
Aop,
â€œ
rAop, â„¦s, â„¦
â€°Â¯
determined as mates of evaluations counits in K. If we explicitly write down the bijec-
tion linking KpA, P A1q â€“ KpA1P Aqop in function of unit and counit Î·, Ïµ the claim of
Proposition 5.7 boils down to the fact that
Mu â€œ
Â´
A
Î·A,P
ÃÃÃÃ‘ QP A
QpNf q
ÃÃÃÃÃ‘ QA1Â¯
Nf â€œ
Â´
A1
ÎµA1,P
ÃÃÃÃ‘ P QA1
P pMuq
ÃÃÃÃÃ‘ P A
Â¯
In order to see that this is true, it suï¬ƒces to notice that the ï¬rst composition shares
the same universal property of Mu â€œ LanuzA1, and the second one does the same for
Nf â€œ LanfyA.
â–¡
Remark 5.8. Let P be semi-representable, and let Q denote its left pseudo-adjoint as
in Lemma 5.4; given f : A Ã‘ A1, there is an isomorphism of categories Kâ„“pP q â€“ Kâ„“pQq,
such that Bpf, 1q % Bp1, fq (letting the identiï¬cation implicit).

YOSEGI AND YONEDA
23
Remark 5.9 (Ëš-autonomy of equipments). In the present remark we want to prove
that the equipment generated by a representable yosegi P is a Ëš-autonomous category:
this is a formal analogue of the fact [CW05, Â§5] that the bicategory of profunctors is
Ëš-autonomous because it is compact closed. In order to reach such a result we have to
prove that the Kleisli bicategory Kâ„“pP q
â€š is symmetric monoidal;
â€š has an involution p
qâ€¹ such that for each three objects there is an isomorphism
EpA b B, Câ€¹q â€“ EpA, pB b Cqâ€¹q
(5.3)
Of course, generic Kleisli bicategories do not have ï¬nite limits; in the present case repre-
sentability of P gives right away that the coproduct A Å¡
A B has the universal property
of AË†Kâ„“B; indeed, exploiting the description of the objects of Kâ„“pP q as free P -algebras,
we have that P pA Å¡
A Bq â€“ P AË†P B. It now remains to verify the second condition, of
course with respect to the duality involution p
q_: in order to do it, it suï¬ƒces to recall
how 1-cells in Kâ„“pP q are deï¬ned: we have the following two chains of isomorphisms.
Kâ„“pA Ë† B, C_q â€“ KpC_, P pA Ë† Bqq
â€“ KpC_, rA_, P Bsq
â€“ KpC_ Ë† A_, P Bq
â€“ KpC_ Ë† A_ Ë† B_, P 1q
Kâ„“pA, pB Ë† Cq_q â€“ Kâ„“pA, B_ Ë† C_q
â€“ KpB_ Ë† C_, P Aq
â€“ KpB_ Ë† C_ Ë† A_, P 1q.
â–¡
After having studied a particular class of equipments generated by representable
yosegi, it is natural to close the circle investigating Yoneda structures induced by repre-
sentable yosegi. As a consequence of Lemma 5.4, the couple Q, P is a powering relative
adjunction precisely when one of them is semi-representable; in this sense, studying the
representability of P , Q boils down to study the induced adjunction Q % P . This leads
to the notion of ambidextrous Yoneda structure.
5.1.1. Ambidextrous Yoneda structures. Intuitively, an ambidextrous Yoneda structure
arises when a Yoneda structure on a 2-category K is promoted to be the â€˜left partâ€™ of
a pair of Yoneda structures; the left part deï¬ned in Deï¬nition 2.4, and the right part,
satisfying completely dual axioms that we now outline.
Quite surprisingly, neither the very mild assumptions under which such a structure
exists in K, nor the very natural motivation that the canonical Yoneda structure of
Cat is ambidextrous, ignited a thorough study of such systems. The authors concocted
the notion of ambidexterity in a series of private conversations with D. Bernardini, and
immensely proï¬ted from the draft of a paper systematically studying Yoneda structures
[Beres].
Deï¬nition 5.10 (Right Yoneda structure). A right Yoneda structure on a 2-category K
consists of Yoneda data:
ydïœ±) An ideal JQ of 1-cells that we call â€˜right admissibleâ€™; arrows in this ideal deter-
mine right admissible objects in the class JQ,0 Ä K: A is right admissible if such
is its identity 1-cell.

24
DI LIBERTI AND LOREGIAN
ydïœ²) Each right admissible object A has a â€˜Yoneda arrowâ€™ zA : A Ã‘ QA;
ydïœ³) every right admissible morphism f : A Ã‘ B with right admissible domain ï¬ts
into a triangle
A
QA
B
Ïƒf
Ã±
f
zA
Bp1,fq
(5.4)
ï¬lled by a 2-cell Ïƒf : zA Ã‘ Bp1, fq Â¨ f.
These data are organized to enjoy the following properties:
yaïœ±) The pair xBp1, fq, Ïƒfy exhibits the right extension RanfzA.
yaïœ²) The pair xf, Ïƒfy exhibits the absolute right lifting RiftBp1,fqzA.
yaïœ³) The pair x1QA, 1zAy exhibits the pointwise right extension RanzAzA.
yaïœ´) Given a pair of composable 1-cells A
fÃÃ‘ B
gÃÃ‘ C, the pasting of 2-cells
A
QA
B
QB
C
f
zA
zB
g
Qf
Cpg,1q
ÏƒzBf
Ïƒg
(5.5)
exhibits the extension RangfyA â€œ Cp1, g Â¨ fq.
Remark 5.11 (A few remarks on the dual axioms). Axioms yaïœ²and yaïœ³appear to
have been incorrectly dualized: the contravariant Yoneda embedding zA is still dense, so
why is its right extension the identity in yaïœ³? We shall expect from yaïœ²to assert that
Bp1, fq % f (relative to zA), so why is the axiom about a left lifting instead? It turns
out that the contravariance of zA plays a rË†ole: indeed, (5.4) results from the application
of the duality involution to the triangle
A
QA
B
Ïƒf
Ã±
f
zA
Bp1,fq
and similarly, in axiom yaïœ³what we see is the image of the isomorphism LanzAzA â€“ 1QA
under p
q_. Thus, we can safely assert that yaïœ²is asking that Bp1, fq % f forms a zA-
relative adjunction.
There is no way to ensure, in general, that a left and a right Yoneda structure live
together in the same category; yet, this is the most common case (it happens, for exam-
ple, for the canonical Yoneda structure on V-CAT); in fact, each of these 2-category is
naturally equipped with a duality involution and the Yoneda structure is representable
by P 1 â€œ V; the most natural request is then that the powering relative left adjunction
Q % P generates a pair of nicely interacting Yoneda structures.

YOSEGI AND YONEDA
25
Deï¬nition 5.12 (Ambidextrous Yoneda structure). Let K be a 2-category. An ambi-
dextrous Yoneda structure consists of a left Yoneda structure (Deï¬nition 2.4) and a right
Yoneda structure (Deï¬nition 5.10) on K such that
â€š Q, P share the same admissible (this allows for the existence of both yA and zA);
â€š The two Yoneda embeddings of P and Q are linked by the relation zA â€œ y_
A_;
this allows for the â€˜interdeï¬nabilityâ€™ of the left and right extensions using the fact
that ranfpgq â€“ planf _pg_qq_.
5.1.2. A glance at Isbell duality. In basic category theory, Isbell duality states that there
is an adjunction between the category rAop, Sets of presheaves and the category rA, Sets of
co-presheaves on A; somehow, this can be ï¬gured as a non-additive, multi-object version
of the correspondence between the category of left R-modules and the category of right
Rop-modules, given a ring R.
Given a small category A, Isbell duality is an adjunction O : rAop, Sets Ã” rA, Setsop :
Spec deï¬ned by the functors
OA : F ÃÃ‘ Î»a.rAop, SetspF, yApaqq
(5.6)
SpecA : G ÃÃ‘ Î»a.rA, SetsoppG, zApaqq
(5.7)
where zA is the contravariant Yoneda embedding of Remark 5.6. This very deï¬nition
shows how tightly Isbell duality is linked to the pair of Yoneda embeddings yA, zA of a
small category into its co/presheaf categories A; the aim of the present paragraph is to
show how many properties of Isbell duality are to a large extent completely formal.
Lemma 5.13. Let A be a small category; the functors OA % SpecA of Isbell duality are
such that OApFq â€“ LanyAzApFq and SpecApGq â€“ LanzAyApGq.
In other words, Isbell duality arises from the nerve-realization of Remark 2.9 associated
to the two Yoneda embeddings yA, zA.
Proof. An immediate application of the coend formula for a left Kan extension shows
that LanyAzApFq â€“ Î»a.rAop, SetspF, yApaqq; now, uniqueness of a right adjoint plus Re-
mark 2.9 entail that there is an isomorphism LanzAyApGq â€“ Î»a.rA, SetsoppG, zApaqq.
â–¡
This motivates the following deï¬nition.
Deï¬nition 5.14. Let Q % P be an adjunction associated to the representable yosegi
P ; if A is an object of A Ä‚ K, there is an adjunction OA % SpecA obtained as
A
P A
QA
yA
zA
OA
SpecA
(5.8)
taking the left extensions OA â€œ LanyApzAq and SpecA â€œ LanzApyAq.
We say that a presheaf F P rAop, Sets is Isbell self-dual if it is ï¬xed by the monad
SpecA Â¨ OA or (equivalently) if it is ï¬xed by the comonad OA Â¨ SpecA. Fully faithfulness
of the Yoneda embeddings entail that all representable co/presheaves are Isbell self-dual;
this has an evident formal analogue in light of Lemma 5.13.

26
DI LIBERTI AND LOREGIAN
5.2. Formal enrichment and profunctors. The following long remark shows how in
a cocomplete Yoneda structure, or better, in its associated yosegi, there is a â€˜calculus of
profunctorsâ€™; somehow, this is to be expected: it can be seen as an explicit presentation of
the Yoneda equipment generated by the yosegi, as the bicategory of profunctors ProfP pAq
coincides with the Kleisli bicategory of P , regarded as a relative monad, in the sense of
Deï¬nition B.8.
Remark 5.15. In a representable yosegi P : A Ã‘ K, units are maps in K of the form
A Ã‘ rA_, P 1s; the product A_ Ë† A is admissible in the Yoneda structure generated by
P , so we can consider the admissible maps
h : A_ Ë† A Ã‘ P 1.
(5.9)
These maps play the rË†ole of internal homs, so that admissible objects are -not exactly,
but in a clearly evocative way- P 1-enriched: for every small category A composition
maps are given by a family of functions
cabc : Apa, bq Ë† Apb, cq Ã‘ Apa, cq
(5.10)
such that ca,
,c is a cowedge, and in fact an initial one.
A â€˜semi-classicalâ€™ point of view on the situation is the following: to characterize hA
as a certain coend, we shall write it as a certain weighted colimit (because co/ends are
precisely hom-weighted co/limits).
By deï¬nition of what is a weighted colimit in a Yoneda structure [SW78, Â§4], the
fact that
Â´ x Apa, xq Ë† Apx, a1q â€“ Apa, a1q means that the left lifting of yAopË†A along
P 1phA, 1q, is hA, and such lifting is absolute; this yields that hA
%
yAopË†A
P 1phA, 1q; this
ï¬nal request means that the triangle
Aop Ë† A
P pAop Ë† Aq
P 1
Ï‡hA
Ã±
yAopË†A
hA
P 1phA,1q
(5.11)
is an absolute left lifting; this is precisely axiom yaïœ²applied to hA.
It is worth to investigate how far this reconstruction procedure can go, in order to
recover a full-ï¬‚edged coend calculus: in view of this, hA will play the same rË†ole of the
hom functor homA and thus the above isomorphism, expressing hA as â€˜the coendâ€™ of
hA Ë† hA, can be read as the isomorphism homA Ë› homA â€“ homA witnessing that homA
is the identity profunctor A
homA
ÃÃ‘
A.
Remark 5.16. The 1-cell P 1phA, 1q admits a left adjoint LanyA_Ë†AhA; computing this
Kan extension in Cat we get
LanyA_Ë†AhApFq â€“
Ë† A_Ë†A
rA_ Ë† A, Setspypa, a1q, Fq Ë† hApa, a1q
â€“
Ë† A_Ë†A
Fpa, a1q Ë† Apa, a1q
â€“
Ë† A
Fpa, aq.

YOSEGI AND YONEDA
27
This entails that the adjunction LanyA_Ë†AhA % P 1phA, 1q formalizes the adjunction
Â´ A : rA_ Ë† A, Sets Ã” Set : hom &
, where the left adjoint
Â´ A takes the coend of a
functor F : Aop Ë† A Ã‘ Set, and the right adjoint is hom &X : pa, a1q ÃÃ‘ Xhompa,a1q (this
is a general fact: taking the colimit weighted by W is left adjoint to powering with the
weight).
It is now straightforward to go further: axiom yaïœ²entails that in a Yoneda structure
an admissible object A for which A Ë† Aop is still admissible (this translates, for the
corresponding yosegi, into A being closed under product and duality involution), there
are absolute left liftings
Aop Ë† A
P pAop Ë† Aq
P 1
Ã±
yAopË†A
hA
P 1phA,1q
(5.12)
in which P 1phA, 1q has a left adjoint, precisely LanyA_Ë†AhA. Such a left adjoint is the
functor that â€˜coendsâ€™ an endo-profunctor F : A_ Ë† A Ã‘ P 1.
Deï¬nition 5.17 (The bicategory of P -profunctors). Let K be a 2-category, and P :
A Ã‘ K a yosegi on K; then, we deï¬ne the bicategory ProfP pAq of P -profunctors as
follows:
â€š 0-cells are those in A;
â€š 1-cells f : A ÃÃ‘ B are the 1-cells f : B Ã‘ P A in K; when P is representable, the
1-cells of ProfP pAq correspond to 1-cells B Ë† A_ Ã‘ P 1 by mating;
â€š 2-cells Î± : f Ã± g are all those in K.
The composition law A
fÃÃ‘ B
gÃÃ‘ C is deï¬ned, reminding profunctor composition, as
follows: given f : B Ã‘ P A and g : C Ã‘ P B we deï¬ne the composition g â€šP f using the
diagram
B
P A
C
P B
f
yB
g
P !f
(5.13)
as P !f Â¨ g.
Clearly, axiom yaïœ³of the Yoneda structure generated by P entails that
yA : A Ã‘ P A is the identity of A P ProfP pAq; for what concerns associativity, we
have to show that ph â€šP gq â€šP f â€“ h â€šP pg â€šP fq. This follows from the computation
in Deï¬nition B.8, once we recognize that ProfP pAq is no more no less than the Kleisli
bicategory of P regarded as a relative monad.
5.2.1. Coend calculus. It is natural to wonder whether there is a full coend calculus on
A, induced by the yosegi P , and not only a composition rule for internal profunctors. In
order to obtain it we have to further reï¬ne the structure on the 2-category K and make
its interaction with P more rigid and well-behaved. We have essentially made a further
enlargement A Ä‚ K Ä‚ K1, in analogy with the change of universe cat Ä‚ Cat Ä‚ CAT.
We assume that K1 is cartesian closed (like it happens for CAT); given an admissible
1-cell f : A Ã‘ B, the map LanyApfq can be thought as the formal analogue of
b f â€œ
colim
pfq, i.e. as the functor f ÃÃ‘ LanyApfqpWq. The upshot of this subsection is that

28
DI LIBERTI AND LOREGIAN
when K1 is cartesian closed, we can internalize the above construction. We shall deï¬ne a
functor
colim
p
q : P pAq Ë† rA, Bs Ã‘ B
(5.14)
The Yoneda embedding y : A Ã‘ P pAq induces an inverse image yËš : rPpAq, Bs Ã‘ rA, Bs,
whose left adjoint, in case it exists, we call L.
Now, the mate of L under the cartesian closure of K is precisely the weighted colimit
functor, or rather the functor colim
pfq. Such a left adjoint canâ€™t be proved to exist in
full generality, when B is cocomplete, we can hope yËš to be nervous to apply the formal
Kan lemma and compute LanyËšpidBAq.
In order to recover coend calculus, we shall ï¬nd a functor
Â´
: rA_ Ë† A, Bs
Â´
Ã‘ B. To
this end,we shall employ hA : A_ Ë† A Ã‘ P p1q and its mate, a generic point ËœhA : 1 Ã‘
P pA_ Ë† Aq. We can thus deï¬ne the map
Â´
: rA_ Ë† A, Bs â€“ 1 Ë† rA_ Ë† A, Bs hË†id
Ã‘ P pA_ Ë† Aq Ë† rA_ Ë† A, Bs
colim
p
q
ÃÃ‘
B (5.15)
by composition.
Appendix A. Relative monads on 2-categories
Provided the left extension along a given functor J : X Ã‘ Y exists, the functor
category rX, Ys becomes skew-monoidal [Szl12] with respect to the functor Å½ : rX, Ys Ë†
rX, Ys Ã‘ rX, Ys sending F, G to J!F Â¨ G.
In the present section we oï¬€er a characterization of relative monads as Å½-monoids:
at the price of lower generality than the treatment in [FGHW16], we can provide a
formal analogue for a similar statement than the one given for K â€œ Cat in [ACU10];
while extremely useful a reference, the proof in [ACU10] does not apparently admit a
reformulation in an abstract 2-category.
In this respect the present appendix has an intrinsic interest, because it provides a
full formal proof of existence of the aforementioned skew-monoidal structure; although
relatively elementary an argument, it revealed to be rather tedious in the choice of
notation â€“and ï¬xing this notation in a separate section allows us to make the exposition
look much more streamlined elsewhere.
Our treatment of relative monads is less general than the one in [FGHW16], since in
that paper there is no assumption regarding the existence and good behaviour of the left
extension functor J!; in full generality, relative monads truly donâ€™t have a multiplication
map. Fortunately, as observed in our Remark 3.10, â€˜all the structure we need exists
locallyâ€™, since the iterated left extensions of P exist.
Deï¬nition-Proposition A.1. Let J : X Ã‘ Y be a functor such that the left extension
along J exists, deï¬ning a functor J! : rX, Ys Ã‘ rY, Ys; then the category rX, Ys becomes
a left skew-monoidal category under the skew multiplication deï¬ned by
pF, Gq ÃÃ‘ F Å½ G â€œ J!F Â¨ G;
(A.1)
there are natural maps of association, left and right unit
pF Å½ Gq Å½ H
F Å½ pG Å½ Hq
J Å½ F
F
F
F Å½ J
Î³F GH
Î»F
Ï±F
(A.2)

YOSEGI AND YONEDA
29
such that the following diagrams are commutative:
skmïœ±) skew associativity:
ppF Å½ Gq Å½ Hq Å½ K
pF Å½ Gq Å½ pH Å½ Kq
pF Å½ pG Å½ Hqq Å½ K
F Å½ ppG Å½ Hq Å½ Kq
F Å½ pG Å½ pH Å½ Kqq
Î³F G,H,K
Î³F,G,HÅ½K
Î³F,G,HK
Î³F,GH,K
F Å½Î³G,H,K
(A.3)
skmïœ²) skew left and right unit:
pF Å½ Gq Å½ J
F Å½ pG Å½ Jq
F Å½ G
F Å½ G
pJ Å½ Fq Å½ G
J Å½ pF Å½ Gq
Î³F,G,J
2r
Ï±F Å½G
F Å½Ï±G
2l
Î³J,F,G
Î»F Å½G
Î»F Å½G
(A.4)
skmïœ³) zig-zag identity:
J Å½ J
J
J
Î»J
Ï±J
(A.5)
skmïœ´) interpolated zig-zag identity:
pF Å½ Jq Å½ G
F Å½ pJ Å½ Gq
F Å½ G
F Å½ G
Î³F,J,G
F Å½Î»G
Ï±F Å½G
(A.6)
The skew monoidal structure, i.e. the natural maps Î³, Î», Ï± is deï¬ned as follows:
sïœ±) Given F, G, H P rX, Ys, the cell Î³F,G,H is deï¬ned by ËœÎ³F,G Ëš H, where ËœÎ³F,G is
obtained as the mate of J!F Ëš Î·G under the adjunction J! Î·
Ïµ JËš: the arrow
J!F Â¨ G
J!F ËšÎ·G
ÃÃÃÃÃÃ‘ J!F Â¨ JËšJ!G â€œ JËšpJ!F Â¨ J!Gq
(A.7)
mates to a map J!pJ!F Â¨ Gq ÃÃ‘ J!F Â¨ J!G.
sïœ²) Given F P rX, Ys, the cell Î»F : J Å½ F Ã± F is deï¬ned by the whiskering Ïƒ Ëš F,
where Ïƒ â€œ Ïƒ1Y is the counit of the density comonad of J;
sïœ³) Given G P rX, Ys, the cell Ï±G : G Ã‘ G Å½ J is the G-component Î·G of the unit of
the adjunction J! % JËš
Remark A.2. A complete proof of Deï¬nition-Proposition A.1 appears as Theorem 3.1 in
[ACU10]; the main argument is however heavily relying on the assumption that K â€œ Cat,
and thus it is of little use here; we thus produce a formal proof ex novo, while explicitly
recording some useful equations satisï¬ed by the data deï¬ning the skew monoidal structure

30
DI LIBERTI AND LOREGIAN
in study; the structure maps of the skew monoidal structure are entirely induced by the
J! Îµ
Î· JËš adjunction and from (the equations satisï¬ed by) its unit and counit.
So, we adopt the following notation, and employ the following equations:
eïœ±) we denote â€šÏ– : J!U Ã‘ V the mate of Ï– : U Ã‘ JËšV under the adjunction
J!
Îµ
Î· JËš; similarly, we denote Ï‡â€š : U Ã‘ JËšV the mate of Ï‡ : J!U Ã‘ V ; in this
notation, the bijection
rX, YspU, JËšV q â€“ rY, YspJ!U, V q
(A.8)
reads as pâ€šÏ–qâ€š â€œ Ï– e â€špÏ‡â€šq â€œ Ï‡.
eïœ²) the ï¬rst zig-zag identity for the adjunction J!
Îµ
Î· JËš is pÎµB Ëš Jq Â¨ Î·BJ â€œ 1BJ; in
particular, if B â€œ 1Y we have pÏƒ Ëš Jq Â¨ Î·J â€œ 1J;
eïœ³) the second zig-zag identity for the adjunction J! Îµ
Î· JËš is ÎµJ!F Â¨ J!pÎ·F q â€œ 1J!F ;
eïœ´) an irreducible expansion for the associator, expliciting all its components, is
Î³F GH â€œ
`
ÎµJ!F Â¨J!G Â¨ J!pJ!F Ëš Î·Gq
Ë˜
Ëš H
(A.9)
eïœµ) the density comonad of J, whose comoltiplication Î½ and counit Ïƒ satisfy the
comonad axioms is deï¬ned by the maps
Ïƒ â€œ Îµ1B : J!pJq Ã‘ 1
Î½ : J!pJq
J!pÎ·Jq
ÃÃÃÃÃ‘ J!pJ!pJq Â¨ Jq
ËœÎ³JJ
ÃÃÃ‘ J!pJq Â¨ J!pJq
(A.10)
in particular, the comultiplication and the associator determine each other.
Proof. First of all, axiom skmïœ³is one of the two triangle identities of the adjunction
J! % JËš. It remains to prove the other coherence conditions.
skmïœ±) It is easy to see that one can prove commutativity before precomposing with K;
one has then to prove the commutativity of the diagram
J!pJ!pJ!F Â¨ Gq Â¨ Hq
J!pJ!F Â¨ Gq Â¨ J!H
J!pJ!F Â¨ pJ!G Â¨ Hqq
J!F Â¨ J!pJ!G Â¨ Hq
J!F Â¨ J!G Â¨ J!H
ËœÎ³F Å½G,H
J!pËœÎ³F GËšHq
ËœÎ³F GËšJ!H
ËœÎ³F,GÅ½H
cïœ±
cïœ²
J!F ËšËœÎ³GH
(A.11)
note that the dashed arrow exists: it is the mate â€šÎ± of Î± â€œ pJ!F Â¨ J!Gq Ëš Î·H;
the plan is to prove that the two sub-diagrams in which this arrow splits the
whole diagram commute separately. In order to do this, we start from the square
diagram cïœ±: recall that eïœ²entails that one of the squares
J!A
X
A
JËšX
J!B
Y
J!B
JËšY
J!f
â€ša
g
f
a
JËšg
â€šb
b
(A.12)

YOSEGI AND YONEDA
31
commutes if and only if the other does. Hence, if we denote f â€œ ËœÎ³F G Ëš H, g â€œ
ËœÎ³F G Ëš J!H, a â€œ pJ!F Â¨ Gq Ëš Î·H, b â€œ Î±, cïœ±commutes if and only if the square
J!F Â¨ G Â¨ H
J!pJ!F Â¨ Gq Â¨ J!H Â¨ J
J!F Â¨ J!G Â¨ H
J!F Â¨ J!G Â¨ J!H Â¨ J
â€špJ!F ËšÎ·GqËšH
pJ!F Â¨GqËšÎ·H
â€špJ!F ËšÎ·GqËšpJ!HÂ¨Jq
pJ!F Â¨J!GqËšÎ·H
(A.13)
commutes.
It does, since their common value at the diagonal is simply the
horizontal composition â€špJ!F Ëš Î·Gq a Î·H.
A similar argument shows that cïœ²commutes: we have to establish the com-
mutativity of
J!pJ!F Â¨ J!G Â¨ Hq
J!F Â¨ J!G Â¨ J!H
J!F Â¨ J!pJ!G Â¨ Hq
â€špJ!F ËšÎ·GÅ½Hq
â€špJ!F ËšJ!GËšÎ·Hq
J!F Ëšâ€špJ!GËšÎ·Hq
(A.14)
a diagram that can be â€˜straightenedâ€™ to the left one below:
A
A
A
A
A
A
A
A
â€špJ!F ËšÎ·GÅ½Hq
J!F Ëšâ€špJ!GËšÎ·Hq
J!F ËšÎ·GÅ½H
J!F Ëšâ€špJ!GËšÎ·HqËšJ
â€špJ!F ËšJ!GËšÎ·Hq
J!F ËšJ!GËšÎ·H
(A.15)
but now, the left diagram commutes if and only if the right one does; and the
latter commutativity follows from the deï¬nition of ËœÎ³.
skmïœ²) A separate argument works for diagrams 2r and 2l: unwinding the deï¬nitions,
the commutativity of 2r amounts to the commutativity of
J!pJ!F Â¨ Gq Â¨ J
J!F Â¨ J!G Â¨ J
J!F Â¨ G
J!F Â¨ J!G Â¨ J.
Î³F GJ
Î·J!F Â¨G
J!F ËšÎ·G
(A.16)
If we denote for short J!F Ëš Î·G â€œ Ï–, this commutativity is equivalent to the fact
that JËšpâ€šÏ–q Â¨ Î·J!F Â¨G â€œ Ï–, which is true since the left had side of this equation is
pâ€šÏ–qâ€š. For axiom 2l, the commutativity of
J!pJq Â¨ F
JËšJ!F
J!pJq Â¨ F
J!pJq Â¨ JËšJ!F
J!F ËšÎ·F
ÎµËšJ!F
(A.17)
follows from the fact that the upper horizontal row coincides with the horizontal
composition Ïƒ a Î·F â€œ Î·F Â¨ pÏƒ Ëš Fq; this means that 2l is true if and only if the

32
DI LIBERTI AND LOREGIAN
square
F
JËšJ!F
J!J Â¨ F
J!J Â¨ JËšJ!F
Î·F
ÏƒËšF
J!F ËšÎ·F
ÎµËšJ!F
(A.18)
commutes; this is obvious by the naturality property of Î·.
skmïœ´) Unwinding the deï¬nition, axiom skmïœ´asks the diagram
J!F Â¨ J!pJq
J!F
J!pJ!F Â¨ Jq
J!F
J!F ËšÏƒ
Î³F J
J!pÎ·F q
(A.19)
to commute. In order to see that it does, we observe that the chain of equivalences
pJ!F Ëš Ïƒq Â¨ ÎµJ!F Â¨J!J Â¨ J!pJ!F Ëš Î·Jq â€œ ÎµJ!F Â¨ J!pJ!F Ëš Ïƒ Ëš Jq Â¨ J!pJ!F Ëš Î·Jq
â€œ ÎµJ!F Â¨ J!
`
J!F Ëš ppÏƒ Ëš Jq Â¨ Î·Jq
Ë˜
â€œ ÎµJ!F Â¨ 1J!F Â¨J
holds, where the last step is motivated by eïœ². So, the composition pJ!F ËšÏƒqÂ¨ ËœÎ³F J
equals ÎµJ!F ; this, together with eïœ³, concludes.
â–¡
Remark A.3 (A nice J gives a nice structure). In favourable cases the skew monoidal
structure simpliï¬es until it collapses to a straight monoidal structure:
â€š if J is fully faithful, the unit Î·F : F Ã‘ J!F Â¨ J is invertible for every F, so that
F â€“ F Å½ J;
â€š if J is dense, the density comonad Ïƒ is isomorphic to the identity functor, so
Î»F : F â€“ J Å½ F is an isomorphism;
â€š if each extension J!F is absolute, then each ËœÎ³F,G is invertible.
Remark A.4. The bifunctoriality of composition has been implicitly employed in the
above proof; we spell it out explicitly for future reference.
In order to prove such bifunctoriality, we have to show the commutativity of the square
F Å½ G
F Å½ K
H Å½ G
H Å½ K
F Å½g
fÅ½G
fÅ½K
HÅ½g
(A.20)
given f : F Ã‘ H and g : G Ã‘ K. In fact, unwinding the deï¬nition itâ€™s easy to realize
that this diagram commutes since its diagonal coincides with the horizontal composition
J!f a g.
Remark A.5 (A note on Å½-whiskering). This begs the question of how the whiskering
of a 1-cell F with a 2-cell Î± works, on the left and on the right; given the shape of the
Å½-skew-monoidal structure, it turns out that
Î± Å½ F :â€œ J!Î± Ëš F
F Å½ Î± :â€œ J!F Ëš Î±
(A.21)

YOSEGI AND YONEDA
33
Deï¬nition A.6 (Monads need not be endofunctors, but are always skew monoids). We
will be interested in the notion of a J-relative monad, or simply a relative monad when
J is understood from the context; J-relative monads are deï¬ned as internal monoids in
the skew-monoidal category prX, Ys, Å½q, thus they come equipped with a unit Î· : J Ã± T
and a multiplication Âµ : T Å½ T Ã± T. However, since the monoidal structure Å½ satisï¬es
pretty asymmetrical coherence conditions, the commutativity conditions satisï¬ed by a
relative monad get altered accordingly. In particular,
rmïœ±) the unit axiom amounts to the commutativity of
J Å½ T
T Å½ T
T Å½ J
T
Î·Å½T
Î»
Âµ
T Å½Î·
Ï±
(A.22)
where the right triangle â€˜commutesâ€™ in the sense that the composition ÂµÂ¨pT Å½Î·qÂ¨Ï±
makes the identity of T.
rmïœ²) the multiplication Âµ is â€˜skew associativeâ€™:
pT Å½ Tq Å½ T
T Å½ pT Å½ Tq
T Å½ T
T Å½ T
T
ÂµÅ½T
Î³
T Å½Âµ
Âµ
Âµ
(A.23)
Appendix B. Algebras for relative 2-monads
B.1. The 2-category of algebras of a relative monad. We recall that
Deï¬nition B.1 (Algebra for a total monad). An algebra for T : C Ã‘ C is a map
a : TA Ã‘ A such that the diagrams
TTA
TA
A
TA
TA
A
A
ÂµA
T a
a
Î·A
a
a
(B.1)
are ï¬lled by isomorphisms.
Remark B.2. In the case of relative monads, things get quite tricky, as very generic
relative monads do not seem to possess algebras: indeed, if the coherence xÎ³, Ï±, Î»y of T is
highly non-invertible the commutative diagrams deï¬ning a T -algebra do not make sense
any more.
It is indeed quite easy to notice, transporting the T -algebra axioms to the relative
case, that whatever a T -algebra is, it must consist of a 1-cell of D, say a : TA Ã‘ JA,
such that some diagrams â€˜commuteâ€™; it is then just as easy to realize that the diagram
T Å½ TA
TA
T Å½ JA
TA
JA
T a
ÂµA
a
ÏA
a
(B.2)

34
DI LIBERTI AND LOREGIAN
canâ€™t be made to â€˜commuteâ€™ unless Ï is invertible. As a rule of thumb, the diagrams pro-
duced applying T to the algebra introduces non-invertible coherence, and their skewness
must be corrected to ensure commutativity.
If we deï¬ne Ï-normal a relative monad such that Ï : T â€“ T Å½J is invertible, the notion
of algebra makes sense again for Ï-normal monads.
We also recall
Deï¬nition B.3 (Algebra morphism for a total monad). A (lax) morphism of algebras
pA, aq Ã‘ pB, bq for a total monad T : C Ã‘ C is a pair pf, Â¯fq that ï¬lls the diagram
TA
TB
A
B
T f
a
Â¯
f
Ã±
b
f
(B.3)
These data are subject to the coherence axioms spelled out in [BKP89, p. 3], eq. (1.2)
and (1.3):
TTA
TTB
TTA
TTB
TA
TB
â€œ
TA
TB
A
B
A
B
ÂµA
T T f
ÂµB
T a
T T f
T b
Â¯
f
Ã±
a
T f
b
Â¯
f
Ã±
a
T f
b
f
f
(B.4)
A
B
TA
TB
â€œ
idf
A
B
f
Î·A
Î·B
a
T f
b
f
(B.5)
A similar deï¬nition yields a colax morphism of algebras, where the direction of the
2-cell Â¯f is reversed.
Algebra 2-cells are deï¬ned to be 2-cells Î± : f Ã± g in C such that the following diagram
commutes
TA
TB
TA
TB
A
B
A
B
Ã³T Î±
Â¯g
Ã±
T f
a
b
Â¯
f
Ã±
T f
a
b
g
Ã³Î±
g
(B.6)
Remark B.4. Again, things get complicated when we relativize the monads in study:
the same rule of thumb as above holds, and the diagram whose commutativity breaks

YOSEGI AND YONEDA
35
now is
TTA
TTB
TTA
TTB
TJA
TJB
TA
TB
â€œ
TA
TB
JA
JB
JA
JB
T Â¯
f
Ã±
T T f
T a
T b
T f
ÂµA
ÂµB
Â¯
f
Ã±
ÏA
a
ÏB
b
Â¯
f
Ã±
T f
Jf
Jf
(B.7)
unless T is Ï-normal there is no way we can give meaning to this equality.
Note that instead, the unit condition and the notion of algebra 2-cell are fortunately
unaï¬€ected by relativization of T .
Notation B.5. Each time we speak about the 2-category of algebras for a relative monad
T , we implicitly assume that T is Ï-normal; obviously this assumption does not aï¬€ect
the discussion about yosegi boxes and Yoneda structures, since the underlying monad of
a yosegi is always normal.
B.2. Algebras in the lax idempotent case.
Proposition B.6. Lax idempotent monads admit equivalent deï¬nitions as follows; the
colax version of each condition is stated beside the correspondent lax version.
lïœ±) for every pair of T -algebras a, b and morphism f : A Ã‘ B, the square
T A
T B
A
B
a
Ã±
T f
b
f
is ï¬lled by a unique 2-cell Â¯f : b Â¨ T f Ã± f Â¨ a which is a lax morphism of algebras;
lïœ²) a % Î·A with invertible counit;
lïœ³) Âµ % Î· Ëš T with invertible counit;
lïœ´) there is a modiï¬cation âˆ†: T Ëš Î· Ã± Î· Ëš T such that âˆ†Ëš Î· â€œ 1 and Âµ Ëš âˆ†â€œ 1.
The conditions for colax algebras are of course obtained replacing lax algebra morphisms
with colax ones.
cïœ±) for every pair of T -algebras a, b and morphism f : A Ã‘ B, the square
T A
T B
A
B
a
Ã±
T f
b
f
is ï¬lled by a unique 2-cell Â¯f : f Â¨a Ã± bÂ¨T f which is a colax morphism of algebras;
cïœ²) Î·A % a with invertible unit;
cïœ³) Î· Ëš T % Âµ with invertible unit;
cïœ´) there is a modiï¬cation Î¥ : Î· Ëš T Ã± T Ëš Î· such that Î¥ Ëš Î· â€œ 1 and Âµ Ëš Î¥ â€œ 1.

36
DI LIBERTI AND LOREGIAN
Total KZ-monads have a very nice and well behaved notion of cocomplete object with
respect to them. The notion is identical to the one of cocomplete object with respect to a
Yoneda structure as described in 2.7. When P is a relative KZ-monad every object of the
form P A for some A is cocomplete, as observed by [Wal18, Rem. 5] in the non-relative
case. This observation is still true in the relative case.
Remark B.7 (Relative of [Wal18, Rem. 5 & Prop. 6]). When P is a relative KZ-
monad every object of the form P A for some A is cocomplete, moreover pseudo-agebras
coincides with cocomplete objects.
B.3. The Kleisli bicategory of a relative monad. As is well known, every total
monad T : C Ã‘ C has a Kleisli category with the same objects of C and where morphisms
are 1-cells f : A Ã‘ TB. Composition is given by the rule
g â€š f :â€œ ÂµC Â¨ Tg Â¨ f,
(B.8)
associative and unital (with identity Î·A : A Ã‘ TA the unit map of the monad) thanks
to the monad axioms.
The same structure exists in 2-dimensional algebra, so that each 2-monad has a Kleisli
2-category. In the relative case, things get a little bit hairy: the maximal possible gener-
ality is the one of [FGHW16, Â§5], but in that case we canâ€™t make sense to a â€˜composition
lawâ€™ in the same sense of (B.8), as there is no real multiplication for a relative monad.
Mildly restricting the class of relative monads in study (more or less, those for which
enough left extensions exist in order to ensure the existence of Âµ) we obtain a formalism
in which the result that the Kleisli bicategory of a yosegi is a Yoneda equipment appears
natural and well-motivated.
Deï¬nition B.8 (Kleisli bicategory of a relative monad). Let T be a relative monad
with underlying functor T : C Ã‘ D; then, in case T is normal (i.e., both Ï-normal and
Î»-normal) we deï¬ne its Kleisli bicategory posing:
â€š 0-cells the objects of C;
â€š 1-cells f : X ÃÃ‘ Y the 1-cells f : JX Ã‘ TY ;
â€š composition of 1-cells X
fÃÃ‘ Y
gÃÃ‘ Z deï¬ned by the composition
JX
TZ
TY
T Å½ JY
T Å½ TZ
gâ€šfÃÃ‘
f
ÏY
P Å½g
ÂµZ
(B.9)
â€š all 2-cells between 1-cells.
In order to show that this is really a bicategory we shall show that the unit of the
monad plays the role of two-sided identity (up to an isomorphism prescribed by the monad
structure), and that the composition is associative (up to an isomorphism prescribed by
the monad structure).
â€š Î·Y â€š f â€œ ÂµY Â¨ T Å½ Î·Y Â¨ ÏY Â¨ f â€œ f since (A.22) holds.
â€š for what concerns the composition f â€š Î·X we can reduce it to
f â€š Î·X â€œ ÂµY Â¨ T Å½ f Â¨ ÏX Â¨ Î·X
â€œ ÂµY Â¨ Î· Å½ TY Â¨ Î»Â´1
Y
Â¨ f â€œ f
using the fact that T is normal.

YOSEGI AND YONEDA
37
â€š Associativity amounts to verify that given W
fÃÃ‘ Z
gÃÃ‘ X
hÃÃ‘ Y the following two
lines are equal:
ph â€š gq â€š f â€œ ÂµY Â¨ T Å½ pÂµY Â¨ T Å½ h Â¨ ÏX Â¨ gq Â¨ ÏZ Â¨ f
â€œ ÂµY Â¨ T Å½ ÂµY Â¨ T Å½ T Å½ T Å½ h Â¨ T Å½ ÏX Â¨ T Å½ g Â¨ ÏZ Â¨ f
h â€š pg â€š fq â€œ ÂµY Â¨ T Å½ h Â¨ ÏX Â¨ ÂµX Â¨ T Å½ g Â¨ ÏZ Â¨ f.
This follows from the fact that ÂµY coequalizes the pair of underlined arrows,
which in turn follows from the associativity axiom for Âµ, in (A.23).
References
[ACU10] T. Altenkirch, J. Chapman, and T. Uustalu. Monads need not be endofunctors. In Interna-
tional Conference on Foundations of Software Science and Computational Structures, pages
297â€“311. Springer, 2010.
[AR18] J. AdÂ´amek and J. RosickÂ´y. How nice are free completions of categories? arXiv:1806.02524
preprint, 2018.
[Beres] D. Bernardini. Notes on Yoneda structures, Unpublished notes.
[BF99] M. Bunge and J. Funk. On a bicomma object condition for KZ-doctrines. J. Pure Appl.
Algebra, 143(1-3):69â€“105, 1999.
[BG18] John Bourke and Richard Garner. Monads and theories. arXiv preprint arXiv:1805.04346,
2018.
[BKP89] R. Blackwell, G.M. Kelly, and A.J. Power. Two-dimensional monad theory. Journal of pure
and applied algebra, 59(1):1â€“41, 1989.
[Bor94] F. Borceux. Handbook of categorical algebra. 1, volume 50 of Encyclopedia of Mathematics
and its Applications. Cambridge University Press, Cambridge, 1994. Basic category theory.
[BÂ´eer] Jean BÂ´enabou. Distributors at work, 2000. Lecture notes written by Thomas Streicher.
[CP89] J.-M. Cordier and T. Porter. Shape theory: Categorical methods of approximation. Ellis
Horwood (Chichester, West Sussex, England and New York), 1989.
[CW05] G. L. Cattani and G. Winskel. Profunctors, open maps and bisimulation. Mathematical
Structures in Computer Science, 15(03):553â€“614, 2005.
[DLL18] I.
Di
Liberti
and
F.
Loregian.
Accessibility
and
presentability
in
2-categories.
arXiv:1804.08710 preprint, April 2018.
[FGHW16] M. Fiore, N. Gambino, M. Hyland, and G. Winskel. Relative pseudomonads, Kleisli bicate-
gories, and substitution monoidal structures. Selecta Mathematica, pages 1â€“40, 2016.
[GL12] R. Garner and Stephen Lack. Lex colimits. Journal of Pure and Applied Algebra, 216(6):1372
â€“ 1396, 2012.
[Koc95] A. Kock. Monads for which structures are adjoint to units. Journal of Pure and Applied
Algebra, 104(1):41â€“59, 1995.
[Law69] W.F. Lawvere. Adjointness in foundations. Dialectica, 23(3-4):281â€“296, 1969.
[Lor] F. Loregian. How do the existing ways to do formal ct relate to each other? MathOverï¬‚ow
https://mathoverflow.net/q/281600.
[Lor15] F. Loregian. This is the (co)end, my only (co)friend. arXiv:1501.02503 preprint, 2015.
[Pis10] C. Pisani. A logic for categories. Theory and Applications of Categories, 24(15):394â€“417,
2010.
[Pis12] C. Pisani. On indexed actions. arXiv:1202.1004 preprint, 2012.
[RW88] R. Rosebrugh and R.J. Wood. Proarrows and coï¬brations. Journal of Pure and Applied
Algebra, 53(3):271â€“296, 1988.
[Shu16] M. Shulman. Contravariance through enrichment. Theory Appl. Categ., 2016.
[Str74a] R. Street. Elementary cosmoi I. In Proceedings Sydney Category Theory Seminar 1972/1973,
volume 420 of Lecture Notes in Mathematics, pages 143â€“180. Springer, 1974.
[Str74b] R. Street. Fibrations and Yoneda lemma in a 2-category. In G.M. Kelly, editor, Proceedings
Sydney Category Theory Seminar 1972/1973, volume 420 of Lecture Notes in Mathematics,
pages 104â€“133. Springer, 1974.
[Str80] R. Street. Cosmoi of internal categories. Trans. Amer. Math. Soc., 258(2):271â€“318, 1980.

38
DI LIBERTI AND LOREGIAN
[Str81] R. Street. Conspectus of variable categories. Journal of Pure and Applied Algebra, 21(3):307â€“
338, 1981.
[SW78] R. Street and R. Walters. Yoneda structures on 2-categories. J. Algebra, 50(2):350â€“379,
1978.
[Szl12] K. SzlachÂ´anyi. Skew-monoidal categories and bialgebroids. Advances in Mathematics, 231(3-
4):1694â€“1730, 2012.
[Wal18] C. Walker. Yoneda structures and KZ doctrines. J. Pure Appl. Algebra, 222(6):1375â€“1387,
2018.
[Web07] M. Weber. Yoneda structures from 2-toposes. Appl. Categ. Structures, 15(3):259â€“323, 2007.
[Woo82] R.J. Wood. Abstract proarrows I. Cahiers de topologie et gÂ´eometrie diï¬€Â´erentielle categori-
ques, 23(3):279â€“290, 1982.
[Woo85] R.J. Wood.
Proarrows II.
Cahiers de topologie et gÂ´eomÂ´etrie diï¬€Â´erentielle catÂ´egoriques,
26(2):135â€“168, 1985.
Ivan di Liberti:
:Department of Mathematics and Statistics
Masaryk University, Faculty of Sciences
KotlÂ´aË‡rskÂ´a 2, 611 37 Brno, Czech Republic
diliberti@math.muni.cz
Fosco Loregian;
;Max Planck Institute for Mathematics
Vivatsgasse 7, 53111 Bonn â€” Germany
ï¬‚ore@mpim-bonn.mpg.de

