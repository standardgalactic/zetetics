arXiv:2312.13256v1  [math.QA]  20 Dec 2023
EXTENDED BAXTER RELATIONS AND QQ-SYSTEMS FOR
QUANTUM AFFINE ALGEBRAS
EDWARD FRENKEL AND DAVID HERNANDEZ
Abstract. Generalized Baxter’s T Q-relations and the QQ-system are systems of alge-
braic relations in the category O of representations of the Borel subalgebra of a quantum
aﬃne algebra Uq(bg), which we established in our earlier works [FH1, FH2]. In the present
paper, we conjecture a family of analogous relations labeled by elements of the Weyl group
W of g, so that the original relations correspond to the identity element. These relations
are closely connected to the W -symmetry of q-characters established in [FH3]. We prove
these relations for all w ∈W if g has rank two, and we prove the extended T Q-relations
if w is a simple reﬂection. We also generalize our results and conjectures to the shifted
quantum aﬃne algebras.
Contents
1.
Introduction
2
2.
Background on quantum aﬃne algebras
6
2.1.
Lie algebra and Weyl group
7
2.2.
Quantum aﬃne algebras and their Borel subalgebras
8
2.3.
Category O for representations of Borel subalgebras
9
2.4.
Monomials and ﬁnite-dimensional representations
12
2.5.
q-characters
12
2.6.
Chari’s braid group action and extremal monomials
14
3.
Extended TQ-relations
16
3.1.
Recollections
16
3.2.
Extended TQ-relations Conjecture
16
3.3.
The case of simple reﬂections
18
3.4.
Weyl group action
18
3.5.
Some useful homomorphisms
20
4.
Weyl group action and solutions of the extended TQ-relations
21
4.1.
Relations obtained from the Weyl group action
21
4.2.
Computation of Θw(Yi,a)
22
4.3.
Conjectural q-character formula for L(Ψw(ωi),a)
25
5.
Extended QQ-systems
25
5.1.
The QQ-system
25
5.2.
Generalization
26
5.3.
Extended QQ-system Conjecture
29
6.
Shifted quantum aﬃne algebras
29
6.1.
Representations of shifted quantum aﬃne algebras
29
1

2
EDWARD FRENKEL AND DAVID HERNANDEZ
6.2.
Langlands dual Lie algebra
31
6.3.
Conjectural q-character formula
31
7.
Rank 2 Lie algebras
32
References
35
1. Introduction
Let g be a ﬁnite-dimensional simple Lie algebra over C and I the set of vertices of its
Dynkin diagram. Let Uq(bg) be the corresponding quantum aﬃne algebra of level 0 and
Uq(bb) its Borel subalgebra, deﬁned in terms of the Drinfeld-Jimbo generators of Uq(bg). In
[HJ], M. Jimbo and one of the authors introduced the category O whose objects are repre-
sentations of Uq(bb) (possibly inﬁnite-dimensional) that have a weight space decomposition
with ﬁnite-dimensional weight components. It contains the category of ﬁnite-dimensional
representations of Uq(bg) (of type 1) as a subcategory.
In this paper we study various algebraic relations in the Grothendieck ring K0(O) of
the category O, and the corresponding relations on q-characters.
They can be viewed
as extensions of the generalized Baxter TQ-relations and the QQ-system. Here’s a brief
summary of these relations and their connection to the spectra of commuting quantum
Hamiltonians of the XXZ-type model associated to Uq(bg).
(1) The TQ-relations are generalizations of the celebrated Baxter TQ-relation of the
quantum XXZ model corresponding to the quantum aﬃne algebra Uq(bsl2):
(1.1)
Ta = uQaq2
Qa
+ u−1 Qaq−2
Qa
.
It can be viewed (see e.g. [FH1]) as a relation in K0(O), with Ta = [L(Yaq−1)], the class
of the two-dimensional representation of the Borel subalgebra of Uq(bsl2) (the restriction of
the fundamental representation of Uq(bsl2)); Qa = [L(Ψa)], the class of its prefundamental
representation; and u is the class of a one-dimensional representation (these notions will be
introduced below).
There are analogues of this relation in the ring K0(O) for an arbitrary Lie algebra g and
any ﬁnite-dimensional irreducible representation V of Uq(bg), which were proved in [FH1].
The starting point is the observations that the RHS of formula (1.1) can be obtained by
replacing the variable Ya appearing in the q-character of the two-dimensional representation
L(Yaq−1),
χq(L(Yaq−1)) = Yaq−1 + Y −1
aq ,
with the ratio u−1 Qaq−1
Qaq
.
Likewise, in general one should replace each variable Yi,a, i ∈I, appearing in the q-
character χq(V ) of a ﬁnite-dimensional representation V of Uq(bg) with the ratio u−1
i
Qi,aq−1
i
Qi,aqi
,
where Qi,a = [L(Ψi,a)], the class of the ith prefundamental representation in K0(O), qi = qdi
with di being the length of the ith simple root, and ui is the class of a one-dimensional

EXTENDED BAXTER RELATIONS AND QQ-SYSTEMS FOR QUANTUM AFFINE ALGEBRAS
3
representation. By clearing the denominators, we obtain a polynomial relation in K0(O).
This is the generalized Baxter TQ-relation associated to the representation V of Uq(bg)
proved in [FH1] (following a conjecture of N. Reshetikhin and one of the authors in [FR]).
(2) Using the universal R-matrix of Uq(bg), for any ﬁnite-dimensional representation U of
Uq(bg) we obtain a homomorphism from K0(O) to EndC(U)[[z]] sending a representation W
to the corresponding transfer-matrix tW(z)|U acting on U. Then the above TQ-relations
become the relations on the joint eigenvalues of these transfer-matrices on U, which are the
commuting quantum Hamiltonians of the XXZ-type integrable model associated to Uq(bg).
In [FH1], we proved that if U is a tensor product of ﬁnite-dimensional irreducible rep-
resentations of Uq(bg), then all eigenvalues of the transfer-matrix corresponding to the ith
prefundamental representation Li,a are polynomials in z (the degrees of these polynomials
can be found from the weight of the corresponding eigenvector) up to a universal func-
tion that is determined by U.
This generalizes Baxter’s description of the spectrum of
the commuting quantum Hamiltonians of the XXZ model (which corresponds to g = sl2).
For other representations, the eigenvalues will have diﬀerent analytic properties (see e.g.
[BLZ1, BLZ2, BLZ3]).
(3) Next, we discuss the QQ-system. To motivate it, let us rewrite the relation (1.1) for
g = sl2 as a second-order q2-diﬀerence equation satisﬁed by Qa (we set u = 1 to simplify
the formula)
(1.2)
(D2 −Taq2D + 1)Qa = 0,
where D · fa = faq2. There is a unique second solution eQa of equation (1.2) such that the
q2-diﬀerence Wronskian of Qa and eQa is equal to 1:
(1.3)
eQaqQaq−1 −eQaq−1Qaq = 1.
It is a remarkable fact that equation (1.3) can also be interpreted as a relation in K0(O),
with eQ = [L(Ψ−1
a )], the class of another representation of the Borel subalgebra of Uq(bsl2)
which we denote by L(Ψ−1
a ) (suitably normalized). This is the QQ-system for g = sl2 (it
consists of a single equation in this case).
For a general simple Lie algebra g, an analogous system was discovered by D. Masoero,
A. Raimondo, and D. Valeri in [MRV1, MRV2] in the context of aﬃne opers, which were
introduced in [FF].
In [FH2], motivated by [MRV1, MRV2] and the Langlands duality
conjecture of [FF] expressing the spectra of the quantum KdV Hamiltonians in terms of
aﬃne opers, we interpreted the QQ-system of [MRV1, MRV2] as a relation in K0(O). It
has the form
(1.4)
eQi,aqiQi,aq−1
i
−a−1
i
eQi,aq−1
i Qi,aqi
=
Y
j,Ci,j=−1
Qj,a
Y
j,Ci,j=−2
Qj,aqQj,aq−1
Y
j,Ci,j=−3
Qj,aq2Qj,aQj,aq−2,
where Qi,a is the class of L(Ψi,a) divided by its ordinary character and eQi,a is the class of
another simple representation divided by its ordinary character and by the factor (1 −a−1
i )
(where a−1
i
is the class of a one-dimensional representation corresponding to the negative
ith simple root).
(Note that in [MRV1, MRV2] and [FH2], this system was referred to

4
EDWARD FRENKEL AND DAVID HERNANDEZ
as the Q eQ-system.) Hence we can again interpret it as a universal system of relations in
K0(O), from which the QQ-systems satisﬁed by the joint eigenvalues of the corresponding
transfer-matrices follow automatically.
In [FKSZ] (see also [KZ]), the QQ-system for simply-laced g was interpreted in terms
of the Miura (G, q)-opers (for non-simply laced g, the QQ-system arising from (G, q)-opers
corresponds to the folded quantum integrable system of XXZ type introduced in [FHR]).
(4) There is also a similar system (with additive shifts instead of multiplication by qn)
for the XXX-type model associated to the Yangian Y (g), which similarly implies the QQ-
systems on the joint eigenvalues of the corresponding transfer-matrices. It was ﬁrst con-
structed in [MV] in the framework of discrete Miura opers. In the framework of represen-
tation theory of Yangians, the QQ-system for g = gln was proved in [BFLMS] following
[T]. In the case of g = so2n, analogous results were obtained recently in [FFK, EV]. These
results have been generalized (conjecturally) to all simply-laced Lie algebras in [ESV].
Remark 1.1. In both cases, the QQ-system implies (under a genericity assumption) that
the roots of the polynomial parts of the Qi,a’s satisfy the so-called Bethe Ansatz equations.
These equations were previously used to describe the eigenvalues of the transfer-matrices.
However, we consider the QQ-system as more fundamental than Bethe Ansatz equations
because the eigenvalues of the transfer-matrices automatically satisfy the QQ-system, as
explained above, whereas Bethe Ansatz equations (for a general Lie algebra g) originally
appeared as an educated guess from analyzing explicit formulas for eigenvectors and eigen-
values. It was indeed a good guess since we can now link solutions of these Bethe Ansatz
equations to the eigenvalues of the transfer-matrices via the QQ-system (under a genericity
assumption).
(5) In [MRV1, MRV2], the QQ-system (1.4) was obtained on the “dual side” of the
Langlands correspondence proposed in [FF]; namely, from solutions of diﬀerential equations
deﬁned by aﬃne opers. In the same paper, it was shown that in fact, there is a whole family
of coupled QQ-systems labeled by elements of the Weyl group W of g. Namely, there are
natural variables Qw(ωi),a, where w ∈W, i ∈I, a ∈C×, such that the old variables Qi,a and
eQi,a are identiﬁed with Qωi,a (i.e. w = e) and Qsi(ωi),a (i.e. w = si, the ith simple reﬂection
from W), respectively. These variables satisfy the equations
Qwsi(ωi),aqiQw(ωi),aq−1
i
−Qwsi(ωi),aq−1
i Qw(ωi),aqi
=
Y
j,Ci,j=−1
Qw(ωj),a
Y
j,Ci,j=−2
Qw(ωj),aqQw(ωj),aq−1
Y
j,Ci,j=−3
Qw(ωj),aq2Qw(ωj),aQw(ωj),aq−2,
(here we have suppressed some coeﬃcients analogous to the a−1
i
appearing in relations (1.4);
the precise form of these relations can be found in Theorem 5.6 below).
These equations also appear naturally from the Miura (G, q)-opers [FKSZ], and their
additive analogues appear from the discrete Miura opers [MV]. The latter have been inter-
preted as relations on representations of Yangians in [T, BFLMS, FFK, EV, ESV].
Thus, one obtains a family of QQ-systems labeled by w ∈W, with the original equations
corresponding to w = e. (Note that these equations are coupled to each other in a non-trivial
way.) It is called the extended QQ-system.

EXTENDED BAXTER RELATIONS AND QQ-SYSTEMS FOR QUANTUM AFFINE ALGEBRAS
5
It is natural to ask whether the equations of the extended QQ-system can be interpreted
as relations in K0(O). In particular, what representations from the category O correspond
to the variables Qw(ωi),a with w ̸= 1?
This was our ﬁrst motivating question for the present paper. Our second motivating
question was whether there exist w-analogues of the TQ-systems with Qi,a replaced by
Qw(ωi),a, w ∈W.
In this paper we tackle these, and related, questions. We conjecture that the answer to
each of these two questions is aﬃrmative. In particular, we conjecture (and prove for g of
rank up to 2) that if we set Qw(si),a = [L(Tw(Ψi,a)], the class of a particular representation
from the category O deﬁned below, then these Qw(si),a’s will indeed satisfy the extended
QQ-system up to some normalization factors (see Conjecture 5.8).
(6) While investigating these questions, we asked whether there is a natural action of
the Weyl group on the ring where the q-characters of representations from O take values,
such that when we apply w ∈W to the (renormalized) q-character of L(Ψi,a)), we obtain
the q-character of L(Tw(Ψi,a)). In our previous paper [FH3] we showed that one can indeed
deﬁne such an action.
More precisely, we deﬁned an action of the Weyl group W of g on a direct sum of
completions of the ring Y = Z[Y ±1
i,a ]i∈I,a∈C× (this is the ring where the q-characters of ﬁnite-
dimensional representations of Uq(bg) take values), such that the subring of invariants of
the action of W in Y is spanned by the q-characters of ﬁnite-dimensional representations
of the quantum aﬃne algebra Uq(bg) (see Theorem 3.10 below). Thus, the Grothendieck
ring of the category of ﬁnite-dimensional representations of Uq(bg) is realized as the ring of
invariants of an action of the Weyl group, much like the Grothendieck ring of the category
of ﬁnite-dimensional representations of the Lie algebra g.
(7) The Weyl group action that we constructed in [FH3] has led us to conjecture a
q-character formula for the representations L(Tw(Ψi,a)) for all w ∈W (Conjecture 4.8).
This q-character formula states that up to a constant (i.e. spectral parameter-independent)
factor, χq(L(Tw(Ψi,a))) satisﬁes the q2
i -diﬀerence equation
(1.5)
[w(ωi)]
χq(L(Tw(Ψi,aq−1
i )))
χq(L(Tw(Ψi,aqi))) = Θw(Yi,a),
where Θw is the action of the element w ∈W that we constructed in [FH3] and [w(ωi)]
corresponds to an invertible one-dimensional representation deﬁned below.
We have previously proved this formula for w = e (in [FH1]; see formula (3.18) below)
and w = si (in [FH2, FHR]; see Theorem 3.9 below). In the present paper we prove it for
all w ∈W for Lie algebras g of rank 2.
In Theorem 4.5 we compute Θw(Yi,a). Formula (1.5) then enables us to pin down the
q-character of L(Tw(Ψi,a)) up to a constant factor. The W-invariance of the q-characters
of ﬁnite-dimensional representations of Uq(bg) proved in [FH3] then gives us (modulo Con-
jecture 4.8) the sought-after extended Baxter TQ-relations in K0(O) (see Conjecture 3.7
and Corollary 4.10). Namely, replace every variable Yi,a, i ∈I, appearing in the q-character

6
EDWARD FRENKEL AND DAVID HERNANDEZ
χq(V ) with
Yi,a 7→[w(ωi)]
[L(Ψw(ωi),aq−1
i )]
[L(Ψw(ωi),aqi)] .
Then by clearing the denominators, we obtain the extended Baxter TQ-relation correspond-
ing to V and w ∈W.
(8) The third motivating question for this paper was whether the eigenvalues of the
transfer-matrices corresponding to the representations L(Tw(Ψi,a)), w ∈W, acting on a
tensor product U of ﬁnite-dimensional irreducible representations of Uq(bg) are polynomials
up to an overall factor determined by U. We will address this question in a follow-up paper
[FH4].
(9) Our results have also led us (in Section 7) to formulate conjectural q-character for-
mulas for certain simple representations of shifted quantum aﬃne algebras introduced in
[FT, He3]. We prove that they are satisﬁed for w = e and w = si and arbitrary w ∈W
for Lie algebras of rank 2. We expect analogous formulas to hold for representations of
shifted Yangians which have recently been studied in [BrK, KWWY, NW]; in particular,
in the context of the quantization of transverse slices to Schubert varieties in the aﬃne
Grassmannian and Coulomb branches of quiver gauge theories.
The paper is organized as follows. In Section 2 we recall some basic facts about quantum
aﬃne algebras Uq(bg) and their representations. We also introduce the category O of repre-
sentations of the Borel subalgebra Uq(bb) of Uq(bg) deﬁned in [HJ]. In Section 3, we conjecture
the extended TQ-relations (Conjecture 3.7) which involve classes of simple representations
from the category O whose highest ℓ-weights are obtained using a modiﬁcation of Chari’s
braid group action [C]. We then show how the Weyl group action introduced in [FH3] was
motivated by this picture. In Section 4, we use the Weyl group action to prove Conjectures
3.7 and 3.8 when w ∈W is a simple reﬂection. We give a conjectural q-character formula
for L(Ψw(ωi),a) in Conjecture 4.8 and show that it implies the extended Baxter TQ-relations
(see Corollary 4.10). In Section 5, we formulate the extended QQ-system in K0(O) (Con-
jecture 5.8). In Section 6 we introduce the shifted quantum aﬃne algebras and formulate
analogues of our conjectures for representations of these algebras. In Section 7, we prove
our conjectures for Lie algebras of rank 2.
Acknowledgments. The authors were partially supported by a grant from the France-
Berkeley Fund of UC Berkeley. The second author would like to thank the Department
of Mathematics at UC Berkeley for hospitality during his visit in the Spring of 2022 and
Bernard Leclerc for useful discussions. We also thank Dmytro Volin for useful correspon-
dence.
2. Background on quantum affine algebras
In this section we collect deﬁnitions and results on quantum aﬃne algebras and their
representations that we will need in the main body of the paper. We refer the reader for
more details to the textbook [CP] and the more recent surveys on this topic [CH, L]. We also
discuss representations of the Borel subalgebra of a quantum aﬃne algebra (see [HJ, FH1]
for more details).

EXTENDED BAXTER RELATIONS AND QQ-SYSTEMS FOR QUANTUM AFFINE ALGEBRAS
7
2.1. Lie algebra and Weyl group. Let g be a ﬁnite-dimensional simple Lie algebra of
rank n and h its Cartan subalgebra. We will use the notation and conventions of [Kac]. We
denote by C = (Ci,j)i,j∈I its Cartan matrix, where I = {1, . . . , n}. We denote by h∨(resp.
r∨) the dual Coxeter number (resp. the lacing number) of g.
Let {αi}i∈I, {α∨
i }i∈I, {ωi}i∈I, {ω∨
i }i∈I be the sets of simple roots, simple coroots, fun-
damental weights, and fundamental coweights, respectively. We set
Q =
M
i∈I
Zαi,
Q+ =
M
i∈I
Z≥0αi,
P =
M
i∈I
Zωi,
P + =
M
i∈I
Z≥0ωi,
P ∨=
M
i∈I
Zω∨
i ,
and let PQ := P ⊗Q, P ∨
Q := P ∨⊗Q.
We have the set of roots ∆⊂Q, which is decomposed as ∆= ∆+ ⊔∆−where ∆± =
±(∆∩Q+). Let D = diag(d1, . . . , dn) be the unique diagonal matrix such that B = DC is
symmetric and di’s are relatively prime positive integers.
We will use the partial ordering on PQ deﬁned by the rule ω ≤ω′ if and only if ω′−ω ∈Q+.
The vector space of invariant symmetric bilinear forms on g is known to be one-dimensional.
There is a unique such form κ0 [Kac] with the property that the dual form (κ0|h)−1 on h∗
to the restriction κ0|h of κ0 to h ⊂g satisﬁes (αi, αi) = 2di. We denote the restriction of
(κ0|h)−1 to P ⊂h∗by (·, ·) the corresponding. We have for i, j ∈I,
(αi, αj) = diCi,j
and
(αi, ωj) = djδi,j.
Since αi = P
j∈I Cj,iωj, the bases (αi)i∈I, (ωi/di)i∈I are dual to each other with respect to
this form.
Let W be the Weyl group of g, generated by the simple reﬂections si (i ∈I). For w ∈W,
we denote by l(w) its length. The group W acts on P, with the action determined by the
formula
sk(ωj) := ωj −δk,jαj,
j, k ∈I.
The form (·, ·) is invariant under this action, i.e. for any λ, µ ∈P, we have
(2.6)
(wλ, wµ) = (λ, µ) for any w ∈W.
The Weyl group invariance implies that for i, k ∈I and w ∈W we have
(wωi, αk) = (ωi, w−1αk)
which is equal to di multiplied by the multiplicity of αi in the decomposition of the root
w−1αk. This root is positive or negative, hence the sign of (wωi, αk) does not depend on
i ∈I.
Now consider a reduced decomposition w = si1 · · · siN of a Weyl group element w. Then
w−1 = siN · · · si1 is a reduced decomposition of w−1 and siN · · · siL is also a reduced decom-
position for all 1 ≤L ≤N.
Lemma 2.1. The multiplicity of ωiM in
(siM+1 · · · siN)(ωi)
is non-negative for any i ∈I.

8
EDWARD FRENKEL AND DAVID HERNANDEZ
Proof. This follows from the formula (see [Kac, Lemma 3.11])
(siN · · · siM)(αiM ) ∈∆−.
□
The following lemma is also well-known. Let Wi be the subgroup of W generated by sj,
j ̸= i.
Lemma 2.2. Let w ∈W and i ∈I. Then
(1) w(αi) ∈∆+ if and only if l(wsi) = l(w) + 1.
(2) w(ωi) = ωi if and only if w ∈Wi, so the W-orbit of ωi is in bijection with W/Wi.
(3) The W-orbits {w(ωi)}w∈W of the fundamental weights are disjoint.
Proof. Part (1) follows, for example, from [Hu, Lemma 1.6, Corollary 1.7].
Part (2) is a particular case of [Hu, Proposition 1.15]. Indeed (ωi, αi) > 0 and
ωi ∈C = {λ|(λ, αj) = 0} for any j ̸= i.
This proposition in the case of the subset {1, 2, ..., n} \ {i} ⊂I implies the result.
To prove part (3), note that w(ωi) = ωj implies that ωj ⪯ωi as ωi is the highest weight
of a fundamental representation of g.
□
Denote the W-orbit of ωi in P by Pωi. This is the set of extremal weights of the ith
fundamental representation Vωi of g. Each of them has multiplicity one. If these are all the
weights of Vωi, then Vωi is called minuscule (for example, this is so for all i if g is of type
A).
Denote by w0 the longest element of the Weyl group. We have the bar involution of the
set I deﬁned by w0(αi) = −αi, i ∈I. Note that this implies w0(ωi) = −ωi, i ∈I. This is
the lowest weight of
2.2. Quantum aﬃne algebras and their Borel subalgebras. Let bg be the untwisted
aﬃne Kac-Moody Lie algebra associated to g and (Ci,j)0≤i,j≤n the corresponding indecom-
posable Cartan matrix. Let a0, · · · , an be the Kac labels deﬁned in [Kac], pp. 55-56. We
have a0 = 1 and we set α0 = −(a1α1 + a2α2 + · · · + anαn).
Throughout this paper, we ﬁx a non-zero complex number q which is not a root of unity.
We also choose h ∈C such that q = eh and deﬁne qr ∈C× for any r ∈Q as ehr. Since q is
not a root of unity, the map Q →C× sending r 7→qr is injective.
We will use the standard symbols for q-integers
[m]z = zm −z−m
z −z−1 ,
[m]z! =
m
Y
j=1
[j]z,

s
r

z
=
[s]z!
[r]z![s −r]z!.
We set qi = qdi.
The quantum aﬃne algebra of level 0 ((also known as the quantum loop algebra) Uq(bg)
is the C-algebra with the generators ei, fi, k±1
i
(0 ≤i ≤n) and the following relations for

EXTENDED BAXTER RELATIONS AND QQ-SYSTEMS FOR QUANTUM AFFINE ALGEBRAS
9
0 ≤i, j ≤n:
kikj = kjki,
ka0
0 ka1
1 · · · kan
n = 1,
kiejk−1
i
= qCi,j
i
ej,
kifjk−1
i
= q−Ci,j
i
fj,
[ei, fj] = δi,j
ki −k−1
i
qi −q−1
i
,
1−Ci.j
X
r=0
(−1)re(1−Ci,j−r)
i
eje(r)
i
= 0
(i ̸= j),
1−Ci.j
X
r=0
(−1)rf (1−Ci,j−r)
i
fjf (r)
i
= 0
(i ̸= j) .
Here x(r)
i
= xr
i /[r]qi! (xi = ei, fi). The algebra Uq(bg) has a Hopf algebra structure such that
∆(ei) = ei ⊗1 + ki ⊗ei,
∆(fi) = fi ⊗k−1
i
+ 1 ⊗fi,
∆(ki) = ki ⊗ki for 0 ≤i ≤n.
The algebra Uq(bg) can also be presented in terms of the Drinfeld generators [Dr, Be]
x±
i,r (i ∈I, r ∈Z),
φ±
i,±m (i ∈I, m ∈Z),
k±1
i
(i ∈I).
(2.7)
We will use the generating series (i ∈I)
(2.8)
φ±
i (z) =
X
m∈Z
φ±
i,mzm = k±1
i
exp
 
±(qi −q−1
i
)
X
r>0
hi,±rz±r
!
.
In particular, φ±
i,±m = 0 for m < 0, i ∈I, and φ±
i,0 = k±1
i
, so φ+
i,0φ−
i,0 = 1.
The algebra Uq(bg) has a Z-grading deﬁned by deg(ei) = deg(fi) = deg(k±1
i
) = 0 for i ∈I
and deg(e0) = −deg(f0) = 1. It satisﬁes deg(x±
i,m) = deg(φ±
i,m) = m for i ∈I, m ∈Z. For
a ∈C×, there is an automorphism
τa : Uq(bg) →Uq(bg)
such that τa(g) = amg for any element g of degree m ∈Z.
Deﬁnition 2.3. The Borel subalgebra Uq(bb) is the subalgebra of Uq(bg) generated by ei and
k±1
i
with 0 ≤i ≤n.
This is a Hopf subalgebra of Uq(bg). The algebra Uq(bb) contains the Drinfeld generators
x+
i,m, x−
i,r, k±1
i
, φ+
i,r with i ∈I, m ≥0 and r > 0.
Remark 2.4. For g = sl2, the algebra Uq(bb) is generated by the Drinfeld generators, but
for other Lie algebras g this is not the case.
2.3. Category O for representations of Borel subalgebras.
Deﬁnition 2.5. We deﬁne t× := Maps(I, qQ) =
 qQI, where qQ := {erh, r ∈Q}, as a
group with pointwise multiplication.
We deﬁne a group homomorphism
: PQ −→t× by setting
rωi(j) := qrδi,j
i
= erdihδi,j,
i, j ∈I, r ∈Q.

10
EDWARD FRENKEL AND DAVID HERNANDEZ
Since we have assumed that q is not a root of unity, this is actually an isomorphism, with
the inverse map ̟ : t× →PQ deﬁned by the formula
ψi = edih(̟(ψ))(α∨
i ),
∀ψ = (ψi)i∈I ∈t×.
The partial ordering on P induces a partial ordering on t×.
For a Uq(bb)-module V and ω ∈t×, we set
Vω := {v ∈V | ki v = ω(i)v (∀i ∈I)} ,
(2.9)
and call it the weight subspace of weight ω. For any i ∈I, r ∈Z we have φ±
i,r(Vω) ⊂Vω
and x±
i,r(Vω) ⊂Vωα±1
i . We say that V is Cartan-diagonalizable if V = L
ω∈t×Vω.
Deﬁnition 2.6. A series Ψ = (Ψi,m)i∈I,m≥0 of complex numbers such that Ψi,0 ∈qQ for
all i ∈I is called an ℓ-weight.
We denote by t×
ℓthe set of ℓ-weights. We have a natural projection : t×
ℓ→t× sending
(Ψi,m)i∈I,m≥0 to (Ψi,0)i∈I and a natural inclusion ı : t× →t×
ℓ.
We will identify the collection (Ψi,m)m≥0 with its generating series and use this to rep-
resent every ℓ-weight as an I-tuple of formal power series in z:
Ψ = (Ψi(z))i∈I,
Ψi(z) :=
X
m≥0
Ψi,mzm.
Since each Ψi(z) is an invertible formal power series, t×
ℓhas a natural group structure. We
also have a surjective morphism of groups ̟ : t×
ℓ→PQ deﬁned as the composition of the
projection : t×
ℓ→t× and the map ̟ : t× →PQ deﬁned above.
Deﬁnition 2.7. A Uq(bb)-module V is said to be of highest ℓ-weight Ψ ∈t×
ℓif there is v ∈V
such that V = Uq(bb)v and the following equations hold:
ei v = 0
(i ∈I) ,
φ+
i,mv = Ψi,mv
(i ∈I, m ≥0) .
The ℓ-weight Ψ ∈t×
ℓis uniquely determined by V . It is called the highest ℓ-weight of V .
The vector v is said to be a highest ℓ-weight vector of V .
Lemma 2.8. [HJ, Section 3.2] For any Ψ ∈t×
ℓ, there exists a simple highest ℓ-weight
module L(Ψ) over Uq(bb) of highest ℓ-weight Ψ. This module is unique up to isomorphism.
Deﬁnition 2.9. [HJ] For i ∈I and a ∈C×, let
L±
i,a = L(Ψi,a)
where
(Ψi,a)j(z) =
(
(1 −za)±1
(j = i) ,
1
(j ̸= i) .
(2.10)
We call L+
i,a (resp. L−
i,a) a positive (resp. negative) prefundamental representation.
For λ ∈PQ, we deﬁne the 1-dimensional representation
[λ] = L(Ψλ)
with
Ψλ := ı(λ),
where ı : t× →t×
ℓis the inclusion.

EXTENDED BAXTER RELATIONS AND QQ-SYSTEMS FOR QUANTUM AFFINE ALGEBRAS
11
For a ∈C×, the subalgebra Uq(bb) is stable under τa. Denote its restriction to Uq(bb) by
the same letter. Then the pullbacks of the Uq(bb)-modules L±
i,b by τa is L±
i,ab.
For λ ∈t×, let D(λ) = {ω ∈t× | ω ≤λ}. Consider the category O introduced in [HJ].
Deﬁnition 2.10. A Uq(bb)-module V is said to be in category O if
i) V is Cartan-diagonalizable;
ii) for all ω ∈t× we have dim(Vω) < ∞;
iii) there exist a ﬁnite number of elements λ1, · · · , λs ∈t× such that the weights of V are
in
S
j=1,···,s
D(λj).
The next result follows directly from the deﬁnition.
Lemma 2.11. The category O is a monoidal category.
Deﬁnition 2.12. We deﬁne r as the subgroup of t×
ℓconsisting of Ψ such that Ψi(z) is an
expansion in positive powers of z of a rational function in z for any i ∈I.
Theorem 2.13. [HJ] Let Ψ ∈t×
ℓ. The simple module L(Ψ) is in O if and only if Ψ ∈r.
Deﬁnition 2.14. We deﬁne E as the additive group of maps c : PQ →Z whose support
supp(c) = {ω ∈PQ, c(ω) ̸= 0}
is contained in a ﬁnite union of sets of the form D(µ). For ω ∈PQ, we deﬁne [ω] = δω,. ∈E.
For V in the category O we deﬁne the character of V to be the following element of E
χ(V ) =
X
ω∈t×
dim(Vω)[ω] .
(2.11)
Let K0(O) be the Grothendieck ring of the category O (see also [HL, Section 3.2]). In the
same way as in the case of the ordinary category O of g-modules (see [Kac, Section 9.6]),
one shows that the multiplicity of any simple module in a given module from the category O
is well-deﬁned. Hence the elements of K0(O) can be written as the sums (possibly inﬁnite)
χ =
X
Ψ∈r
λΨ[L(Ψ)]
where the λΨ ∈Z are such that P
Ψ∈r,ω∈PQ |λΨ|dim((L(Ψ))ω)[ω] is in E.
We naturally identify E with the Grothendieck ring of the subcategory of the category O
whose obtains are representations with constant ℓ-weights. Its simple objects are the [ω],
ω ∈PQ. Thus as in [Kac, Section 9.7] we will regard elements of E as formal sums
c =
X
ω∈Supp(c)
c(ω)[ω].
The multiplication is given by [ω][ω′] = [ω + ω′] and E is regarded as a subring of K0(O).
The character deﬁnes a ring morphism χ : K0(O) →E which is not injective.

12
EDWARD FRENKEL AND DAVID HERNANDEZ
2.4. Monomials and ﬁnite-dimensional representations. Following [FR], we give the
following deﬁnition.
Deﬁnition 2.15. Deﬁne the ring of Laurent polynomials Y = Z[Y ±1
i,a ]i∈I,a∈C× in the inde-
terminates {Yi,a}i∈I,a∈C×. Deﬁne M as the multiplicative group of monomials in Y.
For i ∈I, a ∈C×, deﬁne Ai,a ∈M by the formula
(2.12)
Ai,a :=
Yi,aq−1
i Yi,aqi

Y
{j∈I|Cj,i=−1}
Yj,a
Y
{j∈I|Cj,i=−2}
Yj,aq−1Yj,aq
Y
{j∈I|Cj,i=−3}
Yj,aq−2Yj,aYj,aq2
−1
.
Deﬁne an injective group homomorphism M →r by
Yi,a 7→[ωi]Ψi,aq−1
i Ψ−1
i,aqi.
Note that ̟(Yi,a) = ωi and ̟(Ai,a) = αi.
We will identify a monomial m ∈M with its image in r. In particular, for any m ∈M,
we will denote by L(m) the corresponding simple Uq(bb)-module.
Let C be the category of type 1 ﬁnite-dimensional representations of Uq(bg). For brevity,
we will omit “type 1” and refer to objects of the category C simply as ﬁnite-dimensional
representations of Uq(bg). For j ∈I, a monomial in m ∈M is said to be j-dominant (resp. j-
antidominant) if the powers of the variables Yj,b, b ∈C×, occurring in this monomial are all
positive (resp. negative). A monomial m ∈M is said to be dominant if it is j-dominant for
any j ∈I. We will denote by M+ the set of dominant monomials. This is a subsemi-group
of M.
Part (1) of the following theorem was proved in [HJ] using the result of part (2), which
was established in [CP] following [Dr].
Theorem 2.16. (1) For m ∈M, the simple Uq(bb)-module L(m) is ﬁnite-dimensional if
and only if m ∈M+. Moreover, the action of Uq(bb) on L(m) can be uniquely extended to
an action of Uq(bg) in this case.
(2) Every simple module in the category C is of the form L(m), m ∈M+.
According to [FH1, Remark 3.11], up to tensoring with one-dimensional representations,
the modules described in this theorem are all simple ﬁnite-dimensional modules in the
category O.
In particular, for i ∈I, a ∈C×, we have the ﬁnite-dimensional fundamental representa-
tion L(Yi,a) of Uq(bg). The classes of these representations freely generate the Grothendieck
ring K0(C).
2.5. q-characters.
Deﬁnition 2.17. For a Uq(bb)-module V and Ψ ∈t×
ℓ, the subspace of V ,
VΨ = {v ∈V | ∃p ≥0, ∀i ∈I, ∀m ≥0, (φ+
i,m −Ψi,m)pv = 0}
(2.13)
is called the ℓ-weight subspace of V of ℓ-weight Ψ.
Theorem 2.18. [HJ] For V in category O, VΨ ̸= 0 implies Ψ ∈r.

EXTENDED BAXTER RELATIONS AND QQ-SYSTEMS FOR QUANTUM AFFINE ALGEBRAS
13
We deﬁne Eℓas the additive group of maps c : r →Z so that the image of its support
supp(c) = {Ψ ∈r, c(Ψ) ̸= 0}
by ̟ is contained in a ﬁnite union of sets of the form D(µ). The group Eℓis a completion
of the group ring of r and the ring structure on the latter extends to Eℓby continuity.
Moreover, the homomorphism ̟ naturally extends to a surjective homomorphism
̟ : Eℓ։ E,
where E is deﬁned in Deﬁnition 2.14. We also have a natural inclusion E ֒→Eℓ.
Since Y is the group ring of M (see Deﬁnition 2.15), the injective group homomorphism
M →r extends to an injective ring homomorphism Y →Eℓ.
For Ψ ∈r, we deﬁne [Ψ] = δΨ,. ∈Eℓ.
Let V be a Uq(bb)-module in category O. Following [FR, HJ], we deﬁne the q-character
of V as
χq(V ) =
X
Ψ∈r
dim(VΨ)[Ψ] ∈Eℓ.
(2.14)
The following is proved in [FR] and [HJ, Section 3.4].
Proposition 2.19. Formula 2.14 deﬁnes an injective ring homomorphism
χq : K0(O) →Eℓ.
Note that we have χ(V ) = ̟(χq(V )) for any representation V from the category O.
Slightly abusing notation, we will write [ω] for both the one-dimensional representation
in the category O corresponding to ω ∈PQ and its q-character.
Recall that M is the multiplicative group of monomials of Y and the injective group
homomorphism M →r from Deﬁnition 2.15, as well as the injective ring homomorphism
Y →Eℓ. We will identify M and Y with their images in r and Eℓ, respectively, under these
homomorphisms.
Theorem 2.20. [FR, FM]
(1) For any ﬁnite-dimensional representation V of Uq(bg), all ℓ-weights appearing in V
are in the image of M in r.
(2) The q-character χq(V ) of V is an element of Y = Z[Y ±1
i,a ]i∈I,a∈C× ⊂Eℓ.
(3) For any simple ﬁnite-dimensional representation L(m) of Uq(bg), we have
χq(L(m)) ∈m(1 + Z[A−1
i,a]i∈I,a∈C×).
Let ϕ : M →P be the restriction of the homomorphism ̟ to M. Explicitly, ϕ sends a
monomial m = Q
i∈I,a∈C× Y ui,a(m)
i,a
in M to the corresponding g-weight
ϕ(m) :=
X
i∈I,a∈C×
ui,a(m)ωi ∈P.
For example, for i ∈I, a ∈C×, we have ϕ(Yi,a) = ωi and ϕ(Ai,a) = αi, where Ai,a ∈M is
deﬁned by formula (2.12). In particular, if m ∈M+, then ϕ(m) ∈P +.
The next result follows directly from the deﬁnitions.

14
EDWARD FRENKEL AND DAVID HERNANDEZ
Lemma 2.21. (1) For m ∈M+, let L(m) be the corresponding simple Uq(bg)-module, and
set λ := ϕ(m) ∈P +. The restriction of L(m) to Uq(g) is isomorphic to a direct sum of
simple Uq(g)-modules of the form
(2.15)
Vq
λ
M

M
µ<λ
(Vq
µ)⊕cλµ

,
where Vq
µ, µ ∈P +, denotes the simple Uq(bg)-module with highest weight µ, and we use the
standard ordering on P +.
(2) For any ﬁnite-dimensional Uq(bg)-module V , the ordinary character of its restriction
to Uq(g) is equal to ϕ(χq(V )).
We will also need the following result.
Theorem 2.22. [FH1] For any a ∈C×, i ∈I we have
χq(L+
i,a) = [Ψi,a] χ(L+
i,a)
and
χ(L+
i,a) = χ(L−
i,a).
2.6. Chari’s braid group action and extremal monomials. Consider the simple ﬁnite-
dimensional Uq(bg)-module L(m), m ∈M+, and set λ = ϕ(m) ∈P +. Lemma 2.21 implies
that the ordinary character of the restriction of L(m) to Uq(g) is invariant under the action
of the Weyl group W. Furthermore, Lemma 2.21 implies that for any w ∈W, the dimension
of the weight subspace of L(m) of weight w(ω) is 1, and it is spanned by an extremal weight
vector (in the sense of [Kas]) which belongs to the Uq(g)-submodule Vq
λ generated by the
highest weight vector of L(m). We will denote this vector by vw. (In particular, if w = e,
the identity element of the Weyl group W, the vector ve is the highest weight vector of
L(m).) Hence this weight subspace is also an ℓ-weight subspace, and vw is an ℓ-weight
vector.
V. Chari introduced in [C] a braid group action on Y = Z[Y ±1
i,a ]i∈I,a∈C× and used it to
compute the monomial in Y expressing the ℓ-weight of vw.
Namely, Chari deﬁned the operators Ti, i ∈I, on Y acting by formula
Ti(Yi,a) = Yi,aA−1
i,aqi and Ti(Yj,a) = Yj,a if j ̸= i
for all i, j ∈I and a ∈C×. The operator Ti is not an involution, but it was established in
[C] (a closely related result was proved earlier in [BP]) that the Ti’s satisfy the relations of
the braid group corresponding to g. Hence, for any w ∈W, there is a well-deﬁned operator
Tw acting on Y by the formula
Tw = Ti1Ti2 . . . Tik
for any reduced decomposition w = si1 . . . sik.
Theorem 2.23. [C, CM] The ℓ-weight of vw ∈L(m) is Tw(m). In particular, Tw(m) occurs
in χq(L(m)) with multiplicity 1.
Recall the set Pωi = W · ωi ⊂P. By Lemma 2.2,(ii), Pωi ≃W/Wi, where Wi is the
subgroup of W generated by sj, j ̸= i.

EXTENDED BAXTER RELATIONS AND QQ-SYSTEMS FOR QUANTUM AFFINE ALGEBRAS
15
Lemma 2.24. For ﬁxed i ∈I and a ∈C×, the monomial Tw(Yi,a), w ∈W, only depends
on the class of w in W/Wi. Hence there is a one-to-one correspondence
{Tw(Yi,a)}w∈W ≃Pωi
Tw(Yi,a) ↔w(ωi).
Proof. It follows from Proposition 3.1 in [C] that Tw(Yi,a) depends only on w(ωi) ∈P.
□
Lemmas 2.24 and 2.2,(3) imply that the following notation is well-deﬁned:
Yw(ωi),a := Tw(Yi,a).
Example 2.25. (i) For w = e, Yωi,a = Yi,a.
(ii) Let w = si for some i ∈I. For k ∈I and a ∈C×, we have
Ti(Yk) = Ysi(ωk),a = Yk,aA−δi,k
i,aqi .
(iii) By [FM], we have Yw0(ωi),a = Y −1
i,aqr∨h∨.
It is well-known that the subgroup L
i∈I Z(d + 1 −di)ωi ⊂P is stable under the action
of the Weyl group W. Similarly, we obtain the following result. For i ∈I and a ∈C× let
us set
Wi,a =





Yi,a
if di = d,
Yi,aq−1Yi,aq
if di = d −1,
Yi,aq−2Yi,aYi,aq2
if di = d −2.
(2.16)
Lemma 2.26. The subring
Z[W ±1
i,a ]i∈I,a∈C× ⊂Z[Y ±1
i,a ]i∈I,a∈C× = Y
is stable under the action of the operators Tw, w ∈W.
Proof. It suﬃces to check this for the operators Ti, i ∈I. We have
Ti(Wj,a) = Wj,aU −δi,j
i,aqi
where
Ui,a =





Ai,a
if di = d,
Ai,aq−1Ai,aq
if di = d −1,
Ai,aq−2Ai,aAi,aq2
if di = d −2.
(2.17)
By inspection of these formulas and the formulas for the monomials Ai,a, we check that the
Ui,a’s belong to Z[W ±1
i,a ]i∈I,a∈C×. This completes the proof.
□
In particular, we obtain the following result.
Proposition 2.27. For any dominant monomial m ∈Z[Wi,a]i∈I,a∈C×, the extremal ℓ-
weights of L(m) belong to Z[W ±1
i,a ]i∈I,a∈C×.
It implies the following result which will also be useful for our purposes.
Corollary 2.28. Let i, k ∈I so that Ck,i < −1. For any w ∈W, Yw(ωi),1 is a Laurent
monomial in the Wj,b, j ∈I, b ∈C×.
Proof. This follows from Proposition 2.27 as di is equal to the lacing number d in this case,
and so Yi,1 = Wi,1.
□

16
EDWARD FRENKEL AND DAVID HERNANDEZ
3. Extended TQ-relations
In Section 3.1 we recall what is known about the generalized Baxter TQ-relations in
the Grothendieck ring of the category O established in [FH1] (Theorem 3.1).
Then in
Section 3.2 we propose the Extended TQ-relations Conjecture 3.7. It involves classes of
simple representations from the category O whose highest ℓ-weights are obtained using a
modiﬁcation of Chari’s braid group action [C] described in Section 2.6. In Section 3.4 we
show how the Weyl group action introduced in [FH3] is motivated by this picture. Finally,
in Section 3.5 we introduce some homomorphisms that we will use in the next section.
3.1. Recollections. We recall the TQ-relations which were conjectured in [FR] and proved
in [FH1].
Theorem 3.1. [FH1] Let V be a ﬁnite-dimensional simple representation of Uq(bg). Replace
every variable Yi,a, i ∈I, appearing in the q-character χq(V ) with the ratio [ωi]
Qi,aq−1
i
Qi,aqi
,
where Qi,a = [L(Ψi,a)]. Equating this expression with [V ] and clearing the denominators,
we obtain an algebraic relation in K0(O).
Theorem 3.2 ([FH1]). Let V be a ﬁnite-dimensional simple representation of Uq(bg). Its
q-character χq(V ) is equal to the expression obtained by replacing every variable Yi,a, i ∈I,
appearing in χq(V ) with the ratio [ωi]
χq(L(Ψi,aq−1
i ))
χq(L(Ψi,aqi)) (we need to clear the denominators to
obtain an algebraic relation).
For readers convenience, we recall the proof of these two theorems given in [FH1].
Proof of Theorems 3.1 and 3.2. Recall from Theorem 2.22 that
(3.18)
χ(L(Ψi,a)) = χq(L+
i,a) = [Ψi,a] χ(L+
i,a).
Therefore the relation of Theorem 3.2 is equivalent to the same relation in which we replace
every variable Yi,a, i ∈I, appearing in χq(V ) with the ratio [ωi]
[Ψi,aq−1
i ]
[Ψi,aqi] . But the latter
follows directly from Deﬁnition 2.15. Thus, we obtain the statement of Theorem 3.2. Re-
calling the injectivity of the q-character homomorphism (Proposition 2.19), we obtain the
TQ-relations of Theorem 3.1.
□
Remark 3.3. We had noted in [FH1, Remark 4.10] that another TQ-relation may be written
in terms of the simple representations L(Ψ−1
i,a). Both relations will appear as particular cases
of our extended TQ-relations below.
3.2. Extended TQ-relations Conjecture. Using a modiﬁcation of Chari’s braid group
action described in Section 2.6, we now propose conjectural extended TQ-relations for an
arbitrary element w of the Weyl group W, so that the original TQ-relations of Theorem 3.1
correspond to the identity element of W.
Recall the monomial Yw(ωi),1 introduced in Section 2.6. According to Corollary 2.28, if
Ck,i < −1, then Yw(ωi),1 is a Laurent polynomial in Wk,b.

EXTENDED BAXTER RELATIONS AND QQ-SYSTEMS FOR QUANTUM AFFINE ALGEBRAS
17
Deﬁnition 3.4. For i ∈I, a ∈C×, and w ∈W, deﬁne an ℓ-weight Ψw(ωi),a by the following
formulas.
The ℓ-weight Ψw(ωi),1 is deﬁned from the factorization of Yw(ωi),1 as a product of the
variables Y ±1
k,b by replacing
Yk,b by Ψk,b−1 if di = dk,
Yk,b by Ψk,b−1qΨk,b−1q−1 if Ci,k = −2,
Yk,b by Ψk,b−1q2Ψk,b−1Ψk,b−1q−2 if Ci,k = −3,
Wk,b by Ψk,b−1 if Ck,i < −1.
Finally, we set
Ψw(ωi),a = τa(Ψw(ωi),1).
Remark 3.5. If g is simply-laced (i.e. di = 1 for all i ∈I), then we replace Yk,b by Ψk,b−1
in Yw(ωi),1 for all k and b. If g is not simply-laced, we do this only for those k for which
the lengths of αi and αk are the same. If the length of αi is shorter than the length of αk,
we replace Yk,b by a product of two or three Ψ’s (depending on the lacing number of g).
And if the length of αi is longer than the length of αk, then we replace Wk,b, which is the
product of two or three Y ’s (depending on the lacing number of g), by Ψk,b−1 (this procedure
is well-deﬁned by Corollary 2.28). Under this construction, the Cartan matrix gets replaced
by its transpose, which we can see as a manifestation of Langlands duality.
Example 3.6. (i) For g = sl2 we have
Yω1,1 = Y1,1 and Yw0(ω1),1 = Y −1
1,q2
and so
Ψω1,a = Ψ1,a and Ψw0(ω1),a = Ψ−1
1,aq−2.
(ii) For general types, we have
Ysi(ωi),1 = Yi,aA−1
i,aqi and Ψsi(ωi),a = eΨi,aq−2
i ,
where eΨi,aq−2
i , introduced in [FH2], is given by the formula
(3.19)
eΨi,aq−2
i
:=
Ψ−1
i,aq−2
i


Y
j∈I,Ci,j=−1
Ψj,aq−1
i




Y
j∈I,Ci,j=−2
Ψj,aq−2Ψj,a




Y
j∈I,Ci,j=−3
Ψj,aq−3Ψj,aq−1Ψj,aq

.
(iii) It is known from [FM] that Yw0(ωi),1 = Y −1
i,qdh∨. Hence
Ψw0(ωi),a = Ψ−1
i,aq−dh∨.
The following is our Extended TQ-relations Conjecture.
Conjecture 3.7. Let w ∈W and let V be a ﬁnite-dimensional simple representation of
Uq(bg). Replace every variable Yi,a, i ∈I, appearing in the q-character χq(V ) with
Yi,a 7→[w(ωi)]
[L(Ψw(ωi),aq−1
i )]
[L(Ψw(ωi),aqi)] .

18
EDWARD FRENKEL AND DAVID HERNANDEZ
Then by clearing the denominators, we obtain an algebraic relation in K0(O).
Since the q-character homomorphism is injective, Conjecture 3.7 is equivalent to the
following.
Conjecture 3.8. Let V be a ﬁnite-dimensional simple representation of Uq(bg).
Its q-
character χq(V ) is equal to the expression obtained by replacing every Yi,a, i ∈I, appearing
in χq(V ) with [w(ωi)]
χq(L(Ψw(ωi),aq−1
i ))
χq(L(Ψw(ωi),aqi))
(we need to clear the denominators to obtain an
algebraic relation).
3.3. The case of simple reﬂections. For w = e, Conjecture 3.8 is proved in Theorem
3.2. In this case, we have the q-character formula which follows from Theorem 2.22:
χq(L(Ψi,a)) = [Ψi,a] χ(L+
i,a).
Next, consider the case when w is a simple reﬂection, w = si, i ∈I. In this case, we have
Ψsi(ωi),a = eΨi,aq−2
i
(see Example 3.6,(ii)), and the q-character formula for L(Ψsi(ωi),a) is
given in the following theorem.
Theorem 3.9. [FH2, FHR] The q-character of L(Ψsi(ωi),a) = L( eΨi,aq−2
i )) is equal to
χq(L(Ψsi(ωi),a)) = [ eΨi,aq−2
i ] χ(L( eΨi,aq−2
i ))) (1 −[−αi]) Σe
i,aq−2
i
where
(3.20)
Σe
i,a :=
X
k≥0
Y
0<j≤k
A−1
i,aq−2j+2
i
= 1 + A−1
i,a(1 + A−1
i,aq−2
i (1 + . . .)).
3.4. Weyl group action. Conjecture 3.7 and Theorem 3.9 suggest deﬁning an operator
Θi sending Yi,a to
(3.21)
Θi(Yi,a) := [si(ωi)]
χq(L( eΨi,aq−3
i ))
χq(L( eΨi,aq−1
i ))
= Yi,aAi,aq−1
i
Σe
i,aq−3
i
Σe
i,aq−1
i
and posing the question whether these operators satisfy the relations of the Weyl group W.
To make sense of this statement, we need to deal with the fact that Σe
i,a lies in a completion
of
(3.22)
Y = Z[Y ±1
i,a ]i∈I,a∈C×
(and so in particular Θi does not preserve Y). In [FH3] we resolved this problem by extending
the operators Θi to a direct sum of completions of Y labeled by w ∈W.
The key point here is that Σe
i,a is a solution of the q2di-diﬀerence equation
(3.23)
Σi,a = 1 + A−1
i,aΣi,aq−2di.
In order to deﬁne the operators Θi we also need another solution of this equation; namely,
(3.24)
Σsi
i,a := −Ai,aq2
i (1 + Ai,aq4
i (1 + · · · ) · · · ).

EXTENDED BAXTER RELATIONS AND QQ-SYSTEMS FOR QUANTUM AFFINE ALGEBRAS
19
Using these two solutions, we deﬁned in [FH3] operators Θi, i ∈I, acting on the direct
sum
Π :=
M
w∈W
eYw
of completions eYw of Y given by formula (3.22), which is the group ring of the group M of
monomials in Y. Namely, eYw is a topological completion with respect to a natural partial
ordering ≺w on M corresponding to w ∈W (see Section 3.5 below).
The algebra Y embeds diagonally in Π and we have canonical projections Ew : Π →eYw.
For i ∈I, the simple reﬂexion si ∈W acts by the operator
Θi = (Θw′
i
: eYw′ →eYw′si)w′∈W : Π →Π
deﬁned by the formulas Θi(Yj,a) = Yj,a if j ̸= i and
(3.25)
Θi(Yi,a) = Yi,aA−1
i,aq−di
Σi,aq−3di
Σi,aq−di
where each component of Σi,a ∈Π is one of the two solutions of the q2di-diﬀerence equation
(3.23). If l(wsi) > l(w), then we use Σe
i,a given by formula (3.20); and if l(wsi) > l(w), then
we use Σsi
i,a given by formula (3.24) (see [FH3] for more details).
Theorem 3.10. [FH3] The operators Θi deﬁne a Weyl group action on Π. Moreover, the
subring YW of W-invariants in Y is equal to the image of the q-character homomorphism
χq : K0(C) →Y, and hence YW is isomorphic to K0(C) (here C is the category of type 1
ﬁnite-dimensional representations of Uq(bg)).
Theorem 3.10 allows us to deﬁne an operator Θw : Π →Π for an arbitrary element
w ∈W using a reduced decomposition of w in terms of the simple reﬂections si. This
operator acts on Π as follows Θw = (Θw′
w )w′∈W where Θw′
w : eYw′ →eYw′w−1.
Remark 3.11. (1) Consider the following extension of Π:
Π′ = Y′ ⊗Y Π where Y′ = Z[Ψ±1
i,a, [ω]]i∈I,a∈C×,ω∈P ⊃Y.
We can extend the Weyl group action on Π to a braid group action on Π′ by deﬁning the
operator Θ′
i, i ∈I by the formulas
Θ′
i([ω]) = [si(ω)],
Θ′
i(Ψj,a) =
( Ψj,a
if j ̸= i,
eΨi,aq−2
i Σi,aq−2
i
if j = i.
The proof of the braid relations is based on a restriction to the rank 2 case as for the
operators Θi in [FH3]. For example, in type A2, we have for i ̸= j
Θ′
jΘ′
i(Ψi,a) = Ψ−1
j,aq−3Σji,aq−2
which is invariant under Θ′
i. The proof for types B2 and G2 is similar, using [FH3, Sections
4.7, 4.8].
(2) The operators Θ′
i act on the groups of invertible elements (Π′)×, (Π)×, and t×. Also,
the subgroup G of (Π′)× generated by (Π)× and the Ψj,a’s is preserved by this action. We
have (Θ′
i)2 = Id on (Π)× and (Θ′
i)2(Ψj,a) is equal to Ψj,a up to a factor in ±t×. Hence we
obtain a well-deﬁned action of the Weyl group W on G/(±t×).

20
EDWARD FRENKEL AND DAVID HERNANDEZ
3.5. Some useful homomorphisms. Let us recall the homomorphisms ̟ from [FH3,
Section 2.5] and Λ from [FH3, Section 6.4] which we will use below.
Deﬁne the partial ordering <w on P as follows: ω <w ω′ is and only w(ω) < w(ω′), where
< denotes the standard ordering (see Section 2.1). Next, deﬁne a completion (Z[y±1
i
]i∈I)w
of Z(P) = Z[y±1
i
]i∈I (where yi’s correspond to the fundamental weights ωi’s) with respect
to this ordering.
Consider the ring
π :=
M
w∈W
(Z[y±1
i
]i∈I)w.
with the diagonal embedding Z[y±1
i
] ֒→π. The assignment ̟w(Yi,a) = yi extends to a ring
homomorphism
̟w : eYw →(Z[y±1
i
]i∈I)w.
Thus, we obtain a map
̟ = (̟w)w∈W : Π →π.
The standard action of the simple reﬂection si, i ∈I, on Z[y±1
j ]j∈I, naturally extends to a
collection of sw
i : (Z[y±1
j ]j∈I)w →(Z[y±1
j ]j∈I)wsi and we obtain a well-deﬁned action of the
Weyl group W on π.
Lemma 3.12. [FH3] The projection ̟ : Π →π intertwines the actions of W on the two
rings.
Now recall the multiplicative group M of monomials in the variables Y ±1
i,a and the ho-
momorphism ϕ : M →P introduced in Section 2.5. Taking the pull-back of the partial
ordering <w under ϕ, we obtain a partial ordering ≺w mentioned in the previous section.
A subgroup M of the group of invertible elements in Π is introduced [FH3]. For our
purposes, it is enough to recall that M contains M and that it is stable by the Weyl group
action. We have the truncation homomorphism
Λ : M →M
which assigns to P ∈M the leading monomial of Ee(P).
Let σ be the group automorphism of M deﬁned by σ(Yi,a) = Yi,a−1 for any i ∈I and
a ∈C×.
We proved in [FH3, Section 6.4] that for any i ∈I, the morphism Ti of section 2.6 is also
equal to
(3.26)
Ti = σ ◦Λ ◦Θi ◦σ.
This will be generalized below for w ∈W by using homomorphism
Λw : M →M.
It is the leading term, relatively to the partial ordering ≺w, of the expansion in eYw of an
element of M. For w = e, we have Λe = Λ.
Example 3.13. For i ∈I and a ∈C×, we have
Λe(Σi,a) = 1 and Λsi(Σi,a) = −Ai,aq2
i .

EXTENDED BAXTER RELATIONS AND QQ-SYSTEMS FOR QUANTUM AFFINE ALGEBRAS
21
For w ∈W, we will also consider the group homomorphism:
Tw = Λw ◦Θw : M →M.
4. Weyl group action and solutions of the extended TQ-relations
In this section we use the Weyl group action from Section 3.4 to prove Conjectures 3.7
and 3.8 when w ∈W is a simple reﬂection. We then relate these conjectures for arbitrary
elements w ∈W to a conjectural formula for the q-character of L(Ψw(ωi),aq−1
i ), up to
non-zero factor from E ⊂Eℓ(Conjecture 4.8). This formula generalizes the formulas in
Theorem 3.9 in the case when w is a simple reﬂection. In the process, we deﬁne generating
functions Qw(ωi),a ∈Π (Theorem 4.5) and show that they satisfy the extended TQ-relations
(Theorem 4.9). In the next section, we will show that they also satisfy the extended QQ-
system (Theorem 5.6).
4.1. Relations obtained from the Weyl group action. For each element w of the Weyl
group W, we have the extended TQ-relations from Conjecture 3.7 and their equivalent q-
character versions from Conjecture 3.8. In the special case w = sj, j ∈I, Theorem 3.9 gives
us an explicit q-character formula for L(Ψsi(ωi),a), and therefore we obtain the following
equivalent reformulation of Conjecture 3.8 in the case w = sj, j ∈I.
Corollary 4.1. Let V be a ﬁnite-dimensional simple representation of Uq(bg). Its q-character
χq(V ), viewed as an element of the completion eYe of Y, is invariant under the substitution
Yi,a 7→Ee(Θj(Yi,a)),
∀i ∈I, a ∈C×.
We will now state and prove a generalization of Conjecture 4.1 for an arbitrary element
w ∈W (instead of w = si).
In fact, we will formulate two versions: for eYe and for
Π = ⊕w∈W eYw.
Theorem 4.2. Let V be a ﬁnite-dimensional representation of Uq(bg) and w ∈W.
(1) The q-character χq(V ), viewed as an element of the completion eYe of Y, is invariant
under the substitution
Yi,a 7→Ee(Θw(Yi,a)),
∀i ∈I, a ∈C×.
(2) The q-character χq(V ), viewed as an element of Π under the diagonal embedding
Y ֒→Π, is invariant under the substitution
Yi,a 7→Θw(Yi,a),
∀i ∈I, a ∈C×.
Proof. Theorem 3.10 implies that the q-character χq(V ), viewed as an element of Π under
the diagonal embedding Y ֒→Π, is invariant under all operators Θw, w ∈W. This proves
part (2). Applying the projection Ee : Π →eYe, we obtain part (1).
□
In the case w = e, the statement of this theorem is trivial. In the case w = sj, because we
know the q-character of L(Ψsi(ωi),a) from Theorem 3.9, we obtain the statement of Corollary
4.1 which in turn implies Conjectures 3.7 and 3.8 when w is a simple reﬂection (note that
for w = e we have proved these conjectures in Theorems 3.1 and 3.2). Thus, we obtain the
following.

22
EDWARD FRENKEL AND DAVID HERNANDEZ
Theorem 4.3. Conjectures 3.7 and 3.8 hold if w = sj, j ∈I.
In light of this discussion, it is natural to conjecture the following generalization of The-
orem 3.9 and formula (3.21) for Θi(Yi,a).
Conjecture 4.4. For any w ∈W, we have the following identity in eYe:
(4.27)
Θw(Yi,a) = [w(ωi)]
χq(L(Ψw(ωi),aq−1
i ))
χq(L(Ψw(ωi),aqi))
Theorem 3.10 and Conjecture 4.4 imply Conjectures 3.7 and 3.8 for an arbitrary w ∈W.
At the moment, we can only prove Conjecture 4.4 for w = e and w = sj, j ∈I (as
explained above) and for an arbitrary w ∈W if g has rank 2 (see Section 7). However, in the
next subsection we will show that this conjecture pins down the q-character of L(Ψw(ωi),aq−1
i )
up to multiplication by a non-zero factor in E ⊂Eℓ(i.e. a linear combination of constant
ℓ-weights, see Section 2.3). This in turn implies Conjectures 3.7 and 3.8 (see Corollary 4.10
below).
4.2. Computation of Θw(Yi,a). We will say that a family of ℓ-weights Ψa parametrized by
a ∈C× is C×-equivariant if Ψa = τa(Ψ1) for any a ∈C×. We have an analogous deﬁnition
of C×-equivariant families in Π. We also have a notion of C×-invariant element, that is
ﬁxed by τa, a ∈C×.
Note that by Theorem 3.10, Θw(Yi,a) only depends on a ∈C× and w(ωi) ∈Pωi. Recall
from Lemma 2.2,(3) that the subsets Pωi, i ∈I, of P are mutually disjoint.
Theorem 4.5. Let i ∈I and w ∈W.
(1) There is a family of ℓ-weights Ψw(ωi),a and a family of invertible elements Qw(ωi),a ∈
Π, both C×-equivariant and unique, so that
(4.28)
Θw(Yi,a) = [w(ωi)]
Ψw(ωi),aq−1
i Qw(ωi),aq−1
i
Ψw(ωi),aqiQw(ωi),aqi
,
with Λ(Qw(ωi),a) = 1 = ̟(Qw(ωi),a) and Ψw(ωi),a(0) = 1.
(2) The ℓ-weight Ψw(ωi),a deﬁned in part (1) coincides with the ℓ-weight deﬁned Ψw(ωi),a
explicitly in Deﬁnition 3.4.
Example 4.6. For example, we have
(4.29)
Qωi,a = 1,
Qsi(ωi),a = Σi,aq−2
i (1 −[−αi]).
Proof of Theorem 4.5. To prove uniqueness, consider Ψw(ωi),a and Qw(ωi),a as in the propo-
sition. Then
(4.30)
Λ(Θw(Yi,a)) = [w(ωi)]
Ψw(ωi),aq−1
i
Ψw(ωi),aqi
.
If Ψ′
w(ωi),a and Q′
w(ωi),a give rise to another solution, then we setting Ψ := Ψ′
w(ωi),1Ψ−1
w(ωi),1,
we obtain that Ψ(z) = Ψ(zq2
i ). This implies that Ψ is a constant ℓ-weight, and so by the
conditions of the theorem, Ψ = Ψ(0) = 1. Hence Ψw(ωi),a is unique. Now Qw(ωi),a/Q′
w(ωi),a

EXTENDED BAXTER RELATIONS AND QQ-SYSTEMS FOR QUANTUM AFFINE ALGEBRAS
23
is a constant H that does not depend on a.
Hence we have H = ̟(H) = 1.
Thus,
uniqueness is proved.
Now let i ∈I, a ∈C× and w ∈W. Recall that Θw(Yi,a) depends only on a and w(ωi).
The existence of Ψw(ωi),a and Qw(ωi),a is proved by induction on the length l(w) of w. It is
clear if w = e. Then consider wsj so that l(wsj) = l(w) + 1. For j ̸= i, the result is clear
for wsj as Θwsj(Yi,a) = Θw(Yi,a). For wsi, we have
Θwsi(Yi,a) = Θw(Yi,aA−1
i,aq−1
i ) ×
Θw(Σi,aq−3
i )
Θw(Σi,aq−1
i ).
For the second factor, we have
Θw(Σi,aq−3
i )
Θw(Σi,aq−1
i ) =
Λ(Θw(Σi,aq−3
i ))
Λ(Θw(Σi,aq−1
i ))
Θw(Σi,aq−3
i )Λ(Θw(Σ−1
i,aq−3
i ))
Θw(Σi,aq−1
i )Λ(Θw(Σ−1
i,aq−1
i )),
which is of the correct form as Λ(Θw(Σi,aq−3
i )) is in M (and so is an ℓ-weight).
For the ﬁrst factor, the induction hypothesis on the length of w gives that for each j ∈I,
b ∈C×, Θw(Yj,b) is of the form (4.28).
Note that the spectral parameter shift in the
expression for j is qj, which is not necessarily equal to qi. However we explain it leads to
the desired expression for Θw(Yi,aA−1
i,aq−1
i ). Indeed, the factor Θw(Y −1
i,aq−2
i ) is already in the
correct form. Let j so that Cj,i ̸= 0.
If Cj,i = −1, the factor Θw(Yj,b) occurs with b = aq−1
i
. If dj = di, it is in the correct
form and if dj = 2 > di = 1, we have
Θw(Yj,b) = [w(ωj)]
Ψw(ωj),bq−2Qw(ωi),bq−2
Ψw(ωj),bq2Qw(ωj),bq2
= [w(ωj)]
Ψw(ωj),bq−2Qw(ωi),bq−2Ψw(ωj),bQw(ωj),b
Ψw(ωj),bQw(ωj),bΨw(ωj),ab2Qw(ωj),bq2 .
(it is analogous if dj = 3 > di = 1).
If Cj,i = −2, we have dj = 1, di = 2 and the factor Θw(Yj,aq−1Yj,aq) occurs. It is of the
correct form
[w(2ωj)]
Ψw(ωj),aq−2Qw(ωi),aq−2Ψw(ωj),aQw(ωi),a
Ψw(ωj),aQw(ωi),aΨw(ωj),aq2Qw(ωj),aq2
= [w(2ωj)]
Ψw(ωj),aq−1
i Qw(ωi),aq−1
i
Ψw(ωj),aqiQw(ωj),aq−1
i
.
It is analogous if Cj,i = −3. This completes the proof of part (1) of the theorem.
To prove part (2) of the theorem, we will use the following generalization of (3.26).
Proposition 4.7. (1) For any w ∈W,
(i) we have
(4.31)
Λ ◦Θw = σ ◦Tw ◦σ;
(ii) for any i ∈I and a ∈C×, the ℓ-weight Ψw(ωi),a in the statement of Theorem 4.5
satisﬁes
(4.32)
[w(ωi)]
Ψw(ωi),aq−1
i
Ψw(ωi),aqi
= σ(Yw(ωi),a−1).

24
EDWARD FRENKEL AND DAVID HERNANDEZ
Proof. Since Tw = Λw ◦Θw is an automorphism of M, we can consider its inverse T −1
w . For
example, we have for i, j ∈I and a ∈C×,
T −1
si (Yj,a) = Yj,aA−δi,j
i,aq−1
i
= (σTsiσ)(Yj,a).
This implies that for a general w ∈W we have
T −1
w−1 = σ ◦Tw ◦σ.
Now consider
Tw−1(m) = mw−1.
As χq(L(m)) is ﬁxed by Θw, m is the monomial of highest weight in
χq(L(m)) = Ee(Θw(χq(L(m)))).
It follows from the ﬁrst part (existence) in Theorem 4.5 that for a monomial m′ of weight
ω, the monomial in Ee(Θw(m′)) of highest weight has weight w(ω). Let ω be the weight
of m. Then mw−1 is the only monomial of weight w−1(ω) and for any other monomial m′
in χq(L(m)) of weight ω′ ̸= w−1(ωm), the weight w(ω′) is strictly lower than ω. We obtain
that only Θw(mw−1) can contribute in Ee(Θw(χq(L(m)))) to the terms of weight ω. We
have established
Λ(Θw(mw−1)) = m.
Since this is true for any dominant monomial m, we have
Λ ◦Θw ◦Tw−1 = Id,
that is
Λ ◦Θw = T −1
w−1 = σ ◦Tw ◦σ.
This proves part (i).
To prove part (ii), observe that Λ ◦Θw(Yi,a) is equal the LHS of
equation (4.32), by the deﬁnition of Ψw(ωi),a given in the statement of Theorem 4.5, and
σ ◦Tw ◦σ(Yi,a) is equal to the RHS.
□
Now we can conclude the proof of part (2) of Theorem 4.5. Using equation (4.32), we
obtain an expression of Ψw(ωi),1 in terms of Ψ±1
j,b using the factorization of Yw(ωi),1 in terms
of Y ±1
j,c . This expression coincides with the one given in Deﬁnition 3.4 because we have
[ωk]
Ψk,aq−1
i
Ψk,aqi = Yk,a if di = dk,
[ωk]Ψk,aq−2Ψk,a
Ψk,aΨk,aq2 = Yk,a if Ci,k = −2,
[ωk]Ψk,aq−3Ψk,aq−1Ψk,aq
Ψk,aq−1Ψk,aqΨk,aq3 = Yk,a if Ci,k = −3,
[2ωk]Ψk,aq−2
Ψk,q2
= Yk,aq−1Yk,aq if Ck,i = −2,
[3ωk]Ψk,aq−3
Ψk,aq3 = Yk,aq−2Yk,aYk,aq2 if Ck,i = −3.
□

EXTENDED BAXTER RELATIONS AND QQ-SYSTEMS FOR QUANTUM AFFINE ALGEBRAS
25
4.3. Conjectural q-character formula for L(Ψw(ωi),a). Theorem 4.5 implies that Con-
jecture 4.4 is equivalent to the following conjecture (which holds for w = e by formula
(3.18); for w = sj, j ∈I, by Theorem 3.9; and in the rank 2 case, as we show in Section 7).
Conjecture 4.8. We have the q-character formula
(4.33)
χq(L(Ψw(ωi),a)) = Ψw(ωi),a Qw(ωi),a χ(L(Ψw(ωi),a)).
We now establish the extended TQ-relations for the right hand sides of formula (4.33).
Theorem 4.9. Let V be a ﬁnite dimensional representation of Uq(bg) and w ∈W.
(1) The q-character χq(V ), viewed as an element of the completion eYe of Y, is invariant
under the substitution
Yi,a 7→[w(ωi)]
[Ψw(ωi),aq−1
i ]Ee(Qw(ωi),aq−1
i )
[Ψw(ωi),aqi]Ee(Qw(ωi),aqi) ,
∀i ∈I, a ∈C×.
(2) The q-character χq(V ), viewed as an element of Π under the diagonal embedding
Y ֒→Π, is invariant under the substitution
(4.34)
Yi,a 7→[w(ωi)]
[Ψw(ωi),aq−1
i ]Qw(ωi),aq−1
i
[Ψw(ωi),aqi]Qw(ωi),aqi
,
∀i ∈I, a ∈C×.
Proof. We follow the same argument as in the proof of Theorem 4.2: Theorem 3.10 implies
that the q-character χq(V ), viewed as an element of Π under the diagonal embedding Y ֒→Π,
is invariant under all operators Θw, w ∈W. But the right hand side of formula (4.34) is
equal to Θw(Yi,a). This proves part (2). Applying the projection Ee : Π →eYe, we obtain
part (1).
□
This theorem has the following immediate corollary.
Corollary 4.10. Conjecture 4.8 implies Conjectures 3.7 and 3.8.
5. Extended QQ-systems
We start by recalling in Theorem 5.1 the QQ-system in the Grothendieck ring K0(O) of
the category O established in [FH2]. We then formulate the extended QQ-system in K0(O)
(Conjecture 5.8).
Note that the analogous QQ-systems for Yangians were studied in [T, BFLMS] for type
A, in [FFK, EV] for type D, and in [MV, ESV] for types ADE.
5.1. The QQ-system. The following theorem was proved in [FH2].
Theorem 5.1. For all i ∈I and a ∈C×, we have the following system of relations in
K0(O) called the QQ-system:
eQi,aqiQi,aq−1
i
−[−αi]eQi,aq−1
i Qi,aqi
(5.35)
=
Y
j,Ci,j=−1
Qj,a
Y
j,Ci,j=−2
Qj,aqQj,aq−1
Y
j,Ci,j=−3
Qj,aq2Qj,aQj,aq−2,

26
EDWARD FRENKEL AND DAVID HERNANDEZ
where
Qi,a = [L(Ψi,a)]/χ(L(Ψi,a)),
eQi,a = [L( eΨi,aq−2
i )]χi/(χ(L( eΨi,aq−2
i ))),
χi = (1 −[−αi])−1
and eΨi,aq−2
i
is deﬁned by formula (3.19).
Remark 5.2. Here we use the normalization we used in [FHR], which is slightly diﬀerent
from the normalization we used in [FH2].
The relation between the two is explained in
[FHR, Section 5.8]. The system (5.1) was originally introduced in [MRV1, MRV2] in the
context of aﬃne opers.
5.2. Generalization. We are going to formulate a generalization of the system (5.1), called
the extended QQ-system, which is a system of relations on the variables Qw(ωi),a, w ∈W, i ∈
I, a ∈C×. It includes equations (5.1) in which we set Qi,a = Qωi,a and eQi,a = Qsi(ωi),a.
We will need the following result.
Lemma 5.3. There is a unique family
χw(ωi) ∈Z[(1 −[−α])−1]α∈∆for w ∈W, i ∈I
such that χωi = 1 and
(5.36)
χwsi(ωi)χw(ωi) = (1 −[−w(αi)])−1 Y
j̸=i
χ−Ci,j
w(ωj) if l(wsi) = l(w) + 1.
Proof. The existence and uniqueness is proved by induction on the length of w. This way
we obtain a solution that a priori depends on i and w. Moreover, a solution necessarily has
1 as a leading term. Recall the operators Θ′
w in Remark 3.11.
Since Σi,a = ˜Ψ
−1
i,aΘ′
i(Ψi,aq2
i ) and Ai,a = [αi] ˜Ψi,aΨi,a ˜Ψ
−1
i,aq−2
i Ψ−1
i,aq2
i , applying ̟ ◦Θ′
w to
equation (3.23), we obtain that χw(ωj) = ̟(Θ′
w(Ψi,a)) gives a solution of the system (5.36).
Now, by Remark 3.11,(2) and Lemma 2.2, ̟(Θ′
w(Ψi,a)) depends only on w(ωi) up to a
factor in ±t×. But the leading term of ̟(Θ′
w(Ψi,a) is 1 as it is a solution of our problem,
hence it depends only on w(ωi).
□
Example 5.4. For i ∈I and w = si, we recover the series χi from Theorem 5.1:
χsi(ωi) = (1 −[−αi])−1 = χi.
Remark 5.5. (i) The relations (5.36) may be viewed as the image of the extended QQ-
system (5.6) under the map ̟ (i.e. without the spectral parameters).
(ii) We may consider χw(ωi) as an element of Π such that χ(w(ωi) = ̟(χw(ωi)) and the
expansion Ee(χw(ωi)) has highest weight term equal to 1.
For α ∈∆, we set [α]+ = 1 if α ∈∆−and [α]+ = −[α] if α ∈∆−.
Consider also the ring Π′ as in Remark 3.11. We introduce the following elements of Π′
for w ∈W, i ∈I, and a ∈C×:
(5.37)
Q′
w(ωi),a = Ψw(ωi),aQw(ωi),a,
Qw(ωi),a = χw(ωi)Q′
w(ωi),a.
According to Conjecture 4.8, we have
(5.38)
χq(L(Ψw(ωi),a)) = Qw(ωi),a · χw(ωi)/χ(L(Ψw(ωi),a)).

EXTENDED BAXTER RELATIONS AND QQ-SYSTEMS FOR QUANTUM AFFINE ALGEBRAS
27
Theorem 5.6. For all i ∈I, w ∈W, a ∈C×, we have the extended QQ-system in Π′
Qwsi(ωi),aqiQw(ωi),aq−1
i
−[−w(αi)]Qwsi(ωi),aq−1
i Qw(ωi),aqi
= [−w(αi)]+
Y
j,Ci,j=−1
Qw(ωj),a
Y
j,Ci,j=−2
Qw(ωj),aqQw(ωj),aq−1
Y
j,Ci,j=−3
Qw(ωj),aq2Qw(ωj),aQw(ωj),aq−2,
where [−w(αi)]+ = 1 if w(αi) ∈∆+ and [−w(αi)]+ = −[−w(αi)] if w(αi) ∈∆−.
Proof of Theorem 5.6. First let us consider
(5.39)
Σi,w,a = Θw(Σi,a)Q−1
wsi(ω),aq2
i .
We can express Σi,w,a in terms of the Qw(ωj),b in the following way.
Lemma 5.7. For any i ∈I, w ∈W, a ∈C×, we have
Λ(Σ−1
i,w,a)Σi,w,a
̟(Λ(Σ−1
i,w,a)Σi,w,a) =
Qw(ωi),a
Y
j,Ci,j=−1
Q−1
w(ωj),aqi
Y
j,Ci,j=−2
Q−1
w(ωj),aq2Q−1
w(ωj),a
Y
j,Ci,j=−3
Q−1
w(ωj),aq3Q−1
w(ωj),aqQ−1
w(ωj),aq−1.
Proof. We have
Θwsi(Yi,a) = Θw(Yi,aA−1
i,aq−1
i )
Θw(Σi,aq−3
i )
Θw(Σi,aq−1
i ) = Λ(Θwsi(Yi,a))
Qwsi(ωi),aq−1
i
Qwsi(ωi),aqi
,
Θw(Yi,aA−1
i,aq−1
i ) = Λ(Θwsi(Yi,a))
Σi,w,aq−1
i
Σi,w,aq−3
i
,
(5.40)
Θw(A−1
i,a) = Λ(Θwsi(Yi,a)Θw(Y −1
i,a ))
Σi,w,aQw(ωi),aq2
i
Σi,w,aq−2
i Qw(ωi),a
.
But from (4.28) and the deﬁnition of Ai,a, we obtain
Θw(Ai,a)Λ(Θw(A−1
i,a)) =
Qw(ωi),aq−2
i
Qw(ωi),aq2
i
Y
j,Cj,i=−1
Qw(ωj),aqj
Qw(ωj),aq−1
j
Y
j,Cj,i=−2
Qw(ωj),aq2
Qw(ωj),aq−2
Y
j,Cj,i=−3
Qw(ωj),aq3
Qw(ωj),aq−3 ,
which gives the formula in the lemma.
□
Now we can ﬁnish the proof of Theorem 5.6. By (3.23), we have
Σi,a = 1 + A−1
i,aΣi,aq−2
i
and so Θw(Σi,a) = 1 + Θw(A−1
i,a)Θw(Σi,aq−2
i ),
Qwsi(ωi),aq2
i Σi,w,a = 1 + Λ(Θwsi(Yi,a)Θw(Y −1
i,a ))
Σi,w,aQw(ωi),aq2
i
Σi,w,aq−2
i Qw(ωi),a
Qwsi(ωi),aΣi,w,aq−2
i .
Then we obtain
Qwsi(ωi),aq2
i Qw(ωi),a = Qw(ωi),a
Σi,w,a
+ Λ(Θwsi(Yi,a)Θw(Y −1
i,a ))Qwsi(ωi),aQi,w,aq2
i .

28
EDWARD FRENKEL AND DAVID HERNANDEZ
After a shift of spectral parameters by q−1
i
, using Lemma 5.7, we obtain that
Λ(Σi,w,aq−1
i )Qwsi(ωi),aqiQw(ωi),aq−1
i
−Λ(Σi,w,aq−3
i )Λ(Θw(A−1
i,aq−1
i ))Qwsi(ωi),aq−1
i Qw(ωi),aqi
= ̟(Λ(Σi,w,a)Σ−1
i,w,a)
Y
j,Ci,j=−1
Qw(ωj),a
Y
j,Ci,j=−2
Qw(ωj),aqQw(ωj),aq−1×
×
Y
j,Ci,j=−3
Qw(ωj),aq2Qw(ωj),aQw(ωj),aq−2.
We have Λ(Σi,w,a) = Λ(Θw(Σi,a)) as Λ(Qwsi(ωi),a) = 1. Formula (5.40) implies that
(5.41)
Λ(Θw(A−1
i,aq−1
i )) = [−w(αi)]
Ψwsi(ωi),aq−1
i Ψw(ωi),aqiΛ(Σi,w,aq−1
i )
Ψwsi(ωi),aqiΨw(ωi),aq−1
i Λ(Σi,w,aq−3
i ).
Besides, from the explicit expression of Ai,a, the same computation as above gives
(5.42)
Λ(Θw(Ai,a)) = [w(αi)]
eΨ
−1
w(ωi),aq−2
i Ψw(ωi),a
eΨ
−1
w(ωi),aΨw(ωi),aq2
i
where
eΨw(ωi),aq−1
i
= Ψ−1
w(ωi),aq−1
i
×
Y
j,Ci,j=−1
Ψw(ωj),a
Y
j,Ci,j=−2
Ψw(ωj),aqΨw(ωj),aq−1
Y
j,Ci,j=−3
Ψw(ωj),aq2Ψw(ωj),aΨw(ωj),aq−2.
Note that eΨωi,a is equal to eΨi,a from Example 3.6,(ii). Therefore from (5.41) and (5.42)
we obtain that
Λ(Σi,w,a) = ̟(Λ(Σi,w,a)) eΨ
−1
w(ωi),aΨwsi(ωi),aq2
i .
This gives
Ψwsi(ωi),aqiΨw(ωi),aq−1
i Qwsi(ωi),aqiQw(ωi),aq−1
i −
[−w(αi)]Ψwsi(ωi),aq−1
i Ψw(ωi),aqiQwsi(ωi),aq−1
i Qw(ωi),aqi
= Ψwsi(ωi),aqiΨw(ωi),aq−1
i
eΨw(ωi),aq−1
i Ψ−1
(wsi)(ωi),aqi̟(Σ−1
i,w,a)×
×
Y
j,Ci,j=−1
Qw(ωj),a
Y
j,Ci,j=−2
Qw(ωj),aqQw(ωj),aq−1
Y
j,Ci,j=−3
Qw(ωj),aq2Qw(ωj),aQw(ωj),aq−2.
Note that
̟(Σ−1
i,w,a) = ̟(Θw(Σ−1
i,a)) = w(̟(Σ−1
i,a)) = (1 −[−w(αi)]).
Therefore, we have
Q′
wsi(ωi),aqiQ′
w(ω)i,aq−1
i
−[−w(αi)]Q′
wsi(ωi),aq−1
i Q′
w(ωi),aqi
= (1 −[−w(αi)])
Y
j,Ci,j=−1
Q′
w(ωj),a
Y
j,Ci,j=−2
Q′
w(ωj),aqQ′
w(ωj),aq−1×
×
Y
j,Ci,j=−3
Q′
w(ωj),aq2Q′
w(ωj),aQ′
w(ωj),aq−2,
which is the extended QQ-system. Theorem 5.6 is proved.
□

EXTENDED BAXTER RELATIONS AND QQ-SYSTEMS FOR QUANTUM AFFINE ALGEBRAS
29
5.3. Extended QQ-system Conjecture. Conjecture 4.8, combined with Theorem 5.6,
implies the following conjecture, which we call the Extended QQ-system Conjecture. It
describes a system of relations in K0(O) generalizing the QQ-system of Theorem 5.6. In
Theorem 7.1, we will establish it together with Conjecture 4.8 for all g of rank 2.
Conjecture 5.8. Let w ∈W. For any i ∈I and a ∈C×, we have in K0(O) the relations
(5.43)
Q(wsi)(ωi),aqiQw(ωi),aq−1
i
−[−w(αi)]Q(wsi)(ωi),aq−1
i Qw(ωi),aqi
= [−w(αi)]+
Y
j,Ci,j=−1
Qw(ωj),a
Y
j,Ci,j=−2
Qw(ωj),aqQw(ωj),aq−1
Y
j,Ci,j=−3
Qw(ωj),aq2Qw(ωj),aQw(ωj),aq−2,
where
(5.44)
Qw(ωi),a = [L(Ψw(ωi),a)] · χw(ωi)/χ(L(Ψw(ωi),a)).
6. Shifted quantum affine algebras
A drawback of the conjectural formula (4.33) for the q-character χq(L(Ψw(ωi),a)) is that
for a general Lie algebra g we don’t have an explicit expression for the third factor on the
right hand side of (4.33); namely, the ordinary character χ(L(Ψw(ωi),a)) (not even for w = e
or sj, ∈I). This is not important for the extended TQ-relations because χq(L(Ψw(ωi),a))
enters in them through the ratios
χq(L(Ψw(ωi),aq−1
i ))
χq(L(Ψw(ωi),aqi))
in which the factors χ(L(Ψw(ωi),a)) cancel out. But the variables Qw(ωi),a appearing in the
QQ-system of Conjecture 5.8 correspond to a particular normalization of χq(L(Ψw(ωi),a)) (or
equivalently, [L(Ψw(ωi),a)]) given by formulas (5.38) and (5.44). This suggests that perhaps
the factor χw(ωi)/χ(L(Ψw(ωi),a)) appearing in these formulas is equal to 1. However, this
is not the case, even for w = e, when χωi = 1 but χ(L(Ψωi,a)) is known to be an inﬁnite
series.
Nonetheless, it turns out that there are certain modiﬁcations of Uq(bg) called shifted quan-
tum aﬃne algebras for which there are analogous representations Lsh(Ψw(ωi),a)) satisfying
(conjecturally, in general) the extended TQ- and QQ-systems and for which we expect that
(6.45)
χ(Lsh(Ψw(ωi),a)) = χw(ωi),
∀w ∈W.
In this section we recall the deﬁnition of the shifted quantum aﬃne algebras and their
categories of representations analogous to the category O, and formulate the analogues
of the extended TQ- and QQ-systems for representations from these categories. We also
conjecture q-character formulas for these representations in Conjecture 6.8. In the next
section, we will establish these conjectures for all Lie algebras of rank 2.
6.1. Representations of shifted quantum aﬃne algebras. We collect some informa-
tion on the shifted quantum aﬃne algebras of [FT] and of their representations (see [He3]
for more details and references).
Fix an integral coweight µ of g. The following deﬁnition is due to [FT].

30
EDWARD FRENKEL AND DAVID HERNANDEZ
Deﬁnition 6.1. The shifted quantum aﬃne algebra U µ
q (bg) is the algebra with the same
Drinfeld generators (2.7) as the algebra Uq(bg) and the same relations except that the deﬁ-
nition of the series φ−
i (z) given in (2.8) is modiﬁed as follows:
(6.46)
φ−
i (z) =
X
m∈Z
φ−
i,mzm = φ−
i,αi(µ)zαi(µ) exp
 
−(qi −q−1
i
)
X
r>0
hi,−rz−r
!
(the deﬁnition of the series φ+
i (z) stays the same). In addition, we impose the condition
that φ+
i,0 and φ−
i,αi(µ) are invertible (but they are not necessarily inverse to each other).
Note that in particular, for i ∈I, we have set φ+
i,m = 0 for m < 0 and φ−
i,m = 0 for
m > αi(µ).
We deﬁne the category Oµ of U µ
q (ˆg) modules similarly to the category O of Uq(bb)-modules
in Deﬁnition 2.10. The notions of Cartan-diagonalizable representation and weight spaces
Vω are the same as before.
Deﬁnition 6.2. [He3] A U µ
q (ˆg)-module V is said to be in category Oµ if
i) V is Cartan-diagonalizable;
ii) for all ω ∈t× we have dim(Vω) < ∞;
iii) there exist a ﬁnite number of elements λ1, · · · , λs ∈t× such that the weights of V are
in
S
j=1,···,s
D(λj).
Theorem 6.3. [He3] The simple representations Lsh(Ψ) in Oµ are parametrized by rational
ℓ-weights Ψ = (Ψi(z))i∈I in r such that
µ =
X
i∈I
deg(Ψi(z))ω∨
i ∈P ∨.
Each representation V in the category Oµ has a q-character
χq(V ) =
X
Ψ∈rµ
dim(VΨ)[Ψ]
where VΨ is the ℓ-weight space of ℓ-weight Ψ as above and rµ is the group of rational
ℓ-weights Ψ = (Ψi(z))i∈I such that deg(Ψi(z)) = αi(µ) for each i ∈I.
Theorem 6.4. [He3] The ℓ-weights of a simple representations in Oµ belong to rµ.
As in the case of Uq(bb), the q-character map extends to an injective group homomorphism
(6.47)
χq : K0(Oµ) →Eℓ.
Using the fusion product of simple representations constructed from the deformed Drin-
feld coproduct, the following result was established in [He3]. Note that this fusion procedure
is known to work for simple representations but not for arbitrary representations in Oµ.
Theorem 6.5. The direct sum K := L
µ∈P ∨K0(Oµ) has a ring structure such that the
product of elements from K0(Oµ) and K0(Oν) belongs to K0(Oµ+ν) and the maps χq given
by (6.47) combine into an injective ring homomorphism from K to Eℓ.
Moreover, the
structure constants on simple representations are positive integers.
Remark 6.6. The ring K will be studied from the point of view of cluster algebras in [GHL].

EXTENDED BAXTER RELATIONS AND QQ-SYSTEMS FOR QUANTUM AFFINE ALGEBRAS
31
6.2. Langlands dual Lie algebra. We have already seen the occurrence of the Langlands
dual Lie algebra Lg in the context of the ℓ-weights Ψw(ωi),a (see Remark 3.5). In the context
of representations of shifted quantum aﬃne algebras recalled in the preceding subsection,
we also assign the coweight ω∨
k to Ψk,a that suggests a connection to Lg.
Now for i ∈I, deﬁne φi : PQ →P ∨
Q as a homomorphism of W-modules given by the
formula
φi(ωk) = dk
di
ω∨
k ,
k ∈I.
Then we have
φi(αk) =
X
j∈I
Cj,k
dj
di
ω∨
j = dk
di
X
j∈I
Ck,jω∨
j = dk
di
α∨
k .
Indeed,
φi(sj(ωk)) = φi(ωk −δj,kαk) = dk
di
(ω∨
k −δj,kα∨
k ) = dk
di
(sj(ω∨
k )) = sj(φi(ωk)).
In particular for w ∈W, we have
φi(w(ωi)) = w(ω∨
i )
and so
φi(W · ωi) = W · ω∨
i ⊂P ∨.
We obtain the following.
Proposition 6.7. Let i ∈I, w ∈W and a ∈C×.
(1) The coweight associated to Ψw(ωi),a is
w(ω∨
i ) = φi(w(ωi)),
that is the image of the weight of Yw(ωi)(z) by φi.
(2) The coweight µ associated to Lsh(Ψw(ωi),a) is
µ = w(ω∨
i ).
Thus, Lsh(Ψw(ωi),a) is a simple object of the category Ow(ω∨
i ).
Part (2) follows from part (1) and the deﬁnition of coweights of simple representations
of shifted quantum aﬃne algebras.
6.3. Conjectural q-character formula. We now formulate a more explicit version of
Conjecture 4.8 for shifted quantum aﬃne algebras.
Conjecture 6.8. The q-character of the simple representation Lsh(Ψw(ωi),a) is
χq(Lsh(Ψw(ωi),a)) = [Ψw(ωi),a]Ee(χw(ωi)Qw(ωi),a).
In particular, its character is equal to χw(ωi):
χ(Lsh(Ψw(ωi),a) = χw(ωi).

32
EDWARD FRENKEL AND DAVID HERNANDEZ
Example 6.9. (i) The conjecture is true for w = e because it is known that Lsh(Ψi,a) is a
one-dimensional representation by [He3, Example 4.13].
(ii) The conjecture is true for a simple reﬂexion w = si because by [He3, Example 5.2],
we have
χq(L( eΨi,a)) = eΨi,aEe(Σi,a).
Remark 6.10. Note that Conjecture 6.8 implies positivity of χw(ωi) for any w ∈W, i ∈I,
which is a purely combinatorial statement.
Theorem 5.6 and Conjecture 6.8 imply the following analogue of Conjecture 5.8 for shifted
quantum aﬃne algebras (here we use the multiplicative structure of Theorem 6.5).
Conjecture 6.11. The extended QQ-system (5.43) is satisﬁed if we set
(6.48)
Qw(ωi),a = [Lsh(Ψw(ωi),a)].
The proof of Conjecture 6.8 (which implies Conjecture 6.11) for rank 2 Lie algebras will
be given in the next section.
7. Rank 2 Lie algebras
We prove Conjecture 4.8 (hence also 3.7, 3.8, and 5.8) and Conjecture 6.8 (hence also
6.11) for all rank 2 Lie algebras.
Theorem 7.1. Conjectures 4.8 and 6.8 hold for rank 2 Lie algebras.
This is clear for type A1 × A1 from the case of sl2 discussed above.
For i ∈I, a ∈C× and α ≥0, deﬁne the element of M,
V (α)
i,a := (Ai,aAi,aq−2
i
· · · Ai,aq2−2α
i
)−1,
α > 0,
V (0)
i,a := 1.
We will also use the notation ai = [αi].
Type A2
It suﬃces to consider the case i = 1 from the symmetry of the Dynkin quiver. We have :
χω1 = 1 , χω2−ω1 =
1
1 −a−1
1
, χ−ω2 =
1
(1 −a−1
1 a−1
2 )(1 −a−1
2 ),
Ψω1,a = Ψ1,a , Ψω2−ω1,a = Ψ−1
1,aq−2Ψ2,a , Ψ−ω2,a = Ψ−1
2,aq−3.
Now the cases w = e, s2, s1, s1s2 follow from the discussion above. It suﬃces to treat the
case w = s2s1. We have by [FH3, Section 4.6]
Ee(Qw(ω1),a) =
X
0≤β≤α
V (α)
2,aq−3V (β)
1,aq−2,
χw(ω1) = ̟(Ee(Qw(ω1),a)) =
1
(1 −a−1
2 )(1 −a−1
1 a−1
2 ).
This can be compared with [FH3, Example 6.1].
Now, this corresponds to a negative
prefundamental representations, and by [HJ, Section 4.1] we have
χq(L(Ψ−1
2,aq−3)) = Ψ−1
2,aq−3Ee(Qw(ω1),a) = Ψ−1
2,aq−3χ(L(Ψ−1
2,aq−3))Ee(Qw(ω1),a)(χw(ω1))−1.

EXTENDED BAXTER RELATIONS AND QQ-SYSTEMS FOR QUANTUM AFFINE ALGEBRAS
33
But by [He3, Corollary 4.11] this is also χq(Lsh(Ψ−1
2,aq−3)).
Type B2
We denote d1 = 2, d2 = 1. We have
χω1 = 1 , χ2ω2−ω1 =
1
1 −a−1
1
, χω1−2ω2 =
1
(1 −a−1
1 a−2
2 )(1 −a−1
2 ),
χ−ω2 = χ1,s1s2s1s2 =
1
(1 −a−1
1 a−2
2 )(1 −a−1
1 )(1 −a−1
1 a−1
2 ),
χω2 = 1 , χω1−ω2 =
1
1 −a−1
2
, χω2−ω1 =
1
(1 −a−1
1 a−1
2 )(1 −a−1
1 )2 ,
χ−ω2 =
1
(1 −a−1
1 a−1
2 )(1 −a−1
2 )(1 −a−1
1 a−2
2 )2 .
The orbit of ℓ-weights are :
Ψω1,a = Ψ1,a , Ψ2ω2−ω1 = Ψ−1
1,aq−4Ψ2,aq−2 , Ψω1−2ω2 = Ψ−1
2,aq−4Ψ1,aq−2 , Ψ−ω1,a = Ψ−1
1,aq−6,
Ψω2,a = Ψ2,a , Ψω1−ω2 = Ψ−1
2,aq−2Ψ1,aq−2Ψ1,a , Ψω2−ω1 = Ψ2,aq−4Ψ−1
1,aq−6Ψ−1
1,aq−4 , Ψ−ω2,a = Ψ−1
2,aq−6.
The cases w = e, s2, s1 follow from the discussion above. It suﬃces to treat the cases :
(A) s2s1(ω1) = ω1−2ω2, (B) (s1s2s1)(ω1) = −ω1, (C) (s1s2)(ω2) = ω2−ω1 , (D) (s2s1s2)(ω2) = −ω2.
The cases (B) and (D) correspond to negative prefundamental representations and can
be treated as in type A2 above. More precisely, let i = 1 or 2, we have Ψ−ωi,a = Ψ−1
i,aq−6.
By [FH3, Section 4.7] (formulas (4.34) and (4.47)) :
Ee(Q−ω1,a) =
X
0≤γ≤β/2≤α
V (α)
1,aq−6V (β)
2,aq−4V (γ)
1,aq−4.
Ee(Q−ω2,a) =
X
0≤β≤α/2,0≤β′≤(α+1)/2,0≤γ≤Min(1+2β,2β′−1)
V (α)
2,aq−6V (β)
1,aq−6V (β′)
1,aq−4V (γ)
2,aq−2.
We have χ−ωi = ̟(Ee(Q−ωi,a)). Now by [HJ], χq(L(Ψ−1
i,aq−6)) can be obtained as a limit
of q-characters of Kirillov-Reshetikhin modules whose q-character can be obtained algorith-
mically. Comparing these results, we obtain
χq(L(Ψ−1
i,aq−6)) = Ψ−1
i,aq−6Ee(Q−ωi,a) = Ψ−1
i,aq−6χ(L(Ψ−1
i,aq−6))Ee(Q−ωi,a)(χ−ωi)−1.
But by [He3, Corollary 4.11], this is also χq(Lsh(Ψ−1
i,aq−6)).
Case (A): by formula (4.45) of [FH3, Section 4.7], we have
Ee(Qω1−2ω2,a) =
X
0≤2β≤α
V (α)
2,aq−4V (β)
1,aq−4.
An explicit construction of the representation Lsh(Ψ1,aq−2Ψ−1
2,aq−4) (similar to [He3, Example
5.2]) implies that its q-character is equal to Ψ1,aq−2Ψ−1
2,aq−4Ee(Qω1−2ω2,a). We have again
χs2s1(ω1) = ̟(Ee(Qω1−2ω2,a)). Also, a computation as in [FH1] shows that
χq(L(Ψω1−2ω2,a) = Ψω1−2ω2,aχ(L(Ψω1−2ω2,a))Ee(Qω1−2ω2,a)(χs2s1(ω1))−1.

34
EDWARD FRENKEL AND DAVID HERNANDEZ
Case (C) : by [FH3, Section 4.7] Formula (4.41), we have
Ee(Qω2−ω1,a) =
X
0≤β≤Min(2α,2α′+1)
V (α)
1,aq−4V (α′)
1,aq−6V (β)
2,aq−2.
An explicit construction of the representation Lsh(Ψ2,aq−4Ψ−1
1,aq−4Ψ−1
1,aq−6) (similar to [He3,
Example 5.2]) gives that its q-character is equal to Ψ2,aq−4Ψ−1
1,aq−4Ψ−1
1,aq−6Ee(Qω2−ω1,a).
Also, a computation as in [FH1] shows that
χq(L(Ψω2−ω1,a) = Ψω2−ω1,aχ(L(Ψω2−ω1,a))Ee(Qω2−ω1,a)(χs1s2(ω2))−1.
Type G2
We denote d1 = 3, d2 = 1. We have
χω1 = 1 , χ3ω2−ω1 =
1
1 −a−1
1
, χ2ω1−3ω2 =
1
(1 −a−1
1 a−3
2 )(1 −a−1
2 ),
χ−2ω1+3ω2 =
1
(1 −a−1
1 a−3
2 )(1 −a−1
1 )2(1 −a−1
1 a−1
2 ),
χω1−3ω2 =
1
(1 −a−2
1 a−3
2 )(1 −a−1
1 a−2
2 )(1 −a−1
1 a−3
2 )2(1 −a2),
χ−ω1 =
1
(1 −a−2
1 a−3
2 )2(1 −a−1
1 a−1
2 )(1 −a1)(1 −a−1
1 a−2
2 )(1 −a−1
1 a−3
2 ),
χω2 = 1 , χω1−ω2 =
1
1 −a−1
2
, χ2ω2−ω1 =
1
(1 −a−1
1 a−1
2 )(1 −a−1
1 )3 ,
χω1−2ω2 =
1
(1 −a−1
1 a−1
2 )(1 −a−1
2 )2(1 −a−1
1 a−2
2 ),
χω2−ω1 =
1
(1 −a−1
1 a−1
2 )2(1 −a−1
1 )3(1 −a−1
1 a−2
2 )(1 −a−2
1 a−3
2 )3 ,
χ−ω2 =
1
(1 −a−1
1 a−1
2 )(1 −a−1
2 )(1 −a−1
1 a−2
2 )3(1 −a−2
1 a−3
2 )2(1 −a−1
1 a−3
2 )3 .
The orbit of ℓ-weights are :
Ψω1,a = Ψ1,a , Ψ3ω2−ω1 = Ψ−1
1,aq−6Ψ2,aq−3 , Ψ2ω1−3ω2 = Ψ−1
2,aq−5Ψ1,aq−4Ψ1,aq−2,
Ψ−2ω1+3ω2 = Ψ2,aq−7Ψ−1
1,aq−10Ψ−1
1,aq−8 , Ψω1−3ω2 = Ψ−1
2,aq−9Ψ1,aq−6 , Ψ−ω1,a = Ψ−1
1,aq−12,
Ψω2,a = Ψ2,a , Ψω1−ω2 = Ψ−1
2,aq−2Ψ1,aqΨ1,aq−1Ψ1,aq−3,
Ψ2ω2−ω1 = Ψ2,aq−4Ψ2,aq−6Ψ−1
1,aq−5Ψ−1
1,aq−7Ψ−1
1,aq−9, Ψω1−2ω2 = Ψ−1
2,aq−6Ψ−1
2,aq−8Ψ1,aq−3Ψ1,aq−5Ψ1,aq−7,
Ψω2−ω1 = Ψ2,aq−10Ψ−1
1,aq−9Ψ−1
1,aq−11Ψ−1
1,aq−13 , Ψ−ω2,a = Ψ−1
2,aq−12.
The results for the weight ωi, si(ωi), i = 1, 2, have been treated above. The weights −ωi,
i = 1, 2, correspond to negative prefundamental representations and can be treated as in
type A2 above. The explicit formula for Qi,a can be found in [FH3, Section 4.8].

EXTENDED BAXTER RELATIONS AND QQ-SYSTEMS FOR QUANTUM AFFINE ALGEBRAS
35
The other intermediate weights are treated as for type B2 above. For example, we have
Ee(Q2ω1−3ω2,a) =
X
0≤3β≤α
V (α)
2,aq−5V (β)
1,aq−6,
and
χq(L(Ψ2ω1−3ω2,a)) = Ψ2ω1−3ω2,aχ(L(Ψ2ω1−3ω2,a))Ee(Q2ω1−3ω2,a)(χs2s1(ω1))−1.
References
[BFLMS] V. V. Bazhanov, R. Frassek, T. Lukowski, C. Meneghelli, and M. Staudacher, Baxter Q-Operators
and Representations of Yangians, Nucl. Phys. B 850 (2011) 148–174.
[BLZ1]
V. Bazhanov, S. Lukyanov, and A. Zamolodchikov, Integrable structure of conformal ﬁeld theory,
quantum KdV theory and thermodynamic Bethe Ansatz, Comm. Math. Phys. 177 (1996) 381–398.
[BLZ2]
V.V. Bazhanov, S.L. Lukyanov, and A.B. Zamolodchikov, Integrable structure of conformal ﬁeld
theory. II. Q-operator and DDV equation, Comm. Math. Phys. 190 (1997) 247–278.
[BLZ3]
V.V. Bazhanov, S.L. Lukyanov, and A.B. Zamolodchikov, Higher-level eigenvalues of Q-operators
and Schrodinger equation, Adv. Theor. Math. Phys. 7 (2003) 711-725.
[Be]
J. Beck, Braid group action and quantum aﬃne algebras, Comm. Math. Phys. 165 (1994) 555–568.
[BP]
P. Bouwknegt and K. Pilch, On deformed W-algebras and quantum aﬃne algebras, Adv. Theor.
Math. Phys. 2 (1998) 357–397.
[BrK]
J. Brundan and A. Kleshchev, Representations of shifted Yangians and ﬁnite W-algebras, Mem.
Amer. Math. Soc. 196 (2008).
[C]
V. Chari, Braid group actions and tensor products, Int. Math. Res. Not. 2002 (2002) 357–382.
[CH]
V. Chari and D. Hernandez, Beyond Kirillov-Reshetikhin modules, In Quantum aﬃne algebras,
extended aﬃne Lie algebras, and their applications, Contemp. Math. 506, pp. 49–81, AMS Prov-
idence, 2010.
[CM]
V. Chari and A. Moura, Characters and blocks for ﬁnite-dimensional representations of quantum
aﬃne algebras, Int. Math. Res. Not. 2005 (2005) 257–298.
[CP]
V. Chari and A. Pressley, A guide to quantum groups, Cambridge University Press 1994.
[Dr]
V. Drinfel’d, A new realization of Yangians and of quantum aﬃne algebras, Soviet Math. Dokl.
36 (1988) 212–216.
[ESV]
S. Ekhammar, H. Shu, and D. Volin, Extended systems of Baxter Q-functions and fused ﬂags I:
simply-laced case, Preprint arXiv:2008.10597.
[EV]
S. Ekhammar and D. Volin, Bethe Algebra using Pure Spinors, Preprint arXiv:2104.04539.
[FF]
B. Feigin and E. Frenkel, Quantization of soliton systems and Langlands duality in Exploration
of New Structures and Natural Constructions in Mathematical Physics, pp. 185-274, Adv. Stud.
Pure Math. 61, Math. Soc. Japan, Tokyo, 2011 (arXiv:0705.2486).
[FFK]
G. Ferrando, R. Frassek, and V. Kazakov, QQ-system and Weyl-type transfer matrices in integrable
SO(2r) spin chains, J. High Energy Phys. 2021 (2021) 193.
[FH1]
E. Frenkel and D. Hernandez, Baxter’s Relations and Spectra of Quantum Integrable Models, Duke
Math. J. 164 (2015) 2407–2460.
[FH2]
E. Frenkel and D. Hernandez, Spectra of quantum KdV Hamiltonians, Langlands duality, and
aﬃne opers, Comm. Math. Phys. 362 (2018) 361–414.
[FH3]
E. Frenkel and D. Hernandez, Weyl group symmetry of q-characters, Preprint arXiv:2211.09779.
[FH4]
E. Frenkel and D. Hernandez, to appear.
[FHR]
E. Frenkel, D. Hernandez and N. Reshetikhin, Folded quantum integrable models and deformed
W-algebras Lett. Math. Phys. 112 (2022) 80.
[FKSZ]
E. Frenkel, P. Koroteev, D.S. Sage, and A.M. Zeitlin, q-Opers, QQ-Systems, and Bethe Ansatz,
Journal of European Math. Society (2023) (arXiv:2002.07344).
[FJMM]
B. Feigin, M. Jimbo, T. Miwa, E. Mukhin, Finite type modules and Bethe Ansatz equations, Ann.
Henri Poincar´e 18 (2017) 2543–2579.

36
EDWARD FRENKEL AND DAVID HERNANDEZ
[FM]
E. Frenkel and E. Mukhin, Combinatorics of q-characters of ﬁnite-dimensional representations of
quantum aﬃne algebras, Comm. Math. Phys. 216 (2001) 23–57.
[FR]
E. Frenkel and N. Reshetikhin, The q-characters of representations of quantum aﬃne algebras and
deformations of W -Algebras, in Recent Developments in Quantum Aﬃne Algebras and related
topics, Contemp. Math. 248 (1999) 163–205 (arXiv:math/9810055).
[FT]
M. Finkelberg and A. Tsymbaliuk, Multiplicative slices, relativistic Toda and shifted quantum
aﬃne algebras, in Representations and Nilpotent Orbits of Lie Algebraic Systems, In Honour of
the 75th Birthday of Tony Joseph, M. Gorelik, e.a. (eds.), Progress in Math. 330, pp. 133–304,
Birkh¨auser, 2019.
[GHL]
C. Geiss, D. Hernandez and B. Leclerc, Representations of shifted quantum aﬃne algebras and
cluster algebras, in preparation.
[He3]
D. Hernandez, Representations of shifted quantum aﬃne algebras, Int. Math. Res. Not. 2023
(2023) 11035–11126.
[Hu]
J. Humphreys, Reﬂection groups and Coxeter groups, Cambridge Studies in Advanced Mathemat-
ics 29, Cambridge University Press, 1990.
[HJ]
D. Hernandez and M. Jimbo, Asymptotic representations and Drinfeld rational fractions, Compos.
Math. 148 (2012) 1593–1623.
[HL]
D. Hernandez and B. Leclerc, Cluster algebras and category O for representations of Borel subal-
gebras of quantum aﬃne algebras, Algebra and Number Theory 10 (2016) 2015–2052.
[Kac]
V. Kac, Inﬁnite Dimensional Lie Algebras, 3rd ed., Cambridge University Press, Cambridge, 1990.
[Kas]
M. Kashiwara, The crystal base and Littelmann’s reﬁne Demazure character formula, Duke Math.
J. 71, 839–858 (1993).
[KWWY] J. Kamnitzer, B. Webster, A. Weekes, and O. Yacobi, Yangians and quantization of slices in the
aﬃne Grassmannian, Algebra Number Theory 8 (2014) 857–893.
[KZ]
P. Koroteev and A. Zeitlin, q-opers, QQ-systems, and Bethe Ansatz II: Generalized minors, Jour-
nal f¨ur die Reine und Angewandte Mathematik (Crelles Journal) 2023 (2023) 271–296.
[L]
B. Leclerc, Quantum loop algebras, quiver varieties, and cluster algebras, in Representations of
Algebras and Related Topics, A. Skowro´nski and K. Yamagata (eds.), pp. 117–152, European
Math. Soc. Series of Congress Reports, 2011.
[MRV1]
D. Masoero, A. Raimondo and D. Valeri, Bethe Ansatz and the Spectral Theory of aﬃne Lie
algebra-valued connections. The simply-laced case, Commun. Math. Phys. 344 (2016) 719–750.
[MRV2]
D. Masoero, A. Raimondo and D. Valeri, Bethe Ansatz and the Spectral Theory of aﬃne Lie
algebra-valued connections. The non simply-laced case, Commun. Math. Phys. 349 (2017) 1063–
1105.
[MV]
E. Mukhin and A. Varchenko, Discrete Miura Opers and Solutions of the Bethe Ansatz Equations,
Commun. Math. Phys. 256 (2005) 565–588.
[NW]
H. Nakajima and A. Weekes, Coulomb branches of quiver gauge theories with symmetrizers, Jour-
nal of European Math. Soc. 25 (2023) 203–230.
[T]
Z. Tsuboi, Solutions of the T-system and Baxter equations for supersymmetric spin chains, Nucl.
Phys. B826 (2010) 399–455.
Department of Mathematics, University of California, Berkeley, CA 94720, USA
Universit´e Paris Cit´e and Sorbonne Universit´e, CNRS, IMJ-PRG, F-75006, Paris, France

