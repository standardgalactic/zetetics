Lecture Notes for Analog Electronics
Raymond E. Frey
Physics Department
University of Oregon
Eugene, OR 97403, USA
rayfrey@uoregon.edu
December, 1999

Class Notes 1
1
Basic Principles
In electromagnetism, voltage is a unit of either electrical potential or EMF. In electronics,
including the text, the term “voltage” refers to the physical quantity of either potential or
EMF. Note that we will use SI units, as does the text.
As usual, the sign convention for current I = dq/dt is that I is positive in the direction
which positive electrical charge moves.
We will begin by considering DC (i.e. constant in time) voltages and currents to introduce
Ohm’s Law and Kirchoﬀ’s Laws. We will soon see, however, that these generalize to AC.
1.1
Ohm’s Law
For a resistor R, as in the Fig. 1 below, the voltage drop from point a to b, V = Vab = Va−Vb
is given by V = IR.
I
R
a
b
Figure 1: Voltage drop across a resistor.
A device (e.g. a resistor) which obeys Ohm’s Law is said to be ohmic.
The power dissipated by the resistor is P = V I = I2R = V 2/R.
1.2
Kirchoﬀ’s Laws
Consider an electrical circuit, that is a closed conductive path (for example a battery con-
nected to a resistor via conductive wire), or a network of interconnected paths.
1. For any node of the circuit
P
in I =
P
out I. Note that the choice of “in” or “out” for
any circuit segment is arbitrary, but it must remain consistent. So for the example of
Fig. 2 we have I1 = I2 + I3.
2. For any closed circuit, the sum of the circuit EMFs (e.g. batteries, generators) is equal
to the sum of the circuit voltage drops: P E = P V .
Three simple, but important, applications of these “laws” follow.
1

I
I
I
1
2
3
Figure 2: A current node.
1.2.1
Resistors in series
Two resistors, R1 and R2, connected in series have voltage drop V = I(R1 + R2). That is,
they have a combined resistance Rs given by their sum:
Rs = R1 + R2
This generalizes for n series resistors to Rs =
Pn
i=1 Ri.
1.2.2
Resistors in parallel
Two resistors, R1 and R2, connected in parallel have voltage drop V = IRp, where
Rp = [(1/R1) + (1/R2)]−1
This generalizes for n parallel resistors to
1/Rp =
n
X
i=1
1/Ri
1.2.3
Voltage Divider
The circuit of Fig. 3 is called a voltage divider. It is one of the most useful and important
circuit elements we will encounter. The relationship between Vin = Vac and Vout = Vbc is
given by
Vout = Vin

R2
R1 + R2

1.3
Voltage and Current Sources
A voltage source delivers a constant voltage regardless of the current it produces. It is an
idealization. For example a battery can be thought of as a voltage source in series with a
small resistor (the “internal resistance” of the battery). When we indicate a voltage V input
to a circuit, this is to be considered a voltage source unless otherwise stated.
A current source delivers a constant current regardless of the output voltage. Again, this
is an idealization, which can be a good approximation in practice over a certain range of
output current, which is referred to as the compliance range.
2

Vout
Vin
R
R
1
2
Figure 3: A voltage divider.
1.4
Thevenin’s Theorem
Thevenin’s theorem states that any circuit consisting of resistors and EMFs has an equivalent
circuit consisting of a single voltage source VTH in series with a single resistor RTH.
The concept of “load” is useful at this point. Consider a partial circuit with two output
points held at potential diﬀerence Vout which are not connected to anything. A resistor RL
placed across the output will complete the circuit, allowing current to ﬂow through RL. The
resistor RL is often said to be the “load” for the circuit. A load connected to the output of
our voltage divider circuit is shown in Fig. 4
The prescription for ﬁnding the Thevenin equivalent quantities VTH and RTH is as follows:
• For an “open circuit” (RL →∞), then VTH = Vout .
• For a “short circuit” (RL →0), then RTH = VTH/Ishort.
An example of this using the voltage divider circuit follows. We wish to ﬁnd the Thevenin
equivalent circuit for the voltage divider.
Vout
Vin
R
R
1
2
R L
Figure 4: Adding a “load” resistor RL.
3

The goal is to deduce VTH and RTH to yield the equivalent circuit shown in Fig. 5.
R TH
VTH
R
L
Figure 5: The Thevenin equivalent circuit.
To get VTH we are supposed to evaluate Vout when RL is not connected. This is just our
voltage divider result:
VTH = Vin

R2
R1 + R2

Now, the short circuit gives, by Ohm’s Law, Vin = IshortR1. Solving for Ishort and combining
with the VTH result gives
RTH = VTH/Ishort =
R1R2
R1 + R2
Note that this is the equivalent parallel resistance of R1 and R2.
This concept turns out to be very useful, especially when diﬀerent circuits are connected
together, and is very closely related to the concepts of input and output impedance (or
resistance), as we shall see.
4

Class Notes 2
1.5
Thevenin Theorem (contd.)
Recall that the Thevenin Theorem states that any collection of resistors and EMFs is equiv-
alent to a circuit of the form shown within the box labelled “Circuit A” in the ﬁgure below.
As before, the load resistor RL is not part of the Thevenin circuit. The Thevenin idea,
however, is most useful when one considers two circuits or circuit elements, with the ﬁrst
circuit’s output providing the input for the second circuit. In Fig. 6, the output of the
ﬁrst circuit (A), consisitng of VTH and RTH, is fed to the second circuit element (B), which
consists simply of a load resistance (RL) to ground. This simple conﬁguration represents, in
a general way, a very broad range of analog electronics.
R TH
VTH
R
L
Vout
Circuit A
Circuit B
Figure 6: Two interacting circuits.
1.5.1
Avoiding Circuit Loading
VTH is a voltage source. In the limit that RTH →0 the output voltage delivered to the load
RL remains at constant voltage. For ﬁnite RTH, the output voltage is reduced from VTH by
an amount IRTH, where I is the current of the complete circuit, which depends upon the
value of the load resistance RL: I = VTH/(RTH + RL).
Therefore, RTH determines to what extent the output of the ﬁrst circuit behaves as an
ideal voltage source. An approximately ideal behavior turns out to be quite desirable in most
cases, as Vout can be considered constant, independent of what load is connected. Since our
combined equivalent circuit (A + B) forms a simple voltage divider, we can easily see what
the requirement for RTH can be found from the following:
Vout = VTH

RL
RTH + RL

=
VTH
1 + (RTH/RL)
5

Thus, we should try to keep the ratio RTH/RL small in order to approximate ideal behavior
and avoid “loading the circuit”. A maximum ratio of 1/10 is often used as a design rule of
thumb.
A good power supply will have a very small RTH, typically much less than an ohm. For
a battery this is referred to as its internal resistance. The dimming of one’s car headlights
when the starter is engaged is a measure of the internal resistance of the car battery.
1.5.2
Input and Output Impedance
Our simple example can also be used to illustrate the important concepts of input and output
resistance. (Shortly, we will generalize our discussion and substitute the term “impedance”
for resistance. We can get a head start by using the common terms “input impedance” and
“output impedance” at this point.)
• The output impedance of circuit A is simply its Thevenin equivalent resistance RTH.
The output impedance is sometimes called “source impedance”.
• The input impedance of circuit B is its resistance to ground from the circuit input. In
this case it is simply RL.
It is generally possible to reduce two complicated circuits, which are connected to each
other as an input/output pair, to an equivalent circuit like our example. The input and
output impedances can then be measured using the simple voltage divider equations.
2
RC Circuits in Time Domain
2.0.3
Capacitors
Capacitors typically consist of two electrodes separated by a non-conducting gap.
The
quantitiy capacitance C is related to the charge on the electrodes (+Q on one and −Q on
the other) and the voltage diﬀerence across the capacitor by
C = Q/VC
Capacitance is a purely geometric quantity. For example, for two planar parallel electrodes
each of area A and separated by a vacuum gap d, the capacitance is (ignoring fringe ﬁelds)
C = ϵ0A/d, where ϵ0 is the permittivity of vacuum. If a dielectric having dielectric constant
κ is placed in the gap, then ϵ0 →κϵ0 ≡ϵ. The SI unit of capacitance is the Farad. Typical
laboratory capacitors range from ∼1pF to ∼1µF.
For DC voltages, no current passes through a capacitor. It “blocks DC”. When a time
varying potential is applied, we can diﬀerentiate our deﬁning expression above to get
I = C dVC
dt
(1)
for the current passing through the capacitor.
6

Vin
R
C
Vout
I
Figure 7: RC circuit — integrator.
2.0.4
A Basic RC Circuit
Consider the basic RC circuit in Fig. 7. We will start by assuming that Vin is a DC voltage
source (e.g. a battery) and the time variation is introduced by the closing of a switch at
time t = 0. We wish to solve for Vout as a function of time.
Applying Ohm’s Law across R gives Vin −Vout = IR. The same current I passes through
the capacitor according to I = C(dV/dt). Substituting and rearranging gives (let V ≡VC =
Vout):
dV
dt +
1
RC V =
1
RC Vin
(2)
The homogeneous solution is V = Ae−t/RC, where A is a constant, and a particular solution
is V = Vin. The initial condition V (0) = 0 determines A, and we ﬁnd the solution
V (t) = Vin
h
1 −e−t/RCi
(3)
This is the usual capacitor “charge up” solution.
Similarly, a capacitor with a voltage Vi across it which is discharged through a resistor
to ground starting at t = 0 (for example by closing a switch) can in similar fashion be found
to obey
V (t) = Vie−t/RC
2.0.5
The “RC Time”
In both cases above, the rate of charge/discharge is determined by the product RC which
has the dimensions of time. This can be measured in the lab as the time during charge-up or
discharge that the voltage comes to within 1/e of its asymptotic value. So in our charge-up
example, Equation 3, this would correspond to the time required for Vout to rise from zero
to 63% of Vin.
2.0.6
RC Integrator
From Equation 2, we see that if Vout ≪Vin then the solution to our RC circuit becomes
Vout =
1
RC
Z
Vin(t)dt
(4)
7

Note that in this case Vin can be any function of time. Also note from our solution Eqn. 3
that the limit Vout ≪Vin corresponds roughly to t ≪RC. Within this approximation, we
see clearly from Eqn. 4 why the circuit above is sometimes called an “integrator”.
2.0.7
RC Diﬀerentiator
Let’s rearrange our RC circuit as shown in Fig. 8.
Vin
Vout
C
R
I
Figure 8: RC circuit — diﬀerentiator.
Applying Kirchoﬀ’s second Law, we have Vin = VC + VR, where we identify VR = Vout.
By Ohm’s Law, VR = IR, where I = C(dVC/dt) by Eqn. 1. Putting this together gives
Vout = RC d
dt(Vin −Vout)
In the limit Vin ≫Vout, we have a diﬀerentiator:
Vout = RC dVin
dt
By a similar analysis to that of Section 2.0.6, we would see the limit of validity is the opposite
of the integrator, i.e. t ≫RC.
8

Class Notes 3
3
Circuit Analysis in Frequency Domain
We now need to turn to the analysis of passive circuits (involving EMFs, resistors, capaci-
tors, and inductors) in frequency domain. Using the technique of the complex impedance,
we will be able to analyze time-dependent circuits algebraically, rather than by solving dif-
ferential equations. We will start by reviewing complex algebra and setting some notational
conventions. It will probably not be particularly useful to use the text for this discussion,
and it could lead to more confusion. Skimming the text and noting results might be useful.
3.1
Complex Algebra and Notation
Let ˜V be the complex representation of V . Then we can write
˜V = ℜ( ˜V ) + ıℑ( ˜V ) = V eıθ = V [cos θ + ı sin θ]
where ı = √−1. V is the (real) amplitude:
V =
q
˜V ˜V ∗=
h
ℜ2( ˜V ) + ℑ2( ˜V )
i1/2
where ∗denotes complex conjugation. The operation of determining the amplitude of a
complex quantity is called taking the modulus. The phase θ is
θ = tan−1 h
ℑ( ˜V )/ℜ( ˜V )
i
So for a numerical example, let a voltage have a real part of 5 volts and an imaginary part
of 3 volts. Then ˜V = 5 + 3ı =
√
34eı tan−1(3/5).
Note that we write the amplitude of ˜V , formed by taking its modulus, simply as V . It is
often written | ˜V |. We will also use this notation if there might be confusion in some context.
Since the amplitude will in general be frequency dependent, it will also be written as V (ω).
We will most often be interested in results expressed as amplitudes, although we will also
look at the phase.
3.2
Ohm’s Law Generalized
Our technique is essentially that of the Fourier transform, although we will not need to
actually invoke that formalism. Therefore, we will analyze our circuits using a single Fourier
frequency component, ω = 2πf. This is perfectly general, of course, as we can add (or
integrate) over frequencies if need be to recover a result in time domain. Let our complex
Fourier components of voltage and current be written as ˜V = V eı(ωt+φ1) and ˜I = Ieı(ωt+φ2).
Now, we wish to generalize Ohm’s Law by replacing V = IR by ˜V = ˜I ˜Z, where ˜Z is the
(complex) impedance of a circuit element. Let’s see if this can work. We already know that
a resistor R takes this form. What about capacitors and inductors?
Our expression for the current through a capacitor, I = C(dV/dt) becomes
˜I = C d
dtV eı(ωt+φ1) = ıωC ˜V
9

Thus, we have an expression of the form ˜V = ˜I ˜ZC for the impedance of a capacitor, ˜ZC, if
we make the identiﬁcation ˜ZC = 1/(ıωC).
For an inductor of self-inductance L, the voltage drop across the inductor is given by
Lenz’s Law: V = L(dI/dt). (Note that the voltage drop has the opposite sign of the induced
EMF, which is usually how Lenz’s Law is expressed.) Our complex generalization leads to
˜V = L d
dt
˜I = L d
dtIeı(ωt+φ2) = ıωL˜I
So again the form of Ohm’s Law is satisﬁed if we make the identiﬁcation ˜ZL = ıωL.
To summarize our results, Ohm’s Law in the complex form ˜V = ˜I ˜Z can be used to
analyze circuits which include resistors, capacitors, and inductors if we use the following:
• resistor of resistance R: ˜ZR = R
• capacitor of capacitance C: ˜ZC = 1/(ıωC) = −ı/(ωC)
• inductor of self-inductance L: ˜ZL = ıωL
3.2.1
Combining Impedances
It is signiﬁcant to point out that because the algebraic form of Ohm’s Law is preserved,
impedances follow the same rules for combination in series and parallel as we obtained for
resistors previously. So, for example, two capacitors in parallel would have an equivalent
impedance given by 1/ ˜Zp = 1/ ˜Z1+1/ ˜Z2. Using our deﬁnition ˜ZC = −ı/ωC, we then recover
the familiar expression Cp = C1 + C2. So we have for any two impedances in series (clearly
generalizing to more than two):
˜Zs = ˜Z1 + ˜Z2
And for two impedances in parallel:
˜Zp =
h
1/ ˜Z1 + 1/ ˜Z2
i−1 =
˜Z1 ˜Z2
˜Z1 + ˜Z2
And, accordingly, our result for a voltage divider generalizes (see Fig. 9) to
˜Vout = ˜Vin
"
˜Z2
˜Z1 + ˜Z2
#
(5)
Now we are ready to apply this technique to some examples.
3.3
A High-Pass RC Filter
The conﬁguration we wish to analyze is shown in Fig. 10. Note that it is the same as Fig. 7
of the notes. However, this time we apply a voltage which is sinusoidal: ˜Vin(t) = Vineı(ωt+φ).
As an example of another common variation in notation, the ﬁgure indicates that the input
is sinusoidal (“AC”) by using the symbol shown for the input. Note also that the input and
output voltages are represented in the ﬁgure only by their amplitudes Vin and Vout, which
also is common. This is ﬁne, since the method we are using to analyze the circuit (complex
impedances) shouldn’t necessarily enter into how we describe the physical circuit.
10

Z1
Z2
Vin
V out
~
~
Figure 9: The voltage divider generalized.
Vout
C
R
Vin
Figure 10: A high-pass ﬁlter.
We see that we have a generalized voltage divider of the form discussed in the previous
section. Therefore, from Eqn. 5 we can write down the result if we substitute ˜Z1 = ˜ZC =
−ı/(ωC) and ˜Z2 = ˜ZR = R:
˜Vout = ˜Vin
"
R
R −ı/(ωC)
#
At this point our result is general, and includes both amplitude and phase information.
Often, we are only interested in amplitudes. We can divide by ˜Vin on both sides and ﬁnd
the amplitude of this ratio (by multiplying by the complex conjugate then taking the square
root). The result is often referred to as the transfer function of the circuit, which we can
designate by T(ω).
T(ω) ≡| ˜Vout|
| ˜Vin| = Vout
Vin
=
ωRC
[1 + (ωRC)2]1/2
(6)
Examine the behavior of this function.
Its maximum value is one and minimum is
zero. You should convince yourself that this circuit attenuates low frequencies and “passes”
(transmits with little attenuation) high frequencies, hence the term high-pass ﬁlter. The
cutoﬀbetween high and low frequencies is conventionally described as the frequency at
which the transfer function is 1/
√
2. This is approximately equal to an attenuation of 3
decibels, which is a description often used in engineering (see below). From Eqn. 6 we see
that T = 1/
√
2 occurs at a frequency
2πf3db = ω3db = 1/(RC)
(7)
11

The decibel scale works as follows: db= 20 log10(A1/A2), where A1 and A2 represent any
real quantity, but usually are amplitudes. So a ratio of 10 corresponds to 20 db, a ratio of 2
corresponds to 6 db,
√
2 is approximately 3 db, etc.
3.4
A Low-Pass RC Filter
An analogy with the analysis above, we can analyze a low-pass ﬁlter, as shown in Fig. 11.
Vin
R
C
Vout
Figure 11: A low-pass ﬁlter.
You should ﬁnd the following result for the transfer function:
T(ω) ≡| ˜Vout|
| ˜Vin| = Vout
Vin
=
1
[1 + (ωRC)2]1/2
(8)
You should verify that this indeed exhibits “low pass” behavior.
And that the 3 db
frequency is the same as we found for the high-pass ﬁlter:
2πf3db = ω3db = 1/(RC)
(9)
We note that the two circuits above are equivalent to the circuits we called “diﬀerentiator”
and “integrator” in Section 2. However, the concept of high-pass and low-pass ﬁlters is much
more general, as it does not rely on an approximation.
An aside. One can compare our results for the RC circuit using the complex impedance
technique with what one would obtain by starting with the diﬀerential equation (in time) for
an RC circuit we obtained in Section 2, taking the Fourier transform of that equation, then
solving (algebraically) for the transform of Vout. It should be the same as our result for the
amplitude Vout using impedances. After all, that is what the impedance technique is doing:
transforming our time-domain formuation to one in frequency domain, which, because of
the possibility of analysis using a single Fourier frequency component, is particularly simple.
This is discussed in more detail in the next notes.
12

Class Notes 4
3.5
Frequency Domain Analysis (contd.)
Before we look at some more examples using our technique of complex impedance, let’s look
at some related general concepts.
3.5.1
Reactance
First, just a redeﬁntion of what we already have learned. The term reactance is often used
in place of impedance for capacitors and inductors. Reviewing our deﬁnitions of impedances
from Section 3.2 we deﬁne the reactance of a capacitor ˜XC to just be equal to its impedance:
˜XC ≡−ı/(ωC). Similarly, for an inductor ˜XL ≡ıωL. This is the notation used in the text.
However, an alternative but common useage is to deﬁne the reactances as real quantities.
This is done simply by dropping the ı from the deﬁnitions above. The various reactances
present in a circuit can by combined to form a single quantity X, which is then equal to the
imaginary part of the impedance. So, for example a circuit with R, L, and C in series would
have total impedance
˜Z = R + ıX = R + ı(XL + XC) = R + ı(ωL −1
ωC )
A circuit which is “reactive” is one for which X is non-negligible compared with R.
3.5.2
General Solution
As stated before, our technique involves solving for a single Fourier frequency component
such as ˜V = V eı(ωt+φ). You may wonder how our results generalize to other frequencies and
to input waveforms other than pure sine waves. The answer in words is that we Fourier
decompose the input and then use these decomposition amplitudes to weight the output we
found for a single frequency, Vout. We can formalize this within the context of the Fourier
transform, whch will also allow us to see how our time-domain diﬀerential equation became
transformed to an algebraic equation in frequency domain.
Consider the example of the RC low-pass ﬁlter, or integrator, circuit of Fig. 7. We
obtained the diﬀerential equation given by Eq. 2. We wish to take the Fourier transform of
this equation. Deﬁne the Fourier transform of V (t) as
v(ω) ≡F{V (t)} =
1
√
2π
Z +∞
−∞dte−ıωtV (t)
(10)
Recall that F{dV/dt} = ıωF{V }. Therefore our diﬀerential equation becomes
ıωv(ω) + v(ω)/(RC) = F{Vin(t)}/(RC)
(11)
Solving for v(ω) gives
v(ω) = F{Vin(t)}
1 + ıωRC
(12)
13

The general solution is then the real part of the inverse Fourier transform:
˜V (t) = F −1{v(ω)} =
1
√
2π
Z +∞
−∞dω′eıω′tv(ω′)
(13)
In the speciﬁc case we have considered so far of a single Fourier component of frequency
ω, i.e. ˜Vin = Vieıωt, then F{ ˜Vin(t)} =
√
2πδ(ω −ω′), and we recover our previous result for
the transfer function:
˜T = ˜V / ˜Vin =
1
1 + ıωRC
(14)
For an arbitrary functional form for Vin(t), one could use Eqns. 12 and 13. Note that
one would go through the same steps if Vin(t) were written as a Fourier series rather than
a Fourier integral. Note also that the procedure carried out to give Eqn. 11 is formally
equivalent to our use of the complex impedances: In both cases the diﬀerential equation is
converted to an algebraic equation.
3.6
Phase Shift
We now need to discuss ﬁnding the phase φ of our solution. To do this, we proceed as previ-
ously, for example like the high-pass ﬁlter, but this time we preserve the phase information
by not taking the modulus of ˜Vout. The input to a circuit has the form ˜Vin = Vineı(ωt+φ1),
and the output ˜Vout = Vouteı(ωt+φ2). We are usually only interested in the phase diﬀerence
φ2 −φ1 between input and output, so, for convenience, we can choose φ1 = 0 and set the
phase shift to be φ2 ≡φ. Physically, we must choose the real or imaginary part of these
expressions. Conventionally, the real part is used. So we have:
Vin(t) = ℜ( ˜Vin) = Vin(ω) cos(ωt)
and
Vout(t) = ℜ( ˜Vout) = Vout(ω) cos(ωt + φ)
Let’s return to our example of the high-pass ﬁlter to see how to calculate the phase shift.
We rewrite the expression from Section 3.3 and then multiply numerator and denominator
by the complex conjugate of the denominator:
˜Vout = ˜Vin
"
R
R −ı/(ωC)
#
= Vineıωt 1 + ı/(ωRC)
1 + 1/(ωRC)2
By recalling the general form a + ıb =
√
a2 + b2 eıφ, where φ = tan−1(b/a), we can write
1 + ı/(ωRC) =
"
1 +

1
ωRC
2#1/2
eıφ
allowing us to read oﬀthe phase shift:
φ = tan−1 (1/(ωRC))
(15)
Our solution for ˜Vout is then
˜Vout =
Vineıωt+φ
h
1 + (
1
ωRC)2
i1/2
14

This, of course, yields the same | ˜Vout| as we found before in Eqn. 6 of Section 3.3. But now
we also have included the phase information. The “real” time-dependent solution is then
just the real part of this:
Vout(t) = ℜ( ˜Vout) = Vout cos(ωt + φ)
where φ is given by Eqn. 15.
3.7
Power in Reactive Circuits
Recall that for DC voltages and currents the power associated with a circuit element carrying
current I with voltage change V is just P = V I. Now, for time-varying voltages and currents
we have to be more careful. We could still deﬁne an instantaneous power as the product
V (t)I(t). However, it is generally more useful to average the power over time.
3.7.1
General Result for AC
Since we are considering Fourier components, we will average the results over one period
T = 1/f = 2π/ω. Therefore, the time-averaged power is
<P >= 1
T
Z T
0 V (t)I(t)dt
where the brackets indicate the time average. Let the voltage and current be out of phase
by an arbitrary phase angle φ. So we have V (t) = V0 cos(ωt) and I(t) = I0 cos(ωt + φ).
We can plug these into the expression for <P > and simplify using the following: cos(ωt +
φ) = cos(ωt) cos(φ) −sin(ωt) sin(φ);
R T
0 sin(ωt) cos(ωt)dt = 0; and (1/T)
R T
0 sin2(ωt)dt =
(1/T)
R T
0 cos2(ωt)dt = 1/2. This yields
<P >= 1
2V0I0 cos φ = VRMSIRMS cos φ
(16)
In the latter expression we have used the “root mean squared”, or RMS, amplitudes. Using
voltage as an example, the RMS and standard amplitudes are related by
VRMS ≡
" 1
T
Z T
0 V 2(t)dt
#1/2
=
" 1
T
Z T
0 V 2
0 cos2(ωt)dt
#1/2
= V0/
√
2
(17)
3.7.2
Power Using Complex Quantities
Our results above can be simply expressed in terms of ˜V and ˜I. Equivalent to above, we
start with ˜V (t) = V0eıωt and ˜I(t) = I0eı(ωt+φ). By noting that
ℜ( ˜V ∗˜I) = ℜ(V0I0(cos φ + ı sin φ)) = V0I0 cos φ
we identify an expression for average power which is equivalent to Eqn. 16 :
<P >= 1
2ℜ( ˜V ∗˜I) = 1
2ℜ( ˜V ˜I∗)
(18)
15

Vin
Vout
R
L
C
Figure 12: A RLC circuit.
Several ﬁlter types are possible depending upon how Vout is
chosen. In the case shown, the circuit gives a resonant output.
3.8
An RLC Circuit Example
We can apply our technique of impedance to increasingly more intricate examples, with no
more eﬀort than a commensurate increase in the amount of algebra. The RLC circuit of Fig.
12 exempliﬁes some new qualitative behavior.
We can again calculate the output using our generalized voltage divider result of Eqn. 5.
In this case, the ˜Z1 consists of the inductor and capacitor in series, and ˜Z2 is simply R. So,
˜Z1 = ıωL −ı/(ωC) = ıL
ω

ω2 −ω2
0

where we have deﬁned the LC resonant frequency ω0 ≡1/
√
LC. We then obtain for the
transfer function:
T(ω) ≡| ˜Vout|
| ˜Vin| =
R
|R + ˜Z1| =
ωγ
[ω2γ2 + (ω2 −ω2
0)2]1/2
where γ ≡R/L is the “R-L frequency”.
T(ω) indeed exhibits a resonance at ω = ω0. The quality factor Q, deﬁned as the ratio
of ω0 to the width of the resonance is given by Q ≈ω0/(2γ) for γ ≪ω0. Such circuits have
many applications. For example, a high-Q circuit, where Vin(t) is the signal on an antenna,
can be used as a receiver.
As was shown in class, we achieve diﬀerent behavior if we choose to place the output
across the capacitor or inductor, rather than across the resistor, as above. Rather than a
resonant circuit, choosing Vout = VC yields a low-pass ﬁlter of the form
T(ω) = | −ı/(ωC)|
|R + ˜Z1|
=
ω2
0
[ω2γ2 + (ω2 −ω2
0)2]1/2
The cutoﬀfrequency is ω0, and for ω ≫ω0 then T ∼ω−2 (“12 db per octave”), which more
closely approaches ideal step function-like behavior than the RC low pass ﬁlter, for which
T ∼ω−1 for ω ≫ω0 (“6 db per octave”). As you might suspect, choosing Vout = VL provides
a high-pass ﬁlter with cutoﬀat ω0 and T ∼ω−2 for ω ≪ω0.
16

3.9
More Filters
3.9.1
Combining Filter Sections
Filter circuits can be combined to produce new ﬁlters with modiﬁed functionality. An ex-
ample is the homework problem (6) of page 59 of the text, where a high-pass and a low-pass
ﬁlter are combined to form a “band-pass” ﬁlter. As discussed at length in Section 1.5, it
is important to design a “stiﬀ” circuit, in which the next circuit element does not load the
previous one, by requiring that the output impedance of the ﬁrst be much smaller than the
input impedance of the second. We can standardize this inequality by using a factor of 10
for the ratio | ˜Zin|/| ˜Zout|.
3.9.2
More Powerful Filters
This technique of cascading ﬁlter elements to produce a better ﬁlter is discussed in detail in
Chapter 5 of the text. In general, the transfer functions of such ﬁlters take the form (for the
low-pass case):
T(ω) =
h
1 + αn(f/fc)2ni−1/2
where fc is the 3 db frequency, αn is a coeﬃcient depending upon the type of ﬁlter, and n is
the ﬁlter “order,” often equal to the number of ﬁltering capacitors.
3.9.3
Active Filters
Filters involving LC circuits are very good, better than the simple RC ﬁlters, as discussed
above. Unfortunately, inductors are, in practice, not ideal lumped circuit elements and are
diﬃcult to fabricate. In addition, ﬁlters made entirely from passive elements tend to have
a lot of attenuation. For these reasons active ﬁlters are most commonly used where good
ﬁltering is required. These typically use operational ampliﬁers (which we will discuss later),
which can be conﬁgured to behave like inductors, and can have provide arbitrary voltage
gain. Again, this is discussed in some detail in Chapter 5. When we discuss op amps later,
we will look at some examples of very simple active ﬁlters. At high frequencies (for example
RF), op amps fail, and one most fall back on inductors.
4
Diode Circuits
The ﬁgure below is from Lab 2, which gives the circuit symbol for a diode and a drawing of
a diode from the lab. Diodes are quite common and useful devices. One can think of a diode
as a device which allows current to ﬂow in only one direction. This is an over-simpliﬁcation,
but a good approximation.
IF
Figure 13: Symbol and drawing for diodes.
17

A diode is fabricated from a pn junction. Semi-conductors such as silicon or germanium
can be “doped” with small concentrations of speciﬁc impurities to yield a material which
conducts electricity via electron transport (n-type) or via holes (p-type). When these are
brounght together to form a pn junction, electrons (holes) migrate away from the n-type
(p-type) side, as shown in Fig. 14. This redistribution of charge gives rise to a potential gap
∆V across the junction, as depicted in the ﬁgure. This gap is ∆V ≈0.7 V for silicon and
≈0.3 V for germanium.
---
--
+++
++
p
n
V
x
∆V
Figure 14: A pn junction, forming a voltage gap across the junction.
When a diode is now connected to an external voltage, this can eﬀectively increase or
decrease the potential gap. This gives rise to very diﬀerent behavior, depending upon the
polarity of this external voltage, as shown by the typical V -I plot of Fig. 15. When the
diode is “reverse biased,” as depicted in the ﬁgure, the gap increases, and very little current
ﬂows across the junction (until eventually at ∼100 V ﬁeld breakdown occurs). Conversely,
a “forward biased” conﬁguration decreases the gap, approaching zero for an external voltage
equal to the gap, and current can ﬂow easily. An analysis of the physics gives the form
I = IS
h
eeV/kT −1
i
where IS is a constant, V is the applied voltage, and kT/e = 26 mV at room temperature.
Thus, when reverse biased, the diode behaves much like an open switch; and when forward
biased, for currents of about 10 mA or greater, the diode gives a nearly constant voltage
drop of ≈0.6 V.
18

-
+
-
+
V
I
1  µΑ
10 mA
0.7 V
100 V
-
Forward Biased
Reverse Biased
Figure 15: The V -I behavior of a diode.
19

Class Notes 5
5
Transistors and Transistor Circuits
Although I will not follow the text in detail for the discussion of transistors, I will follow
the text’s philosophy. Unless one gets into device fabrication, it is generally not important
to understand the inner workings of transistors. This is diﬃcult, and the descriptions which
one gets by getting into the intrinsic properties are not particularly satisfying. Rather, it is
usually enough to understand the extrinsic properties of transistors, treating them for the
most part as a black box, with a little discussion about the subtleties which arise from within
the black box.
In practice, one usually confronts transistors as components of pre-packaged circuits, for
example in the operational ampliﬁer circuits which we will study later. However, I have
found that it is very useful to understand transistor behavior even if one rarely builds a
transistor circuit in practice. The ability to analyze the circuit of an instrument or device is
quite valuable.
We will start, as with Chapter 2 of the text, with bipolar transistors. There are other
common technologies used, particularly FET’s, which we will discuss later. However, most
of what you know can be carried over directly by analogy. Also, we will assume npn type
transistors, except where it is necessary to discuss pnp. For circuit calculations, one simply
reverses all signs of relevant currents and voltages in order to translate npn to pnp.
5.1
Connections and Operating Mode
Below we have the basic connection deﬁnitions for bipolar transistors as taken from the text.
As indicated in the ﬁgure, and as you determined in lab, the base-emitter and base-collector
pairs behave somewhat like diodes. Do not take this too literally. In particular, for the base-
collector pair this description is far oﬀthe mark. We will refer to the transistor connections
as C, B, and E.
Figure 16: Bipolar transistor connections.
20

5.1.1
Rules for Operation
Let’s start by stating what needs to be done to a transistor to make it operate as a transistor.
Suppose we have the following:
1. VC > VE, by at least a few ×0.1 V.
2. VB > VE
3. VC > VB
4. We do not exceed maximum ratings for voltage diﬀerences or currents.
When these conditions are not met, then (approximately) no current ﬂows in or out of the
transistor. When these conditions are met, then current can ﬂow into the collector (and out
the emitter) in proportion to the current ﬂowing into the base:
IC = hFEIB = βIB
(19)
where hFE = β is the current gain. (We will use the β notation in these notes.) The value
of the current gain varies from transistor type to type, and within each type, too. However,
typically β ≈100. Unless otherwise speciﬁed, we will assume β = 100 when we need a
number. From Figure 17 below and Kirchoﬀ’s ﬁrst law, we have the following relationship
among the currents:
IE = IB + IC = IB + βIB = (β + 1)IB ≈IC
(20)
As we will see below, the transistor will “try” to achieve its nominal β. This will not always
be possible, in which case the transistor will still be on, but IC < βIB. In this case, the
transistor is said to be “saturated”.
C
I
E
I
IB
Figure 17: Transistor currents.
Because β ≫1, the main utility of the transistor becomes evident: We are able to control
a large current IC ≈IE with a small current IB. The simplest such control is in the form of
a switch. Note that in our second condition above we require that the base-emitter “diode”
be forward biased, i.e. that VBE ≡VB −VE be positive. In fact, the base-emitter pair does
behave much like a diode. So when it is forward biased, current can easily ﬂow, and the
voltage drop quickly reaches its asymptotic value of ≈0.6 V. Unless otherwise noted, we will
generally assume that, when the transistor is in operation, we have
VBE ≡VB −VE ≈0.6Volts
(21)
21

5.1.2
Transistor Switch and Saturation
From the preceding discussion, the most straightforward way to turn the transistor “on” or
“oﬀ” is by controlling VBE. This is illustrated by the circuit below which was introduced in
Lab 2. We will follow the lab steps again here.
LED
33
R
+5 V
2N2222A
Figure 18: A transistor switch.
First, let R = 10 kΩ. When the switch is open, IC = βIB = 0, of course. When the switch
is closed, then VBE becomes positive and VB = VE + 0.6 = 0.6 V. IB = (5 −0.6)/104 = 0.44
mA. Hence, IC = βIB = 44 mA. Then, assuming negligible voltage drop across the LED,
VC = 5 −33 × 0.044 = 3.5 V. So, VCE > 0 and VCB > 0. So this should work just ﬁne.
Substituting R = 1 kΩgives IB = 4.4 mA and βIB = 440 mA. Setting this equal to
IC would give VC = −9.5 V. This is not possible. In order to stay in operation VCE must
be positive, and depending upon the transistor species, usually can only go as low as ≈0.2
V. (Appendix K of the text, pages 1066-1067, gives data for a typical model.) Hence, IC is
limited to a maximum value of IC = (5 −0.2)/33 ≈150 mA. So, eﬀectively, the current gain
has been reduced to β = IC/IB = 150/4.4 = 34. In this mode of operation, the transistor is
said to be saturated. It turns out that for high-speed switching applications, for example in
computers, the transistors are generally operated in a partially saturated mode, for reasons
discussed in Section 2.02 of the text.
5.2
Notation
We will now look at some other typical transistor conﬁgurations, including the emitter
follower, the current source, and the common-emitter ampliﬁer. But ﬁrst we need to set
some notation. We will often be considering voltages or currents which consist of a time
varying signal superposed with a constant DC value. That is,
V (t) = V0 + v(t) ;
I(t) = IO + i(t)
where V0 and I0 are the DC quantities, and v or i represent time-varying signals. Hence,
∆V = v ;
∆I = i
22

Typically, we can consider v or i to be sinusoidal functions, e.g. v(t) = vo cos(ωt + φ), and
their amplitudes vo and io (sometimes also written as v or i when their is no confusion) are
small compared with V0 or I0, respectively.
5.3
Emitter Follower
The basic emitter follower conﬁguration is shown below in Figure 19. An input is fed to
the base. The collector is held (by a voltage source) to a constant DC voltage, VCC. The
emitter connects to a resistor to ground and an output. As we shall see, the most useful
characteristic of this circuit is a large input impedance and a small output impedance.
Vin
Vout
R
Vcc
Figure 19: Basic emitter follower.
For an operating transistor we have Vout = VE = VB −0.6. Hence, vout = vE = vB. From
this, we can determine the voltage gain G, equivalent to the transfer function, for the emitter
follower:
G ≡vout/vin = vE/vB = 1
(22)
From Eqn. 20, IE = (β +1)IB ⇒iE = (β +1)iB. Therefore, we see that the follower exhibits
“current gain” of output to input equal to β + 1. Assuming the output connection draws
negligible current, we have by Ohm’s Law iE = vE/R. Using this in the previous expression
and solving for iB gives iB = iE/(β + 1) = (vB/R)/(β + 1). Now we can deﬁne the input
impedance of the follower:
Zin = vin/iin = vB/iB = R(β + 1)
(23)
By applying the Thevenin deﬁnition for equivalent impedance, we can also determine the
output impedance of the follower:
Zout = vin/iE =
vin
(β + 1)iB
= Zsource
β + 1
(24)
where Zsource is the source (i.e. output) impedance of the circuit which gave rise to vin.
Hence, the emitter follower eﬀectively increases input impedance (compared to R) by a
factor β + 1 ≈100 and reduces output impedance, relative to that of the source impedance
of the previous circuit element, by a factor β + 1 ≈100. We will return to this point next
time.
23

Class Notes 6
Following our discussion last time of the basic transistor switch and emitter follower, we
will likewise introduce the basic relations for two other transistor circuit conﬁgurations: the
current source and the common-emitter ampliﬁer. We will then return to the issue of input
and output impedance so that we can build realistic circuits using these conﬁgurations.
5.4
Transistor Current Source
Figure 20 illustrates the basic conﬁguration for a single-transistor current source. VCC is
a constant positive voltage from a DC power supply. Hence, the base voltage VB is also a
constant, with VB = VCCR2/(R1 + R2). RL represents a load which we intend to power with
a current which is approximately independent of the speciﬁc value of RL.
R1
R2
IB
VB
IC
IE
Vcc
RC
RE
Figure 20: Basic transistor current source.
When the transistor is on, we have IE = (β+1)IB. In addition, we have VE = VB−0.6; and
VE = IERE = (β + 1)IBRE. Solving for IB in this last equation gives IB = VE/((β + 1)RE).
We can combine these to solve for the current which passes through RL:
IL = IC = βIB = β
VE
(β + 1)RE
=
β
β + 1
VB −0.6
RE
≈VB −0.6
RE
(25)
Hence, we see that indeed IL is independent of RL.
Of course, there are limitations to the range of RL for which the current source behavior
is reasonable. Recall that the transistor will shut down if VB ≤VE or if VCE is less than
≈0.2 V. These criteria determine the compliance of the current source, that is its useful
operating range. So, for example, if we have VCC = 15 V and VB = 5 V in our circuit above,
then VE = 5 −0.6 = 4.4 V, and the range of compliance for the collector voltage VC will be
approximately 4.6 V to 15 V.
24

5.5
Common-emitter Ampliﬁer
Figure 21 represents the basic conﬁguration of the common-emitter ampliﬁer. To determine
the output for this circuit, we assume at this point that the input is a sum of a DC oﬀset
voltage V0 and a time-varying signal vin, as discussed last time. (In the next section we will
discuss how to achieve these.) V0 provides the transistor “bias”, so that VB > VE, and the
signal of interest is vin.
RC
RE
Vcc
Vout
Vin
Figure 21: Basic common-emitter ampliﬁer.
The incoming signal shows up on the emitter: vin = ∆(VE + 0.6) = ∆VE ≡vE. And by
Ohm’s Law, iE = vE/RE = vB/RE. As we found previously, iE = iC + iB ≈iC. Now, the
voltage at the output is Vout = VC = VCC −ICRC. And therefore, ∆Vout ≡vout = −iCRC.
Putting all of this together, vout = −iCRC ≈−iERC = −(vB/RE) RC, giving the voltage
gain G:
G ≡vout/vin = −RC/RE
(26)
5.6
Circuit Biasing and Input
Now we need to ﬁgure out how to provide inputs to our basic circuits. In Fig. 22 below we
show the input network for a common-emitter ampliﬁer. The same considerations we apply
here apply equally to the input of an emitter follower. The idea is that the voltage divider
R1 and R2 provide the DC bias voltage (V0 in our discussion above), and the time varying
signal is input through the capacitor (which blocks the DC). We need to ﬁgure out what
design criteria should be applied to this design.
We need to make sure that our input circuit does not load the ampliﬁer, C is chosen
to give a reasonable RC cutoﬀ, and that the gain of the ampliﬁer is what we want. We
will start by designing the DC component of the input network, that is choosing R1 and
R2. It is helpful when designing the input network to consider the equivalent circuit shown
in Fig. 23. The diode and resistor labelled Zin represent the transistor input: the voltage
drop across the base-emitter “diode” and the input impedance from Eqn. 23. RTH is the
Thenenin equivalent resistance for the DC input network.
So our design procedure can be as follows:
25

RC
RE
Vout
Vin
R1
R2
C
Vcc
Figure 22: Common-emitter ampliﬁer with input network.
VTH
RTH
Zin
VB
IB
Figure 23: Equivalent circuit for design of DC input network.
1. Choose RTH ≪Zin = RE(β + 1).
2. Determine R1 and R2 based on the equivalent circuit.
3. Choose C to provide a proper high-pass cutoﬀfrequency.
4. Choose the ampliﬁer gain, if need be.
26

Class Notes 7
5.7
Transistor Diﬀerential Ampliﬁer
Diﬀerential ampliﬁers are in general very useful. They consist of two inputs and one output,
as indicated by the generic symbol in Fig. 24. The output is proportional to the diﬀerence
between the two inputs, where the proportionality constant is the gain. One can think of
this as one of the two inputs (labelled “−”) being inverted and then added to the other
non-inverting input (labelled “+”). Operational ampliﬁers (“op amps”), which we will soon
study, are fancy diﬀerential ampliﬁers, and are represented by the same symbol as that of
Fig. 24.
+
-
in1
in2
out
Figure 24: Symbol for a diﬀerential ampliﬁer or op amp.
This technique is commonly used to mitigate noise pickup. For example, a signal which
is to be transmitted and subject to noise pickup can ﬁrst be replicated and inverted. This
“diﬀerential pair” is then transmitted and then received by a diﬀerential ampliﬁer. Any
noise pickup will be approximately equal for the two inputs, and hence will not appear in
the output of the diﬀerential amplifer. This “common mode” noise is rejected. This is often
quantiﬁed by the common-mode rejection ratio (CMRR) which is the ratio of diﬀerential
gain to common-mode gain. Clearly, a large CMRR is good.
5.7.1
A Simple Design
The circuit shown in Fig. 25 represents a diﬀerential ampliﬁer design. It looks like two
common-emitter ampliﬁers whose emitters are tied together at point A. In fact, the circuit
does behave in this way. It is simplest to analyze its output if one writes each input as the
sum of two terms, a sum and a diﬀerence. Consider two signals v1 and v2. In general, we
can rewrite these as v1 =< v > +∆v/2 and v2 =< v > −∆v/2, where < v >= (v1 + v2)/2 is
the average and ∆v = v1 −v2 is the diﬀerence. Therefore, we can break down the response
of the circuit to be due to the response to a common-mode input (< v >) and a diﬀerence
(∆v) input.
Let’s analyze the diﬀerence signal ﬁrst. Therefore, consider two inputs v1 = ∆v/2 and
v2 = −∆v/2. The signals at the emitters then follow the inputs, as usual, so that at point A
we have vA = vE1 + vE2 = v1 + v2 = 0. Following the common-emitter ampliﬁer derivation,
we have vout1 = −iCRC, where iC ≈iE = vE/RE = vin1/RE. Hence, vout1 = −(RC/RE)v1
and vout2 = −(RC/RE)v2. We deﬁne the diﬀerential gain Gdiﬀas the ratio of the output to
the input diﬀerence. So
Gdiﬀ1 ≡vout1/∆v = −(RC/RE)v1/(2v1) = −RC/(2RE)
27

In 1
In 2
Out1
Out2
V
V
R
RE
RC
EE
CC
EE
E
R
RC
A
Figure 25: Diﬀerential ampliﬁer design.
and similarly for output 2
Gdiﬀ2 ≡vout2/∆v = −(RC/RE)v2/(−2v2) = RC/(2RE)
Generally, only one of the two ouputs is used. Referring back to Fig. 24, we see that if we
were to choose our one output to be the one labelled “out2”, then “in1” would correspond to
“+” (non-inverting input) and “in2” would correspond to “−” (inverting input). Keeping in
mind these results for the relative signs, it is usual to write the diﬀerential gain as a positive
quantity:
Gdiﬀ= RC
2RE
(27)
where the sign depends upon which is used.
Now consider the common mode part of the inputs: v1 = v2 =< v >. We have the
following relations:
iEE = iE1 + iE2 = 2iE ;
VA = VEE + IEEREE ⇒vA = iEEREE = 2iEREE ;
iE = vE −vA
RE
= vin −2iEREE
RE
Solving for iE in the last equation gives:
iE = vin

1
RE + 2REE

Again following the derivation for the the common-emitter ampliﬁe, we have vout = −iCRC ≈
−iERC. So each output has the same common-mode gain:
Gcom ≡vout
vin
= −
RC
RE + 2REE
(28)
28

The ratio of the diﬀerential to common-mode gain (ignoring the sign) then gives the
CMRR:
CMRR = RE + 2REE
2RE
≈REE
RE
(29)
where for a typical design REE ≫RE.
Building on what we learned, we can easily improve our diﬀerential ampliﬁer design by
adding an emitter-follower stage to the output and a replacing the resistor REE with a
current source. This is discussed brieﬂy in the next two sections.
5.7.2
Adding a Follower
The output impedance of the common-emitter conﬁguration, as used in the diﬀerential am-
plifer, Zout ≈RC, is not always as small as one would like. This can be easily improved
by adding an emitter follower to the output. Hence, the input of the follower would be
connected to the output of the diﬀerential ampliﬁer. As discussed before, the follower then
produces an output impedance which is ≈β + 1 times smaller than the preceding stage.
Hence, in this case, we would have Zout ≈RC/β. The follower’s emitter resistor (call it
R′
E), of course, has to be consistent with our impedance non-loading criteria, in this case
βR′
E ≫RC.
5.7.3
Adding a Current Source
In our expression for CMRR above, we see that a large REE improves performance. However,
this can also signiﬁcantly load the voltage source of VEE, producing non-ideal behavior.
Hence, REE is limited in practice. A solution to this which is commonly used is to replace
REE by the output of a current source. In other words, point “A” in Fig. 25 would be
connected to the collector of a current source such as that of Fig. 20. This can be justiﬁed
by noting that the dynamic impedance provided by REE is given by vA/iEE. By limiting
variations in iEE, as provided by a current source, one eﬀectively achieves a large dynamic
impedance.
To implement this one has to decide what quiescent current is required for the current
source and what the quiescent voltage of the collector should be. The latter is given by the
quiescent voltage at the inputs of the diﬀerential ampliﬁer. For example, if the inputs are
DC ground, then point “A” will be at approximately −0.6 V, depending upon any voltage
drop across RE.
5.7.4
No Emitter Resistor
One variation of the above is to remove the emitter resistor. In this case one replaces RE in
the expressions above with the intrinsic emitter resistance discussed in Section 5.8.1 below:
RE →re = 25mV/IC
To be exact, one should replace RE in our equations with the series resistance of RE and re:
RE →RE + re. However, in most practical situations RE ≫re.
29

Class Notes 8
5.8
More on Transistor Circuits
5.8.1
Intrinsic Emitter Resistance
One consequence of the Ebers-Moll equation, which we will discuss later, is that the transistor
emitter has an eﬀective resistance which is given by
re = 25mV/IC
This is illustrated in Fig. 26. Essentially one can treat this as any other resistance. So
in most of our examples so far in which an emitter resistor RE is present, one can simply
replace RE by the series sum RE + re. Numerically, typical values reveal that re is safely
ignored. For example, IC = 1 mA gives re = 25 Ω, whereas RE might be typically ∼1 kΩ.
The exception is an emitter follower output, where the output voltage is divided by re and
RE. In some cases an external emitter resistor RE is omitted, in which case RE →re in our
previous expressions.
b
e
b
e
c
re
Figure 26: Intrinsic emitter resistance.
5.8.2
Input and Output Impedance of the Common-Emitter Amplifer
For convenience, the basic common-emitter ampliﬁer is reproduced below. The calculation of
the input impedance does not diﬀer from that we used for the emitter follower in Section 5.3.
That is, the input impedance is Zin = RE(β + 1). The output impedance is quite diﬀerent
from that of the emitter follower, however. Consider our deﬁnition of output impedance in
terms of the Thevenin equivalent circuit:
Zout =
vout
i(RL →0)
The numerator is just the usual vout we calculated in Eqn. 26. Hence, vout = vin(RC/RE).
The short current is just iC, and since iC = (β/(β + 1))iE ≈iE = vin/RE, then we have our
result
Zin = (β + 1)RE ;
Zout ≈RC
(30)
Note that these results apply equally well to the diﬀerential ampliﬁer conﬁguration, which
is, as we said before, essentially two coupled common-emitter ampliﬁers.
30

RC
RE
Vcc
Vout
Vin
Figure 27: Basic common-emitter ampliﬁer.
5.8.3
DC Connections and Signals
We already discussed in class the fact that for a conﬁguration like that of the input network
of Fig. 22, that the input time-varying signal vin is not aﬀected by the DC oﬀsets of the
resistor connections. In other words, R1 and R2 appear, for a time-varying signal, to be both
connected to ground. Hence, when designing the cutoﬀfrequency for the input high-pass
ﬁlter, the eﬀective resistance is just the usual parallel resistance of R1, R2, and the transistor
input impedance RE(β + 1).
5.9
Ebers-Moll Equation and Transistor Realism
With the exception of saturation eﬀects and a mention of the intrinsic emitter resistance
re, we have so far considered transistors in a reather idealized manner.
To understand
many of the most important aspects of transistor circuits, this approach is reasonable. For
example, we have treated the current gain β of a non-saturated transistor to be independent
of currents, temperature, etc. In reality, this is not the case. One of the ﬁner points of
circuit design is to take care to eliminate a strong dependence of the circuit behavior on
such complications. We start with the Ebers-Moll equation, which gives a foundation for
understanding one class of complications.
5.9.1
Ebers-Moll Equation
Our simple relationship for collector current for an operating transistor, IC = βIB is an
idealization. We can see from the plots of Appendix K (cf pg. 1076-7) that β indeed does
depend on various parameters. A more precise description is via the Ebers-Moll equation:
IC = IS
h
eVBE/VT −1
i
≈ISeVBE/VT
(31)
where VT ≡kT/e = (25.3 mV)(T/298 K), IS = IS(T) is the saturation current, and
VBE ≡VB −VE, as usual. Since typically VBE ≈600mV ≫VT, then the exponential term
is much larger than 1, and IS ≪IC. Since IB is also a function of VBE, then we see that
β = IC/IB can be thought of as a good approximation for a rather complicated situation,
and in fact β is itself a function of IC (or VBE, as well as of temperature.
31

We see that IC is not intrinsically a function of IB, but rather is controlled by VBE. For
this reason, and others, it is often stated that transistor gain is really a transconductance
gain. This means that it takes a voltage input and converts it to a current output. So we
write, in general,
gm = iout/vin
as the transconductance gain. We then recover voltage gain by multiplying gm by the resistor
at the output which converts the output current to a voltage. For example, for the common-
emitter ampliﬁer we have iout = −vin/RE and
G = gmRC = −RC/RE
as before.
The base-emitter “diode” implies a relationship between IB and VBE of the form VBE =
V0 ln(IB/I0), where V0 ≈0.6 V and I0 is a constant. If this form for VBE is plugged into Eqn.
31, we recover our previous relationship IC = βIB, where the current gain β is a combination
of the various factors which are slowly-varying functions of temperature and currents.
Another consequence of Ebers-Moll equation is that we see where the intrinsic emitter
resistance re, which we introduced last time, comes from. By deﬁnition,
1/re = iE/vBE ≈iC/vBE = dIC
dVBE
.
From Eqn. 31, the derivative is simply IC/VT. So we have
re = VT/IC
(32)
where VT is again as above.
5.9.2
The Current Mirror
Figure 28 shows a very commonly used current source circuit known as the current mir-
ror. Understanding its principle of operation requires the Ebers-Moll equation. The “pro-
gramming current” IP deﬁnes the collector current of the left-hand transistor. (The base
currents should be negligibly small.) From the Ebers-Moll equation, this collector current
then uniquely determines VBE. The collector-base connection transfers this well-deﬁned base
voltage to the collector, thus maintaining the voltage drop across the programming resistor.
The right-hand transistor is “matched” to the left-hand one. That is, the pair were manu-
factured together to have nearly identical properties. So this right-hand transistor assumes
a nearly identical collector current to that which is programmed. Thus the load current
becomes IL = IP. Besides transferring the program current to a load at another point of
the circuit, the current mirror also has the advantage of having a larger range of compliance
than the standard single-transistor current source we studied earlier.
5.9.3
Other Non-ideal Eﬀects
The following represent some of the important departures from ideal transistor behavior:
• VBE = VBE(T). As discussed above, the base-emitter “diode” includes a Boltzmann
factor temperature dependence. This can be linearized, as given in the text, to yield
approximately
∆VBE
∆T
≈−2.1 × 10−3 V/◦C
32

RP
RL
IP
IL
Vcc
Figure 28: Current mirror.
• Early Eﬀect. VBE depends on VCE:
∆VBE
∆VCE
≈−1 × 10−4
• Miller eﬀect. This aﬀects high-frequency response. The reverse-biased “diode” be-
tween base and collector produces a capacitive coupling. Just as emitter resistance
is eﬀectively multiplied by β + 1 for input signals, so too this CCB, which is ususally
a few pF, appears to input signals as a capacitance (1 + G)CCB to ground, where G
is the voltage gain of the transistor conﬁguration. Hence, when combined with input
source resistance, this is eﬀectively a low-pass RC ﬁlter, and the ampliﬁer response for
frequencies above the RC cutoﬀwill be greatly reduced. The usual solution for miti-
gating the Miller eﬀect is to reduce the source impedance. This can be eﬀectively done
by coupling to a second transistor with small source resistance at base. The cascode
conﬁguration, discussed in the text, uses this. Another example is the single-input
DC diﬀerential ampliﬁer, for which there is no collector resistor at the input transistor
(this eliminates ∆VC even though the source resistance may be non-negligible), and
the output transistor has grounded base (therefore with very small source resistance),
• Variation in gain. The β may be quite diﬀerent from transistor to transistor, even of
the same model. Therefore circuit designs should not rely on a speciﬁc gain, other
than to assume that β ≫1.
To illustrate this last point, consider our earlier one transistor current source. We deter-
mined that the load current can be written
IL =
 
β
β + 1
! VB −VBE
RE + re

(33)
where the intrinsic emitter resistance re has been included. Therefore, the variation in IL
induced by variation in β is
∆IL
IL
= 1
IL
dIL
dβ ∆β =
 
1
β + 1
! ∆β
β
33

Hence, variations in β are attenuated by the factor β + 1. So this represents a good design.
The variation in the output of this current source resulting from the Early eﬀect can be
evaluated similarly:
∆IL
IL
= 1
IL
dIL
dVBE
∆VBE = −
∆VBE
VB −VBE
= 1 × 10−4
VB −VBE
∆VCE
which can be evaluated using the compliance range for ∆VCE.
Temperature dependence can now be estimated, as well. Using our current source, again,
to exemplify this point, we see that temperature dependence can show up both in VBE and
β. The former eﬀect can be evaluated using the chain rule and the result from the previous
paragraph:
dIL
dT = dIL
dVBE
dVBE
dT
≈2.1 mV/◦C
RE
Therefore, we see that temperature dependence is ∝1/RE. As before, RE is in general
replaced by the sum RE + re. In the case where the external resistor is omitted, then the
typically small re values can induce a large temperature dependence (cf problem 7 at the
end of Chapter 2 of the text). Similarly, using previous results, we can estimate the eﬀect
of allowing β = β(T):
dIL
dT = dIL
dβ
dβ
dT =
IL
β + 1
 1
β
dβ
dT
!
where the term in parentheses, the fractional gain temperature dependence, is often a known
parameter (cf problem 2d at the end of Chapter 2 of the text).
34

Class Notes 9
6
Op-Amp Basics
The operational ampliﬁer is one of the most useful and important components of analog elec-
tronics. They are widely used in popular electronics. Their primary limitation is that they
are not especially fast: The typical performance degrades rapidly for frequencies greater than
about 1 MHz, although some models are designed speciﬁcally to handle higher frequencies.
The primary use of op-amps in ampliﬁer and related circuits is closely connected to the
concept of negative feedback. Feedback represents a vast and interesting topic in itself. We
will discuss it in rudimentary terms a bit later. However, it is possible to get a feeling for the
two primary types of ampliﬁer circuits, inverting and non-inverting, by simply postulating
a few simple rules (the “golden rules”). We will start in this way, and then go back to
understand their origin in terms of feedback.
6.1
The Golden Rules
The op-amp is in essence a diﬀerential amplifer of the type we discussed in Section 5.7 with
the reﬁnements we discussed (current source load, follower output stage), plus more, all
nicely debugged, characterized, and packaged for use. Examples are the 741 and 411 models
which we use in lab. These two diﬀer most signiﬁcantly in that the 411 uses JFET transistors
at the inputs in order to achieve a very large input impedance (Zin ∼109 Ω), whereas the
741 is an all-bipolar design (Zin ∼106 Ω).
The other important fact about op-amps is that their open-loop gain is huge. This is the
gain that would be measured from a conﬁguration like Fig. 29, in which there is no feedback
loop from output back to input. A typical open-loop voltage gain is ∼104–105. By using
negative feedback, we throw most of that away! We will soon discuss why, however, this
might actually be a smart thing to do.
+
-
in1
in2
out
Figure 29: Operational ampliﬁer.
The golden rules are idealizations of op-amp behavior, but are nevertheless very useful
for describing overall performance. They are applicable whenever op-amps are conﬁgured
with negative feedback, as in the two ampliﬁer circuits discussed below. These rules consist
of the following two statements:
1. The voltage diﬀerence between the inputs, V+ −V−, is zero.
(Negative feedback will ensure that this is the case.)
35

2. The inputs draw no current.
( This is true in the approximation that the Zin of the op-amp is much larger than any
other current path available to the inputs.)
When we assume ideal op-amp behavior, it means that we consider the golden rules to be
exact. We now use these rules to analyze the two most common op-amp conﬁgurations.
6.2
Inverting Ampliﬁer
The inverting ampliﬁer conﬁguration is shown in Fig. 30. It is “inverting” because our
signal input comes to the “−” input, and therefore has the opposite sign to the output. The
negative feedback is provided by the resistor R2 connecting output to input.
-
+
R1
R2
VIN
VOUT
Figure 30: Inverting ampliﬁer conﬁguration.
We can use our rules to analyze this circuit. Since input + is connected to ground, then
by rule 1, input −is also at ground. For this reason, the input −is said to be at virtual
ground. Therefore, the voltage drop across R1 is vin −v−= vin, and the voltage drop across
R2 is vout −v−= vout. So, applying Kirchoﬀ’s ﬁrst law to the node at input −, we have,
using golden rule 2:
i−= 0 = iin + iout = vin/R1 + vout/R2
or
G = vout/vin = −R2/R1
(34)
The input impedance, as always, is the impedance to ground for an input signal. Since
the −input is at (virtual) ground, then the input impedance is simply R1:
Zin = R1
(35)
The output impedance is very small (< 1 Ω), and we will discuss this again soon.
6.3
Non-inverting Ampliﬁer
This conﬁguration is given in Fig. 31. Again, its basic properties are easy to analyze in
terms of the golden rules.
vin = v+ = v−= vout

R1
R1 + R2

36

where the last expression is from our voltage divider result. Therefore, rearranging gives
G = vout/vin = R1 + R2
R1
= 1 + R2
R1
(36)
The input impedance in this case is given by the intrinsic op-amp input impedance. As
mentioned above, this is very large, and is typically in the following range:
Zin ∼108 to 1012 Ω
(37)
-
+
VIN
VOUT
R2
R1
Figure 31: Non-inverting ampliﬁer conﬁguration.
6.4
Departures from Ideal
It is no surprise that the golden rules are not exact. On the other hand, they generally
describe most, if not all, observed op-amp behavior. Here are some departures from ideal
performance.
• Oﬀset voltage, VOS. Recall that the input of the op-amp is a diﬀerential pair. If the
two transistors are not perfectly matched, an oﬀset will show up as a non-zero DC
oﬀset at the output. As you found in Lab 4, this can be zeroed externally. This oﬀset
adjustment amounts to changing the ratio of currents coming from the emitters of the
two input transistors.
• Bias current, Ibias. The transistor inputs actually do draw some current, regardless
of golden rule 2. Those which use bipolar input transistors (e.g. the 741) draw more
current than those which use FETs (e.g. the 411). The bias current is deﬁned to be
the average of the currents of the two inputs.
• Oﬀset current, IOS. This is the diﬀerence between the input bias currents. Each bias
current, after passing through an input resitive network, will eﬀectively oﬀer a voltage
to the op-amp input. Therefore, an oﬀset of the two currents will show up as a voltage
oﬀset at the output.
37

Perhaps the best way to beat these efects, if they are a problem for a particular appli-
cation, is to choose op-amps which have good speciﬁcations. For example, IOS can be a
problem for bi-polar designs, in which case choosing a design with FET inputs will usually
solve the problem. However, if one has to deal with this, it is good to know what to do. Fig-
ure 32 shows how this might be accomplished. Without the 10 kΩresistors, this represents
a non-inverting ampliﬁer with voltage gain of 1 + (105/102) ≈1000. The modiﬁed design in
the ﬁgure gives a DC path from ground to the op-amp inputs which are aproximately equal
in resistance (10 kΩ), while maintaining the same gain.
-
+
OUT
IN
10k
10k
100
100k
Figure 32: Non-inverting ampliﬁer designed to minimize eﬀect of IOS.
Similarly, the inverting ampliﬁer conﬁguration can be modiﬁed to mitigate oﬀset currents.
In this case one would put a resistance from the −input to ground which is balanced by the
R1 and R2 in parallel (see Fig. 30).
It is important to note that, just as we found for transistor circuits, one shpould always
provide a DC path to ground for op-amp inputs. Otherwise, charge will build up on the
eﬀective capacitance of the inputs and the large gain will convert this voltage (= Q/C) into
a large and uncontrolled output voltage oﬀset.
However, our modiﬁed designs to ﬁght IOS have made our op-amp designs worse in a
general sense. For the non-inverting design, we have turned the very large input impedance
into a not very spectacular 10 kΩ. In the inverting case, we have made the virtual ground
into an approximation. One way around this, if one is concerned only with AC signals, is
to place a capacitor in the feedback loop. For the non-inverting ampliﬁer, this would go in
series with the resistor R1 to ground. Therefore, as stated before, it is best, where important,
to simply choose better op-amps!
6.5
Frequency-dependent Feedback
Below are examples of simple integrator and diﬀerentiator circuits which result from making
the feedback path have frequency dependence, in these cases single-capacitor RC ﬁlters. It is
also possible to modify non-inverting conﬁgurations in a similar way. For example, problem
(3) on page 251 of the text asks about adding a “rolloﬀ” capacitor in this way. Again, one
would simply modify our derivations of the basic inverting and non-inverting gain formulae
by the replacements R →Z, as necessary.
38

6.5.1
Integrator
Using the golden rules for the circuit of Fig. 33, we have
vin −v−
R
= vin
R = iin = iout = −C d(vout −v−)
dt
= −C dvout
dt
So, solving for the output gives
vout = −1
RC
Z
vindt
(38)
And for a single Fourier component ω, this gives for the gain
G(ω) = −
1
ωRC
(39)
Therefore, to the extent that the golden rules hold, this circuit represents an ideal inte-
grator and a low-pass ﬁlter. Because of the presence of the op-amp, this is an example of an
active ﬁlter. In practice, one may need to supply a resistor in parallel with the capacitor to
give a DC path for the feedback.
-
+
IN
OUT
R
C
Figure 33: Op-amp integrator or low-pass ﬁlter.
6.5.2
Diﬀerentiator
The circuit of Fig. 34 can be analyzed in analogy to the integrator. We ﬁnd the following:
vout = −RC dvin
dt
(40)
G(ω) = −ωRC
(41)
So this ideally represents a perfect diﬀerentiator and an active high-pass ﬁlter. In practice,
one may need to provide a capacitor in parallel with the feedback resistor. (The gain cannot
really increase with frequency indeﬁnitely!)
6.6
Negative Feedback
As we mentioned above, the ﬁrst of our Golden Rules for op-amps required the use of
negative feedback. We illustrated this with the two basic negative feedback conﬁgurations:
the inverting and the non-inverting conﬁgurations. In this section we will discuss negative
feedback in a very general way, followed by some examples illustrating how negative feedback
can be used to improve performance.
39

-
+
C
R
IN
OUT
Figure 34: Op-amp diﬀerentiator or high-pass ﬁlter.
6.6.1
Gain
Consider the rather abstract schematic of a negative feedback ampliﬁer system shown in Fig.
35. The symbol ⊗is meant to indicate that negative feedback is being added to the input.
The op-amp device itself has intrinsic gain A. This is called the op-amp’s open-loop gain since
this is the gain the op-amp would have in the absence of the feedback loop. The quantity B is
the fraction of the output which is fed back to the input. For example, for the non-inverting
ampliﬁer this is simply given by the feedback voltage divider: B = R1/(R1 + R2). The gain
of the device is, as usual, G = vout/vin. G is often called the closed-loop gain. To complete
the terminology, the product AB is called the loop gain.
+
-
a
A
B
vin
vout
Figure 35: General negative feedback conﬁguration.
As a result of the negative feedback, the voltage at the point labelled “a” in the ﬁgure is
va = vin −Bvout
The ampliﬁer then applies its open-loop gain to this voltage to produce vout:
vout = Ava = Avin −ABvout
Now we can solve for the closed-loop gain:
vout/vin ≡G =
A
1 + AB
(42)
Note that there is nothing in our derivation which precludes having B (or A) be a function
of frequency.
40

6.6.2
Input and Output Impedance
We can now also calculate the eﬀect that the closed-loop conﬁguration has on the input
and output impedance. The ﬁgure below is meant to clearly show the relationship between
the deﬁnitions of input and output impedances and the other quantities of the circuit. The
quantity Ri represents the open-loop input impedance of the op-amp, that is, the impedance
the hardware had in the absence of any negative feedback loop. Similarly, Ro represents the
Thevenin source (output) impedance of the open-loop device.
B
vout
in
v
Ri
Ro
b
Figure 36: Schematic to illustrate the input and output impedance of a negative feedback
conﬁguration.
We start the calculation of Zin with the deﬁnition Zin = vin/iin. Let us calculate the
current passing through Ri:
iin = vin −vb
Ri
= vin −Bvout
Ri
Substituting the result of Eqn. 42 gives
iin = 1
Ri

vin −Bvin

A
1 + AB

Rearanging allows one to obtain
Zin = vin/iin = Ri [1 + AB]
(43)
A similar procedure allows the calculation of Zout ≡vopen/ishort. We have vopen = vout
and the shorted current is what gets when the load has zero input impedance. This means
that all of the current from the ampliﬁer goes into the load, leaving none for the feedback
loop. Hence, B = 0 and
ishort = A (vin −Bvout) /Ro = Avin/Ro = Avout
RoG =
Avout
Ro
 1 + AB
A

= vout
Ro
(1 + AB)
This gives our result
Zout = vopen/ishort =
Ro
1 + AB
(44)
41

Therefore, the efect of the closed loop circuit is to improve both input and output
impedances by the identical loop-gain factor 1 + AB ≈AB. So for a typical op-amp like a
741 with A = 103, Ri = 1 MΩ, and Ro = 100 Ω, then if we have a loop with B = 0.1 we get
Zin = 100 MΩand Zout = 1 Ω.
6.6.3
Examples of Negative Feedback Beneﬁts
We just demonstrated that the input and output impedance of a device employing negative
feedback are both improved by a factor 1 + AB ≈AB, the device loop gain. Now we give a
simple example of the gain equation Eqn. 42 in action.
An op-amp may typically have an open-loop gain A which varies by at least an order
of magnitude over a useful range of frequency. Let Amax = 104 and Amin = 103, and let
B = 0.1. We then calculate for the corresponding closed-loop gain extremes:
Gmax =
104
1 + 103 ≈10(1 −10−3)
Gmin =
103
1 + 102 ≈10(1 −10−2)
Hence, the factor of 10 open-loop gain variation has been reduced to a 1% variation. This
is typical of negative feedback. It attenuates errors which appear within the feedback loop,
either internal or external to the op-amp proper.
In general, the beneﬁts of negative feedback go as the loop gain factor AB. For most
op-amps, A is very large, starting at > 105 for f < 100 Hz. A large gain G can be achieved
with large A and relatively small B, at the expense of somewhat poorer performance relative
to a smaller gain, large B choice, which will tend to very good stability and error compen-
sation properties. An extreme example of the latter choice is the “op-amp follower” circuit,
consisting of a non-inverting ampliﬁer (see Fig. 31) with R2 = 0 and R1 removed. In this
case, B = 1, giving G = A/(1 + A) ≈1.
Another interesting feature of negative feedback is one we discussed brieﬂy in class. The
qualitative statement is that any signal irregularity which is put into the feedback loop will,
in the limit B →1, be taken out of the output. This reasoning is as follows. Imagine a small,
steady signal vs which is added within the feedback loop. This is returned to the output with
the opposite sign after passing through the feedback loop. In the limit B = 1 the output
and feedback are identical (G = 1) and the cancellation of vs is complete. An example of
this is that of placing a “push-pull” output stage to the op-amp output in order to boost
output current. (See text Section 2.15.) The push-pull circuits, while boosting current, also
exhibit “cross-over distortion”, as we discussed in class and in the text. However, when the
stage is placed within the op-amp negative feedback loop, this distortion can essentially be
removed, at least when the loop gain AB is large.
6.7
Compensation in Op-amps
Recall that an RC ﬁlter introduces a phase shift between 0 and π/2. If one cascades these
ﬁlters, the phase shifts can accumulate, producing at some frequency ωπ the possibility of
a phase shift of ±π. This is dangerous for op-amp circuits employing negative feedback, as
a phase shift of π converts negative feedback to positive feedback. This in turn tends to
42

compound circuit instabilities and can lead to oscillating circuits (as we do on purpose for
the RC relaxation oscillator).
So it is perhaps easy to simply not include such phase shifts in the feedback loop. How-
ever, at high frequencies (f ∼1 MHz or more), unintended stray capacitances can become
signiﬁcant.
In fact, within the op-amp circuits themselves, this is almost impossible to
eliminate. Most manufacturers of op-amps confront this issue by intentionally reducing the
open-loop gain at high frequency. This is called compensation. It is carried out by bypassing
one of the internal ampliﬁer stages with a high-pass ﬁlter. The eﬀect of this is illustrated
in Fig. 37. It is a so-called “Bode plot”, log10(A) vs log10(f), showing how the intrinsic
gain of a compensated op-amp (like the 741 or 411) decreases with frequency much sooner
than one without compensation. The goal is to achieve A < 1 at ωπ, which is typically at
frequencies of 5 to 10 MHz. (One other piece of terminology: The frequency at which the
op-amp open-loop gain, A, is unity, is called fT, and gives a good indication of how fast the
op-amp is.
Compensation accounts for why op-amps are not very fast devices: The contribution of
the higher frequency Fourier terms are intentionally attenuated. However, for comparators,
which we turn to next, negative feedback is not used. Hence, their speed is typically much
greater.
1
3
5
1
3
5
7
Log10 G
Log
10
f
Uncompensated
Compensated
Figure 37: Bode plot showing eﬀect of op-amp compensation.
43

Class Notes 10
7
Comparator Circuits
7.1
Simple Comparator
A comparator can be thought of as a fast, high-gain op-amp which is not used with negative
feedback. This basic idea is shown in Fig. 38. The comparator has large open-loop gain A.
The function of a comparator is to decide which of the two inputs has larger voltage. We
have in the limit of very large A
vout = A(v+ −v−) =
(
+Vmax
v+ > v−
−|Vmin|
v+ < v−
where Vmax and Vmin are aprroximately the power supply voltages. Therefore, the comparator
converts an analog input signal into an output with two possible states. Hence, this can be
thought of as a 1-bit analog to digital converter (A/D or ADC). The comparator circuit
does not use negative feedback, and so purposefully violates Golden Rule 1. In fact, as we
shall see below, comparator circuits often employ positive feedback to ensure that nothing
intermediate between the two extreme output states is utilized. Finally, without negative
feedback, there is no need to do compensation Thus there is more gain at high frequency,
meaning faster response. Also, the ampliﬁer can be optimized for speed at the expense of
linearity. Comparators, like op-amps, are readily available as integrated circuit chips, such
as the model 311 (LM311 or LF311) which we have in lab. Table 9.3 (pages 584-5) of the
text lists some of the possibilities on the market.
vout
A
+
-
R
Figure 38: Comparator model.
We have shown explicitly in Fig. 38 the output stage consisting of a transistor with
collector connected to the comparator output.
This is the open collector output, and is
typical.
It is used in the 311 comparators we use in lab.
We are obliged to complete
the circuit by providing a “pull-up” resistor R. The transistor emitter is also available as
an external connection. It should be connected to whatever is the lower of the two output
voltage states we require. This is chosen to be ground in the ﬁgure. The high-gain diﬀerential
ampliﬁer of the comparator has output connected to the base of this transistor. When that
44

is low it will, after passing through an inverter, turn the transistor on. In this case, current
sill pass through R and to the emitter connection. This current produces a voltage drop
across R which pulls the output voltage (very close) to the emitter voltage (ground in our
example). Typically R ≈1 kΩ. When the comparator inputs are in the complementary
inequality, the transistor is switched oﬀand the output voltage goes to the voltage held by
R, which is +5 V in our example. Using outputs of 0 and +5 V are typical, since these
voltages correspond (roughly) to the TTL convention of digital electronics.
7.2
Schmitt Trigger
A typical circuit using a comparator is shown in Fig. 39. The output goes to one of its
two possible states depending upon whether the input v−is greater than or less than the
“threshold” determined by v+. Positive feedback is used to help reinforce the chosen output
state. In this conﬁguration, called the Schmitt trigger, two thresholds can be set, depending
upon which state the output is in. The way this works is illustrated in Fig. 40. Vh and
Vl refer to threshold voltages which are set up at the comparator + input by the resistor
divider chain. As long as R3 ≫R4, the output states will still be determined by the pull-up
resistor R4. For the circuit in the ﬁgure, these states are 0 and +5 V. The resistor divider,
then sets V+ at diﬀerent values, depending upon which state the ouput is in. Whether the
connection to +V1 and R1 is required or not depends upon whether a positive threshold is
required when Vout = 0.
vout
R
+
-
vin
+5
R1
R 2
R 3
4
+V1
Figure 39: Schmitt trigger.
Referring to Fig. 40, we start with Vin = V−< V+. The output is in the +5 V state.
In this case the threshold produced by the voltage divider, Vh, is the larger value due to
the contribution of Vout. When the input crosses the threshold, the output changes to the
other state, 0 V. The divider then gives a lower threshold Vl. Having two thresholds provides
comparator stability and noise immunity. Any noise which is << (Vh −Vl) will not aﬀect
the operation of the comparator.
45

vin
Vout
+5
Vh
l
V
t
t
Figure 40: Examples of Schmitt trigger signals versus time.
Top: vin; the dashed lines
indicate the two thresholds set up at the + input of the comparator. Bottom: vout.
Note that the resistor R1 is not necessary if Vl = 0. Also, a negative threshold could be
set in two ways. The resistor chain forming the threshold could be connected to negative
voltage, rather than ground, or the emitter of the output transistor could be connected to
negative voltage, thus producing an output with low state at this negative voltage.
7.3
RC Relaxation Oscillator
The circuit of Fig. 41 uses both positive and negative feedback. It is called an RC relaxation
oscillator. Note that the positive feedback is a Schmitt conﬁguration. So we expect to have
two thresholds. The output voltages are set up to be either +5 V (pull up) or −5 V (emitter
connection). Analysis of the voltage divider reveals that the corresponding two threshold
at V+ will be ±1 V. When the output is +5 V, the capacitor C is charged up through the
resistor R. The RC part of the circuit is shown in Fig. 42. As we found in class, the voltage
across the capacitor, and hence the −input to the comparator, is given (after applying initial
conditions) by
Vc(t) = V0 −3V0
2 e(t1−t)/RC
where t1 is the time at which the comparator output is ﬁrst at V0 = +5 V. Hence, the charge
up curve will eventually cross the +1 V threshold, forcing the comparator to the −5 V state,
and thereby starting a ramp-down of the capacitor voltage given by
Vc(t) = −V0 + 3V0
2 e(t2−t)/RC
where t2 is the time at which the output switched to −5 V. This ramp down will cross the
−1 V threshold, and the whole process will therefore repeat indeﬁnitely. The output will
be a square wave, whereas Vc resembles a triangle wave. This is a common technique for
building an oscillator.
46

vout
+
-
+5
-5
80K
20K
100K
10nF
1K
Figure 41: RC relaxation oscillator.
Vin
Vout
100K
10nF
Figure 42: RC circuit with Vin from the comparator output and Vout going to the −com-
parator input of previous ﬁgure.
47

Class Notes 11
8
Radio Basics
In this section we will discuss some basic concepts concerning signal modulation, generation,
receiving, and demodulation. Some of these concepts are quite general and see applications
in many areas. However, the most familiar perhaps is that of broadcast radio generation
and receiving, hence the title of the section.
We will begin with a simpliﬁed discussion of amplitude modulation (AM). From this, we
can see how to carry over many of the concepts to other forms of signal modulation and
reception of signals.
8.1
The Case for Modulation
Consider the familiar example of radio signals which carry audio information. The audio
itself has a typical frequency range of
20Hz < faudio < 20kHz
Hence, audio has an eﬀective bandwidth of about 20 kHz. Even if it were possible to broadcast
signals of such low frequency in the electromagnetic spectrum, there would be a multitude
of confusion resulting from the interference between competing broadcasts.
On the other hand, electromagnetic signals in the radio-frequency (RF) range, have
frequencies roughly from several hundred kHz to several hundred MHz. An audio signal
which modulates an RF “carrier” of, say, 20 Mhz, uses only the range 20.00 ± 0.02 MHz.
Another broadcast “channel” with a carrier frequency only 100 kHz removed will have give
interference with its own signal at 20.10 ± 0.02 MHz. Hence, with a carrier at much higher
frequency than the signal, many channels can co-exist with little or no interference.
We will look at several techniques for signal modulation, beginning with amplitude mod-
ulation. It is important to remember that the signals do not have to be audio, that is only a
familiar example. The signals could be any form of information which can be converted to an
electromagnetic signal. Another familiar example is the modulation of computer-generated
signals for transmission over telephone lines.
8.2
Amplitude Modulation
Figure 43 gives the general scheme. Each frequency, ωm = 2πfm, which represents informa-
tion is “mixed” with the high-frequency carrier, ωc = 2πfc, to produce an output signal of
the form
Vs(t) = A [1 + m cos ωmt] cos ωct
(45)
where A is a constant and the constant m ≤1 is known as the modulation index. We see
that the carrier amplitude A cos(ωct) is modulated by the factor 1+m cos(ωmt), where m = 0
represents the limit of no modulation and m = 1 is a miximally modulated signal.
By using the identity
cos x cos y = 1
2 [cos(x + y) + cos(x −y)]
48

+
+
fc
fm
Vs
Figure 43: Schematic of modulation.
we can do a “poor man’s” Fourier transform of Vs:
Vs(t) = A cos ωct + 1
2Am [cos ((ωc + ωm)t) + cos ((ωc −ωm)t)]
(46)
So we have a central carrier frequency plus two side-bands at fc ± fm.
One simple way to achieve an amplitude modulated signal is to use an ampliﬁer for which
the input is the carrier signal and the ampliﬁer power itself is modulated by the signal, e.g.
VCC −VEE = V0 + V1 cos ωmt, where V0 is the DC oﬀset amd we identify m ∝V1/V0.
8.3
Detection of AM
8.3.1
Heterodyne Detection
We ﬁrst consider the simple, but subtle, radio receiver shown in Fig. 44. A real receiver
might include at the input an antenna followed by an LC bandpass ﬁlter, with tunable
capacitor. The ﬁlter is a resonant circuit with a sharp peak at the carrier frequency of the
broadcast ωc = 1/
√
LC. The Q of the ﬁlter is set so that the width of the peak of the
transfer function matches the bandwidth ∆ω of the modulating signal, roughly from ωc −ωm
to ωc + ωm. With this addition, and without the ampliﬁed output, the passive “crystal”
radio receiver looks like this.
IN
OUT
a
R
C
∆ω
r
G
Figure 44: Simple AM receiver.
The resistor R and capacitor clearly form a low-pass ﬁlter. The cutoﬀfrequency would
be set between ωm and ωc in order to keep the information encoded by the low-frequency
modulations, and remove the carrier. However, without the diode, the eﬀect would be to
throw away all of the information, too, since as we saw from Eqn. 46, all of the frequencies
49

of interest are actually in a narrow band centered about the carrier frequency. Without the
diode, the system is linear, and no signal will be present at the output.
The diode is non-linear; recall its V -I curve. In order to illustrate how this works, we
assume a speciﬁc form for the response of a forward-biased diode as I = bV 2, where b is a
constant. A resistor r is inserted between point a and ground (Fig. 44) in order to convert
this diode current to a voltage to be presented to the low-pass ﬁlter. Now let V be the linear
combination of two signals: V = V1 cos ω1t + V2 cos ω2t. This then gives rise to an output
current
I = bV 2
1 cos2 ω1t + bV 2
2 cos2 ω2t + 2bV1V2 cos ω1t cos ω2t
Again using trigonometric identities to form the poor man’s Fourier transform, this becomes
2I/b = V 2
1 + V 2
2 + V 2
1 cos 2ω1t + V 2
2 cos 2ω2t + 2V1V2 [cos((ω1 + ω2)t) + cos((ω1 −ω2)t)]
Therefore, from the original two frequencies, the diode has produced harmonics (twice the
original), as well as the sum and diﬀerence.
In the case of our simpliﬁed AM broadcast signal of Eqn. 46, where three frequencies
are originally present (ωc and ωc ± ωm), the eﬀect of the diode is easily generalized from the
steps above using the substitutions ω1 = ωc and ω2 = ωc + ωm or ω2 = ωc −ωm. We ﬁnd
that the output of the diode will include DC, the ﬁrst harmonics of all three frequecies, as
well as the six possible sum and diﬀerence frequencies. Of particular interest for our receiver
is the diﬀerence frequency between the carrier and the modulated carrier. For example,
ωc −(ωc −ωm) = ωm
Therefore, we do in fact recover a Fourier component corresponding to our original modulat-
ing signal. This can then be separated from the higher frequencies using the low-pass ﬁlter
and ampliﬁer. This represents a simple example of so-called heterodyne detection, in which
diﬀerent frequencies are combined in order to extract a diﬀerence frequency.
As an aside, we note that with our example I = bV 2, we have squared the input. When
we examine this in frequency domain (Fourier transform) and low-pass ﬁlter the result (av-
eraging), we have eﬀectively formed the so-called power spectrum of the input, also called
the spectral power density.
8.3.2
Harmonic Distortion
Note that we intentionally introduced a non-linear element (the diode) to our system. An un-
intentional non-linearity in a circuit, for example in an audio ampliﬁer circuit, can introduce
additional frequencies as demonstrated above. In particular, our diode with the I = bV 2 be-
havior introduced ﬁrst harmonics of the original frequencies at twice the original. In general,
a non-linearity may include any number of higher-order terms: I = b1V + b2V 2 + b3V 3 + · · ·,
where each additional power can generate the next higher harmonic. For example, a non-
zero b3 will generate a 2nd harmonic of the original ω at 3ω. The introduction of harmonics
of the input signal is called harmonic distortion. Since the pattern of harmonics is what
distinguishes musical instrument types to the ear, the introduction of non-linearities should
be avoided in high-ﬁdelity audio ampliﬁers.
8.3.3
Homodyne Detection
An example of this technique is given in the text, pages 653 and 889. It uses a phase-locked
loop (PLL) circuit at the input of the receiver.
Recall that the PLL circuit is designed
50

to produce an output which is proportional to shifts in phase of the input. Since one can
consider the modulation of the carrier to be a phase shift (by amount ωmt), the output
of the PLL can then produce a voltage signal proportional to these phase shifts, which in
turn is used to provide active rectiﬁcation of the input at the frequency of the modulation.
The essential non-linear behavior of the diode discussed above is provided in this case by an
active voltage multiplier. This type of PLL circuit is actually more relevant to FM detection,
which is discussed below.
8.3.4
Superheterodyne Detection
This technique is illustrated in the text, pages 895-6. It is essentially a fancy version of our
simple heterodyne detector above. In this case, the simple passive LC bandpass ﬁlter at the
input is replaced by a local oscillator and mixer. An example is given in Figure 13.41 of
the text. Consider an input carrier of frequency 10 MHz which has amplitude modulated at
some much lower frequency. This signal is mixed with a local oscillator of ﬁxed frequency
greater than the carrier. In the example of the text, the local oscillator has frequency tuned
to be fLO = 10.455 MHz, exactly 455 kHz greater than the carrier. As with our earlier diode
example, the mixed signal includes the diﬀerence frequency, in this case 455 kHz, which in
turn has nearby sideband frequencies which diﬀer from 455 kHz by the audio modulation
frequencies. From this point on, the detection is carried out as in the simple heterodyne
example. One advantage here is that a relatively high-frequency carrier, which in general
will be diﬃcult to condition using conventional electronics is eﬀectively reduced to a more
manageable frequency, in the example from 10 MHz to 455 kHz. The other advantage is
that the band-pass tuning which follows the mixer is always centered at a constant 455 kHz.
So the tuning is accomplished by adjusting the oscillator, rather than the ﬁlter.
8.4
Other Modulation Schemes
Recall from Eqn. 45 that for AM the amplitude is modulated by varying the frequency ωm.
However, to preserve the information, the generation and receipt of the amplitude must be
linear. In addition, most noise sources will naturally appear as voltages, and hence will add
to the AM signal. On the other hand, phase and frequency modulation (FM) do not suﬀer
from these complications. Hence, where ﬁdelity is important, these schemes have intrinsic
advantages. Radio broadcast by FM also has the additional advantage, by dint of historical
accident, of occupying a higher frequency band, thus allowing easy accomodation of a full
audio bandwidth. However, unlike the AM radio band, the FM band signals do not reﬂect
from the ionosphere, and therefore can not be transmitted over very large distances (at
night).
8.4.1
Phase Modulation
A carrier of frequency ωc is phase modulated if the resulting signal has the form
V (t) = V0 cos(ωct + Ap cos ωmt)
(47)
where V0 and Ap are constants and ωm is the modulating frequency, as before. This can be
expanded, and for Ap ≪1 can also be simpliﬁed:
V (t)/V0
=
cos ωct cos(Ap cos ωmt) −sin ωct sin(Ap cos ωmt)
51

≈
cos ωct −Ap sin ωct cos ωmt
=
cos ωct −1
2Ap [sin((ωc + ωm)t) + sin((ωc −ωm)t)]
(48)
As for AM, two new sidebands have appeared, but now they are 90◦out of phase with
respect to the carrier.
8.4.2
Frequency Modulation
The phase of a sinusoidal function, when frequency is a function of time, can in general be
expressed as
φ =
Z
ωdt
Now suppose the frequency is modulated by a frequency ω about some central carrier fre-
quency
ω = ωc + Af cos ωmt
where Af is a constant. Then the phase becomes
φ = ωct + Af
ωm
sin ωmt
Here, Af is called the frequency deviation and Af/ωm is the modulation index for FM.
Carrying out steps analogous to those for Eqn. 48 gives the following expression for the FM
signal:
V (t)/V0 = cos φ = cos ωct + Af
2ωm
[cos((ωc + ωm)t) −cos((ωc −ωm)t)]
(49)
So again the Fourier spectrum is similar to what we found for AM, except now one of the
two sidebands has amplitude of opposite sign.
8.5
FM Detection
In the AM detection schemes discussed above, the diode or other non-linear element is used
to extract an output signal proportional to cos ωmt, and hence provide a reproduction of the
original modulation, for example in the form of an audio signal. For FM detection we need
to replace the diode with something which can provide a voltage output proportional to the
input frequency modulated signal. We explored such a technique in Lab 5 in the form of the
phase-locked loop circuit. The PLL scheme is reproduced in Fig. 45. (For this application,
the counter is omitted.) Recall that the signal before the VCO, labelled Vout, is proportional
to input phase shifts. This is exactly what we need to detect the phase shift introduced by
FM. All that is left is to feed Vout to a low-pass ﬁlter and ampliﬁer, as before.
An apparent practical limitation of this technique for FM radio reception is that PLLs do
not operate at these high frequencies (∼100 MHz). This is overcome by using the technique
discussed above at the front-end of the superheterodyne receiver. The input is mixed using a
local oscillator and the resulting lower frequency (455 kHz in our example) modulated signal
is then input to the PLL. Another technique, called quadrature detection is brieﬂy discusses
in the text, page 652.
52

Phase
Detector
in
Low-pass
Filter
VCO
(V->f)
Counter
(divide by n)
replica
f
f
Vout
out
f
Figure 45: PLL schematic. Vout provides the FM signal.
53

