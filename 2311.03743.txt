arXiv:2311.03743v1  [math.AG]  7 Nov 2023
A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS
CORRESPONDENCE
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
To Corrado De Concini with admiration
Abstract. We discuss a general framework for the analytic Langlands correspondence over
an arbitrary local ﬁeld F introduced and studied in our works [EFK1, EFK2, EFK3], in
particular including non-split and twisted settings. Then we specialize to the archimedean
cases (F = C and F = R) and give a (mostly conjectural) description of the spectrum of
the Hecke operators in various cases in terms of opers satisfying suitable reality conditions,
as predicted in part in [EFK2, EFK3] and [GW]. Finally, we apply the tools of the analytic
Langlands correspondence over archimedean ﬁelds in genus zero to the Gaudin model and
its generalizations, as well as their q-deformations.
Contents
1.
Introduction
2
1.1.
Overview
2
1.2.
Summary of the main results
3
1.3.
Structure of the paper
4
1.4.
Acknowledgments
5
2.
Analytic Langlands correspondence over a general local ﬁeld
5
2.1.
Varieties over arbitrary ﬁelds
5
2.2.
Forms of reductive groups
6
2.3.
Forms of reductive groups over a local ﬁeld
7
2.4.
Principal G-bundles
9
2.5.
Moduli of G-bundles on a smooth projective curve
10
2.6.
The form of G attached to a principal bundle and a point
11
2.7.
Principal bundles on curves over a local ﬁeld
11
2.8.
Hecke operators
12
2.9.
Hecke operators for eﬀective divisors with coeﬃcients in the coweight lattice
13
2.10.
The spectral decomposition
14
2.11.
The abelian case
14
2.12.
The archimedean case
15
2.13.
The Schwartz space
15
2.14.
The ramiﬁed case
16
2.15.
The ramiﬁed genus 0 case
18
2.16.
The ramiﬁed genus 0 case for PGL2
19
2.16.1.
Hypergeometric integrals
19
2.16.2.
Principal series representations
21
2.16.3.
Principal series representations for PGL2 and intertwining operators
21
2.16.4.
Formulas for Hecke operators
24
1

2
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
2.16.5.
Properties of Hecke operators
25
2.16.6.
Asymptotics of Hecke operators and the spectral decomposition
26
3.
Analytic Langlands correspondence over C
29
3.1.
The general setting of the analytic Langlands correspondence over C
29
3.2.
Analytic Langlands correspondence twisted by Z-gerbes on X
32
3.3.
Diﬀerential equations for the Hecke operators for G = PGL2
32
3.4.
Analytic Langlands correspondence twisted by an AutG-torsor on X
35
4.
Analytic Langlands correspondence over R
36
4.1.
The general setup
36
4.2.
The case when τ has no ﬁxed points
37
4.3.
The case when τ has ﬁxed points: genus 0 with m + 2 real ramiﬁcation points
40
4.3.1.
The untwisted case
40
4.3.2.
The twisted case
42
4.4.
The case when τ has ﬁxed points: real and quaternionic ovals
43
4.5.
Real ovals, separating real locus
44
4.6.
Real ovals, non-separating real locus
47
4.7.
Quaternionic ovals
47
4.8.
Conditions with ramiﬁcation points
47
5.
Analytic Langlands correspondence and Gaudin model
48
5.1.
The Gaudin model and monodromy-free opers
49
5.2.
The Gaudin model for g = sl2
50
5.3.
The case of a general Lie algebra g
53
5.4.
The Gaudin model with complex weights
54
5.5.
Examples of Bethe vectors
56
5.6.
Analytic Langlands correspondence over R for compact groups
58
5.7.
The connection between Hecke operators and Baxter’s Q-operator
59
5.8.
Analytic Langlands correspondence for discrete series representations
60
5.9.
Chiral analytic Langlands correspondence
62
5.10.
Inﬁnite dimensional generalizations, including principal series
64
5.11.
Double Gaudin model
64
5.12.
q-deformation of the Gaudin model
65
5.13.
q-deformation of the double Gaudin model
66
References
67
1. Introduction
1.1. Overview. Let X be a smooth irreducible projective curve of genus g > 1 and G
a reductive algebraic group, both deﬁned over a local ﬁeld F. Let Bun◦
G(X) be the va-
riety of regularly stable principal G-bundles on X (see e.g.
[EFK1], Section 1.1).
In
[EFK1, EFK2, EFK3], motivated in part by the works [BK1, Ko, La, Te], we proposed
the analytic Langlands correspondence, which is the study of the spectrum of Hecke
operators acting on the space of complex-valued half-densities on Bun◦
G(X)(F). Justifying
its name, this correspondence is a natural analytic analog of two previously known settings
of Langlands correspondence – arithmetic (for curves over a ﬁnite ﬁeld) and geometric
(involving D-modules on complex curves and on moduli stacks of G-bundles on curves), to

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
3
both of which it is actually intimately related. We also proposed a ramiﬁed generalization of
the analytic Langlands correspondence for G-bundles with level structure at an F-rational
eﬀective divisor D ⊂X (which allows one to also consider g = 0, 1).
However, previously for simplicity we focused on the basic case when G and D are split, and
in fact mostly assumed that F = C. Yet the natural generality of the (arithmetic) Langlands
correspondence is that of a ﬂat reductive group scheme G over X, for example, one deﬁned by
an action of the ´etale fundamental group πet
1 (X) on G. Roughly speaking, one of the main
goals of this paper is to discuss the (ramiﬁed) analytic Langlands correspondence in this
more general setting, when F is arbitrary and G, D are not necessarily split; in particular,
this means that we need focus on Galois-theoretic aspects of the theory. We also allow twists
by Z(G)-gerbes on X and, in the ramiﬁed case, by unitary representations of the group of
changes of the level structure. A detailed discussion of the general framework of the analytic
Langlands correspondence with a focus on these additional features is the subject of the ﬁrst
half of the paper.
The second half of the paper is dedicated to the archimedean cases, F = C and F = R.
In these cases, as shown in [EFK2], the Hecke operators Hx,λ commute with the quantum
Hitchin Hamiltonians and also satisfy a certain diﬀerential equation with respect to x ∈X
involving these Hamiltonians, called the universal oper equation. As a result, the joint
spectrum of the Hecke and quantum Hitchin Hamiltonians is (conjecturally) labeled by G∨-
opers L on X satisfying a certain topological condition called a reality condition. For
F = C, as explained in [EFK2], this is the condition that the monodromy of L can be
conjugated into an inner (conjecturally, split) real form G∨
R of G∨.
On the other hand,
for F = R the theory depends on several additional pieces of data (an antiholomorphic
involution of X, an inner class of G, a form Gσ of G in this class attached to each oval
of X(R), etc.), and the exact form of the reality condition depends on these details. We
work out this condition in several examples for G = GL1 and PGL2, generalizing [EFK3],
Subsection 4.7 and [GW], Section 6.
Finally, we explain how the generalized Bethe Ansatz method for the Gaudin
model can be viewed (in several ways) as an instance of the tamely ramiﬁed analytic Lang-
lands correspondence in genus 0 over R and C. Interestingly, the role of Hecke operators in
this setting is played by Baxter’s Q-operator of the Gaudin model, the q →1 limit
of the Q-operator of the XXZ quantum spin chain introduced by R. Baxter. Motivated by
this, we discuss a q-deformation of the archimedean analytic Langlands correspondence in
genus 0.
1.2. Summary of the main results. To summarize, in this paper we accomplish the
following.
1. We formulate the problem of (ramiﬁed) analytic Langlands correspondence in a general
setting when the group G and the ramiﬁcation divisor D ⊂X are not necessarily split and
ramiﬁcation points carry unitary representations of the groups of changes of level structure,
in presence of possible twists by a Z-gerbe on X and an action of π1(X) on the root datum of
G. We state the conjecture on compactness of Hecke operators, which leads to discreteness
of their spectrum.
2. For G = PGL2 and genus 0 with split ramiﬁcation divisor, in the tamely ramiﬁed
case when ramiﬁcation points carry principal series representations of G(F), we compute
explicitly the Hecke operators Hx (which are known to be compact in this case) and ﬁnd
their asymptotics near ramiﬁcation points. This gives the asymptotics of eigenvalues of Hx.

4
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
3. In the cases F = C and F = R, we conjecturally describe the spectrum of Hecke
operators in the setting of (1) in terms of opers with monodromy representation satisfying
suitable “reality conditions”. We formulate reality conditions in various special cases, and
show that spectral opers must satisfy these conditions. In particular, we work out reality
conditions for G = GL1, F = R, and also G = PGL2, F = R in the ramiﬁed and tamely
ramiﬁed cases. We describe behavior of eigenvalues of Hx near real ovals of X (when they
are present) in various situations.
4. We describe several settings of the Gaudin model in terms of the analytic Langlands
correspondence, enabling us to describe the spectrum of the commuting Gaudin Hamilto-
nians. In particular, we reinterpret the known description of the spectrum of the Gaudin
Hamiltonians in the case of the tensor product of ﬁnite-dimensional representations in terms
of monodromy-free opers [F2, R] as a special case of real analytic Langlands correspondence.
Namely, we use our results in the “quaternionic” real case discussed in Subsection 4.7 to
obtain this description of the spectrum. We also explain the connection to the Bethe Ansatz
method of diagonalization of these Hamiltonians.
Our interpretation of the Gaudin model in terms of the analytic Langlands correspondence
allows us to extend it to a more general setting in which the space of states is inﬁnite-
dimensional and the traditional Bethe Ansatz methods do not apply; for example, the tensor
product of unitary principal series representations.
In all of these cases, the key new element is the existence of the Hecke operators commuting
with the Gaudin Hamiltonians and the fact that they satisfy diﬀerential equations (the
universal oper equations), which can be used to describe the analytic properties of the G∨-
opers encoding the possible joint eigenvalues of the Gaudin Hamiltonians. We show that
the Hecke operators in this setting are closely related to the analogue of the Baxter Q-
operator in the Gaudin model.
We use this relation to discuss a possible q-deformation
of the analytic Langlands correspondence, where the role of Hecke operators is played by
Baxter’s Q-operators of the XXZ model (and its generalization from SL2 to a general simple
complex Lie group).
We note that some results on the spectra of the Gaudin Hamiltonians for SL2 in the real
case were obtained in [NRS] from the point of view of N = 2 SUSY 4d gauge theory. It
would be interesting to see if there is a connection between their results and ours.
1.3. Structure of the paper. The structure of the paper is as follows.
In Section 2 we give an informal description of the general framework for the analytic
Langlands correspondence over an arbitrary local ﬁeld F. We start with reviewing the theory
of forms of reductive groups, especially over non-archimedean local ﬁelds (the Kneser-Bruhat-
Tits theory). Then we explain that in the unramiﬁed case the appropriate moduli space of
F-rational G-bundles is determined by an inner class C(s) of G over F, s ∈H1(F, OutG).
We also explain that every such bundle P and a geometric point x of X deﬁnes an F-form
Gσ of G over the ﬁeld Ex of deﬁnition of x in C(s). Thus in the tamely ramiﬁed case (ℓ= 1)
with ramiﬁcation divisor D ⊂X, the input data of the theory is a choice, for each t ∈D, of a
form Gσ of G over Et in C(s) and a unitary representation V of Gσ(Et). For such input data,
we deﬁne Hecke operators on the L2 space of the moduli space of F-rational G-bundles, pose
the spectral problem for them, consider various examples and present several conjectures
that we’ve proved in some interesting special cases.
In Section 3 we discuss the case F = C. We start by reviewing the results and conjectures
of [EFK1, EFK2, EFK3] on parametrizing the spectrum Σ of Hecke and quantum Hitchin

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
5
operators by real opers on the Riemann surface X(C). Then we discuss twists by Z(G)-
gerbes and by AutG-torsors on X. Finally, we consider twists by unitary representations at
ramiﬁcation points for G = PGL2. For all these twists, we describe (conjecturally) the set
of opers parametrizing Σ.
In Section 4, we consider the case F = R. In this case the curve X is a Riemann surface
with an antiholomorphic involution τ. We ﬁrst assume that τ has no ﬁxed points on X
(i.e., X(R) = ∅) and review the conjectures from [GW], Section 6 on the opers that are
expected to label the eigenspaces of Hecke operators. We also show following [W] that these
conjectures hold for G = GL1.
Then we proceed to the general case, when X(R) may
be nonempty, discussed in [GW], Subsection 6.3. This case is more complicated since it
involves boundary conditions for oper solutions on the ovals of X(R). We describe what
happens for G = GL1, and then propose a conjectural reality condition for spectral opers for
G = SL2. In this case, we have two forms of G (both inner) – the split form and the compact
form, giving rise to two types of ovals – real and quaternionic, respectively. We propose the
boundary conditions for spectral opers on both real and quaternionic ovals. We also explain
what happens in presence of ramiﬁcation points, and in the case X = P1 with the usual real
structure and all ramiﬁcation points real, we recover the description of spectral opers from
[EFK3], Subsection 4.7 (“balanced” opers).
Finally, in Section 5 we interpret the Gaudin model and its generalization in terms of the
analytic Langlands correspondence. In particular, for G = SL2, we derive the description of
the spectrum of the Gaudin Hamiltonians in terms of monodromy-free PGL2-opers [F2, R]
from a special case of the analytic Langlands correspondence over R (namely, for the com-
pact form of SL2(C)). We give a description of the spectrum of the Gaudin Hamiltonians
on the tensor product of representations of the unitary principal series of SL2(R) in terms
of balanced PGL2-opers. We also discuss a q-deformation of the analytic Langlands corre-
spondence in genus 0 and its connection with Bethe Ansatz method for the XXZ model (a
q-deformation of the Gaudin model).
1.4. Acknowledgments. It is our pleasure to dedicate this paper to Corrado De Concini,
who has been an inspiration to us mathematically and personally for many decades.
The material of Section 4 arose from our discussions with Davide Gaiotto and Edward
Witten in the Spring of 2021. We are very grateful to them for these discussions, which
motivated us to write this section. We also thank Nikita Nekrasov for valuable discussions,
and Ilya Dumanskii for communication regarding the material of Subsection 2.16.
P. E.’s work was partially supported by the NSF grant DMS-2001318. The project has
received funding from ERC under grant agreement No. 669655.
2. Analytic Langlands correspondence over a general local field
2.1. Varieties over arbitrary ﬁelds. Let L be a separably closed ﬁeld and X be an
algebraic variety deﬁned over L. Since X is reduced, X(L) = X(L), where L ⊃L is an
algebraic closure of L; in particular, X(L) ̸= ∅. For γ ∈AutL, let γX be the twist of X
by γ. Thus X(L) = γX(L) and the structure sheaf of γX is obtained from the one of X by
twisting the scalar multiplication by γ.
Now let F be any ﬁeld. Let Fsep be a separable closure of F and for a ﬁeld extension
F ⊂E ⊂Fsep, ΓE := Gal(Fsep/E) be the absolute Galois group of E.

6
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
Let X be a variety deﬁned over F. Let τ(γ) : γX →X, γ ∈ΓF, be the collection of
isomorphisms deﬁning the F-structure on X. This deﬁnes an action
γ 7→τ(γ) : X(Fsep) →X(Fsep)
of ΓF on X(Fsep), and the set X(E) of E-points of X is the ﬁxed point set of ΓE ⊂ΓF on
X(Fsep).
Let x ∈X(Fsep) be a point with stabilizer Γx ⊂ΓF. We will call the ﬁeld E := F Γx
sep the
ﬁeld of deﬁnition of x; thus Γx = ΓE.1 Let XE ⊂X(Fsep) be the subset of points with
ﬁeld of deﬁnition E. Then X(E) is the disjoint union of XK over all F ⊂K ⊂E.
Example 2.1. Let F = R, then Fsep = F = C and ΓF = Z/2. An R-structure on X is
given by an antiholomorphic involution τ : X(C) →X(C). Furthermore, the real locus
XR = X(R) = X(C)τ is just the set of ﬁxed points of τ on X(C), and XC = X(C) \ X(R).
2.2. Forms of reductive groups. Let G be a split connected reductive algebraic group
over Z corresponding to a polarized root datum ∆G. In particular, this means that we ﬁx a
positive Borel subgroup B ⊂G and a maximal torus T ⊂B. Let Gad be the corresponding
adjoint group. For any ﬁeld E let AutG(E) := Aut∆G ⋉Gad(E); here Aut∆G = OutG is
the group of outer automorphisms of G.2 This group acts on G(K) for any ﬁeld extension
K of E.
Let F be a ﬁeld whose characteristic is either zero or coprime to the determinant of the
Cartan matrix of G.3
The classiﬁcation of forms of G over F is as described in Subsection 2.1, except that
unlike the case of general varieties, we already have a distinguished F-form of G (the split
form) deﬁning an action g 7→γ(g) of ΓF on G(Fsep), so we can describe all F-forms of G
by counting from this form, in terms of Galois cohomology. Namely, forms of G over F are
parametrized by the (continuous) Galois cohomology H1(ΓF, AutG(Fsep)) ([S]). Speciﬁcally,
let θ : ΓF →AutG(Fsep) be a 1-cocycle, i.e.,
θ(γ1γ2) = θ(γ1) ◦γ1(θ(γ2)).
Then we have an action σ = σθ of ΓF on G(Fsep) given by
σ(γ) = θ(γ) ◦γ,
and conversely, an action σ of ΓF such that for γ ∈ΓF, θσ(γ) := σ(γ) ◦γ−1 ∈AutG(Fsep)
gives rise to a 1-cocycle θ = θσ. The form Gσ of G corresponding to σ (or θ) is deﬁned by
its functor of points
Gσ(A) := G(A ⊗F Fsep)ΓF
for any commutative F-algebra A. In particular, for any ﬁeld extension F ⊂E ⊂Fsep,
Gσ(E) is the subgroup of ﬁxed points of σ(ΓE). In other words, Gσ(E) is the group of
elements of G(Fsep) satisfying the equation
γ(g) = θ(γ)−1(g)
1Note that the ﬁeld of deﬁnition E of a point x is not just an abstract ﬁeld extension of F, but rather a
subﬁeld of Fsep containing F; so if ﬁelds of deﬁnition of two points are not Galois then they may be distinct
but nevertheless isomorphic.
2The group Aut∆G may be inﬁnite, for example if G is an n-dimensional torus then Aut∆G = GLn(Z).
Thus AutG is not an algebraic group, in general. More speciﬁcally, it is an algebraic group iﬀthe center of
G has dimension ≤1 (e.g., for G = GLn or G semisimple). But this is not important for our considerations.
3This assumption is not essential and is made to simplify the exposition.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
7
for all γ ∈ΓE.
For example, if σ = 1 then Gσ = Gspl, the split form of G.
Moreover, if an element a ∈AutG(Fsep) transforms a 1-cocycle θσ1 into a 1-cocycle θσ2 then
it canonically deﬁnes an isomorphism χ(a) : Gσ1 →Gσ2 such that for any b transforming θσ2
into θσ3 we have χ(ba) = χ(b)◦χ(a). In other words, denoting by A = A(F, G) the groupoid
whose objects are 1-cocycles θ : ΓF →AutG(Fsep) and morphisms from θ to θ′ are elements
a ∈AutG(Fsep) such that θ′(γ) = aθ(γ)γ(a)−1, we obtain a functor θσ 7→Gσ from A to the
category of algebraic F-groups. In particular, Gσ depends only on the cohomology class [θσ]
up to isomorphism.
Since the sequence
(2.1)
1 →Gad(Fsep) →AutG(Fsep) →Aut∆G →1
splits, it deﬁnes a short exact sequence of pointed sets
(2.2)
1 →H1(ΓF, Gad(Fsep)) →H1(ΓF, AutG(Fsep)) →H1(ΓF, Aut∆G) →1,
where H1(ΓF, Aut∆G) = Hom(ΓF, Aut∆G)/conjugation (note that ΓF acts trivially on ∆G
since we start with the split form). In other words, the second map in (2.2) is injective
and its image coincides with the kernel (i.e., the preimage of 1) of the third map, which is
surjective.
Recall that a form Gσ is called inner if [θσ] ∈H1(ΓF, Gad(Fsep)), i.e., if it projects to
1 ∈H1(ΓF, Aut∆G). The inner class of Gσ is the collection C(σ) of all forms Gη of G
such that [θσ] and [θη] map to the same element of H1(ΓF, Aut∆G). Thus inner classes are
labeled by conjugacy classes [s] of homomorphisms s : ΓF →Aut∆G. For example, C(1)
(the inner class of the split form) consists of all the inner forms of G.
Note that since the sequence (2.1) is canonically split, so is the sequence (2.2). Thus
for every s ∈Hom(ΓF, Aut∆G) the inner class C(s) has a canonical representative called
the quasi-split form of G in C(s) and denoted by Gs; this is the only form of G in C(s)
which has an F-rational Borel subgroup. For example, the quasi-split inner form is the split
form. By (2.2), this implies that each inner class C(s) can be canonically identiﬁed with
H1(ΓF, Gs
ad(Fsep)) (with the action of ΓF deﬁned by s).
2.3. Forms of reductive groups over a local ﬁeld. Now let F be a non-archimedean
local ﬁeld. We recall the theory of forms of reductive groups over F. We start with two
classical theorems.
Theorem 2.2. (Kneser, Bruhat-Tits, [BT], 4.7) For a simply connected semisimple group
G over F, one has H1(ΓF, G(Fsep)) = 1.
Theorem 2.3. (Tate duality for Galois cohomology, [S], II.5.2, Theorem 2). Let A be a
ﬁnite ΓF-module of order prime to char(F) and A∗:= Hom(A, Gm). Then for 0 ≤i ≤2,
Hi(ΓF, A) is ﬁnite and we have a canonical isomorphism
Hi(ΓF, A) ∼= Hom(H2−i(ΓF, A∗), Q/Z).
In particular, taking i = 2, we get H2(ΓF, A) ∼= Hom((A∗)ΓF , Q/Z) = A(−1)ΓF , the
coinvariants of ΓF in the negative Tate twist A(−1) of A.
Corollary 2.4. Let Gs be a simply connected quasi-split semisimple group over F, Gs
ad the
corresponding adjoint group, and Zs(Fsep) the center of Gs(Fsep) regarded as a ΓF-module

8
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
(with action deﬁned by s). Then there is a natural inclusion
H1(ΓF, Gs
ad(Fsep)) ֒→Zs(Fsep)(−1)ΓF .
Proof. By Theorem 2.2 and the “long” exact sequence of Galois cohomology, we have an
embedding ξ : H1(ΓF, Gs
ad(Fsep)) ֒→H2(ΓF, Zs(Fsep)), so the result follows from Theorem
2.3, using that p does not divide the determinant of the Cartan matrix of G.
□
In fact, there is an even stronger result:
Corollary 2.5. The map of Corollary 2.4 is an isomorphism.
Proof. It is known ([K],[T]) that the map of Corollary 2.4 is surjective, so the result follows.
□
Thus we obtain the following corollary. Let Gs
sc be the universal cover of Gs
ad.
Corollary 2.6. Let G be a split connected reductive group and s ∈Hom(ΓF, Aut∆G). Then
the inner class C(s) is naturally identiﬁed with the group Zs(Fsep)(−1)ΓF , where Zs is the
center of Gs
sc.
Thus we get
Proposition 2.7. Over any local ﬁeld, every inner class of a split connected reductive group
G is ﬁnite.4
Proof. Recall that if F = R then we have the well known Cartan classiﬁcation of forms of G
over F. This implies the proposition in the archimedean case. In the non-archimedean case
the proposition follows from Corollary 2.6.
□
Example 2.8. Let G = SLn and char(F) be coprime to n.
(1) The split inner class. In this case, Zs = µn. Thus by Corollary 2.6, forms in this
class are parametrized by Z/n.
Namely, we identify Z/n with
1
nZ/Z ⊂Q/Z = Br(F).
Thus every m ∈Z/n (represented by an integer in [1, n]) gives rise to a central division
algebra Dm over F of dimension (n/m)2, and the corresponding form Gσ is SLn/m,Dm (i.e.,
Gσ(E) = SLn/m(E ⊗F Dm) for a ﬁeld extension E ⊃F).
(2) The non-split inner class CL attached to a separable quadratic ﬁeld extension L of F
(n ≥3). The quadratic extension deﬁnes a character χL : ΓF →±1, which gives rise to an
action of ΓF on Z; we denote this module by ZL. Then Zs = µn ⊗Z ZL, so the inner class
CL is parametrized by (ZL/n)ΓF , which is trivial if n is odd and Z/2 if n is even. Thus we
should expect the quasi-split form and also an additional form for even n. And indeed, this
is the case: these forms are the corresponding special unitary groups. Namely, recall that
if N : L× →F × is the norm map then |F ×/N(L×)| = 2. Thus we have two equivalence
classes of nondegenerate Hermitian forms on Ln up to isomorphism – B+ whose determinant
is a norm and B−whose determinant is not. So we have the corresponding special unitary
groups SU+
n,L and SU−
n,L (namely, SU±
n,L(E) = SU±
n (E ⊗F L) for a ﬁeld extension E ⊃F).
However, if n is odd then for any non-norm a ∈F ×, the forms aB−and B+ are equivalent,
so these two groups are isomorphic.
We note that SU+
2,L = SL1,D2 and SU−
2,L = SL2 (for any L).
4We have shown this when char(F) does not divide the determinant of the Cartan matrix of F, but this
assumption is, in fact, unnecessary.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
9
Remark 2.9. If char(F) = 0 then F has ﬁnitely many extensions of every ﬁxed degree. Thus
for any ﬁnite group Γ, there are ﬁnitely many homomorphisms ΓF →Γ. Also by a theorem
of Jordan and Zassenhaus, for each n there are ﬁnitely many ﬁnite subgroups of GLn(Z) up
to isomorphism, so the number of homomorphisms ΓF →GLn(Z) (i.e., of F-forms of the
n-dimensional torus) is ﬁnite. It follows that the number of inner classes over F of any split
connected reductive group is ﬁnite as well.
This is, however, false in positive characteristic p > 0, as in this case |Hom(ΓF, Z/p)| = ∞.
For example, for p = 2 there are inﬁnitely many separable quadratic extensions of F, so there
are inﬁnitely many inner classes of SLn for n ≥3. But this is not going to matter for us
here.
Finally, we have
Proposition 2.10. Let T be an abelian reductive group over F. Then
(i) there exists a ﬁnite subgroup R ⊂H1(ΓF, T(Fsep)) such that H1(ΓF, T(Fsep))/R embeds
into H1(ΓF, (T/T0)(Fsep)), where T0 is the identity component of T;
(ii) If char(F) is coprime to the order of T/T0 then the group H1(ΓF, T(Fsep)) is ﬁnite.
Proof. By Theorem 2.3, (ii) follows from (i), so it remains to prove (i).
We have an exact sequence
H1(ΓF, T0(Fsep)) →H1(ΓF, T(Fsep)) →H1(ΓF, (T/T0)(Fsep)).
Thus it suﬃces to prove (i) when T = T0 is connected (a torus), i.e., to show that in this
case H1(ΓF, T(Fsep)) is ﬁnite. Let ΓE ⊂ΓF be the kernel of the action of ΓF on T. Then
we have the inﬂation-restriction exact sequence
0 →H1(ΓF/ΓE, T(E)) →H1(ΓF, T(Fsep)) →H1(ΓE, T(Fsep))ΓF /ΓE.
By Hilbert Theorem 90, the last term vanishes, so H1(ΓF, T(Fsep)) ∼= H1(ΓF/ΓE, T(E)).
But the group H1(ΓF/ΓE, T(E)) has exponent dividing N = [E : F], so it is ﬁnite. This
implies the result.
□
2.4. Principal G-bundles. Let F, Fsep, ΓF be as above, X be an algebraic F-variety, and
G an algebraic F-group. We denote by BunG(X) the F-stack of principal G-bundles on X.
Then ΓF acts on the set BunG(X)(Fsep). If a G-bundle P ∈BunG(X)(Fsep) is deﬁned by
transition functions gij : Ui ∩Uj →G where {Ui} is an open cover of X, and γ ∈ΓF, then
we can deﬁne the G-bundle P γ by the transition functions gγ
ij : Uγ
i ∩Uγ
j →G. It is clear that
this deﬁnition is independent on choices and gives rise to an action of ΓF on BunG(X)(Fsep).
Now let us write this deﬁnition slightly more explicitly. Let θ : ΓF →AutG(Fsep) be a
1-cocycle, σ(γ) := θ(γ) ◦γ be the corresponding action of ΓF, and Gσ be the form of G
over F deﬁned by σ. Also let τ be the natural action of ΓF on X(Fsep) (the F-structure on
X). Then given a principal Gσ-bundle P on X deﬁned over Fsep, we have the Gσ-bundle
P γ = (σ, τ)(γ)P with transition functions gγ
ij = g(σ,τ,γ)
ij
given by
g(σ,τ,γ)
ij
= σ(γ) ◦gij ◦τ(γ)−1.
Let BunG,σ(X, τ) := BunG(X)(Fsep)ΓF be the set of ﬁxed points of this action of ΓF.
Now suppose that G is a split connected reductive group over Z. If h : ΓF →Gσ
ad(Fsep) is
a 1-cocycle then
g(hσ,τ,γ)
ij
= h(γ) ◦g(σ,τ,γ)
ij
.

10
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
Hence h(γ) deﬁnes a canonical isomorphism (hσ, τ)(γ)P ∼= (σ, τ)(γ)P.
In other words,
(σ, τ)(γ) depends only on the inner class C(σ) of σ, i.e. on s ∈Hom(ΓF, Aut∆G) such that
C(σ) = C(s). Thus (σ, τ)(γ) = (s, τ)(γ) for all γ and BunG,σ(X, τ) = BunG,s(X, τ).
2.5. Moduli of G-bundles on a smooth projective curve. Let X be a smooth irre-
ducible projective curve of genus g ≥2 over F. In this case we have a notion of a regularly
stable principal G-bundle on X, which is a stable bundle whose group of automorphisms is
the minimal possible, i.e., reduces to the center Z of G.
The set Bun◦
G(X)(Fsep) ⊂BunG(X)(Fsep) of regularly stable bundles is the set of Fsep-
points of a smooth algebraic variety Bun◦
G(X) of dimension (g −1) dim G deﬁned over F
(this is, in fact, the underlying variety of a stack which is the quotient of a variety by the
trivial action of Z). Moreover, every pair (s, τ) deﬁnes a form Bun◦
G(X)s,τ of this variety.
Let
Bun◦
G,s(X, τ) := Bun◦
G(X)s,τ(F) ⊂BunG,s(X, τ)
be the subset of isomorphism classes of regularly stable bundles.
Deﬁne a pseudo-F-structure on P ∈BunG,s(X, τ) to be a collection of isomorphisms
A(γ) : (s, τ)(γ)P →P, γ ∈ΓF.
Such a data deﬁnes a 2-cocycle a = aA on ΓF with coeﬃcients in Zs(Fsep) such that
(2.3)
A(γ1γ2) = A(γ1) ◦(s, τ)(γ1)(A(γ2)) ◦a(γ1, γ2).
We will say that a pseudo-F-structure A is an F-structure if aA = 1.
Any two pseudo-F-structures A, A′ on P diﬀer by a 1-cochain c : ΓF →Zs(Fsep), and
aA/aA′ = dc.
Thus the class [aA] ∈H2(ΓF, Zs(Fsep)) does not depend on A and only
depends on P, so we’ll denote it by αP. So we obtain
Lemma 2.11. We have a decomposition
Bun◦
G,s(X, τ) = ⊔α∈H2(ΓF ,Zs(Fsep))Bun◦
G,s,α(X, τ),
where Bun◦
G,s,α(X, τ) is the subset of P with αP = α.
In fact, it is more natural to consider a Galois covering of the set Bun◦
G,s,α(X, τ) which
keeps track of the isomorphism A. To this end, ﬁx a 2-cocycle a representing α. Then for a
principal bundle P ∈Bun◦
G,s,α(X, τ) a solution A of (2.3) is unique up to multiplication by
a 1-cocycle c : ΓF →Zs(Fsep). On the other hand, if c is a coboundary then A and cA are
equivalent by an element of Z(Fsep). Thus the set of solutions A of (2.3) up to isomorphism is
a torsor over H1(ΓF, Zs(Fsep)). In other words, the set Bun◦
G,s,a(X, τ) of isomorphism classes
of pseudo-F-structures (P, A) satisfying (2.3) with aA = a is a H1(ΓF, Zs(Fsep))-torsor over
Bun◦
G,s,α(X, τ).
Furthermore, if [a] = [a′] = α and a/a′ = dc then multiplication by the 1-cochain c deﬁnes
a bijection νc : Bun◦
G,s,a(X, τ) ∼= Bun◦
G,s,a′(X, τ) which depends on c only up to coboundaries,
and if c is a 1-cocycle (so a = a′), this recovers the action of H1(ΓF, Zs(Fsep)) on the ﬁbers
of the projection
Bun◦
G,s,a(X, τ) →Bun◦
G,s,α(X, τ).
In other words, for any α we may consider the groupoid Hα whose objects are 2-cocycles
a with [a] = α and morphisms are Hom(a, a′) = {c : a/a′ = dc} with composition deﬁned
by addition. Then canonically we have an Hα-set Bun◦
G,s,α(X, τ) (a functor Hα →Sets),
which is the collection of sets Bun◦
G,s,a(X, τ), [a] = α with an action of the groupoid Hα.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
11
2.6. The form of G attached to a principal bundle and a point. Now let x ∈X(Fsep)
be a point with ﬁeld of deﬁnition E and stabilizer Γx = ΓE ⊂ΓF. Let P ∈Bun◦
G,s(X, τ)
and Px be the ﬁber of P at x. Fix a pseudo-F-structure A on P. Then for γ ∈ΓE we have
an isomorphism A(γ) : Px →Px. By (2.3), if we identify Px with G, we obtain a 1-cocycle
θ : ΓE →Gs
ad(Fsep); indeed, the aA-factor goes away upon projection to the adjoint group.
Moreover, this cocycle is independent on the choice of A, since two diﬀerent choices diﬀer
by a central element of G which maps to 1 in Gad.
When we change the identiﬁcation Px ∼= G by g ∈G(Fsep), the cocycle θ changes by the
coboundary dg, so we obtain a well deﬁned cohomology class [θ] ∈H1(ΓE, Gs
ad(Fsep)). This
class deﬁnes an action σ = σθ of ΓE on G(Fsep). Thus we get
Proposition 2.12. The above procedure assigns to a bundle P ∈Bun◦
G,s(X, τ) and a point
x ∈X(Fsep) with ﬁeld of deﬁnition E, an E-form Gσ of G in the inner class CE(s).
Moreover, the connecting homomorphism
ξ : H1(ΓE, Gs
ad(Fsep)) →H2(ΓE, Zs(Fsep))
maps [θ] to αP|ΓE.
It follows that if X(E) ̸= ∅then αP|ΓE comes from an element of
H2(ΓE, Zs
0(Fsep)), where Z0 := Z ∩[G, G].
Example 2.13. Let G = Gm, s = 1 (the split 1-dimensional torus). Then
H2(ΓF, Zs(Fsep)) = H2(ΓF, F ×
sep) = Br(F),
the Brauer group of F. However, if X(E) ̸= ∅and α ∈Br(F) with Bun◦
G,s,α(X, τ) ̸= ∅
then the image of α in Br(E) is trivial, i.e., the central division F-algebra Dα splits over E.
Thus, assuming that E is a Galois extension of F, we get that α belongs to Br(E/F) :=
H2(Gal(E/F), E×
sep), the relative Brauer group which is a ﬁnite subgroup of Br(F).
Thus all components Bun◦
G,s,α(X, τ) are empty except ﬁnitely many. It is not hard to show
that the same is true in general.
2.7. Principal bundles on curves over a local ﬁeld. Now let F be a local ﬁeld. Then
Bun◦
G,s,α(X, τ) is an analytic F-manifold of dimension (g −1) dim G. Thus by Proposition
2.10, for any a with [a] = α, Bun◦
G,s,a(X, τ) is also an analytic manifold of this dimension (as
it is a ﬁnite covering of Bun◦
G,s,α(X, τ)). Note that these manifolds are non-empty for α = 1
even if X(F) = ∅(although they might be empty for some α ̸= 1).
Let E/F be a ﬁnite extension and XE ⊂X(Fsep) be the subset of points with ﬁeld of
deﬁnition equal to E. Then XE is an open subset of X(E), hence a 1-dimensional analytic
E-manifold.
Corollary 2.14. If F is non-archimedean and P ∈Bun◦
G,s,α(X, τ) then the E-form Gσ of
G in the class CE(s) attached to P and x ∈XE in Subsection 2.6 is independent on x.
Proof. By Theorem 2.2 the map ξ is injective. Thus there exists a unique θ up to cobound-
aries such that ξ([θ]) = α, and we have σ = σθ.
□
However, for F = R, Corollary 2.14 is not true (even for G = SL2). In this case X(R) = XR
is a union of ovals, and the form Gσ attached to a given bundle P and x ∈X(R) is only
locally constant in x, i.e., may depend on the oval to which x belongs.
This leads to
interesting topological phenomena described in Subsection 4.4 below.

12
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
2.8. Hecke operators. As before, let F be a local ﬁeld and a a 2-cocycle such that [a] = α.
Consider the Hilbert space
H(s, τ, a) := L2(Bun◦
G,s,a(X, τ))
of square-integrable half-densities on the analytic F-manifold Bun◦
G,s,a(X, τ). The collection
of Hilbert spaces H(s, τ, a), [a] = α is an Hα-Hilbert space (unitary representation of the
groupoid Hα) which we will denote by H(s, τ, α). We have a decomposition
H(s, τ, α) = ⊕χH(s, τ, α, χ),
where H(s, τ, α, χ) is the isotypic component of the character χ : H1(ΓF, Zs(Fsep)) →C×.
Note that H(s, τ, α, χ) is a well deﬁned Hilbert space up to scaling by a phase factor. Namely,
it is canonically isomorphic up to a phase factor to the space L2(Bun◦
G,s,α(X, τ), Lχ) of half-
densities with values in Lχ, where Lχ is the complex line bundle over Bun◦
G,s,α(X, τ) associ-
ated to the principal bundle Bun◦
G,s,a(X, τ) →Bun◦
G,s,α(X, τ) via the character χ (namely,
the line bundle Lχ is independent of a up to scaling by a phase factor).
We would like to deﬁne the action of commuting Hecke operators on H(s, τ, α) and to
ﬁnd the joint spectral decomposition of the algebra generated by these operators, see [EFK2].
In more down-to-earth terms, these should be operators on the Hilbert space H(s, τ, a) for any
ﬁxed choice of the representative a of α which commute with the action of H1(ΓF, Zs(Fsep)),
i.e., preserve the spaces H(s, τ, α, χ). We view the eigenfunctions of these operators as the
automorphic forms in the setting of the analytic Langlands correspondence.
The Hecke operators are deﬁned as follows. Let Λ be the coweight lattice of G and λ ∈Λ+
be a dominant coweight. Then we deﬁne a variety Zλ called the (regularly stable) Hecke
correspondence equipped with a map
(p1, p2, q) : Zλ →Bun◦
G(X)2 × X,
see [BD1].
Namely, Zλ consists of triples T = (P1, P2, x) where P1, P2 ∈Bun◦
G(X) are
principal G-bundles on X which are identiﬁed outside x and are in relative position λ at x
(see [EFK2], p.4), and pi(T) = Pi, q(T) = x. For x ∈X(F) let Zλ,s,τ,x be the set of pairs
(P1, P2) such that (P1, P2, x) ∈Zλ(Fsep) and P1, P2 are F-rational with respect to (s, τ), i.e.,
belong to BunG,s(X, τ).5 It is easy to see that if (P1, P2) ∈Zλ,s,τ,x then αP1 = αP2. Thus we
may “deﬁne” the Hecke operator Hx,λ on H(s, τ, α) by the formula
(Hx,λψ)(P) =
Z
Zλ,s,τ,x(P )
ψ(Q) ∥dQ∥,
where Zλ,s,τ,x(P) := {Q : (P, Q) ∈Zλ,s,τ,x} and dQ is an appropriate canonically deﬁned
algebraic volume element introduced by Beilinson and Drinfeld in [BD1], see also [EFK2],
Theorem 1.1. If (λ, ρG) ∈Z + 1
2, where ρG is the half-sum of positive roots of G, then
dQ depends on a choice of a spin structure on X, but in any case ∥dQ∥is independent of
choices. Thus the domain of integration Zλ,s,τ,x(P) is (non-canonically) isomorphic to the
set Grλ
G,σ(F) of ﬁxed points of the cell Grλ
G in the aﬃne Grassmannian GrG over Fsep under
the ΓF-action corresponding to the F-form Gσ of G deﬁned by (P, x) ([EFK2], Introduction
and Section 5).
The element dQ is a −(λ, ρG)-form on X, thus the family of operators
{Hx,λ, x ∈X(F)} is an operator-valued −(λ, ρG)-density on X(F).
The word “deﬁne” is in quotation marks because we can prove the convergence of these
integrals only in some special cases. However, we expect that if ψ is a smooth function (locally
5For Zλ,s,τ,x to be non-empty, λ must be invariant under the action of ΓF on ∆G via s.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
13
constant in the non-archimedean case) compactly supported in the locus of suﬃciently generic
bundles then the integral Hx,λψ is convergent and deﬁnes a function whose restriction to the
open dense subset of very stable6 bundles is smooth. This is indeed easy to see when the
genus g is big with respect to λ, so that the codimension of the unstable locus in the moduli
stack of G-bundles is bigger than dim Grλ
G = 2(λ, ρG).
This makes the operator Hx,λ at least densely deﬁned on H(s, τ, α), although it is not
obvious that it lands in H(s, τ, α). We have conjectured in [EFK2, EFK3] (see also [BK2])
that in fact it does, and moreover it extends to a bounded operator which is norm-continuous
in x (see Conjecture 2.16 below).
If so, then one can show that the operators Hx,λ are normal (with H†
x,λ = Hx,λ∗), commute
for diﬀerent x and λ (as Hecke modiﬁcations at diﬀerent points are done independently),
and
Hx,λ1Hx,λ2 = Hx,λ1+λ2.
2.9. Hecke operators for eﬀective divisors with coeﬃcients in the coweight lattice.
It is possible that X(F) = ∅, then there are no x ∈X(F), so we cannot deﬁne the operators
Hx,λ. But we can make a generalization.7 Namely, let M(X, G) be the set of ΓF-invariant
(for the action deﬁned by s) functions µ : X(Fsep) →Λ+ with ﬁnite support (i.e., eﬀective
divisors with coeﬃcients in Λ). The set M(X, G) is a commutative monoid graded by Λ+:
the degree |µ| is the sum of all values of µ. Let M(X, G)[λ] be the part of M(X, G) of degree
λ ∈Λ+.
For µ ∈M(X, G), let Zµ,s,τ be the set of pairs (P1, P2) of F-rational bundles which are
identiﬁed outside suppµ and are in relative position µ(x) at each point x ∈suppµ. Then we
can deﬁne the Hecke operator
(Hµψ)(P) =
Z
Zµ,s,τ(P )
ψ(Q) ∥dQ∥,
where Zµ,s,τ(P) := {Q : (P, Q) ∈Zµ,s,τ}.
For example, if x ∈X(F) and µ = λδx then
Hµ = Hx,λ.
The set M(X, G)[λ] is the direct limit of subsets
M(X, G, E)[λ] = {µ ∈M(X, G)[λ]|suppµ ⊂X(E)}
over ﬁnite Galois extensions F ⊂E ⊂Fsep. Note that M(X, G, E)[λ] has a natural topology
induced by the topology of F, so we have the topology of direct limit on M(X, G)[λ] for each
λ, hence on M(X, G). We expect that the operator Hµ is norm-continuous with respect to
µ in this topology.
Moreover, let x ∈XE for a ﬁnite extension F ⊂E ⊂Fsep and µx := P
γ∈ΓF /ΓE γ(λδx) for
some ΓE-invariant coweight λ ∈Λ+. Then Hµx is an operator-valued −(λ, ρG)-density on
the 1-dimensional analytic E-manifold XE.
These operators are expected to have similar properties to Hx,λ for x ∈X(F) (bounded,
normal with H†
µ = Hµ∗, Hµ1Hµ2 = Hµ1+µ2), except that they always exist, as X(Fsep) ̸= ∅.
6A G-bundle P on X is said to be very stable if it does not admit a nonzero nilpotent Higgs ﬁeld, i.e. a
section of Ω1(X, adP) taking values in the nilpotent cone of LieG. It is known that very stable bundles are
stable and form a dense open set in the variety of stable bundles, see [Z] and references therein.
7In the case of X = P1 with ramiﬁcation points and G = PGL2, this generalization is discussed in [EFK3],
Subsection 3.12.

14
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
Remark 2.15. Let C be a ﬁnite central subgroup of G deﬁned over F (for example, we can
take C = Z if G is semisimple). Then in genus zero the Hecke operators Hµ make sense
more generally, when µ ∈M(X, G/C)[λ] with λ ∈Λ+.
2.10. The spectral decomposition. As we have mentioned, the main problem of the
analytic Langlands correspondence is to describe the joint spectral decomposition of the
Hecke operators Hµ.
The following conjecture was made in [EFK2] (see Conjecture 1.2 and Corollary 1.3).
Conjecture 2.16. If G is semisimple and µ is nonzero on every simple factor then the
operator Hµ is compact, and the intersection of the kernels of Hµ (for various µ) is zero.
Thus the spectrum of {Hµ} is discrete, i.e., we have an orthogonal decomposition
H(s, τ, α) = ⊕kH(s, τ, α)k,
where H(s, τ, α)k are ﬁnite dimensional joint eigenspaces.
2.11. The abelian case. Consider the abelian case, i.e., G = Gn
m is a torus. Then an
inner class (or, equivalently, an F-form) of G is deﬁned by a homomorphism with ﬁnite
image s : ΓF →GLn(Z), and all bundles are stable with the automorphism group G =
Z. Thus Bun◦
G,s(X, τ) is the group Pic(X)n(Fsep)ΓF where ΓF acts via (s, τ). We have a
homomorphism
ϕ : Pic(X)n(Fsep)ΓF →H2(ΓF, Zs(Fsep)),
so we may consider the ﬁbers
Pic(X)n(Fsep)ΓF
α
:= ϕ−1(α),
and
H(s, τ, α, χ) = L2(Pic(X)n(Fsep)ΓF
α , Lχ).
The Hecke operators act by translations. Thus the spectral decomposition in this case is
just the decomposition of L2(Pic(X)n(Fsep)ΓF
α , Lχ) into the characters of some ﬁnite index
subgroup of Pic(X)n(Fsep)ΓF
0
= Kerϕ.
The group Pic(X)n(Fsep)ΓF is isomorphic (albeit non-canonically) to the product of the
compact group Pic0(X)n(Fsep)ΓF and a lattice. So the problem boils down to ﬁnding the
character group of Pic0(X)n(Fsep)ΓF .
In the archimedean case, this reduces to classical
Fourier analysis, so let us consider the non-archimedean case.
Example 2.17. Suppose n = 1, s = 1 and char(F) = 0, so that F is an extension of Qp of
some degree m. Then we need to describe the character group of J(F) where J := Pic0(X).
Let OF be the ring of integers in F, m ⊂OF the maximal ideal, and Fq = OF/m the residue
ﬁeld of characteristic p. Suppose that X has a good reduction X0 over Fq. In this case by
Hensel’s lemma, J(F) = J(OF) and thus we have a short exact sequence
0 →J(m) →J(F) →J(Fq) →0,
which implies that we have a short exact sequence of character groups
0 →J(Fq)∨→J(F)∨→J(m)∨→0.
The group J(m) is the formal Lie group attached to J over OF, which is a ﬁnitely generated
Zp-module of rank mg. So it has a (non-canonical) decomposition
J(m) ∼= Tors(J(m)) ⊕Zmg
p ,

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
15
where Tors(J(m)) is a ﬁnite abelian p-group whose exact structure depends on the arithmetic
of F and X. Thus
J(m)∨∼= Tors(J(m))∨⊕(Qp/Zp)mg.
On the other hand, the group J(Fq)∨can be described as usual through global class ﬁeld
theory of the function ﬁeld Fq(X0).
Remark 2.18. In general, recall that G is isogenous to a product of a torus and a semisimple
group. Thus the problem of computing the spectrum of Hecke operators for a general G
eﬀectively reduces to the case of semisimple G, once the abelian case has been understood.
2.12. The archimedean case. Consider now the case when F = R or F = C. In this
case we have the quantum Hitchin system of Beilinson and Drinfeld ([BD1]). This is a
commutative algebra D consisting of global diﬀerential operators acting on a square root of
the canonical bundle on BunG(X), which is naturally isomorphic to the algebra of polynomial
functions on the aﬃne space Opg∨of Beilinson-Drinfeld opers for the Langlands dual
Lie algebra g∨of g = LieG.
The algebra D acts by unbounded (i.e., densely deﬁned)
operators on H(s, τ, α), namely, on the subspace of smooth half-densities with compact
support. Moreover, for F = C there is a similar action of the complex conjugate algebra D
which commutes with D, so we get an action of A := D ⊗D.
Furthermore, these algebras commute in an algebraic sense with Hecke operators, i.e.,
the Schwartz kernels of the Hecke operators satisfy appropriate diﬀerential equations, see
[EFK2].8 It is moreover expected that they commute in a stronger, analytic sense. Namely,
we conjecture that the operators from D (and in the complex case, D) have canonical nor-
mal extensions which strongly commute with each other and with Hecke operators, thereby
having a common spectral decomposition.
2.13. The Schwartz space. Let G be a semisimple group.
1.
Assume ﬁrst that F is a non-archimedean local ﬁeld.
Let φ be a locally constant
Lχ-valued half-density on Bun◦
G,s,α(X, τ) supported at suﬃciently generic bundles. We con-
jecture that the space S(φ) generated by φ under the action of Hecke operators is ﬁnite
dimensional. Then S(φ) a direct sum of eigenspaces of Hecke operators.9 So we may con-
sider the Schwartz space S(s, τ, α, χ) = P
φ S(φ). Equivalently, S(s, τ, α, χ) is the space
of smooth (=ﬁnite) vectors in H(s, τ, α, χ), or the algebraic direct sum of joint eigenspaces
of Hecke operators.
2. Now assume that F is archimedean. For λ ∈(Λ+)ΓF , let Hλ ⊂H be the (algebraic)
sum of the images of Hµ with |µ| = λ. Then we deﬁne the Schwartz space S(s, τ, α, χ) ⊂
H(s, τ, α, χ) to be the intersection of Hλ over all λ; thus unlike the non-archimedean case,
the Schwartz space is no longer countably dimensional, but it has a natural Fr´echet topology
deﬁned by a collection of seminorms in which it is complete. It is clear that all eigenfunctions
of Hecke operators belong to S(s, τ, α, χ).
Moreover, we expect that the Schwartz space S(s, τ, α) is the intersection of domains of
the operators from D. In other words, it is the space of square integrable half-densities
whose Fourier coeﬃcients cΛ with respect to an orthonormal eigenbasis ψΛ of the algebra D
8More precisely, these diﬀerential equations are proved in [EFK2] for F = C, but the same argument
applies to F = R, except that we get just a single equation rather than two complex conjugate equations.
9Since the action of Hecke operators on these ﬁnite dimensional spaces is given by matrices with algebraic
entries, this would imply that all eigenvalues of Hecke operators are algebraic numbers, as conjectured by
Kontsevich in [Ko], p.19.

16
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
decay rapidly (faster than any polynomial) as a function of the eigenvalues Λi of generators
Di ∈D.
Remark 2.19. Another, more geometric deﬁnition of the Schwartz space based on the
geometry of the stack of G-bundles on X, which is conjecturally equivalent to the above,
is proposed in the non-archimedean case in [BK2], see also [BKP1], [BKP2].
A similar
deﬁnition is expected to exist in the archimedean case.
2.14. The ramiﬁed case. The above picture has a generalization to the ramiﬁed case, i.e.,
the case of bundles with level structure along an F-rational eﬀective divisor on X. This is,
in particular, required to extend the analytic Langlands correspondence to curves of genus 0
and 1 (as such curves admit stable bundles only in the ramiﬁed setting). Before considering
the ramiﬁed case we remind the following general construction.
Let F be a local ﬁeld, Y be an analytic F-manifold, and G an analytic F-group acting
properly and freely on Y . Let π be a unitary representation of G. Let Vπ := (Y × π)/G
be the associated Hilbert space bundle over the F-manifold Y/G (the action of G is given
by g(y, v) = (gy, gv)). So we have the projection Vπ →Y/G with ﬁber π. Let ψ be a
measurable half-density on Y/G with values in Vπ. Then |ψ|2 is a density on Y/G. Let
H(Y, G, π) be the Hilbert space of all ψ with
R
Y/G |ψ|2 < ∞.
More generally, if L is a G-equivariant hermitian line bundle on Y (i.e., a hermitian line
bundle on Y/G), the we can deﬁne the Hilbert space H(Y, G, π, L) of L-valued sections ψ
with
R
Y/G |ψ|2 < ∞.
If P ⊂G is a closed subgroup and π a unitary representation of P then we have a canonical
isomorphism
H(Y, P, π, L) ∼= H(Y, G, indG
Pπ, L),
where ind denotes unitary induction. Moreover, if π is a representation of a closed subgroup
P ⊂N ⊂NG(P) then this space carries a unitary action of N/P.
We are now ready to discuss the ramiﬁed case. The most general setting is as follows.
Let t1, ..., tN be distinct points in X(Fsep) and ζi be local parameters on X near ti. Let
ℓ≥1.
Denote by Bunℓ
G(X, t1, ..., tN) the stack of principal G-bundles on X trivialized
on the ℓ-th nilpotent neighborhood Dℓ(ti) of each ti (i.e., modulo ζℓ
i ). We have a torsor
Bunℓ
G(X, t1, ..., tN) →BunG(X) for the algebraic group QN
i=1 Map(Dℓ(ti), G) ∼= QN
i=1 Gℓ,
where for a commutative ring R, Gℓ(R) := G(R[ζ]/ζℓ) (the identiﬁcation is made using the
local parameters ζi).
Now assume that ti are permuted by ΓF acting via τ. Let {ti, i ∈S}, S ⊂[1, n] be a set
of representatives of orbits of this action. Then given s : ΓF →Aut∆G, we have an action
of ΓF on Bunℓ
G(X, t1, ..., tN)(Fsep). Denote by Bunℓ◦
G,s(X, τ, t1, ..., tN) the subset of regularly
stable bundles ﬁxed by this action. Let F ⊂Ei ⊂Fsep be the ﬁeld of deﬁnition of ti, i.e.,
Ei = F
Γti
sep . Recall that in Subsection 2.6, to every P ∈Bunℓ◦
G,s(X, τ, t1, ..., tN) and each i
we have attached an Ei-form Gσi of G in the inner class s. This form, in turn, deﬁnes an
Ei-form Gσi
ℓof Gℓ. Let Bunℓ◦
G,s(X, τ, t1, ..., tN, σ1, ..., σN) be the subset of bundles deﬁning the
ﬁxed forms σ1, ..., σN (clearly, if γti = tj then γEi = Ej and γσi = σj). This is an analytic
F-manifold with an action of G := Q
i∈S Gσi
ℓ(Ei), and, as in the unramiﬁed case, it is the
disjoint union of open submanifolds Bunℓ◦
G,s,α(X, τ, t1, ..., tN, σ1, ..., σN).
Fix a closed subgroup P ⊂G acting freely and properly on Bunℓ◦
G,s(X, τ, t1, ..., tN, σ1, ..., σN)
and let π be an irreducible unitary representation of P. Analogously to the unramiﬁed case,

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
17
deﬁne the Hilbert space
H = H(s, τ, α, χ, t1, ..., tN, π) := H(Bunℓ◦
G,s,α(X, τ, t1, ..., tN, σ1, ..., σN), P, π, Lχ),
where Lχ is the line bundle deﬁned in Subsection 2.8 (it is clear that this space does not
change if we replace the set of stable points by its P-invariant dense open subset).
The space H (conjecturally) carries an action of Hecke operators Hµ where µ(ti) = 0 for all
i, and the main question of the (ramiﬁed) analytic Langlands correspondence is to describe
the joint spectrum of Hµ (which in general won’t be discrete).10 Note that if π is a unitary
representation of a closed subgroup P ⊂N ⊂NG(P) (for example, π = C, N = NG(P)),
then this space carries a commuting action of N/P.
Moreover, in the archimedean case the space H carries a (densely deﬁned) action of the
quantum Hitchin system (extended from the unramiﬁed case to produce a quantum in-
tegrable system), which conjecturally commutes with the Hecke operators and thus has
compatible spectral decomposition.11
Consider ﬁrst the case g ≥2. In this case we may deﬁne stable bundles as above, to be the
bundles stable in the usual sense with automorphism group Z. Then we may take P to be
the entire group G, so that π = N
i∈S πi, where πi are irreducible unitary representations of
Gσi
ℓ(Ei). For instance, for ℓ= 1 (tame ramiﬁcation) πi are irreducible unitary representations
of the groups of Ei-points of the reductive groups Gσi.
In the (generally simpler) case g ≤1 the situation is a bit more tricky since G does not act
freely any more, so one has to take proper subgroups P ⊂G which act freely. For simplicity
consider the tamely ramiﬁed case ℓ= 1. For i ∈S let Pi be cocompact closed subgroups of
Gi := Gσi(Ei) and πi be ﬁnite dimensional unitary representations of Pi. Let P := Q
i∈S Pi
and π := N
i∈S πi. If P acts freely then we may deﬁne the space H as above and we expect
the spectrum of Hecke operators on this space to be discrete.
Example 2.20. 1. Pi = Pi(Ei) for parabolic subgroups Pi ⊂Gσi deﬁned over Ei; this corre-
sponds to doing harmonic analysis on the moduli space of bundles with parabolic structures.
For instance, if Pi = Bi are Borel subgroups then we must have σi = s for all i.
Another extreme is Pi = Gσi and πi = C. Then we recover the unramiﬁed case discussed
above.
2. Gi are compact. In this case we may take Pi = 1, so π = C, and the space H carries a
commuting action of the compact group G, so we have
H = ⊕ρ∈bGHρ ⊗ρ∗
10The deﬁnition of Hecke operators is the same as in [EFK2] in the unramiﬁed case, using the Beilinson-
Drinfeld isomorphism a from [EFK2], Theorem 1.1. Ramiﬁcation data does not alter this deﬁnition. However,
the deﬁnition is still conjectural because of the analytic issues (landing in L2, boundedness) which are present
already in the unramiﬁed case and are discussed in [EFK2].
11Recall that the moduli stack Bunℓ
G(X, t1, ..., tN) can be represented as a double quotient
Bunℓ
G(X, t1, ..., tN) = Ker(G[[t]] →Gℓ)N\G((t))N/G(O(X)),
and the quantum Hitchin system is obtained by reduction of two-sided invariant diﬀerential operators on the
Kac-Moody central extension of G((t))N at the critical level (the Feigin-Frenkel center of the Kac-Moody
algebra) down to the double quotient. Because of the critical level, we get commuting diﬀerential operators
acting on half-forms on Bunℓ
G(X, t1, ..., tN), and Beilinson and Drinfeld showed that they form a quantum
integrable system (i.e., the number of algebraically independent commuting operators is the maximal possible,
namely dim Bunℓ
G(X, t1, ..., tN)).

18
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
where ρ = N
i∈S ρi for some irreducibles ρi of Gi, and Hρ := (H ⊗ρ)G. In this case the
Hecke operators act on Hρ for each ρ.
Of course, these two examples can also be combined, with (1) occurring at some of the
points ti and (2) at other ones.
2.15. The ramiﬁed genus 0 case. In the case g = 0, i.e., X = P1, the space H can be
described entirely in terms of Lie theory. Indeed, suppose that the group G is semisimple
and simply connected and ℓ= 1 (the tamely ramiﬁed case).
In this case, it suﬃces to
consider only trivial G-bundles (with trivializations at ti). Thus the moduli space is non-
empty only if σi = σ|ΓEi for all i up to conjugation. In this case, we have a natural inclusion
Gσ(F) ֒→Gσi(Ei), and the moduli space looks like (Q
i∈S Gσi(Ei))/Gσ(F). Thus
H = H
 
(
Y
i∈S
Gσi(Ei))/Gσ(F),
Y
i∈S
Pi,
O
i∈S
πi
!
.
This picture extends in an obvious way to the case of wild ramiﬁcation.12
For instance, in Example 2.20(2), we have
Hρ =
 O
i∈S
ρi
!Gσ(F )
,
a ﬁnite dimensional space. In this case, all the analytic issues disappear and the spectral
problem is automatically well deﬁned.
Example 2.21. Let ℓ= 1, g = 0, N ≥2, ti ∈X(F), σi = σ for all 1 ≤i ≤N. Let Pi = 1,
πi = C. Then
H = L2(Gσ(F)N/Gσ(F)diagonal).
So the spectral decomposition of H is an extension of the Plancherel formula for Gσ(F).
Namely, we have
(2.4)
H =
Z ⊕
\
Gσ(F )
N MultGσ(F )(V ∗
N, V1 ⊗... ⊗VN−1) ⊗(V ∗
1 ⊗... ⊗V ∗
N)dµ(V1)...dµ(VN),
where dµ(V ) is the Plancherel measure of Gσ(F) and MultGσ(F )(L, M) is the multiplicity
space13 of an irreducible tempered representation L of Gσ(F) in a tempered representation
M, deﬁned using Plancherel theory (see [D], Subsection 18.8).14 For example, for N = 2
by Schur’s lemma the multiplicity space vanishes unless V1 ∼= V ∗
2 , in which case it is 1-
dimensional, so formula (2.4) takes the form
H =
Z ⊕
\
Gσ(F )
(V ∗⊗V )dµ(V ),
12The parameters α and χ do not appear here, since the automorphism group of the trivial G-bundle
trivialized on a a non-empty subset of X is trivial.
13The multiplicity space MultGσ(F )(L, M) is a generalization of HomGσ(F )(L, M) in presence of continuous
spectrum. Namely, it coincides with the latter when M is a Hilbert direct sum (ﬁnite or inﬁnite) of irreducible
unitary representations.
14Note that the representation V1 ⊗... ⊗VN is tempered, so does not contain the trivial representation
in its spectrum. Hence in the L2 context we cannot talk about MultGσ(F )(C, V1 ⊗... ⊗VN). This is why
we break the symmetry and dualize one of the factors. However, it can be shown that the result does not
depend on the choice of this factor.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
19
which is the usual Plancherel formula for L2(Gσ(F)).
Each multiplicity space
(2.5)
HV1,...,VN := MultGσ(F )(V ∗
N, V1 ⊗... ⊗VN−1)
carries an action of commuting Hecke operators.
For example, as follows from [EFK3],
Section 3, if G = PGL2, Gσ is the split form, and x ∈P1(F), then the Hecke operator has
the form
(2.6)
Hxψ =
Z
F

0
x −t1
1
−s

⊗... ⊗

0
x −tN−1
1
−s
−1
ψ ∥ds∥
where the tensor product acts in V1 ⊗... ⊗VN−1.
Remark 2.22. One may take Vi to be projective representations of Gσ (i.e., replace Gσ
with a central extension), as long as the product of Schur multipliers attached to them equals
1. For instance, in Example 2.21 we may replace SL2(R) by its universal cover ^
SL2(R). For
an example of this see Remark 5.14 below.
2.16. The ramiﬁed genus 0 case for PGL2.
2.16.1. Hypergeometric integrals. Let F be a local ﬁeld and a, b ∈iR. For α ∈C, Reα > 0
let
K(α) :=
Z
v∈F :∥v∥≤1
∥v∥α−1 ∥dv∥.
Under suitable normalization of the Lebesgue measure on F we have K(α) =
1
α if F is
archimedean and K(α) =
log q
qα−1 if not, where q is the order of the residue ﬁeld of F.
For Reα = 0 this integral does not converge (even conditionally). But we can regularize
it if α ̸= 0 by using an ǫ-deformation:
(2.7)
Z
v∈F :∥v∥≤1
∥v∥α−1 ∥dv∥:= lim
ǫ→0+
Z
v∈F :∥v∥≤1
∥v∥α+ǫ−1 ∥dv∥.
Denote by ΓF the Γ-function of F, which is the meromorphic function on C deﬁned by
the condition that
F ∥u∥a−1 = ΓF(a) ∥u∥−a ,
where F is the Fourier transform on F (so ΓF(a)ΓF(1 −a) = 1).15
Recall the beta integral
Z
F
∥s∥α−1 ∥s −1∥β−1 ∥ds∥= BF(α, β) := ΓF(α)ΓF(β)
ΓF(α + β) .
Thus
BF(α, β) = BF(β, α) = BF(α, 1 −α −β).
Now consider the integral
I(x) :=
Z
s∈F :∥s∥≥1
∥s∥α−1 ∥s −x∥β−1 ∥ds∥
15Here for simplicity we consider the Γ-function for unramiﬁed characters, but all the formulas extend
straightforwardly to general multiplicative characters of F.

20
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
where Reα = 0, 0 < Reβ < 1. Setting s = xv−1, we get
I(x) = ∥x∥α+β−1
Z
∥v∥≤∥x∥
∥v∥−α−β ∥v −1∥β−1 ∥dv∥.
Thus I(x) depends only on ∥x∥.
The following lemma is a generalization of [EFK3], Lemma 8.1.
Lemma 2.23. If ∥·∥α ̸= 1 then we have
I(x) = K(−α) ∥x∥β−1 + BF(α, β) ∥x∥α+β−1 + o(∥x∥Reβ−1), x →∞.
Proof. We write
∥x∥1−α−β I(x) =
Z
∥v∥≤R
∥v∥−α−β ∥v −1∥β−1 ∥dv∥+
Z
R<∥v∥≤∥x∥
∥v∥−α−β ∥v −1∥β−1 ∥dv∥=
Z
∥v∥≤R
∥v∥−α−β ∥v −1∥β−1 ∥dv∥+
Z
R<∥v∥≤∥x∥
1 −v−1β−1 −1

∥v∥−α−1 ∥dv∥+
Z
R<∥v∥≤∥x∥
∥v∥−α−1 ∥dv∥.
The ﬁrst two integrals have a limit as x →∞, namely
CR(α, β) :=
Z
∥v∥≤R
∥v∥−α−β ∥v −1∥β−1 ∥dv∥+
Z
R<∥v∥
1 −v−1β−1 −1

∥v∥−α−1 ∥dv∥,
while the last integral equals
K(−α)(∥x∥−α −R−α).
So we get
I(x) = K(−α) ∥x∥β−1 + (CR(α, β) −K(−α)R−α) ∥x∥α+β−1 + o(∥x∥Reβ−1), x →∞.
Thus CR(α, β) −K(−α)R−α is independent of R. In fact, it is easy to show that for any R,
CR(α, β) −K(−α)R−α = BF(α, β).
This implies the result.
□
The following lemma is a generalization of [EFK3], Lemma 8.2.
Lemma 2.24. Let α, β be as above and ϕ be a locally integrable function on P1(F) which is
smooth near ∞and has power decay at 0. Let
I(x, ϕ) :=
Z
F
ϕ(s) ∥s∥α−1 ∥s −x∥β−1 ∥ds∥, ∥x∥≫1.
Then if ∥·∥α ̸= 1 then
I(x, ϕ) = ∥x∥β−1
Z
F
ϕ(s) ∥s∥α−1 ∥ds∥+ ϕ(∞)BF(α, β) ∥x∥α+β−1 + o(∥x∥Reβ−1), x →∞,
where the integral is understood in the sense of ǫ-deformation.
Proof. If ϕ(∞) = 0, this follows by taking the limit directly, and if ϕ = 1∥s∥≥1 is the indicator
function then this is Lemma 2.23. So the result follows from the decomposition
ϕ(s) = (ϕ(s) −ϕ(∞)1∥s∥≥1) + ϕ(∞)1∥s∥≥1.
□

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
21
Now for x ∈F, x ̸= 0, 1, 0 < Reγ < 1, and consider the hypergeometric integral
ΦF(α, β, γ; x) :=
Z
F
∥s∥α−γ ∥s −1∥γ−1 ∥s −x∥β−1 ∥ds∥.
Taking in Lemma 2.24 ϕ(s) = ∥1 −s−1∥γ−1, where 0 < Reγ < 1, we get
Proposition 2.25.
ΦF(α, β, γ; x) = BF(−α, γ) ∥x∥β−1 + BF(α, β) ∥x∥α+β−1 + o(∥x∥Reβ−1), x →∞.
2.16.2. Principal series representations. Let G be a split connected reductive algebraic group
over a local ﬁeld F, B ⊂G a Borel subgroup deﬁned over F, and let G := G(F), B := B(F).
Then any integral weight µ of G deﬁnes a character B →F ×, denoted b 7→bµ. Let ρ := ρG
be the sum of fundamental weights of G. Then densities on G/B can be realized as functions
h : G →C such that h(gb) = ∥b−2ρ∥h(g), g ∈G, b ∈B.
Now let χ be a unitary character B →C× (or, equivalently, T →C×, where T :=
B/[B, B]). Then we can deﬁne the principal series representation M(χ) of G, which is
the space of functions f : G →C such that
f(gb) = χ(b)
b−ρ f(g), g ∈G, b ∈B,
and |f|2 is an L1-density on G/B, with the action of G by left multiplication ((gf)(x) :=
f(g−1x)). Then M(χ) is a unitary representation of G with inner product
(f1, f2) =
Z
G/B
f1f 2.
It is well known (see e.g. [ABV] for the archimedean cases and [Ca] for non-archimedian
ones) that the representations M(χ) are irreducible and M(χ1) ∼= M(χ2) iﬀχ1 = wχ2 for
some element w of the Weyl group W of G. These isomorphisms are nontrivial and are called
intertwining operators; we discuss them below for G = PGL2.
2.16.3. Principal series representations for PGL2 and intertwining operators. Let us now
consider the case G = PGL2. Then T = F ×, so for c ∈iR we may take χc(t) = ∥t∥c , t ∈T,
and deﬁne the unramiﬁed (or spherical) principal series representation M(χc). We
will set λ := −1 + c and denote M(χc) by Mλ. Thus Mλ = L2(P1(F), ∥K∥−λ
2 ), where K
is the canonical bundle (as c ∈iR, this is naturally a Hilbert space with inner product
(f1, f2) =
R
P1(F ) f1f 2).
It is well known that we have an isomorphism of unitary representations ι : Mλ ∼= M−λ−2
such that ι2 = Id, namely the intertwining operator
ι : L2(P1(F), ∥K∥−λ
2 ) →L2(P1(F), ∥K∥
λ+2
2 )
given by
ι = F ◦∥·∥λ+1 ◦F −1,
where ∥·∥λ+1 denotes the operator of multiplication by the function ∥·∥λ+1. In other words,
for smooth f vanishing near ∞we have
(2.8)
(ιf)(z) = lim
ǫ→0+
1
ΓF(−λ −1 + ǫ)
Z
F
f(w) ∥z −w∥−λ−2+ǫ ∥dzdw∥
λ+2
2 .

22
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
Observe that this integral is absolutely convergent near the diagonal z = w and the right
hand side tends to the identity operator when λ →−1.16 Thus for λ = −1 we have ι = 1.
The existence of ι implies that Mλ depends only on the Casimir eigenvalue 1
2(λ+1)2 = c2
2 .
Let λj ∈−1 + iR, j = 0, ..., m + 1, Vj := Mλj, j ∈[0, m + 1] and λ := (λ0, ..., λm, λm+1).
Consider the Hilbert space
(2.9)
H(λ) := HV0,...,Vm+1 = MultP GL2(F )(M∗
λm+1, Mλ0 ⊗... ⊗Mλm).
Similarly to [EFK3], Section 3.3, the space H(λ) may be realized as the space of functions
ψ(y0, ..., ym) on F m+1 invariant under simultaneous translations yj 7→yj+C, homogeneous of
degree 1
2(Pm
j=0 λj −λm+1), and specializing at y0 = 0, ym = 1 to square integrable functions
on F m−1 (see e.g. [P, Re] for F = R, [Na, Wi] for F = C, [Ma] for a general local ﬁeld).
The inner product on H(λ) is given by
(ψ, η) =
Z
F m−1 ψ(0, y1, ..., ym−1, 1)η(0, y1, ..., ym−1, 1) ∥dy1...dym−1∥.
Note that if ε = (ε0, ..., εm, εm+1) ∈(Z/2)m+2 is a collection of signs, and (ε ◦λ)j :=
εj(λj +1)−1, then we have isomorphisms17 Rε = Rλ
ε : H(λ) ∼= H(ε◦λ) given by composing
the isomorophisms ι in all variables yj for which εj = −1, and Rεε′ = RεRε′. Thus we can
think of the collection of spaces H(λ) attached to an orbit O of (Z/2)m+2 as a single Hilbert
space H(O) with multiple realizations H(λ), λ ∈O connected by a consistent family of
isomorphisms.
Furthermore, we can write an explicit formula for Rε. For example, let us write an explicit
formula for R := R1,...,1,−1 : H(λ) →H(λ′), where λ′ := (λ0, ..., λm, −λm+1 −2). In fact, we
can write a more general formula for the operator
R : MultP GL2(F )(M∗
λ, V ) →MultP GL2(F )(M∗
−λ−2, V )
induced by ι for any tempered representation V of PGL2(F) (note that R2 = 1, so R† = R).
To this end, assume ﬁrst that V is a direct sum of irreducible representations and realize
elements of MultP GL2(F )(M∗
λ, V ) as V -valued (generalized) −λ
2-densities v = v(y) ∥dy∥−λ
2 on
P1(F) equivariant under PGL2(F). Then formula (2.8) implies that
Rv = lim
ǫ→0+
1
ΓF(−λ −1 + ǫ)
Z
F
v(s) ∥y −s∥−λ−2+ǫ ∥ds∥∥dy∥
λ+2
2 ,
which we will write for brevity as
Rv =
1
ΓF(−λ −1)
Z
F
v(s) ∥y −s∥−λ−2 ∥ds∥∥dy∥
λ+2
2 .
Let bv := v(u−1) ∥u∥λ ∥du∥−λ
2 be the image of v under the change of coordinates u = y−1, so
bv(u) := v(u−1) ∥u∥λ. Then
c
Rv(u) =
1
ΓF(−λ −1)
Z
F
v(s) ∥1 −su∥−λ−2 ∥ds∥.
16 Here we use the ǫ-deformation as in (2.7) to make sense of the divergent integral in (2.8).
17Here and below we will consider various operators with source H(λ). While these operators by deﬁnition
depend on λ, we will drop it from the notation when no confusion is possible.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
23
Specializing this at u = 0, we have
c
Rv(0) =
1
ΓF(−λ −1)
Z
F
v(s) ∥ds∥=
1
ΓF(−λ −1)
Z
F
bv(s−1) ∥s∥λ ∥ds∥.
But s−1 is obtained from 0 by the element g(s) ∈PGL2(F) sending u to u + s−1, i.e. y to
(y−1 + s−1)−1 =
y
s−1y+1. Thus g(s) =

1
0
s−1
1

. So we get
c
Rv(0) =
1
ΓF(−λ −1)
Z
F
g(s)−1bv(0) ∥s∥λ ∥ds∥.
This formula continues to hold if V is not necessarily a direct sum of irreducible represen-
tations but rather a direct integral. For example, in our situation V = V0 ⊗... ⊗Vm is
the space of translation invariant functions in y0, ..., ym which are homogeneous of degree
1
2(Pm
i=0 λi −λm+1), so we get
Rψ =
1
ΓF(−λm+1 −1)
Z
F
g(s)−1ψ ∥s∥λm+1 ∥ds∥,
i.e.,
Rψ(y0, ..., ym) =
1
ΓF (−λm+1−1)
Z
F
ψ

y0s
s−y0, ...,
y0s
s−ym

∥s∥λm+1−Pm
i=0 λi
m
Y
i=0
∥s −yi∥λi ∥ds∥=
1
ΓF(−λm+1 −1)
Z
F
ψ

s2
s −y0
, ...,
s2
s −ym

∥s∥λm+1−Pm
i=0 λi
m
Y
i=0
∥s −yi∥λi ∥ds∥.
We thus obtain the following lemma.
Lemma 2.26. We have18
(Rψ)(y0, ..., ym) =
1
ΓF(−λm+1 −1)
Z
F
ψ

1
s −y0
, ...,
1
s −ym
 m
Y
i=0
∥s −yi∥λi ∥ds∥
Remark 2.27. Setting in Lemma 2.26 t0 = y0 = 0 and ϕ(y1, ..., ym) := ψ(0, y1, ..., ym), we
obtain
(2.10)
(Rϕ)(y1, ..., ym) =
1
ΓF (−λm+1 −1)
Z
F
ϕ

y1
1 −y1s−1 , ...,
ym
1 −yms−1
 m
Y
j=1
1 −yjs−1λj ∥s∥λm+1 ∥ds∥.
We will also need to consider the operator Q = Qλ : H(λ) →H(λ′) given by
(Qψ)(y0, ..., ym) =
1
ΓF(λm+1 + 1)
Z
F
ψ(y0 −t0s, ..., ym −tms) ∥s∥λm+1 ∥ds∥.
Setting t0 = y0 = 0 and ϕ := ψ|y0=0, we have
(2.11)
(Qϕ)(y1, ..., ym) =
1
ΓF(λm+1 + 1)
Z
F
ψ(y1 −t1s, ..., ym −tms) ∥s∥λm+1 ∥ds∥.
Recall that by [EFK3], Proposition 3.3,
S0(y1, ..., ym) = ( t1
y1, ..., tm
ym).
18Note that this integral is not convergent near s = ∞and should be understood in the sense of ǫ-
deformation in λm+1, as explained in footnote 16.

24
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
Thus, setting λ∗:= (−λ0 −2, λ1, ..., λm, −λm+1 −2), we get the unitary involution
S0 : H(λ) →H(λ∗)
given by
(S0ϕ)(y1, ..., ym) =
m
Y
j=1

tj
y2
j

−
λj
2 ϕ( t1
y1, ..., tm
ym),
and we see that Q = S0RS0. In fact, since for any 1 ≤i ≤m the operator SiS0 commutes
with R, we have Q = SiRSi for any 0 ≤i ≤m. We also see that
Q2 = 1, Q† = Q.
2.16.4. Formulas for Hecke operators. Now let us study the Hecke operators on the Hilbert
space HV0,...,Vm+1. This is the setting of the tamely ramiﬁed analytic Langlands corre-
spondence with parameters λj for G = PGL2 and X = P1 with N = m + 2 ramiﬁcation
points. It generalizes the setting of [EFK3] where λj = −1 for all j, so that
HV0,...,Vm+1 = L2(Bun◦
G(X, t0, ..., tm+1), ∥K∥
1
2)
is the space of square-integrable half-densities. Similarly to [EFK3], Subsection 3.3, we’ll
denote the ramiﬁcation points by t0, ..., tm+1 to align notation with [EFK3], and assume that
tj ∈X(F) for all j, while tm+1 = ∞.
First we would like to write a formula for the (modiﬁed) Hecke operator Hx that generalizes
the formula for Hx from [EFK3], Proposition 3.9. Recall that we have two components of the
moduli of bundles, Bun0 and Bun1 (bundles of even and odd degree), which are identiﬁed
by the Hecke modiﬁcation Sm+1 at inﬁnity. Thus, as in [EFK3], Section 3, we can use Sm+1
to identify the sectors H0, H1 of the Hilbert space corresponding to bundles of degree 0 and
1. Then the modiﬁed Hecke operator Hx : H0 →H1 can be written as an endomorphism of
H0. In fact, it is convenient to write this endomorphism as an operator H(λ) →H(λ′). In
other words, it maps homogeneous functions of degree 1
2(Pm
j=0 λj −λm+1) to homogeneous
functions of degree 1 + 1
2
Pm+1
j=0 λj.
Proposition 2.28. The modiﬁed Hecke operator Hx = Hλ
x : H(λ) →H(λ′) is given by the
formula
(Hxψ)(y0, ..., ym) =
Z
F
ψ
t0 −x
s −y0
, ..., tm −x
s −ym
 m
Y
j=0
∥s −yj∥λj ∥ds∥.
The proof of Proposition 2.28 is parallel to the proof of [EFK3], Proposition 3.9.
We also have the ordinary (unmodiﬁed) Hecke operator Hx : H(λ) →H(λ′), which diﬀers
from Hx by normalization:
Hx =
m
Y
j=0
∥x −tj∥−
λj
2 Hx.
This is a special case of formula (2.6). It is not hard to check that
Rε ◦Hx = Hx ◦Rε
when εm+1 = 1; however, this does not hold for εm+1 = −1 since we used Sm+1 acting at
tm+1 = ∞to identify Bun0 and Bun1.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
25
Remark 2.29. By setting t0 = y0 = 0 and ϕ(y1, ..., ym) := ψ(0, y1, ..., ym), we obtain the fol-
lowing
formula
for
the
action
of
Hx
on
homogeneous
functions
of
degree
1
2(Pm
j=0 λj −λm+1):
(2.12)
(Hxϕ)(y1, ..., ym) =
Z
F
ϕ
t1s −xy1
s(s −y1), ..., tms −xym
s(s −ym)
 m
Y
j=0
∥s −yj∥λj ∥ds∥.
This formula generalizes the formula of Theorem 3.6 in [EFK3].
We can further set tm = ym = 1 and get the following analog of [EFK3], Proposition 3.7.
Let φ(y1, ..., ym−1) = ϕ(y1, ..., ym−1, 1) ∈L2(F m−1). Then
(Hxφ)(y1, ..., ym−1) =
Z
F
φ
(t1s −xy1)(s −1)
(s −y1)(s −x)
, ..., (tm−1s −xym−1)(s −1)
(s −ym−1)(s −x)
 
s(s −1)
s −x

−1
2 (Pm
j=0 λj−λm+1)
m
Y
j=0
∥s −yj∥λj ∥ds∥.
Similarly to [EFK3], Subsection 3.3, deﬁne the unitary operator Us,x on L2(F m−1) by
(Us,xφ)(y1, ...., ym−1) :=
φ
(t1s −y1x)(s −1)
(s −y1)(s −x) , ..., (tm−1s −ym−1x)(s −1)
(s −ym−1)(s −x)
 
s(s −1)
s −x

−1
2
Pm−1
j=1 λj m−1
Y
j=1

tj −x
(s −yj)2

−
λj
2
.
Then we get
(2.13)
Hxφ = ∥x∥−λ0
2 ∥x −1∥−λm
2
Z
F
∥s∥
1
2 (λ0−λm+λm+1) ∥s −1∥
1
2 (−λ0+λm+λm+1) ∥s −x∥
1
2 (λ0+λm−λm+1) Us,xφ ∥ds∥,
which generalizes [EFK3], Proposition 3.7. From this formula it follows by the argument of
[EFK3], Proposition 3.10 that Hx is a bounded operator which depends norm-continuously
on x for x ̸= tj, ∞.
2.16.5. Properties of Hecke operators. The properties of the operator Hx are analogous to
those in the untwisted case ([EFK3], Section 3).
To avoid confusion, from now on the
operators R, Q, Hx : H(λ) →H(λ′) will be denoted by R+, Q+, Hx+ and the operators
R, Q, Hx : H(λ′) →H(λ) by R−, Q−, Hx−(thus Q†
+ = Q−, R†
+ = R−).
Proposition 2.30. (i) The operators Hx,±, x ∈P1(F), x ̸= tj are compact.
(ii) Hx−Hy+ = Hy−Hx+, x, y ∈P1(F), x, y ̸= tj.
(iii) H†
x+ = Hx−.
Proof. (i) is proved analogously to [EFK3] Proposition 3.13. (ii), (iii) are proved analo-
gously to [EFK3], Proposition 3.11. (ii) can also be checked explicitly from the formula of
Proposition 2.28 as explained in [EFK3], Remark 3.28.
□
Deﬁne the full Hecke operator on H = H0 ⊕H1 = H(λ) ⊕H(λ′) by the formula
Hx,full =

0
Hx−
Hx+
0

.
It follows that the operators Hx,full are self-adjoint and pairwise commuting.

26
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
2.16.6. Asymptotics of Hecke operators and the spectral decomposition. Let us now discuss
the asymptotics of Hecke operators as x →∞. Set c := λm+1 + 1.
Proposition 2.31. (i) If c ̸= 0 then
∥x∥−1
2 Hx± = ΓF(±c)∥x∥± c
2Q± + ΓF(∓c)∥x∥∓c
2R± + o(1), x →∞.
Thus
∥x∥−1
2 Hx,full = ΓF(c)∥x∥
c
2D + ΓF(−c)∥x∥−c
2D† + o(1), x →∞,
where
D :=

0
R−
Q+
0

.
(ii) If c = 0 then one has
∥x∥−1
2 Hx,± = log ∥x∥+ M + o(1), x →∞,
where
(Mϕ)(y1, ..., ym) :=
Z
F
 
ϕ(y1 −t1s, ..., ym −tms) +
ϕ(
y1
1−y1s−1 , ...,
ym
1−yms−1 )
Qm
j=1 ∥1 −yjs−1∥−λj
−ϕ(y1, ..., ym)
! 
ds
s
 .
Note that Proposition 2.31(ii) generalizes [EFK3], Propositions 3.15(i) and 3.21.
Proof. (i) We follow the proof of [EFK3], Proposition 3.21. By (2.12) we have
(2.14)
∥x∥−1
2 (Hx+ϕ)(y1, ..., ym) =
∥x∥−c
2
Z
F
ϕ
t1sx−1 −y1
1 −y1s−1 , ..., tmsx−1 −ym
1 −yms−1
 m
Y
j=1
1 −yjs−1λj ∥s∥c

ds
s
 .
Now, as explained in the proof of [EFK3], Proposition 3.21, in the limit x →∞the curve
Zx,y with parametrization s 7→( t1sx−1−y1
1−y1s−1 , ..., tmsx−1−ym
1−yms−1 ) along which we are integrating in
(2.14) falls apart into two components corresponding to the regimes when s = s(x) has a
ﬁnite limit as x →∞and when sx−1 has a ﬁnite limit when x →∞, respectively. As a
result, similarly to the proof of [EFK3], Proposition 3.21, the integral (2.14) is asymptotic
to the sum of two integrals over these components. Namely, we have
∥x∥−1
2 (Hx+ϕ)(y1, ..., ym) =
∥x∥−c
2
Z
F
ϕ

y1
1 −y1s−1, ...,
ym
1 −yms−1
 m
Y
j=1
1 −yjs−1λj ∥s∥c

ds
s
 +
∥x∥
c
2
Z
F
ϕ(y1 −t1s, ..., ym −tms) ∥s∥c

ds
s
 + o(1), x →∞.
Now, the ﬁrst integral is the operator Γ(−c)R+ (formula (2.10)), while the second integral is
the operator Γ(c)Q+ (formula (2.11)), which implies the claimed asymptotics for Hx+. The
asymptotics for Hx−is obtained by replacing c by −c.
(ii) follows from (i) by taking the limit c →0. Namely, write (i) in the form
∥x∥−1
2 (Hx+ϕ)(y1, ..., ym) =
(∥x∥−c
2 −1)
Z
F
ϕ

y1
1 −y1s−1, ...,
ym
1 −yms−1
 m
Y
j=1
1 −yjs−1λj ∥s∥c

ds
s
 +

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
27
(∥x∥
c
2 −1)
Z
F
ϕ(y1 −t1s, ..., ym −tms) ∥s∥c

ds
s
 +
Z
F
 
ϕ(y1 −t1s, ..., ym −tms) +
ϕ(
y1
1−y1s−1, ...,
ym
1−yms−1)
Qm
j=1 ∥1 −yjs−1∥−λj −ϕ(y1, ..., ym)
!
∥s∥c

ds
s
+o(1), x →∞.
Now, each of the ﬁrst two summands tends to 1
2 log ∥x∥as c →0, while the third summand
tends to M, as desired.19
□
Corollary 2.32. (i) We have ∩xKerHx± = 0, ∩xKerHx,full = 0.
(ii) We have a spectral decomposition
H = ⊕kH±
k ,
where H±
k are ﬁnite dimensional joint eigenspaces of Hx,full with eigenvalues ±βk(x).
Proof. (i) It suﬃces to show that ∩xKerHx,full = 0. But this follows from Proposition 2.31
and the fact that R±, Q± are unitary operators, hence so is D.
(ii) immediately follows from (i) and the compactness of Hx,full.
□
Let ±δk ∈C be the eigenvalue of D on H±
k , so |δk| = 1. We choose the signs so that
argδk ∈(−π
2, π
2]. Then Proposition 2.31 implies the following asymptotics for βk(x).
Corollary 2.33. We have
βk(x) = ∥x∥
1
2 (2Re(δkΓF(c)∥x∥
c
2) + o(1)), x →∞.
So setting δ∗
k = e2πiθk :=
cΓF (c)
|cΓF (c)|δk, −π < θk ≤π, we get
∥x∥−1
2 βk(x) = |cΓF(c)|
c
(e2πiθk∥x∥
c
2 −e−2πiθk∥x∥−c
2) + o(1) =
|cΓF(c)|
c

cos θk · (∥x∥
c
2 −∥x∥−c
2) + i sin θk · (∥x∥
c
2 + ∥x∥−c
2)

+ o(1), x →∞.
Thus, Proposition 2.31(ii) implies that
θk = c
2iµ(k) + o(c), c →0.
where µ(k) ∈R are the eigenvalues of M.
Thus we see that we have orthonormal bases {e0
k} of H0 and {e1
k} of H1 such that
Q+e0
k = δke1
k, Q−e1
k = δ−1
k e0
k, R+e0
k = δ−1
k e1
k, R−e1
k = δke0
k,
and the eigenvectors of Hx,full with eigenvalues ±βk(x) are e±
k = e0
k ± e1
k. Thus the vectors
e0
k satisfy the equation
R−Hx+e0
k = δkβk(x)e0
k.
So the spectral problem for the operator Hx,full on H is equivalent to the spectral problem
for R−Hx+ on H0, and the eigenvalues of R−Hx+ are
bβk(x) := δkβk(x) = ∥x∥
1
2 (δ2
kΓ(c) ∥x∥
c
2 + Γ(−c) ∥x∥−c
2 + o(1)), x →∞.
Note that bβk(x) do not depend on the above choice of signs for δk.
19Here it needs to be checked that the o(1) term remains o(1) as c →0. We leave this argument to the
reader.

28
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
Example 2.34. Let m = 1 (3 points), then H(λ) ∼= C by sending ϕ to ϕ(1). Let
λ0 = −1 + a, λ1 = −1 + b, t1 = y1 = 1.
Hence
Q+ =
1
ΓF(c)
Z
F
∥1 −s∥
a+b−c−1
2
∥s∥c−1 ∥ds∥= ΓF( a+b−c+1
2
)
ΓF( a+b+c+1
2
),
R−=
1
ΓF(c)
Z
F
∥1 −s∥
−a+b−c−1
2
∥s∥
a−b−c−1
2
∥ds∥= ΓF( a−b−c+1
2
)
ΓF( a−b+c+1
2
).
Thus
δk =
s
ΓF( a+b−c+1
2
)ΓF( a−b−c+1
2
)
ΓF( a+b+c+1
2
)ΓF( a−b+c+1
2
).
Also by (2.13),
Hx+ =
Z
F
∥s∥
a−b+c−1
2
∥s −1∥
−a+b+c−1
2
∥s −x∥
a+b−c−1
2
∥ds∥,
so Proposition 2.31(i) takes the form
Z
F
∥s∥
a−b+c−1
2
∥s −1∥
−a+b+c−1
2
∥s −x∥
a+b−c−1
2
∥ds∥=
BF( −a+b+c+1
2
, a−b+c+1
2
)∥x∥
a+b−c−1
2
+ BF( a+b−c+1
2
, −a−b−c+1
2
)∥x∥
a+b+c−1
2
+ o(∥x∥−1
2), x →∞.
This asymptotic formula is also a special case of (2.25), when Reβ = Reγ = 1
2.
Remark 2.35. Analogously to [EFK3], Proposition 3.15(i), a similar asymptotic formula
for Hx to Proposition 2.31 holds when x →tj 0 ≤j ≤m, with an additional factor Sj: if
λj ̸= −1 then
∥x −tj∥−1
2 Hx = ΓF(λj+1) ∥x −tj∥−
λj+1
2
R(j)Sj+ΓF(−λj−1) ∥x −tj∥
λj+1
2
SjR(j)+o(1), x →tj,
where R(j) := R1,...,1,−1,1,...,1 with −1 in the j-th position. The proof and the computation of
the limit λj →−1 are parallel to the case x →∞.
Remark 2.36. This analysis may be extended to the complementary series, i.e., when
some λj, instead of being in −1+iR, are allowed to lie in the interval (−2, 0). For simplicity
assume that λm+1 ∈−1 + iR, so that Mλm+1 is tempered and we can deﬁne a reasonable
multiplicity space MultP GL2(F )(M∗
λm+1, Mλ0 ⊗... ⊗Mλm). If λ ∈(−2, 0), we still have Mλ =
L2(P1(F), ∥K∥−λ
2 ), but now with inner product
(f, g) =
1
ΓF(−λ −1)
Z
P1(F )
f(y)g(z)∥y −z∥−λ−2 ∥dydz∥
λ+2
2
(more precisely, the integral converges for λ ∈(−2, −1) but analytically continues to λ ∈
(−2, 0) as a positive deﬁnite inner product). Thus the inner product in H(λ) (translation
invariant homogeneous functions of degree 1
2(Pm
j=0 λj −λm+1)) also has to be modiﬁed ac-
cordingly and will become more complicated, but the formula for Hecke operators remains
the same.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
29
Remark 2.37. At least for ℓ= 1, one should be able to extend this theory to the case of
admissible representations Vi (not necessarily tempered, or even unitarizable) by working
in the Schwartz space context instead of L2 space (for example, using the approach of [BK2]).
For instance, in this context the extension to complementary series from Remark 2.36 should
be much more straightforward – we don’t need to worry about positive inner products and
can just do analytic continuation with respect to the Casimir eigenvalues 1
2(λj + 1)2 (which
are no longer required to be real).
Remark 2.38. The material of Subsection 2.16 generalizes in a straightforward way when
λj are taken to be arbitrary multiplicative characters of F of the form λj(y) = ∥y∥−1 λ0
j(y),
where λ0
j are unitary characters. The above setting is the special case when λ0
j are imaginary
powers of the norm.
3. Analytic Langlands correspondence over C
In this section we discuss the analytic Langlands correspondence over C, with a focus on
various twists. We begin with recalling the basic setting discussed in [EFK2].
3.1. The general setting of the analytic Langlands correspondence over C. When
one talks of Langlands correspondence for a group G, one usually means not just a formula-
tion of a spectral problem for Hecke operators, but also a parametrization of their spectrum
by data related to the Langlands dual group G∨. Such a description is essentially available for
the arithmetic Langlands correspondence for a curve X over a ﬁnite ﬁeld. In this case the
Langlands conjecture describes the spectrum of Hecke operators in terms of G∨-local systems
on X. On the other hand, for the analytic Langlands correspondence dealing with curves
over a local ﬁeld F, we cannot yet even formulate a conjectural description of the spectrum
for non-archimedean ﬁelds. On the other hand, for archimedean ﬁelds we can use quantum
Hitchin Hamiltonians commuting with Hecke operators to describe the spectrum (see Subsec-
tion 2.12). The most complete conjectural picture exists for F = C([EFK1, EFK2, EFK3]);
it is discussed in this section. The case of curves over F = R is discussed in Section 4.
Consider ﬁrst the unramiﬁed case. Let B∨be the positive Borel subgroup of G∨with
maximal torus T ∨, Z∨the center of G∨, g∨:= LieG∨, and e, h, f ∈g∨the principal sl2-triple
such that e ∈b∨:= LieB∨and h ∈LieT ∨. This triple deﬁnes the principal homomor-
phism φ : SL2 →G∨. Let Q∨⊂Λ be the root lattice of G∨, then Hom(Λ/Q∨, C×) = Z∨.
Let di be the degrees of the basic invariants for G and G∨.
Deﬁnition 3.1. ([BD1, BD2]) A G∨-oper on X is a B∨∩[G∨, G∨]-bundle E on X with a
connection ∇on the associated G∨-bundle which takes the form
∇= d + f + b(z), b ∈b∨[[z]]
in any trivialization of E on a formal neighborhood of any point x of X (where z is a formal
coordinate near x).20
Equivalently, one may say that a G∨-oper on X is a G∨-bundle on X with a reduction to
B∨∩[G∨, G∨] and a connection ∇satisfying the condition of Deﬁnition 3.1. Thus we may
speak of an oper structure on a given G∨-bundle with a connection, which is a reduction of
this bundle to B∨∩[G∨, G∨] satisfying this condition. It is shown in [BD2] that a G∨-bundle
20In fact, this deﬁnition is more restrictive than the one in [BD1, BD2], where E is assumed to be a
B∨-bundle. But the two deﬁnitions coincide when G∨is semisimple.

30
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
with a connection can have at most one oper structure. Thus it makes sense to say that a
given bundle with connection is or is not an oper.
Example 3.2. If T ∨is a torus then a T ∨-oper on X is any connection ∇on the trivial
T ∨-bundle on X. Thus ∇= d + ω where ω ∈H0(X, KX ⊗LieT ∨).
As explained in [BD2], G∨
ad-opers on X are parametrized by a certain aﬃne space OpG∨
ad(X)
of dimension (g −1) dim G – a torsor over the Hitchin base Hitch := ⊕iH0(X, K⊗di
X ). By
Example 3.2, this is also true for a torus, hence for a product of a torus with an adjoint
group, i.e., for any G∨such that [G∨, G∨] is adjoint. In other words, denoting by Z∨
der the
intersection Z∨∩[G∨, G∨] of Z∨with the derived group [G∨, G∨], we see that this description
is always valid for G∨/Z∨
der-opers.
More generally, for arbitrary G∨the variety OpG∨(X) of G∨-opers on X is a torsor over
the aﬃne space OpG∨/Z∨
der(X) with ﬁber H1(X, Z∨
der). Moreover, any choice of a spin struc-
ture K
1
2
X on X gives rise to a splitting of this torsor, i.e., ﬁxes a canonical component
Op0
G∨(X) ∼= OpG∨/Z∨
der(X). Indeed, consider the unique up to isomorphism (by the Riemann-
Roch theorem) non-trivial extension
0 →K
1
2
X →ESL2 →K
−1
2
X
→0
deﬁning an SL2-bundle ESL2 on X, and deﬁne EG∨:= φ(ESL2). Then, as follows from [BD1],
any connection on EG∨is an oper, and one has a canonical isomorphism H0(X, KX⊗adEG∨) ∼=
Hitch identifying the translation actions of H0(X, KX ⊗adEG∨) on connections and of Hitch
on opers. So such opers form a component of OpG∨(X), denoted Op0
G∨(X). In other words,
an oper from this component is just a connection on a certain ﬁxed G∨-bundle EG∨.21
Clearly, every G∨-oper ∇deﬁnes a G∨-local system ρ on X – the monodromy of ∇, and
if we choose a base point p ∈X then this local system can be interpreted as a represen-
tation ρ : π1(X, p) →G∨. Moreover, this representation has no nontrivial automorphisms
(its automorphism group is Z∨, see [BD2], 1.3) and uniquely determines ∇. This realizes
OpG∨(X) as a certain half-dimensional (in fact, Lagrangian in the Atiyah-Bott holomorphic
symplectic structure) complex analytic submanifold of the complex manifold LocSys◦
G∨(X)
of G∨-local systems on X with no nontrivial automorphisms. In terms of this realization,
the group H1(X, Z∨
der) = Hom(π1(X, p), Z∨
der) acts by multiplication.
Given a G∨-local system ρ on X and an algebraic representation ϕ : G∨→GLN(C), we
have a GLN(C)-local system ϕ(ρ) on X. There exists a unique G∨-local system ρ such that
for every ϕ, ϕ(ρ) ∼= ϕ(ρ).
Deﬁnition 3.3. We say that a G∨-local system ρ on X is real if ρ ∼= ρ.
Thus the space LocSys◦
G∨(X)R of real local systems is a half-dimensional real submanifold
of LocSys◦
G∨(X) (in fact, Lagrangian under the real part of the holomorphic symplectic form).
As explained in [EFK2], Remark 1.9, ρ is real iﬀits monodromy group can be conjugated
into an inner real form G∨
R of G∨.
Deﬁnition 3.4. A real G∨-oper is a real local system ρ which comes from a G∨-oper.
21Note that the associated PGL2-bundle to ESL2 is independent on the choice of K
1
2
X, Thus if φ factors
through PGL2 then the component Op0
G∨(X) does not depend on the choice of K
1
2
X.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
31
In other words, a real oper is an intersection point of the above two half-dimensional
submanifolds.
It is expected (and known for G∨= SL2, see [Fa]) that these manifolds
intersect transversally, so the set of real opers is discrete. Moreover, it is conjectured in
[EFK2] that for real opers the inner form G∨
R is, in fact, split, and this is known for G∨= SL2
([GKM]).22
Note that we may also consider the complex conjugate submanifold
OpG∨(X) ⊂LocSys◦
G∨(X).
The points of this submanifold are local systems that are realized by an antiholomorphic
G∨-oper (which we call an anti-oper for short). This is a third Lagrangian submanifold
of LocSys◦
G∨(X) with respect to the real part of the holomorphic symplectic form, which
intersects the other two submanifolds exactly at the same points where they intersect each
other (i.e., at real opers). In other words, a real oper is the same thing as a real anti-oper
and also the same as a local system that’s both an oper and an anti-oper.
Now, the main conjecture of [EFK2] is as follows (we formulate it for semisimple G, as for
abelian G it is not diﬃcult and proved in [F4], see also [EFK2]. Recall that the manifold
Bun◦
G(X) is the union of connected components Bun◦
G,α(X) labeled by the ﬁrst Chern class
c ∈H2(X, π1(G)) = π1(G) of a G-bundle on X, and that π1(G) = Z∨∗= Λ/Q∨.
Conjecture 3.5. (i) The Hilbert space H = L2(Bun◦
G(X)) can be written as an orthogonal
direct sum of 1-dimensional spaces
H =
M
ρ,β
Hρ,β
invariant under Hecke operators, where ρ runs over real G∨-opers in Op0
G∨(X), and β runs
over eigenvalues of Hecke operators corresponding to ρ. The quantum Hitchin Hamiltonians
act on Hρ,β via the character ρ.
(ii) The eigenvalue βλ(x, x) for the Hecke operator Hx,λ in Hρ,β is given up to scaling by
the formula of [EFK2], Conjecture 5.1.
(iii) The set of such eigenvalues corresponding to a given ρ is a torsor over the group
Z∨= Hom(Λ/Q∨, C×) where the action of this group on eigenvalues is by multiplication,
i.e.
(ξ ◦β)λ = ξ(λ)βλ.
(iv) The decomposition H = ⊕c∈Z∨∗L2(Bun◦
G,c(X)) is invariant under quantum Hitchin
Hamiltonians, and on each summand L2(Bun◦
G,c(X)) they have simple spectrum labeled by
real G∨-opers ρ in Op0
G∨(X). The Hecke operators Hx,λ act between these summands, acting
on labels c by c 7→c + λ, which gives rise to the action in (iii).
Note that we have a free action of the ﬁnite group H1(X, Z) on Bun◦
G(X), where Z is the
center of G, and this action commutes with Hecke and quantum Hitchin operators. Hence
this group acts by a character χρ ∈H1(X, Z)∗∼= H1(X, Z∗) on each (1-dimensional) joint
eigenspace of these operators corresponding to a real G∨-local system ρ and some choice of
eigenvalue β. Let us explain how to compute χρ.
Let G∨
sc be the simply connected cover of G∨. Recall that we have an exact sequence
1 →H1(X, π1(G∨)) →H1(X, G∨
sc) →H1(X, G∨) →H2(X, π1(G∨)),
22This is also easy to see for any G∨in the tamely ramiﬁed case, see [EFK2], Remark 1.9.

32
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
and that π1(G∨) = Z∗. Thus every G∨-local system ρ : π1(X) →G∨has a ﬁrst Chern class
cρ ∈H2(X, Z∗). However, as explained above, if ρ is an oper then as a holomorphic bundle
it reduces to the principal SL2, so cρ = 1 (as SL2(C) is simply connected). Moreover, in this
case there is a unique lift of ρ to a G∨
sc-oper ρ′ in the canonical component Op0
G∨
sc(X). Now,
the reality of ρ means that ρ ∼= ρ, where ρ is the complex conjugate of ρ, but then ρ′ is not
necessarily real: we have ρ′ ∼= ηρ′ for a unique η ∈H1(X, Z∗). We expect that χρ = η.23
3.2. Analytic Langlands correspondence twisted by Z-gerbes on X. The setting of
the previous subsection has a twisted generalization where we take G simply connected, but
instead of ordinary principal G-bundles take bundles twisted by Z-gerbes on X deﬁned by
c ∈H2(X, Z) = Z (this is mentioned in [GW], Subsection 9.2). Such twisted bundles are
deﬁned on an open cover {Ui} of X by holomorphic transition functions gij : Ui ∩Uj →G
such that gijgjkgki = ecijk ∈Z on Ui ∩Uj ∩Uk, where ec is a ˇCech 2-cocycle representing c. Let
Bun◦
G(X)c be the variety of regularly stable twisted bundles with class c, and Bun◦
G(X)tw be
the disjoint union of Bun◦
G(X)c over all c ∈H2(X, Z). We have a principal H1(X, Z)-bundle
Bun◦
G(X)tw →Bun◦
Gad(X).
Thus the Hilbert space H = L2(Bun◦
G(X)tw) carries commuting actions of quantum Hitchin
Hamiltonians and Hecke operators.
Conjecture 3.6. Conjecture 3.5 and the formula for χρ holds in this twisted setting with
the group Z∨(trivial in our case) replaced by π1(G∨), the center of G∨
sc.
3.3. Diﬀerential equations for the Hecke operators for G = PGL2. In this subsection
we generalize the results of [EFK3], Subsection 4.2 to the twisted setting of Subsection 2.16.
Namely, we show that for F = R the Hecke operators satisfy a second-order diﬀerential
equation (the oper equation), while for F = C they satisfy a system of two such equations
– holomorphic (the oper equation) and anti-holomorphic (the anti-oper equation, conjugate
to the oper equation), which can be used to describe their spectrum. Let us now derive the
oper equation.
We return to the setting of Subsection 2.16 for F = R or F = C. Consider the Gaudin
operators
Gi :=
X
j̸=i
Ωij
ti −tj
, 0 ≤i ≤m,
where Ω= e ⊗f + f ⊗e + 1
2h ⊗h and
(3.1)
e = ∂y, h = −2y∂y + λ, f = −y2∂y + λy
(this diﬀers from [EFK3], (7.7) by the Chevalley involution). Thus, setting ∂i :=
∂
∂yi, we
have ([EFK1], (7.8)):
Gi =
X
j̸=i
1
ti −tj

−(yi −yj)2∂i∂j + (yi −yj)(λi∂j −λj∂i) + λiλj
2

,
23Note that the isomorphism H1(X, Z)∗∼= H1(X, Z∗) comes from the cup product on H1(X, Z), so it is
deﬁned uniquely up to inversion and changes to inverse when we change the complex structure on X (hence
the orientation) to the opposite one. So replacing this isomorphism by its inverse results just in replacing η
by η−1.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
33
bGi := Gi −
X
j̸=i
λiλj
2(ti −tj) =
X
j̸=i
1
ti −tj
 −(yi −yj)2∂i∂j + (yi −yj)(λi∂j −λj∂i)

.
Note that on translation invariant functions of y0, ..., ym we have
m
X
i=0
Gi =
m
X
i=0
bGi = 0,
m
X
i=0
tiGi = E(E −λ −1) + λ2 −P
i λ2
i
4
,
m
X
i=0
ti bGi = E(E −λ −1),
where E := Pm
i=0 yi∂i is the Euler vector ﬁeld and λ := P
i λi (see e.g. [EFK1], Section 7).
The following proposition is a complete analog of [EFK3], Proposition 4.3.
Proposition 3.7. (Universal oper equations) (i) We have
 
∂2
x −
X
i≥0
λi
x −ti
∂x
!
Hx −Hx
X
i≥0
bGi
x −ti
= 0.
(ii) We have
 
∂2
x −
X
i≥0
λi(λi + 2)
4(x −ti)2
!
Hx −Hx
X
i≥0
Gi
x −ti
= 0.
Here the diﬀerential equations hold in the same sense as in [EFK3], Proposition 4.3.
Proof. (ii) easily follows from (i), so let us prove (i). The proof is parallel to the proof of
[EFK3], Proposition 4.3. We only redo the algebraic part of the proof, as the analytic details
are exactly the same. Let ui = ui(s) := yi −s and ψ, ψi, ψij be the zeroth, ﬁrst and second
derivatives of ψ evaluated at the point z with coordinates zi := ti−x
yi−s = ti−x
ui . Thus
(3.2)
∂iψj = (x −ti)ψij
u2
i
,
X
i≥0
∂iψj = −∂sψj
Also let
(3.3)
dµ(s) :=
m
Y
i=0
∥s −yi∥λi ∥ds∥.
We have
∂x(Hxψ) =
Z
F
X
i≥0
ψi
ui
dµ(s), ∂2
x(Hxψ) =
Z
F
X
i,j≥0
ψij
uiuj
dµ(s).
Also
X
i≥0
Hx bGiψ
x −ti
= −
Z
F
X
i̸=j
( ti−x
ui −tj−x
uj )2ψij + ( ti−x
ui −tj−x
uj )(λjψi −λiψj)
(x −ti)(ti −tj)
dµ(s).
Subtracting, we get
∂2
x(Hxψ) −Hx
X
i≥0
bGiψ
x −ti
=
Z
F

X
i
ψii
u2
i
+
X
i̸=j
( (ti−x)2
u2
i
+ (tj−x)2
u2
j
)ψij + ( ti−x
ui −tj−x
uj )(λjψi −λiψj)
(x −ti)(ti −tj)

dµ(s) =

34
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
Z
F
 X
i,j≥0
(ti −x)ψij
(tj −x)u2
i
+
X
i̸=j
( ti−x
ui −tj−x
uj )(λjψi −λiψj)
(x −ti)(ti −tj)
!
dµ(s).
Now, using integration by parts, (3.2) and (3.3), we have
Z
F
X
i,j≥0
(ti −x)ψij
(tj −x)u2
i
dµ(s) = −
Z
F
X
j≥0
1
x −tj
X
i≥0
∂iψjdµ(s) =
Z
F
X
j≥0
1
x −tj
∂sψjdµ(s) = −
Z
F
X
j≥0
ψj
x −tj
X
i≥0
λi
ui
dµ(s).
Thus
∂2
x(Hxψ) −Hx
X
i≥0
bGiψ
x −ti
=
−
Z
F
 X
j≥0
ψj
x −tj
X
i≥0
λi
ui
+ 1
2
X
i̸=j
( ti−x
ui −tj−x
uj )(λjψi −λiψj)
(ti −x)(tj −x)
!
dµ(s) =
−
Z
F
 X
i≥0
λi
(ti −x)ui
ψi +
X
i̸=j
λj
(tj −x)ui
ψi
!
dµ(s) =
−
Z
F
 X
j≥0
λj
tj −x
X
i≥0
ψi
ui
!
dµ(s) =
X
j≥0
λj
x −tj
∂x(Hxψ).
□
Also, similarly to [EFK3], Proposition 4.11, we have
Proposition 3.8.
[Hx, Gj] = 0.
As shown in [EFK2], if F = C then the Hecke operators also satisfy an anti-holomorphic
second-order diﬀerential equation (the anti-oper equation) which is the complex conjugate
of the oper equation of Proposition 3.7(ii).
Thus, introducing the operator-valued oper
∂2
x −S(x), where
(3.4)
S(x) :=
m
X
i=0
λi(λi + 2)
4(x −ti)2 +
m
X
i=0
Gi
x −ti
,
for F = C we obtain
(3.5)
(∂2
x −S(x))Hx = 0,
(∂
2
x −S(x))Hx = 0
(for F = R we only have the ﬁrst equation).
We also obtain the following equation for the eigenvalues βk(x) of Hx,full, which is a
generalization of Corollary 4.14 of [EFK3].
Corollary 3.9. The function βk(x) satisﬁes the diﬀerential equation
(3.6)
L(µk)βk(x) = 0,
where
L(µk) := ∂2
x −
X
i≥0
λi(λi + 2)
4(x −ti)2 −
X
i≥0
µi,k
x −ti

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
35
is an SL2-oper, with
(3.7)
m
X
i=0
µi,k = 0,
m
X
i=0
tiµi,k = λm+1(λm+1 + 2)
4
−
m
X
i=0
λi(λi + 2)
4
.
Moreover, if F = C, then β also satisﬁes the complex conjugate equation L(µk)βk(x) = 0.
Note that equation (3.6) is Fuchsian at the points tj with characteristic exponents 1
2 ± λj+1
2 ,
and by (3.7) it is also Fuchsian at ∞with characteristic exponents −1
2 ∓λm+1+1
2
. In other
words, basic solutions behave near tj as (x −tj)
1
2 and (x −tj)
1
2 log(x −tj) if λj = −1 and as
(x−tj)
1
2 ±
λj+1
2
else, while at ∞they behave as x
1
2, x
1
2 log x if λm+1 = −1 and x
1
2 ±
λm+1+1
2
else.24
Thus the monodromy operators of (3.6) at tj, 0 ≤j ≤m + 1 are conjugate to

−1
1
0
−1

if
λj = −1 and to

eπiλj
0
0
e−πiλj

else.
Thus for F = C the spectral opers have a property that the system Lβ = 0, Lβ = 0 has
a single-valued solution. So the monodromy of such an oper must preserve a nondegenerate
hermitian form.
Moreover, as the above matrices cannot be conjugated to SU(2), this
form must be of signature (1,1). Thus spectral opers must have monodromy in SU(1, 1) ∼=
SL(2, R), i.e. they belong to the (discrete) set B = B(λ0, ..., λm+1) of real opers of the form
of Corollary 3.9. Furthermore, the joint eigenspaces of Hx,full are 1-dimensional. In other
words, we have
Theorem 3.10. Theorem 4.15 of [EFK3] extends mutatis mutandis to the ramiﬁed setting
with any weights λj ∈−1 + iR.
Moreover, similarly to [EFK3], the set of spectral opers conjecturally coincides with B,
and this is deﬁnitely true at least for 4 and 5 points. The proofs of these facts are analogous
to the proofs in the untwisted case given in [EFK3].
3.4. Analytic Langlands correspondence twisted by an AutG-torsor on X. Analytic
Langlands correspondence can be naturally generalized to the case when the connected
reductive group G is replaced by a ﬂat group scheme G over X with ﬁbers isomorphic to G.
For simplicity let us discuss this theory in the case of complex curves (F = C).
Example 3.11. Suppose G = Gn
m is an n-dimensional torus. Then the possible groups G
are parametrized by homomorphisms φ : π1(X) →GLn(Z) with ﬁnite image Γ. Let e
X be
the cover of X corresponding to the kernel of φ. Then Γ acts on e
X and G trivializes over e
X,
so the corresponding moduli stack BunG(X) is the stack of Γ-equivariant G-bundles on e
X.
Set-theoretically, this is the subgroup of Pic( e
X)n consisting of bundles E with a consistent
family of isomorphisms γ∗E ∼= φ(γ)E, γ ∈Γ. In this case it is easy to see (see [EFK2]) that
the spectrum of Hecke operators is parametrized by Γ-equivariant real G∨= Gn
m-opers on e
X,
i.e., lifts ρ : π1(X) →Γ⋉Gn
m(R) of φ such that the local system ρ : Kerφ = π1( e
X) →Gn
m(R)
is an oper (hence also an anti-oper), similarly to Subsection 3.1.
24We remind that since the oper L(µ) is a map from K−1
2 to K
3
2 , solutions of the equation L(µ)β = 0
are sections of K−1
2 , but we view them as functions by multiplying by (dx)−1
2 .

36
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
Example 3.12. Suppose that G is adjoint. In this case, the possible groups G are classiﬁed
by H1(X, Aut∆G ⋉OX,G), where OX,G is the sheaf of regular functions on X with values
in G. However, two elements θ1, θ2 ∈H1(X, Aut∆G ⋉OX,G) which map to the same ele-
ment in H1(X, Aut∆G) = Hom(π1(X), Aut∆G) deﬁne Morita equivalent groups G, so the
corresponding moduli spaces are the same ([Br], Subsection 1.6, Proposition 1.2). In other
words, similarly to Subsection 2.4, the theory depends only on the inner class of G (see [Br],
Remark 1.2). This is, in fact, a general feature which extends beyond F = C.
Thus we may restrict ourselves to groups G obtained from maps φ : π1(X) →Aut∆G.
So, similarly to Example 3.11 we may deﬁne Γ := Imφ and realize the corresponding stack
BunG(X) as the stack of Γ-equivariant principal G-bundles on the Γ-cover e
X of X. As
in Example 3.11, we expect that the spectrum of Hecke operators is parametrized by Γ-
equivariant real G∨-opers on e
X, i.e. lifts ρ : π1(X) →Γ ⋉G∨(R) of φ whose restriction to
Kerφ is an oper (hence also an anti-oper).
Remark 3.13. More generally, suppose a ﬁnite group Γ acts simultaneously on G by root
datum automorphisms and on a curve e
X. Then we can consider harmonic analysis on the
space Bun◦
G( e
X)Γ of Γ-equivariant regularly stable G-bundles on e
X. If Γ acts on e
X freely,
this reduces to the above setting with X = eX/Γ, but the theory extends naturally to the
case when the action is not necessarily free. We note that such moduli spaces of twisted
bundles have been recently studied in connection with twisted conformal blocks and twisted
Verlinde formula, see [DM, HK]. In the framework of the usual Langlands correspondence
over function ﬁelds, such twisted setting is considered in [L], Section 12.
4. Analytic Langlands correspondence over R
4.1. The general setup. In this section we will focus on the case F = R and propose a
conjectural description of the spectrum of Hecke operators in terms of G∨-opers satisfying
suitable reality conditions, generalizing the results of [EFK3], Subsection 4.7. Much of our
analysis is based on [GW], Section 6.
We ﬁrst specialize the setting of Subsection 2.2 to the case F = R, so Fsep = C and
ΓF = Z/2. We will only consider either real or complex points of algebraic groups G, and
will write G for G(C) when no confusion is possible.
Let G a split connected reductive
group deﬁned over Q and G∨its Langlands dual group. Let Z, Z∨be the centers of G, G∨.
These groups are equipped with a natural operation of complex conjugation, g 7→g. A
real structure on G is a holomorphic automorphism θ : G →G satisfying the 1-cocycle
condition θ ◦θ∗= Id, where θ∗(g) := θ(g). Two such 1-cocycles diﬀer by a coboundary iﬀ
the corresponding real structures are isomorphic. In fact, one can (and usually does) choose
a representative θ of its cohomology class so that θ commutes with complex conjugation,
i.e., θ∗= θ and θ2 = Id, which gives rise to the Satake diagram of the corresponding
real form.25
Such θ gives rise to an antiholomorphic involution σ(g) := θ(g).
The
corresponding group of real points Gσ = Gσ(R) (which may be disconnected) is the
subgroup of g ∈G stable under σ, i.e., satisfying θ(g) = g. The inner class of σ gives rise to
a root datum involution s = sσ for G which is also one for G∨.
25Another possibility is to choose θ to commute with the complex conjugation of the compact form of G,
which gives rise to the Vogan diagram of the real form.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
37
Recall [ABV] that to G, s we may attach the Langlands L-group LG = LGs, the semidi-
rect product of Z/2 = Gal(C/R) by G∨, with the action of Z/2 deﬁned by ω ◦s, where ω is
the Chevalley involution deﬁning the compact form of G.
Let X = X(C) be a compact complex Riemann surface of genus g ≥2. Let τ : X →X be
an antiholomorphic involution. We specialize the setting of Subsections 2.4,2.5,2.8 to the case
F = R. Given a holomorphic principal G-bundle P on X, we can deﬁne the antiholomorphic
bundle τ(P), hence a holomorphic bundle (σ, τ)(P). A pseudo-real structure on P is an
isomorphism A : (σ, τ)(P) →P. Such a structure deﬁnes a class αP in
H2(Z/2, Zs(C)) = Ker(1 −s|Z)/Im(1 + s|Z)
which depends only on P and not on A. A pseudo-real structure A on P is a real structure
if
(4.1)
A ◦(σ, τ)(A) = 1
(in particular, this means that the cocycle aA and hence the class αP equals 1). For example,
if G is adjoint then the isomorphism A is unique if exists and (4.1) is automatic if Aut(P) = 1,
which happens for regularly stable bundles. Note that if g ∈G and gσ(g) = 1 then
Ag−1 : (Ad(g)σ, τ)(P) →P
satisﬁes (4.1) with σ replaced by σ′ = Ad(g)σ. Thus the space of such regularly stable
bundles depends only on the inner class s of σ, in agreement with Subsection 2.4 (see also
[BGH], Proposition 3.8). Following Subsection 2.4, we denote this space by Bun◦
G,s(X, τ).
The space Bun◦
G,s(X, τ) is a real analytic manifold, which is a disjoint union of open
submanifolds Bun◦
G,s,α(X, τ), α ∈H2(Z/2, Zs(C)). Moreover, for every character χ of
H1(Z/2, Zs(C)) = Ker(1 + s|Z)/Im(1 −s|Z)
we have a Hermitian line bundle Lχ on each Bun◦
G,s,α(X, τ) deﬁned in Subsection 2.8.
Let
H(s, τ, α, χ) := L2(Bun◦
G,s,α(X, τ), Lχ)
be the Hilbert space of L2 half-densities on Bun◦
G,s,α(X, τ) valued in Lχ. Let
H(s, τ, α) = ⊕χH(s, τ, α, χ), H(s, τ) = ⊕αH(s, τ, α).
We have (conjecturally) a spectral decomposition of H(s, τ) under the action Hecke operators
compatible with the (α, χ)-grading.
Remark 4.1. To be more precise, the deﬁnition of the Langlands L-group in [ABV] uses
s instead of ω ◦s. This is in fact a major diﬀerence between the classical Langlands cor-
respondence for real groups and the analytic Langlands correspondence for curves over R.
An explanation of this phenomenon is provided by [EFK1], Proposition 3.6, which says that
taking the formal adjoint of quantum Hitchin Hamiltonians corresponds to applying the
Chevalley involution on opers. See also Remark 4.3 below.
4.2. The case when τ has no ﬁxed points. We ﬁrst consider the easier case when τ has
no ﬁxed points. Let ρ be a local system on the non-orientable surface X/τ with structure
group LG. If we choose a base point p ∈X/τ then such a local system corresponds to a
homomorphism π1(X/τ, p) →LG which is unique up to conjugation. We will say that ρ
is an L-system if it attaches to every orientation-reversing path in X/τ a conjugacy class
in LG that maps to the nontrivial element in Z/2. The following conjecture is equivalent

38
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
to the conjecture made in [GW], Section 6.2 on the basis of insights from 4-dimensional
supersymmetric gauge theory (as well as the duality proposal from [BS]).
Conjecture 4.2. (i) There is an orthogonal decomposition
H(s, τ, 1) =
M
ρ
H(s, τ, 1)ρ,
where ρ runs over L-systems on X/τ with values in LG = LGs whose pullback to X have the
structure of a G∨-oper.
(ii) For λ ∈Λ+ the Hecke operator Hλx+s(λ)x acts on H(s, τ, 1)ρ by the eigenvalue βρ,λ(x, x)
deﬁned by the formula in [EFK2], Conjecture 5.1. In particular, if G = PGLn, λ = ω1
and Lρ = ∂n + a2∂n−2 + ... + an is the SLn-oper (i.e., holomorphic diﬀerential operator
K
1−n
2
X
→K
1+n
2
X
) corresponding to ρ then βλ,ρ(x, x) is the (unique up to scaling) single-valued
section of |KX|1−n satisfying the system of oper equations Lρβ = 0, L∗ρβ = 0.
Remark 4.3. More precisely, as was explained to us by E. Witten, what comes from or-
dinary gauge theory is this picture for the compact inner class s. To obtain other inner
classes, one needs to consider twisted gauge theory where the twisting is by a root da-
tum automorphism of G. Namely, gauge ﬁelds in this theory are invariant under complex
conjugation τ composed with this automorphism.
This may be seen as the physical ex-
planation of the appearance of the Chevalley involution in the deﬁnition of LG in analytic
Langlands correspondence, which does not happen in the usual Langlands correspondence
for real groups.
Example 4.4. Let s = ω (the compact inner class). Then LG = Z/2 × G∨, so an L-system
is the same thing as a G∨-local system on X/τ. So in this case according to Conjecture
4.2, the spectral local systems are ρ which are isomorphic to ρτ and such that ρ is an oper
(hence also an anti-oper), so ρ is a real oper “with real coeﬃcients”. But among these we
should only choose those local systems that descend to X/τ and the eigenspaces are labeled
by these extensions.
More precisely, recall that opers for adjoint groups have no nontrivial automorphisms
([BD2], 1.3). So for any connected reductive G we get an obstruction for such ρ to descend
to X/τ which lies in Z∨/(Z∨)2 = H2(Z/2, Z∨). Moreover, if this obstruction vanishes then
the freedom for choosing the extension is in a torsor over H1(Z/2, Z∨) = Z∨
2 , the 2-torsion
subgroup in Z∨.
Indeed, π1(X/τ) is generated by π1(X) and an element t such that tbt−1 = γ(b) for
some automorphism γ of π1(X), and t2 = c ∈π1(X), so that γ2(b) = cbc−1. So given a
representation ρ : π1(X) →G∨, an L-system would be given by an assignment ρ(t) = T ∈G∨
such that (1) T 2 = ρ(c) and (2) Tρ(a)T −1 = ρ(γ(a)). If ρ ∼= ρ ◦γ then T satisfying (2) is
unique up to multiplying by u ∈Z∨, and T 2 = ρ(c)z, z ∈Z∨. Moreover, if T is replaced by
Tu then z is replaced by zu2, hence the obstruction to satisfying (1) lies in Z∨/(Z∨)2. And
if this obstruction vanishes, then the choices of T form a torsor over Z∨
2 acting by T 7→Tz.
Remark 4.5. As pointed out in [GW], Section 6, this reality condition on the G∨-oper on X
is equivalent to the condition that ρ extends as a topological local system to the 3-manifold
Uτ := (X × [−1, 1])/(τ, −Id)
whose boundary is X, introduced in [GW], and this extension is a part of the data. This
follows from the fact that the inclusion X/τ ֒→Uτ is a homotopy equivalence.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
39
Remark 4.6. We have the inﬂation-restriction exact sequence
H1(π1(X), Zs(C))Z/2 →H2(Z/2, Zs(C)) →H2(π1(X/τ), Zs(C)).
Let α be the image in H2(π1(X/τ), Zs(C)) of α ∈H2(Z/2, Zs(C)). So α = 1 iﬀα is the
image of η ∈H1(π1(X), Zs(C))Z/2 = H1(X, Zs(C))Z/2, which corresponds to a pseudo-real
Zs-bundle on X. Multiplication by η acts on the space of pseudo-real bundles commuting
with Hecke operators, changing αP to αP +α. This implies that if α = 1 then Conjecture 4.2
generalizes in a straightforward way to give the spectral decomposition of H(s, τ, α): namely,
the spectrum of the Hecke operators is the same as in H(s, τ, 1). More generally, this shows
that the spectrum of Hecke operators on H(s, τ, α) for general α depends only on α.
It remains to describe the spectrum in the case when α ̸= 1. As was explained to us by
D. Gaiotto, in this case Conjecture 4.2 can be generalized by considering gauge theory on
the 3-manifold Uτ (homotopy equivalent to X/τ) twisted by the Zs-gerbe corresponding to
α. Mathematically this corresponds to the setting of Subsection 3.2 extended to the case
F = R. We omit the details.
Example 4.7. Let G = K × K for some complex group K, and s be the permutation
of components (the only real form in this inner class is K regarded as a real group). In
this case Bun◦
G,s(X, τ) = Bun◦
G(X), the usual moduli space for the complex ﬁeld.
Also
LGs = LGω◦s = Z/2 ⋉(K∨× K∨), where Z/2 acts by permutation. So an L-system is a
K∨×K∨local system on X of the form (ρ, ρτ). Thus the spectrum is parametrized by ρ such
that both ρ and ρτ are opers, i.e., ρ is both an oper and an anti-oper, i.e. a real oper, which
agrees with the main conjecture from [EFK2]. (Note that in this case Hi(Z/2, Z∨) = 1 so
there is no obstructions or freedom for extensions).
Example 4.8. 26 Let us verify Conjecture 4.2 for G = GL1. In this case the possible s are
1 and −1, each being its entire inner class. So consider two cases:
1. Compact case: s = −1. Then the spectrum is parametrized by characters of π1(X/τ),
i.e., elements of H1(X/τ, C×) = (C×)g × Z/2, which come from GL1-opers.
2. Split case: s = 1. Then the spectrum is parametrized by H1(X/τ, C×
τ ), where C×
τ is the
local system where τ acts by inversion. We have H1(X/τ, C×
τ ) = (C×)g, and the spectrum
is parametrized by such local systems that come from GL1-opers.
In both cases the resulting “spectral” opers form a lattice Zg. They are of the form d + φ
where (roughly speaking) φ in the ﬁrst case has integral periods on τ-antiinvariant cycles
and in the second case integral periods on τ-invariant cycles.
Example 4.9. Consider the simplest instance of the previous example, with genus 1 curve
X = C/(Z⊕Zi) and coordinate z = x+ iy, with τ(z) = z + 1
2. Then X/τ is the Klein bottle
with π1(X/τ) generated by t and b with tbt−1 = b−1.
1. In the compact case s = −1 we need to consider characters of this group, which send
b to ±1 and t to any nonzero number. So the corresponding opers are L = d + φ where
φ has half-integral period in the imaginary direction, i.e. φ = πn, n ∈Z. Thus the Hecke
eigenvalue is expected to be proportional to e2πiny0 = eπn(z0−z0).
And indeed, this is what we see if we compute the eigenvalues of Hecke operators. Namely,
the moduli of bundles of degree 0 admitting a real structure consist of two circles x = 0 and
x = 1
2, call them S0 and S1, with coordinate y ∈[0, 1), swapped by τ. However, the space
26This is based on the letter [W] in which E. Witten kindly explained to us the predictions of [GW] in
the abelian case.

40
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
of real bundles of degree 0 is the union of their double covers eS0 and eS1. The reason is
that a real bundle is a bundle admitting a real structure with a choice of an isomorphism
A : (s, τ)(E) →E such that A ◦(s, τ)(A) = 1, which is deﬁned up to sign, and there is
no canonical choice of this sign (one can check that it changes as we go around the circle).
So the eigenbasis of Hecke operators is ψ+
n = (eπiny, eπiny) and ψ−
n = (eπiny, −eπiny), n ∈Z,
with eigenvalues e2πiny0 and −e2πiny0. This also shows that we have a 2-dimensional space
corresponding to each oper, which agrees with the fact that we have two extensions for each
oper to a local system on X/τ (as Z∨
2 = Z/2).
2. In the split case s = 1 we need to consider homomorphisms π1(X/τ) →Z/2 ⋉C× that
send t to {−1, 1}, so b goes to any nonzero number, while t2 maps to 1. So the corresponding
opers are L = d + φ where φ has integral period in the real direction, i.e. φ = 2πin, n ∈Z.
So the Hecke eigenvalue is expected to be proportional to e4πinx0 = e2πin(z0+z0).
And indeed, this is what we see. Namely, in this case bundles admitting a real structure
form the circle S deﬁned by the equation y = 0, with coordinate x.
The circle y =
1
2
consists of pseudo-real bundles, i.e., those for which A ◦(s, τ)(A) < 0 for any isomorphism
A : (s, τ)E →E, so it does not contribute. Moreover, in this case the choice of A such that
A ◦(s, τ)(A) = 1 is unique up to isomorphism if exists. So the set of real bundles is S (i.e.,
we don’t get double covers) and the basis of eigenfunctions is ψn = e2πinx, n ∈Z, with Hecke
eigenvalue e4πinx0. Also extension of opers is unique and the space corresponding to each
oper is 1-dimensional.
Remark 4.10. We can derive that every eigenvalue β(x, x) of the Hecke operator Hλx+s(λ)x
is indeed of the form βρ,λ(x, x) for some oper ρ satisfying the reality condition of Conjecture
4.2 (for semisimple G) from Conjecture 5.5 of [EFK2] (which is proved in Theorem 1.18 of
loc. cit. for G = PGLn and λ = ω1). Namely, this statement implies that each eigenvalue of
the Hecke operators is a unique (up to a scalar) solution of the system of linear diﬀerential
equations Lβ = 0, L
∗β = 0, where L runs over the holomorphic diﬀerential operators from
the annihilating ideal Iλ,ρ introduced in Section 5 of [EFK2]. Therefore, we obtain that this
system has a single-valued solution on X invariant under τ. The topological condition on the
oper ρ given in Conjecture 4.2 should follow from this similarly to the argument of [EFK1],
Corollary 1.19.
4.3. The case when τ has ﬁxed points: genus 0 with m+2 real ramiﬁcation points.
4.3.1. The untwisted case. We will now consider the case when τ has ﬁxed points, which is
more complicated. We restrict ourselves to G = PGL2. We start with the genus zero case
with ramiﬁcation points considered in [EFK3].
Let t0 < t1 < ... < tm, tm+1 = ∞∈RP1 be the ramiﬁcation points.
Let a, b ∈R,
x = a + ib ∈C, and let Hx,x be the Hecke operator from [EFK3], Example 3.30, obtained
by averaging over Hecke modiﬁcations at (x, x) using the lines (s, s). The following lemma
is straightforward.
Lemma 4.11. The eigenvalues βk(x, x) of Hx,x satisfy the equality
βk(x, x)|x=a = βk(a)2
for a ∈R, where βk are the eigenvalues of Ha.
Let us now study the function βk(x, x) for x /∈R. To do so, note that β = βk satisﬁes
the oper equations
Lβ = 0, Lβ = 0,

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
41
where L = L(µk) (using the notation of [EFK3], Subsection 4.4). Recall also that the points
tj divide RP1 into intervals Ij = (tj, tj+1), and that in [EFK3], Subsection 4.7 we deﬁned the
functions fj, gj on Ij. Recall that on Ij we have β(x) = fj(x). Thus by Lemma 4.11 along
the interval Ij we have
β(x, x) = |fj(x)|2 + γjIm(fj(x)gj(x)), γj ∈R,
for x on and above Ij.
Let the function g∗
j : Ij →R be deﬁned by
gj = bjfj −ajg∗
j,
where aj, bj ∈R are as in [EFK3], Subsection 4.7. Then
β(x, x) = |fj(x)|2 −ajγjIm(fj(x)g∗
j(x)).
For an analytic function h on Ij let ha be its analytic continuation from Ij to Ij−1 along a
path passing above tj. Recall from [EFK3], Subsection 4.7, that
(4.2)
fj−1 = if a
j + ga
j, g∗
j−1 = iga
j.
This yields
β = |if a
j + ga
j|2 −aj−1γj−1Im((f a
j + iga
j)ga
j) =
|f a
j |2 + (2 −aj−1γj−1)Im(f a
j ga
j) + |ga
j|2 −aj−1γj−1|ga
j|2.
on Ij−1. The last two terms must cancel, so aj−1γj−1 = 1. Thus we get
β = |f a
j |2 + Im(f a
j ga
j).
on Ij−1. But we also have
β = |f a
j |2 + γjIm(f a
j ga
j).
Thus for all j we have γj = 1, hence aj = 1 (i.e. the local system is balanced, in agreement
with [EFK3], Subsection 4.7). Thus we obtain
Proposition 4.12. We have
β(x, x) = |fj(x)|2 + Im(fj(x)gj(x))
on and above Ij.
In particular, for 3 points this gives an explicit formula for the function β in terms of
classical elliptic integrals (see [EFK3], Example 4.5).
Corollary 4.13. The one-sided normal derivative of β(x, x) at the real line (with x ap-
proaching from above) equals π. Thus
β(a + ib, a −ib) = β(a)2 + π|b| + o(|b|), b →0.
In particular, β(x, x) is continuous, but only one-sided diﬀerentiable on the real locus (ex-
cluding ramiﬁcation points).
Proof. It is easy to check that the normal derivative equals the Wronskian W(fj, gj), which
equals π, as explained in [EFK3] (Proof of Proposition 4.25).
□
Remark 4.14. Note that the statement of Corollary 4.13 makes sense on any real curve
near its real point (indeed fj, gj are −1/2-forms, so their Wronskian is a function, and it
makes sense to say that it equals π). Moreover, it holds for any real curve since it is a local
statement and it holds in genus zero by Corollary 4.13. It can also be checked by direct
computation of the normal derivative.

42
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
4.3.2. The twisted case. Consider now the twisted case with arbitrary twisting parameters
λj = −1 + cj, cj ∈iR.
In this case the story is similar to the previous subsection and
[EFK3], Subsection 4.7. Namely, ﬁx k and consider the function βk(x). On the interval Ij,
0 ≤j ≤m, we have the following solutions of the oper equation L(µk)β = 0: ﬁrst of all,
fj(x) = βk(x)|Ij ∼δkjΓR(cj)(x −tj)
1−cj
2
+ δ−1
kj ΓR(−cj)(x −tj)
1+cj
2 , x →tj+,
and also
bgj(x) ∼
πδ−1
kj
cjΓR(cj)(x −tj)
1+cj
2 , x →tj + .
The function bgj is not real-valued on the real axis, however, so let us look for a real-valued
solution of the form
gj = bgj + iξjfj, ξj ∈R.
A short calculation using that
ΓR(c) = Γ(c) cos πc
2
yields
ξj = Λj −Λ−1
j
Λj + Λ−1
j
,
Λj := e
πicj
2 ,
and the Wronskian W(fj, gj) = W(fj, bgj) equals π.
Similarly, let bg∗
j−1(x) be the solution of the oper equation on Ij−1 of the form
bg∗
j−1(x) =
πδ−1
kj
cjΓR(cj)(tj −x)
1+cj
2 , x →tj −.
and g∗
j−1 := bg∗
j−1 + iξj−1fj−1 be the corresponding real solution. Then
gj = bjfj −ajg∗
j, aj, bj ∈R, aj ̸= 0.
Also instead of (4.2) we get
(4.3)
fj−1
g∗
j−1

= Jj
f a
j
ga
j

,
where
Jj := Λj + Λ−1
j
2
 
i
−
(Λj−Λ−1
j
)2
(Λj+Λ−1
j
)2
1
i
!
It follows that the monodromy of our oper in appropriate bases looks as follows:
(4.4)
M(tj+1−→tj+) = Bj :=

1
bj
0
−aj

, M±(tj+ →tj−) = J±1
j ,
where M± denotes the monodromy above and below the real axis, respectively.
Also
W(fj−1, g∗
j−1) = −π, hence aj = 1.
When j = m + 1, the formulas are the same, except that x −tj is replaced by −1/x and
J±1
j
is replaced by −J±1
j .
We thus obtain a deformation of the theory of balanced local systems and opers described
in [EFK3], Subsection 4.7.
Namely, similarly to [EFK3], given a suﬃciently generic 2-
dimensional local system ∇on X with ramiﬁcations at tj and regular local monodromies

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
43
with eigenvalues −Λ±2
j , it can be written (generically in two diﬀerent ways) in the form (4.4),
where aj, bj ∈C and Bj must satisfy the equations
(4.5)
m+1
Y
j=0
JjBj = −1,
m+1
Y
j=0
J−1
j Bj = −1,
which are deformations of equations (4.7) of [EFK3] (the total monodromy around the circle
above and below the real axis is trivial).
Deﬁne a Λ-balancing of ∇to be an isomorphism (considered up to scaling) of ∇with a
local system (4.4) such that aj = 1 for all j. In this case, as in [EFK3], the two equations in
(4.5) are, in fact, equivalent, since SJ−1
j BjS−1 = JjBj, where S :=

1
2i
0
1

. We call such
a local system ∇Λ-balanced if it is equipped with a balancing. Generically a local system
admits at most one balancing, as in [EFK3].
We obtain the following analog of [EFK3], Proposition 4.25 and Theorem 4.29. Denote
by BΛ the set of Λ-balanced opers.
Theorem 4.15. The spectral opers for Hecke operators Hx,full are Λ-balanced with balancing
deﬁned by the eigenvalue βk(x), and bi ∈R, as in [EFK3], Proposition 4.7. Thus the spectrum
ΣΛ of the Hecke operators is a subset of BΛ.
Moreover, as in [EFK3], we expect that these sets are, in fact, equal, and can show this
for 4 and 5 points.
4.4. The case when τ has ﬁxed points: real and quaternionic ovals. Now suppose
X is an arbitrary real curve and C is a connected component (oval) of X(R). Given a real
PGL2-bundle P on X (with respect to the split form of the group), recall that its ﬁber Px is
a PGL2(C)-torsor. So for a point x ∈C, the real structure on P deﬁnes a map A : Px →Px
such that Ag = gA for g ∈PGL2(C), and A2 = 1. Pick p ∈Px, then A(p) = bp for a unique
b ∈PGL2(C), so A(bp) = bA(p) = bbp, thus bb = 1. Replacing p with q := gp, we get
A(q) = A(gp) = gA(p) = gbp = gbg−1q.
Thus b is well deﬁned up to b 7→gbg−1. It is easy to show that such b fall into two orbits
of this action – that of b = 1 (which we call real) and that of b =

0
1
−1
0

(which we call
quaternionic). Namely, if b∗is a lift of b to SL2(C) then b∗b∗= 1 or −1, and this is what
determines the type of b (real for 1, quaternionic for −1). In the language of Subsections
2.6, 2.7, P is real at x if the associated real form Gσ of G is split and quaternionic if Gσ is
compact.
It is clear that the type of P at x is independent on x as it varies along C. Thus given
P, on every oval Ci of X(R), i = 1, ..., r, P is either real or quaternionic. So the manifold
Bun◦
G,s(X, τ) splits into 2r disconnected parts according to the type of P at each Ci (some
of which can be empty). In fact, how many of them (and which ones) are non-empty is
speciﬁed on p.18 of [BGH] and references therein.
Remark 4.16. 1. The analog of this for general groups is as follows (see Subsections 2.6,2.7).
By Subsection 2.6, every real G-bundle P on X and every x ∈X(R) deﬁnes a real form of
G in the inner class C(s) which is continuous, hence locally constant, with respect to x (see
also [GW], Section 6). So each component Ci of X(R) carries a real form Gσi of G in C(s)

44
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
– the type of P at Ci. For example, as explained above, if G = SL2 then Ci is real if the
form of G attached to Ci is SL2(R) and quaternionic if it is SU2.
2. On components containing tame ramiﬁcation points, in the untwisted setting this form
has to be quasi-split, as we need a real Borel subalgebra to deﬁne parabolic structures. So
in particular for G = PGL2 all contours containing ramiﬁcation points must be real. More
generally, if we consider parabolic structures for an arbitrary parabolic subgroup P of G, the
corresponding ramiﬁcation points can occur only on components for which the corresponding
real group contains a form of P.
3. More generally, following Subsections 2.14,2.15, at ramiﬁcation points p one can place
unitary representations πi of the complex group G if τ(p) ̸= p and of the real form Gi if
p ∈Ci (the twisted setting). In this case we no longer have the restriction that Gi should be
quasi-split if p ∈Ci (e.g. see Subsection 5.6). The untwisted setting of (2) then corresponds
to taking πi to be the spherical principal series representations with central character of
−ρ, consisting of L2-half-densities on the ﬂag manifold, which requires the groups Gi to be
quasi-split.
4.5. Real ovals, separating real locus. Now consider the case of PGL2-bundles on an
arbitrary real curve X without ramiﬁcation points, and let us characterize the part of the
spectrum coming from bundles for which all ovals are real. Let the set X(R) of ﬁxed points
of τ be the union of ovals C1, ..., Cn ⊂X. Assume ﬁrst that these ovals cut X into two
pieces X+, X−swapped by τ. Then the behavior of the Hecke eigenvalue β(x, x) gives us
conditions which allow us to pinpoint opers L (with real coeﬃcients) that can occur in the
spectrum of Hecke operators.
Namely, ﬁrst of all, the eigenvalue β(x), x ∈X(R) of the Hecke operator Hx is a solution of
the oper equation Lβ = 0 periodic along Cj. So (assuming this eigenvalue is not identically
zero), the local system ρL must satisfy
Condition 1. The monodromies of ρL around Cj are unipotent.
Indeed, this is necessary for the existence of the periodic solution β(x), since the mon-
odromy lies in SL2.
Also, since the eigenvalue β(x, x) of Hx,x is single-valued on X+ and satisﬁes the oper
equations Lβ = Lβ = 0, we see that ρL must also satisfy
Condition 2. The monodromy representation ρL : π1(X+) →SL2(C) lands in SL2(R) ∼=
SU(1, 1), up to conjugation.
To write this condition more explicitly, ﬁx a base point x0 ∈X+ and paths pj from x0 to
cj ∈Cj. This deﬁnes elements δj := p−1
j Cjpj ∈π1(X, x0), where we agree that Cj begins
and ends at cj and is oriented so that when we travel around it, X+ remains on the left. Let
g+ be the genus of X+ and Ak, Bk, 1 ≤k ≤g+ be the A-cycles and B-cycles of X+. Then
δj, Ak, Bk generate π1(X+, x0) with deﬁning relation
g+
Y
k=1
[Ak, Bk]
n
Y
j=1
δj = 1
(for a suitable choice of the paths pj). Then Condition 2 is equivalent to the condition that
there exists a basis in which the matrices ρL(δj), ρL(Ak), ρL(Bk) are real for all j, k.
Deﬁnition 4.17. We will say that a local system ρ on X+ (not necessarily an oper) satisfying
Conditions 1, 2 is balanced.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
45
Let us now reformulate Condition 2 on the local system ρL attached to the oper L in a
more analytic language, assuming that Condition 1 holds for ρL. By Condition 1, for each j
we have a nonzero real periodic solution of the equation Lf = 0 on Cj, call it fj(x). We also
have the other real solution gj(x) which changes by a multiple of fj when we go around Cj
such that the Wronskian W(fj, gj) = π.27 We will use the notation fj, gj also for the analytic
continuations of fi, gj to a neighborhood of Ij. Motivated by Proposition 4.12, introduce
Condition 2a. There is a single-valued solution β of the system
Lβ = 0, Lβ = 0
on X \ ∪jCj such that near each Cj, we have
β(x, x) = εj1|fj(x)|2 ± εj2Im(fj(x)gj(x))
for a suitable choice of fj, gj with W(fj, gj) = π (unique up to sign) and εj1, εj2 = ±1, where
the sign in front of the second summand is + if x is above Cj and −if x is below Cj.28
Proposition 4.18. If Condition 1 holds and ρL(Cj) ̸= 1 for all j then Condition 2a is
equivalent to Condition 2.
Proof. Since β is a single-valued solution of the oper equations Lβ = 0, Lβ = 0, Condition
2a implies Condition 2. To prove the converse, note that Condition 1 implies that there
exist bases {fj, gj} of the ﬁbers of the local system ρL at the points cj in which ρL(Cj) =

1
λj
0
1

for λj ∈R, and Condition 2 implies that on these ﬁbers there are nondegenerate
Hermitian forms invariant under ρL(Cj) and compatible with the operators ρL(pkp−1
j ), and
det ρL(pkp−1
j ) = 1.
Now, nondegenerate Hermitian forms in two variables X, Y invariant under the matrix

1
λ
0
1

for nonzero λ ∈R are of the form p|X|2 + qIm(XY ), where p, q ∈R, q ̸= 0. This
implies that the Hermitian form at cj in the basis fj, gj has the form pj|X|2 + qjIm(XY ),
where pj, qj ∈R, qj ̸= 0. We can now renormalize fj, gj by reciprocal positive constants to
make sure that pj = ±1.
It remains to show that all qj are the same up to sign, then we can renormalize β to make
sure that qj = ±1, and construct the solution β satisfying Condition 2a from the invariant
Hermitian form on the ﬁbers of ρL. But this follows from the equality det ρL(pkp−1
j ) = 1.
□
Remark 4.19. 1. The continuation of gj around Cj gives gj + λjfj, and the real numbers
λj attached to the components Cj do not depend on any choices and are invariants of a
balanced oper.
2. If the representation ρL of π1(X+) is irreducible then the solution β satisfying Condi-
tions 1 and 2a is unique up to sign if exists.
The above discussion implies
Proposition 4.20. Every oper appearing in the spectrum of Hecke operators is balanced.
27Note that if ρ(Cj) ̸= 1 then fj is uniquely deﬁned up to scaling, and once it is chosen, gj is uniquely
deﬁned up to adding a real multiple of fj.
28Note that the function Im(fj(x)gj(x)) does not depend on the choice of gj, is single-valued in the
neighborhood of Cj, and vanishes on Cj. Hence β(x, x) is continuous but only one-sided diﬀerentiable on
Cj.

46
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
There is, however, another condition satisﬁed by spectral opers. Namely, let us say that a
balanced oper L is positive if there is a solution β satisfying Condition 2a with εj1 = εj2 = 1
for all j.
Proposition 4.21. Every oper appearing in the spectrum of Hecke operators is positive.
Proof. Since βk(x, x) = βk(x)2 for x ∈X(R), εj1 are all the same, so can be assumed to be
1. Then it follows from Remark 4.14 that we also have εj2 = 1 for all j.
□
Conjecture 4.22. The spectrum of Hecke operators is labeled by positive balanced opers,
possibly with ﬁnitely many eigenvalues corresponding to the same oper.
Example 4.23. Let X be of genus 2 with X(R) having 3 components, C1, C2, C3 that cut
X into two trinions X+, X−. Thus g+ = 0, so π1(X+) is generated by δj, j = 1, 2, 3, with
deﬁning relation δ1δ2δ3 = 1. So Condition 1, saying that all Ai := ρ(δi) are unipotent, implies
that they all commute, as A1A2A3 = 1. In spite of having three equations (Trρ(δi) = 2, i =
1, 2, 3), one can show that the space of such (real) local systems on X is of codimension
2 (i.e., 4-dimensional over R) so it is not a complete intersection. However, Condition 2
provides one more equation to get a 3-dimensional real manifold. Therefore if appropriate
transversality holds, then Conditions 1, 2 and the oper condition imply the discreteness of
the spectrum. Namely, isomorphism classes of (nontrivial) unipotent representations of the
group π1(X+, x0) = F2 are labeled by one complex parameter κ, which lives in CP1 (namely,
ρ(δ2) = ρ(δ1)κ). So Condition 2 just tells us that κ ∈RP1.
Let us write down a formula for β(x, x) in this case, for ρ = ρL. If Condition 1 holds
then we have a global holomorphic solution f(x) of the equation Lf = 0 on X+, generically
unique up to scaling. We can normalize it to be real on C1. We also have another holomorphic
solution g(x) on X+ which is changed by a multiple of f(x) when we go around cycles, which
we can normalize so that W(f, g) = π.
Then g is uniquely determined up to adding a
multiple of f. We can make sure that g is real on C1, then the remaining freedom is adding
to g a real multiple of f. Now consider the function
β(x, x) := |f(x)|2 + Im(f(x)g(x)).
Note that this function is independent on the choice of g, and is single-valued since κ is real.
This function is the eigenvalue of Hx,x when f is normalized so that f(x)|C1 = β(x) (then
this will also hold on C2 and C3, up to sign). Thus we see that in this case every balanced
oper is automatically positive.
Example 4.24. Suppose X has genus g ≥3 with X(R) having g+1 components C1, ..., Cg+1;
thus g+ = 0 so π1(X+) is generated by δj with Qg+1
j=1 δj = 1. Then Condition 1 imposes
g + 1 constraints on the local system: we have that Aj := ρ(δj) are unipotent for j =
1, ..., g + 1. Moreover, now this actually deﬁnes a complete intersection (unlike the previous
example, which is a degenerate case). Once this condition is imposed, our representation
ρ of π1(X+, x0) = Fg is a point of the unipotent SL2-character variety Munip
0,g+1 for the
sphere with g + 1 holes, which has (complex) dimension 2(g −2). Thus the condition that
this point is real is 2(g −2) real equations. So altogether we get g + 1 + 2(g −2) = 3g −3
real equations, i.e. if appropriate transversality holds then we should get a real submanifold
of middle dimension 3g −3 in the 6g −6-dimensional manifold of local systems, as needed
for discrete spectrum.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
47
Example 4.25. More generally, suppose X(R) is the union of C1, ..., Cn where n ≤g + 1.
Then X+ has genus g+ = g+1−n
2
(so g + 1 −n must be even). So Condition 1 gives us n
real equations, and then we end up in the unipotent character variety Munip
g+1−n
2
,n, which has
(complex) dimension d = 3(g + 1 −n) −6 + 2n = 3g −3 −n. So altogether we again get
3g −3 −n + n = 3g −3 real equations, as needed for discrete spectrum.
4.6. Real ovals, non-separating real locus. Now suppose that X(R) still consists of
n circles C1, ..., Cn of real type but now is non-separating. To handle this case, let Σ be
a connected non-orientable surface with n holes of Euler characteristic χ, and let Munip,−
χ,n
be the corresponding unipotent character variety. Note that Σ can be obtained by gluing
s = 1 or 2 M¨obius strips into an orientable surface Σ+ with n + s holes and the same Euler
characteristic χ. We have 2 −2g(Σ+) −n −s = χ, so g(Σ+) = 1 −n+s+χ
2
, and s is such that
n + s + χ is even. Thus Munip
g(Σ+),n+s has dimension −3(n + s + χ) + 2(n + s) = −n −s + 3χ.
So dim Munip,−
χ,n
= −n −3χ (since we no longer have unipotency condition at s of the n + s
holes, where we glue in a M¨obius strip).
Now let Σ = X/τ. This is a non-orientable surface of Euler characteristic χ = 1 −g and
n holes. So dim Munip,−
χ,n
= −n −3χ = 3g −3 −n. Thus Condition 1 gives n equations, and
the real locus in Munip,−
χ,n
another 3g −3−n equations, so altogether we get 3g −3 equations,
again as needed.
4.7. Quaternionic ovals. For a quaternionic oval Cj the Hecke operator Hx for x ∈Cj is
not deﬁned, so the function β(x) is not deﬁned either. As a result, it is not hard to show
that
lim
x→Cj Hx,x = 0
and thus β(x, x) = 0 for x ∈Cj. More speciﬁcally, the function β(x, x) near Cj has the form
(4.6)
β(x, x) = ±Im(fj(x)gj(x)),
where as before fj, gj are real solutions of the oper on Cj such that W(fj, gj) = π, so we
have
β(x, x) ∼π|b|
where b is the distance from x to the oval (this makes sense because β is not a function but
actually a −1/2-density, i.e., |b| is really |db/b|−1). However, the normalization of fj is now
not ﬁxed, so we are free to multiply fj by a nonzero real scalar and divide gj by the same
scalar.
Also, we no longer have a condition that monodromy around Cj is unipotent. It only has
to have real eigenvalues µ±1
j , so it can preserve the indeﬁnite Hermitian form deﬁned by β
(see (4.6)), and fj, gj are the corresponding eigenvectors.
4.8. Conditions with ramiﬁcation points. In presence of ramiﬁcation points on Cj (in
which case in absence of twists Cj is necessarily of real type), the story should be the same,
except that by monodromy along Cj we should mean monodromy “in the sense of principal
value”, as explained in [EFK3], Subsection 4.7; i.e., when we continue through a ramiﬁcation
point, we take minus the half-sum of upper and lower analytic continuation. So for genus 0
we recover exactly the answer from [EFK3], Subsection 4.7. In this case the real locus divides
CP1 into two disks, which are simply connected, so we don’t have any conditions similar to

48
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
Subsection 4.2, and the balancing conditions on ρL can be formulated solely in terms of the
neighborhood of the real locus. This is exactly what happens in [EFK3], Subsection 4.7.
5. Analytic Langlands correspondence and Gaudin model
In this section we discuss the Gaudin model and its generalizations and relate these models
to various settings of the analytic Langlands correspondence on P1 with ramiﬁcation points
over R and C.
Initially, the Gaudin model associated to a simple Lie algebra g was deﬁned for the tensor
products of ﬁnite-dimensional representations of g. But in fact the Gaudin Hamiltonians
(which we have already encountered in Subsection 3.3 in the case g = sl2) give rise to
well-deﬁned commuting operators on the tensor product of any representations of g. If this
tensor product has a weight space decomposition with ﬁnite-dimensional weight spaces, then
since these subspaces are preserved by the Gaudin Hamiltonians, the corresponding spectral
problem is clearly well-deﬁned. This is the case, for example, when all representations are
of highest weight or lowest weight.
If this is not the case, the spectral problem may still be well-deﬁned if there is a natural
Hilbert space structure on a completion of this tensor product and the Gaudin Hamiltoni-
ans can be extended to self-adjoint strongly commuting operators on it. This conjecturally
happens when the representations of g come from tempered unitary representations of a con-
nected real Lie group G(R) whose complexiﬁed Lie algebra is g; for example, this happens
for representations of the unitary principal series of SL2(R). The traditional methods of
Bethe Ansatz can no longer be used in this case. But here we get into the setting of the
analytic Langlands correspondence for G = SL2, X = P1, and F = R with real ramiﬁcation
points discussed in Section 4 (with the Gaudin Hamiltonians being the Hitchin Hamiltoni-
ans). Hence we can use the results of Section 4 to describe the spectrum of the Gaudin
Hamiltonians.
In fact, we will show that even the original case of the tensor product of ﬁnite-dimensional
representations of g can be interpreted in the framework of the analytic Langlands correspon-
dence (namely, it appears in the quaternionic case discussed in Subsection 4.7). Applying
our results, we obtain a new interpretation of the description of the spectrum of the Gaudin
Hamiltonians in this case in terms of monodromy-free opers [F2, R]. This description is
closely related to the Bethe Ansatz in the Gaudin model. We discuss all this in Subsections
5.1–5.3 and 5.5–5.7.
In Subsection 5.4 we consider the case of the tensor product of the inﬁnite-dimensional
contragredient Verma modules with arbitrary highest weights. In this case the weight sub-
spaces of the tensor product are ﬁnite-dimensional and the spectral problem for the Gaudin
Hamiltonians is well-deﬁned. It is natural to expect that the spectrum is given by opers
whose monodromy is contained in a Borel subgroup of G∨, the Lie group of adjoint type
associated to the Lie algebra g∨. In a follow-up paper [EF] we intend to prove this result
using the tools of the present paper.
In Subsection 5.8 we interpret this result, in the case when the highest weights satisfy
a certain reality condition, as a description of the spectrum for the tensor product of the
holomorphic discrete series representations of G(R). In Subsection 5.9 we introduce chi-
ral versions of the Hecke operators acting on the tensor product of contragredient Verma
modules.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
49
Next, in Subsection 5.10 we discuss the inﬁnite-dimensional case. First, we describe the
spectrum for the tensor product of unitary principal series representations in terms of bal-
anced opers. This is essentially the statement of Theorem 4.15. This case is very interesting
because we cannot use the ordinary Bethe Ansatz method (since these representations don’t
have highest weight vectors). We also comment on the case of a tensor product of discrete
series representations involving both holomorphic and anti-holomorphic ones.
In Subsection 5.11 we interpret the analytic Langlands correspondence for P1 with para-
bolic structures over C (discussed in Subsection 3.3) as a “double” of the Gaudin model.
In all of these settings, our description of the spectrum relies on the existence of the Hecke
operators, which commute with the Gaudin Hamiltonians and satisfy diﬀerential equations
(the universal oper equations). These equations can be used to describe the analytic prop-
erties of the opers encoding the possible eigenvalues of the Gaudin Hamiltonians.
Interestingly, the role of the Hecke operators is played by the Gaudin model analogues
of Baxter’s Q-operators or closely related operators (see Subsection 5.7). This allows us
to regard the generalized Bethe Ansatz method and Baxter’s Q-operators as arising from
special cases of the tamely ramiﬁed analytic Langlands correspondence in genus 0. We also
discuss a q-deformation of this story, which has to do with the quantum integrable models
of XXZ type associated to the quantum aﬃne algebra Uq(bg), in Subsections 5.12 and 5.13.
5.1. The Gaudin model and monodromy-free opers. Let g be a simple Lie algebra
over C and G the connected simply-connected algebraic group with the Lie algebra g. Let
g = n+ ⊕h ⊕n−be a triangular decomposition of g with Weyl group W ⊂Aut(h). Let
Λ+
G ⊂h∗be the set of dominant integral weights of g (and G), and let Vλ be the ﬁnite-
dimensional irreducible representation of G with highest weight λ ∈Λ+
G.
Let
{ti} := {t0, t1, . . . , tm+1 = ∞}
be a collection of (m + 2) distinct points on P1, with the last point tm+1 identiﬁed with the
point ∞(with respect to a once and for all chosen global coordinate x on P1). Fix λi ∈Λ+
G,
0 ≤i ≤m + 1, and let
(5.1)
H := (Vλ0 ⊗... ⊗Vλm+1)g ≃(Vλ0 ⊗... ⊗Vλm)n+[λ∗
m+1].
Thus, H is the subspace of singular vectors of weight λ∗
m+1 = −w0(λm+1) in Vλ0 ⊗... ⊗Vλm,
where w0 ∈W is the maximal element.
The space H carries an action of a commutative subalgebra G ⊂(U(g)⊗m+1)g of the
generalized Gaudin Hamiltonians introduced in [FFR] (see also [F1, F2]).29 The algebra
G includes the original (quadratic) Gaudin Hamiltonians
(5.2)
Gi :=
X
j̸=i
X
a
Ja(i)J(j)
a
tj −ti
,
where {Ja} and {Ja} are two bases of the Lie algebra g dual to each other with respect to
the normalized non-degenerate invariant bilinear form. In the case g = sl2, the algebra G
is generated by the Gi’s. For groups of rank greater than 1, there are also higher Gaudin
Hamiltonians.
Joint eigenvectors and eigenvalues of the algebra G in H have been constructed explicitly
in [FFR] generalizing the classical Bethe Ansatz method in the case g = sl2 (in [RV] an
29This algebra is called the Bethe algebra or the Gaudin algebra.

50
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
alternative proof was given that these vectors are eigenvectors of the Gi’s). It has been
proved in [SV] (see also [F1]) that for g = sl2 these eigenvectors form a basis in H if the
collection {ti} is generic. But for other groups this is not always the case. The reasons for
this are explained in [F2], Section 5.5. An explicit counterexample in the case g = sl3 has
been given in [MV].
However, an alternative description of the spectrum of the algebra G on the space H, which
does not rely on explicit formulas for the eigenvectors, was conjectured in [F2] (following
[F1]) and proved in [R]. Namely, let G∨be the Langlands dual group of G (thus, G∨is
the Lie group of adjoint type with associated with the Lie algebra g∨which is Langlands
dual to g). There is a bijection between the joint spectrum of the algebra G of generalized
Gaudin Hamiltonians on H given by formula (5.1) (without multiplicities) and the set of
monodromy-free G∨-opers on P1 with regular singularities at the points ti, with residues
̟(−λi −ρ) ∈h∗/W, where ̟ is the projection h∗→h∗/W.30 (In the case of g = sln, a
similar result was proved in [MTV].) Moreover, it is shown in [R] that for a generic collection
{ti} the algebra G is diagonalizable on H and its spectrum is simple. The precise statement
is given in Theorem 5.5 below.
5.2. The Gaudin model for g = sl2. Consider ﬁrst the Gaudin model for g = sl2. Note
that w0(λ) = −λ, so λ∗= λ for all weights λ. We identify the dominant integral weights λi
with non-negative integers and deﬁne n by the formula
(5.3)
2n =
m
X
i=0
λi −λm+1.
For the space
(5.4)
H =
 m
O
i=0
Vλi
!n+
[λm+1]
to be non-zero, n must be a non-negative integer.
The algebra G of Gaudin Hamiltonians is in this case generated by the Gi’s given by formula
(5.2). The original formulation of Bethe Ansatz for diagonalization of these operators is the
following.
Given a collection w = {w1, . . . , wn} of distinct complex numbers such that
wj ̸= ti for all i and j, deﬁne the Bethe vector by the formula
(5.5)
vw := f(w1) . . . f(wm)v,
where
(5.6)
f(w) :=
m
X
i=0
fi
w −ti
and v is the tensor product of the highest weight vectors of the representations Vλi.
The following is the system of Bethe Ansatz equations on the numbers wj, j = 1, . . . , n:
(5.7)
m
X
i=0
λi
wj −ti
=
X
s̸=j
2
wj −ws
,
j = 1, . . . , n.
30The notion of residue was introduced in [BD1], Section 3.8.11; see also [F3], Subsection 9.1.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
51
Theorem 5.1 ([SV]). For a generic collection {ti}, the vectors vw with w = {w1, . . . , wn}
satisfying the system (5.7) form an eigenbasis of H. The eigenvalue µi of Gi on vw is given
by the formula
(5.8)
µi = λi
 X
k̸=i
λk
2(ti −tk) −
n
X
j=1
1
ti −wj
!
.
This result is referenced as completeness of Bethe Ansatz for g = sl2.
Analogs of Bethe vectors have been constructed for an arbitrary Lie algebra g [FFR, RV].
Unfortunately, they do not give an eigenbasis for a general g even for a generic collection
{ti}, so Bethe Ansatz is incomplete; a counterexample has been found already for g = sl3
[MV].
Luckily, there is an alternative approach to describing the joint spectrum of the Gaudin
Hamiltonians on the space H given by (5.1). It uses a realization [FFR, F1, F2] of the
algebra of Gaudin Hamiltonians as the quotient of the center of the completed enveloping
algebra of the aﬃne Kac-Moody algebra at the critical level and its isomorphism with the
algebra of functions on the space of G∨-opers on the punctured disc [FF, F3]. We will now
explain this approach in the case of g = sl2 and connect it to the Bethe Ansatz discussed
above.
For g = sl2, we have G = SL2 and G∨= PGL2. The Bethe Ansatz equations can be
interpreted in terms of monodromy-free PGL2-opers on P1 as follows.
Recall that a PGL2-oper is a second order-diﬀerential operator acting from K−1
2 to K
3
2
of the form ∂2
x −v(x). Such an oper is said to have a regular singularity at the point x = t
with residue ̟(λ + 1) = 1
2(λ + 1)2 if its expansion near this point has the form
∂2
x −λ(λ+2)
4(x−t)2 + O( 1
x−t), x →t
(where for t = ∞we take the expansion in 1/x).
Lemma 5.2. If
(5.9)
∂2
x −v(x) = (∂x −u(x))(∂x + u(x)),
where
(5.10)
u(x) =
m
X
i=0
λi
2(x −ti) −
n
X
j=1
1
x −wj
for some distinct wj, 1 ≤j ≤n, with wj ̸= ti, satisfying the system (5.7), then the PGL2-oper
∂2
x −v(x) on P1 has trivial monodromy representation
(5.11)
π1(P1\{t0, . . . , tm, tm+1 = ∞}) →PGL2(C)
and regular singularities at the points ti, with residues ̟(λi + 1), λi ∈Z≥0, 0 ≤i ≤m + 1.
Moreover, the converse is also true for a generic collection {t0, . . . , tm, tm+1 = ∞}.
Proof. If the PGL2-oper ∂2
x −v(x) has the form (5.9) with u(x) given by formula (5.10), then
the section
(5.12)
Φ := Φ(x)dx−1
2, Φ(x) :=
m
Y
i=0
(x −ti)−λi
2
n
Y
j=1
(x −wj)

52
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
of K−1
2 is a solution of the equation
(5.13)
(∂2
x −v(x))Φ(x) = 0.
Moreover,
Φ∗(x) := Φ(x)
Z
Φ−2(x)dx
is then another, linearly independent local solution of the same equation. This solution is
a single-valued global solution on P1 with singularities only at the points {ti} if and only if
equations (5.7) are satisﬁed (in fact, the j-th equation in (5.7) is equivalent to it having no
monodromy at x = wj).
Conversely, suppose that ∂2
x −v(x) is a PGL2-oper on P1 which has regular singularities at
ti’s with residues ̟(λi+1), λi ∈Z≥0 and trivial monodromy representation (5.11). Equation
(5.13) then must have a solution of the form
(5.14)
Φ := Φ(x)dx−1
2, Φ(x) :=
m
Y
i=0
(x −ti)−λi
2 Q(x),
where Q(x) is a polynomial of degree n. According to Theorem 13 of [SV], the roots of this
polynomial do not belong to the set {ti} for generic collections {ti}. Writing
(5.15)
Q(x) =
n
Y
j=1
(x −wj),
we obtain formula (5.9). Moreover, formula (5.13) then implies that the wj’s are pairwise
distinct. Using the argument of the preceding paragraph, we ﬁnd that the wj’s must satisfy
Bethe Ansatz equations (5.7). This completes the proof.
□
Lemma 5.2 links Bethe Ansatz equations to monodromy-free PGL2-opers. In fact, the
j-th equation in (5.7) is equivalent to the property that oper (5.9) has no singularity at
x = wj.
Theorem 5.1 describes the case of generic parameters {ti}. For special collections {ti} the
Gaudin Hamiltonians may not be diagonalizable and/or the Bethe vectors may not give a
basis of H (see the examples in Subsection 5.5). Nevertheless, it turns out that the joint
spectrum of the Gaudin Hamiltonians is in bijection with the monodromy-free PGL2-opers
satisfying the conditions of Lemma 5.2 for all collections {ti}, as stated in the following
theorem. Its part (1) was proved in [F1]; part (2) was conjectured in [F2] and proved in [R]
(without explicit construction of eigenvectors).
Theorem 5.3. (1) The joint eigenvalues {µi}i=0,...,m of the Gaudin Hamiltonians {Gi}i=0,...,m
acting on the space (5.4) are such that the PGL2-oper on P1
(5.16)
L(µ) = ∂2
x −
m
X
i=0
λi(λi + 2)
4(x −ti)2 −
m
X
i=0
µi
x −ti
has regular singularity with residue ̟(λm+1 + 1) at tm+1 = ∞and trivial monodromy repre-
sentation (5.11).
(2) For any collection {t0, t1, . . . , tm+1 = ∞} this deﬁnes a one-to-one correspondence
between the set of joint eigenvalues (without multiplicity) of the Gaudin Hamiltonians and
the set of all such PGL2-opers.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
53
Remark 5.4. 1. Under this correspondence, the eigenvalues µi of the Gaudin operators Gi
are given by the formula
µi = Resti
Φ′′(x)
Φ(x)

= λi
 X
k̸=i
λk
2(ti −tk) −
n
X
j=1
1
ti −wj
!
,
where Φ(x)dx−1
2 is the solution (5.14) (compare with formula (5.8)).
The conditions that L(µ) has a regular singularity and residue ̟(λm+1 + 1) at tm+1 = ∞
are equivalent to the conditions on the eigenvalues µi’s given by the ﬁrst and second equations
in (3.7), respectively.
2. The equation L(µ)β = 0 can we written in the form of connection with ﬁrst order poles
in two diﬀerent ways. Namely, setting
b :=
∂xβ + (Pm
j=0
λj
2(x−tj))β
β

,
for the ﬁrst way we get
(5.17)
∂xb =
 Pm
j=0
λj
2(x−tj)
Pm
j=0
bµj
x−tj
1
−Pm
j=0
λj
2(x−tj)
!
b.
The second way is the same but replacing λj with −λj −2. Note that near x = tj equation
(5.17) in the variable z := x −tj looks like
∂zb =
 λj
2z + aj(z)
bµj
z + cj(z)
1
−λj
2z −aj(z)

b
where aj, cj are regular at z = 0. So we can make the residue of the matrix on the right
hand side independent of bµj by setting eb := diag(z
1
2, z−1
2)b. Then we get
∂zeb =
λj+1
2z
+ aj(z)
bµj + zcj(z)
1
z
−λj+1
2z
−aj(z)

eb.
Now the residue is the regular element
λj+1
2
0
1
−λj+1
2

which maps to ̟(λj + 1) = 1
2(λj + 1)2 under the map A 7→TrA2.
5.3. The case of a general Lie algebra g. Theorem 5.3 generalizes to an arbitrary simple
Lie algebra g as follows.
Theorem 5.5. (1) For any collection {t0, . . . , tm+1 = ∞}, there is a one-to-one correspon-
dence between the set of joint eigenvalues (without multiplicity) of the algebra G of generalized
Gaudin Hamiltonians on the space H given by (5.1) and the set of all G∨-opers on P1 with
regular singularities and residues ̟(−λi−ρ) at ti and with trivial monodromy representation
π1(P1\{t0, . . . , tm, tm+1 = ∞}) →G∨(C).
(2) For generic {t0, . . . , tm}, the algebra G of generalized Gaudin Hamiltonians is diago-
nalizable and has simple spectrum on the space H given by (5.1).

54
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
In [F2], part (1) of this theorem was conjectured and a map in one direction (from the set
of joint eigenvalues to the set of monodromy-free opers) was constructed. The bijectivity of
this map (and hence the statement of part (1)) was proved in [R]. Part (2) was also proved
in [R].
Analytic Langlands correspondence provides a novel conceptual framework for (and in
many cases, solution of) the problem of diagonalization of the Gaudin Hamiltonians. In
particular, Theorem 5.3 will be derived using this framework in Subsection 5.6. We will then
extend this framework to inﬁnite-dimensional representations.
5.4. The Gaudin model with complex weights. The theory of Subsections 5.1, 5.2, and
5.3 can be “analytically continued” to complex weights λj such that α := Pm
i=0 λi−λ∗
j+1 ∈Q+
(nonnegative integer linear combination of simple roots). Namely, we may replace the ﬁnite
dimensional modules Vλj, 0 ≤j ≤m, by contragredient Verma modules ∇(λj) over g with
highest weights λj, and consider the action of Gaudin Hamiltonians in
(5.18)
H := (∇(λ0) ⊗... ⊗∇(λm))n+[λ∗
m+1].
First consider the case of sl2, so λ∗
m+1 = λm+1 and equation (5.3) is satisﬁed for a non-
negative integer n. Analytically continuing the explicit formulas for the Bethe vectors vw
and using Theorem 5.1, we obtain the following result.
Theorem 5.6. For generic collections {t0, t1, . . . , tm+1 = ∞} and {λ0, λ1, . . . , λm+1} satis-
fying formula (5.3) with a non-negative integer n:
(1) The Bethe vectors vw given by formula (5.5) with w = {w1, . . . , wn} satisfying the
system (5.7) form an eigenbasis of the space H given by (5.18). The eigenvalue µi of Gi on
vw is given by the formula (5.8).
(2) The spectrum of the Gaudin Hamiltonians is simple and the set of their joint eigen-
values is in one-to-one correspondence with the set of PGL2-opers on P1 with regular singu-
larities and residues ̟(λi + 1) at ti, i = 0, . . . , m + 1, and with solvable monodromy, i.e.
contained in a Borel subgroup B∨⊂PGL2. Under this correspondence, the collection {µi}
of joint eigenvalues of the Gaudin Hamiltonians Gi, i = 0, 1, . . . , m, maps to the PGL2-oper
given by formula (5.16).
Proof. Suppose that λi and λ∗
m+1 = λm+1 are dominant integral weights. Then we have a
canonical inclusion (up to a scalar)
(5.19)
(Vλ0 ⊗... ⊗Vλm)n+[λm+1] ֒→(∇(λ0) ⊗... ⊗∇(λm))n+[λm+1] = H,
which commutes with the Gaudin Hamiltonians.
For any ﬁxed n given by formula (5.3), this map is an isomorphism for suﬃciently large
{λi}. Suppose that this is the case. Theorem 5.1 then implies that for generic {ti} the Bethe
vectors vw given by formula (5.5), with w = {w1, . . . , wn} satisfying the system (5.7), form
an eigenbasis of H, and moreover, the spectrum of the Gaudin Hamiltonians on H is simple.
Since this is an open condition, the same is true for generic {λi} and {ti}. Moreover, explicit
calculation shows that the eigenvalues µi of the Gaudin Hamiltonians Gi are still given by
formula (5.8). This proves part (1).
Consider the corresponding oper L(µ) on P1 given by formula (5.16). By construction,
it has regular singularities and residues ̟(λi + 1) at ti, i = 0, . . . , m + 1. Since equations
(5.7) are satisﬁed, this oper can be written as the Miura transformation (5.9), where u(z) is
given by formula (5.10). Therefore Φ given by formula (5.14) is a solution of the equation

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
55
L(µ)Φ = 0. This implies that the monodromy of L(µ) is contained in a Borel subgroup of
PGL2.
Conversely, suppose that the numbers µ = {µi} are such that the PGL2-oper L(µ) satisﬁes
the conditions of the theorem. According to Lemma 5.7 below, if λm+1 /∈{−2, −3, ..., −n−1},
then L(µ) is equal to the Miura transformation (5.9) of u(x) given by formula (5.10). The
set of numbers w = {wj} appearing in u(x) then must satisfy equations (5.7). But then
the corresponding Bethe vector vw is an eigenvector of the Gi’s with the eigenvalues µi’s.
Since we know that these vectors form an eigenbasis for generic {ti} and {λi}, we obtain the
statement of part (2).
□
Lemma 5.7. Let L(µ) be a PGL2-oper of the form (5.16) with λi ∈C that has a regular
singularity at ∞with residue ̟(λm+1 + 1), where λm+1 /∈{−2, −3, ..., −n −1} and satisﬁes
equation (5.3) with a non-negative integer n. Then for any collection {λi} and generic {ti}
the equation L(µ)Φ = 0 has a unique solution of the form
(5.20)
Φ := Φ(x)dx−1
2, Φ(x) :=
m
Y
i=0
(x −ti)−λi
2 Q(x),
where Q(x) is a polynomial of degree n with n distinct roots w1, . . . , wn that are also distinct
from {ti} and satisfy the Bethe Ansatz equations (5.7). Moreover, if λi /∈{0, 1, . . . , n −1}
for all i = 0, . . . , m, then this is so for all {ti}.
Equivalently, under the above the above conditions, L(µ) is equal to the Miura transfor-
mation (5.9) of u(x) given by formula (5.10).
Proof. Substituting (5.20) into the equation L(µ)Φ = 0, we obtain the equation
(5.21)
 
∂2
x −
m
X
i=0
λi
x −ti
∂x −
m
X
i=0
bµi
x −ti
!
Q(x) = 0,
where
bµi := µi −
X
j̸=i
λiλj
2(ti −tj).
One of the characteristic exponents of this equation at ∞is equal to n. Hence for any
λi ∈C, i = 0, . . . , m + 1, satisfying (5.3) there is a solution of this diﬀerential equation of
the form xn + P∞
j=1 Qjxn−j, as long as the coeﬃcients Q1, ..., Qn are uniquely determined
by this condition. If this is the case, we set Qj = 0 for j > n, and this will give us a
solution since it does so when all λi’s are positive integers. The standard theory of ODE
implies that Q1, ..., Qn are indeed uniquely determined if and only if the second characteristic
exponent of equation (5.24) is not in {0, 1, ..., n −1}, which translates into the condition
λm+1 /∈{−2, −3, ..., −n −1}.
Denote by w1, . . . , wn the roots of Q(x) counted with multiplicity.
If wj ̸= ti for all
i = 0, . . . , m, equation (5.24) implies that wj is a simple root.
Suppose now that wj = ti for a some i and j ∈Ji ⊂{1, . . . , n}. Then the expansion of
the solution (5.20) of the equation L(µ)Φ = 0 near x = ti is equal to
(x −ti)−λi
2 +|Ji|(1 + O(x −ti))
up to a non-zero scalar factor. But since the leading term of L(µ) at x = ti is λi(λi +
2)/4(x −ti), this is only possible if |Ji| = λi + 1 which means that λi ∈{0, 1, . . . , n −1}.

56
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
If λi /∈{0, 1, . . . , n−1} for all i = 0, . . . , m, we ﬁnd that wj ̸= ti for all i and any collection
{ti}. If λi ∈{0, 1, . . . , n −1} for some i, then we ﬁnd that wj ̸= ti for all i provided that the
collection {ti} is suﬃciently generic. That’s because we know from [SV] that this is so when
all λi’s are non-negative integers (see the last paragraph of the proof of Lemma 5.2).
□
Motivated by Theorem 5.5, it is natural to conjecture the following statements for a general
Lie algebra g.
Conjecture 5.8. (1) For all {ti} and {λi}, there is a one-to-one correspondence between the
set of joint eigenvalues of the algebra G of generalized Gaudin Hamiltonians on H given by
formula (5.18) (without multiplicity) and the set of G∨-opers on P1 with regular singularities
and residues ̟(−λi −ρ) at ti, i = 0, . . . , m + 1, and solvable monodromy.
(2) Suppose that λi and λ∗
m+1 are dominant integral weights. Then the monodromy of the
corresponding G∨-opers is unipotent, and the inclusion (5.19) corresponds to the inclusion
of the set of opers with trivial monodromy into the set of opers with unipotent monodromy.
(3) Let I ⊂{1, ..., m} and
H := (
O
i∈I
Vλi ⊗
O
i/∈I
∇(λi))n+[λ∗
m+1],
where λi are dominant integral for i ∈I. Then the set of joint eigenvalues of the algebra
G on H is in one-to-one correspondence with the set of G∨-opers as above with solvable
monodromy and trivial local monodromy around the points ti, i ∈I.
(4) More generally, suppose that for i = 0, ..., m, pi are parabolic subalgebras of g con-
taining the positive Borel subalgebra b+ ⊂g, ∇(λi, pi) are parabolic contragredient Verma
modules for pi, and
H := (
m
O
i=0
∇(λi, pi))n+[λ∗
m+1].
Then the set of joint eigenvalues of the algebra G on H is in one-to-one correspondence with
the set of G∨-opers as above with solvable monodromy and local monodromy at ti belonging
to Z(L∨
i )U∨
i
⊂G∨, where L∨
i , U∨
i
⊂P ∨
i
are the Levi factor and unipotent radical of the
positive parabolic P ∨
i ⊂G∨dual to pi, and Z(L∨
i ) is the center of L∨
i .
Note that part (3) is a special case of (4) where pi = g if i ∈I and pi = b+ if i /∈I.
In a follow-up paper [EF], we plan to prove one direction of part (1); namely, construct a
map from the set of joint eigenvalues of G to the set of G∨-opers with solvable monodromy.
Also, in Subsection 5.9 below we will consider the case when λm+1 = −r −1, r ∈Z≥0.
Remark 5.9. Still more generally, one may consider the action of the algebra G on (M0⊗...⊗
Mm)n+[λ∗
m+1], where Mi are arbitrary objects from category O. It would be very interesting
to parametrize the spectrum of this action, but here we don’t even have a conjectural picture
yet.
5.5. Examples of Bethe vectors. In this subsection for readers convenience we give some
(well known) examples of Bethe vectors in the space H deﬁned by formula (5.18) and various
phenomena related to them.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
57
Example 5.10. Let g = sl2 and assume that λj is generic for all 0 ≤j ≤m, and let n = 1.
Then dim H = m and the Bethe Ansatz equation has the form
m
X
i=0
λi
w −ti
= 0,
which reduces to a polynomial equation of degree m in w, so its solution set S ⊂C has
cardinality m. For every w ∈S the Bethe vector vw has the form:
(5.22)
vw =
 m
X
i=0
fi
w −ti
!
v,
where v is the tensor product of the highest weight vectors of ∇(λi) and fi is f ∈sl2 acting
in the i-th factor (this is a special case of formula (5.5)). These vectors form a basis in H.
For special weights, however, the Gaudin Hamiltonians may fail to be semisimple and
the Bethe Ansatz equations may have fewer solutions than dim H (possibly none at all), or
inﬁnitely many solutions. Thus Bethe vectors may fail to form a basis of H. Such things
happen, for instance, when λj are dominant integral for 0 ≤j ≤m while λ∗
m+1 is integral,
but not dominant (see [F2]).
Example 5.11. Let m = 2, so we have four ramiﬁcation points t0, t1, t2, ∞. Let Ek be
the space of n+-invariant vectors in ∇(λ0) ⊗∇(λ1) ⊗∇(λ2) of weight P2
i=0 λi −2k. Thus
dim Ek = k + 1.
In E0 we have a unique up to scaling Bethe vector, which is merely the tensor product v
of highest weight vectors of ∇(λi). The eigenvalues of Gi on v are µ0
i := P
j̸=i
λiλj
2(ti−tj).
Now consider Bethe vectors in E1. The Bethe Ansatz equation has the form
2
X
i=0
1
w −ti
= 0,
i.e.,
(5.23)
P(λ, t, w) := λ0(w −t1)(w −t2) + λ1(w −t0)(w −t2) + λ2(w −t0)(w −t1) = 0,
so it is quadratic if P2
i=0 λi ̸= 0, and for generic tj has two solutions w± giving rise to two
Bethe vectors v+, v−which form a basis of E1. The eigenvalues of Gi on the vectors v± are
µ±
i := µ0
i −
λi
ti−w±.
Now consider the case P2
i=0 λi = 0. In this case
Ek = Hom(∆(−2k), ∇(λ0) ⊗∇(λ1) ⊗∇(λ2)),
so we have an injective map R = ∆3(f) : E0 →E1 which is deﬁned by restricting of a
homomorphism ∆(0) →∇(λ1) ⊗∇(λ2) ⊗∇(λ3) to ∆(−2) ⊂∆(0). Thus Rv ∈E1 is an
eigenvector of Gi with eigenvalues µ0
i (as [R, Gi] = 0).
The vector Rv is not, however, a Bethe vector of the form (5.5). Namely, if P2
i=0 λi = 0
then the quadratic term in the Bethe Ansatz equation (5.23) drops out and it becomes linear,
so has only one ﬁnite solution
w+ = −λ0t1t2 + λ1t0t2 + λ2t0t1
λ0t0 + λ1t1 + λ2t2

58
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
(provided that the denominator P2
i=0 λiti is nonzero). The second solution w−escapes to
∞as we approach the hyperplane P2
i=0 λi = 0. Thus we obtain only one Bethe vector v+;
the second vector v−= Rv is a limit of Bethe vectors from generic λi, but is not itself a
Bethe vector, as it does not correspond to a ﬁnite solution of the Bethe Ansatz equations.
Nevertheless, the vectors v+, v−are still an eigenbasis in E1 for the operators Gi, which for
generic ti still act regularly and semisimply on this space.
It is instructive to consider the resonance case when P2
i=0 λi = P2
i=0 λiti = 0 but λi don’t
vanish simultaneously. Then the Bethe Ansatz equations have no solutions, so there are no
Bethe vectors at all. The operators Gi are not semisimple on E1 in this case, so their only
joint eigenvector in E1 up to scaling is v−.
Finally, in the most degenerate case λ0 = λ1 = λ2 = 0, the Bethe Ansatz equation is
vacuous, so any w ∈C is a solution. In this case, Gi act by scalars on E1 and there are
inﬁnitely many Bethe vectors given by (5.22).
A slightly more interesting example is P2
i=0 λi = 2 (assuming that otherwise λi are
generic). In this case we have the injective restriction map R = ∆3(f) : E1 →E2. Generi-
cally we have a basis of Bethe vectors v+, v−of E1 as above, so we have eigenvectors Rv+, Rv−
of Gi with the same eigenvalues.
These vectors are not Bethe vectors, however. Indeed, the Bethe Ansatz equations for E2
have the form
2
X
i=0
λi
w1 −ti
=
2
w1 −w2
,
2
X
i=0
λi
w2 −ti
=
2
w2 −w1
,
which implies that
2(w1 −t0)(w1 −t1)(w1 −t2) = (w1 −w2)P(λ, t, w1),
2(w2 −t0)(w2 −t1)(w2 −t2) = (w2 −w1)P(λ, t, w2).
This is a system of two cubic equations in w1, w2, so for generic λi by Bezout’s theorem it
has 3 · 3 = 9 solutions. However, three of these solutions are w1 = w2 = ti, i = 0, 1, 2,
which are not solutions of the Bethe Ansatz equations. This leaves us with 6 solutions, or
3 modulo the symmetry exchanging w1 and w2, each deﬁning a Bethe vector. But on the
hyperplane P2
i=0 λi = 2 two of these solutions run away to inﬁnity, tending to (∞, w±). This
leaves us with just one solution w which gives rise to a single Bethe vector vw. The vectors
vw, Rv+, Rv−form a basis of E2.
5.6. Analytic Langlands correspondence over R for compact groups. In this sub-
section and the next, we incorporate the Gaudin model for ﬁnite-dimensional representations
into the framework of the analytic Langlands correspondence.
Let F = R and X = P1 with the usual real structure and distinct real ramiﬁcation points
t0, ..., tm+1 (in this cyclic order). As before, we will set tm+1 = ∞, so t0 < ... < tm. Let the
group Gσi, 0 ≤i ≤m+1, be the compact form Gc of G for all i. Place the ﬁnite-dimensional
irreducible representation Vλi of Gc with highest weight λi at the point ti. Then, as we
explained in Subsection 2.15, the Hilbert space of the analytic Langlands correspondence is
deﬁned precisely by formula (5.1). Also the quantum Hitchin Hamiltonians are exactly the
Gaudin Hamiltonians in this case.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
59
It remains to explain why in our setting the monodromy-free condition is precisely the
topological reality condition on spectral opers arising from the analytic Langlands corre-
spondence. Let us do so for G = SL2. We expect that this argument can be generalized to
all simple Lie groups G.
In view of Remark 2.15, we can deﬁne the Hecke operator Hx,x for x ∈C (with coweight
1 of SL2 = (G/(±1))∨attached to both x and x). Recall that since the real locus X(R) is
a quaternionic oval, the eigenvalue of the Hecke operator Hx,x is given by formula (4.6):
β(x, x) = Im(f +
j (x)g+
j (x)), Im(x) > 0
near the interval (tj, tj+1), where f +
j , g+
j are the basic local solutions of the oper equation
Lβ = 0 near tj such that
g+
j (tj + u) = πu
λj
2 +1(1 + ug0
j(u)),
f +
j (tj + u) = u−
λj
2 (1 + uf 0
j (u)) + γju
λj
2 +1(1 + ug0
j(u)) log u,
where f 0
j (u), g0
j(u) ∈R[[u]], γj ∈R. Consider also the basic local solutions f −
j , g−
j of the
oper equation near tj such that for small u > 0
g−
j (tj −u) = πu
λj
2 +1(1 −ug0
j(−u)),
f −
j (tj −u) = u−
λj
2 (1 −uf 0
j (−u)) −γju
λj
2 +1(1 −ug0
j(−u)) log u.
Then the half-monodromy matrix along the upper (respectively, lower) half-circle around tj
between the bases f +
j , g+
j and f −
j , g−
j is
J±
j =

i∓λj
0
i∓(1+λj)γj
−i∓λj

Thus the real analytic continuation along the upper half-circle transforms β = Im(f +
j g+
j ) to
±Im(f −
j g−
j )∓γj|g−
j |2. So to preserve the vanishing condition for β on the real locus, we must
have γj = 0. This means that the monodromy of the oper L around tj, which is given by
the matrix (J−
j )−1J+
j = (−1)λj is trivial in PGL2 for all j, i.e. the oper is monodromy-free.
5.7. The connection between Hecke operators and Baxter’s Q-operator. Let us go
back to the case of the Gaudin model with the space of states H given by formula (5.18).
The following result is proved in the same way as Lemma 5.7.
Theorem 5.12. For arbitrary collections {ti} and {λi} satisfying (5.3) with
λm+1 /∈{−2, −3, ..., −n −1},
there is a unique linear operator Q(x) acting on H given by formula (5.18) commuting with
the Gaudin Hamiltonians Gi, which is a monic polynomial in x of degree n satisfying the
universal oper equation (compare with Proposition 3.7(i)):
(5.24)
 
∂2
x −
m
X
i=0
λi
x −ti
∂x
!
Q(x) −Q(x)
m
X
i=0
bGi
x −ti
= 0,
where
bGi := Gi −
X
j̸=i
λiλj
2(ti −tj).

60
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
In particular, if v ∈H is an eigenvector of the Gi’s with eigenvalues µ = {µi}, we have
Q(x)v = Qv(x)v,
where Qv(x) is the polynomial appearing in the corresponding solution (5.20) of the equation
L(µ)Φ = 0.
As we will see in Subsection 5.12, this operator can be obtained as the q →1 limit of the
celebrated Baxter Q-operator introduced by R. Baxter in the study of integrable quantum
spin chains. For this reason we call Q(x) the Baxter Q-operator of the Gaudin model
(or Baxter’s Q-operator for short).
On the other hand, as we explain presently, this operator Q(x) may be viewed as an
algebraic version of the Hecke operators of the analytic Langlands correspondence.
Let us switch to the setting of the previous subsection (for G = SL2). Thus, H is now
given by formula (5.4). The proof of Theorem 5.12 (which follows the proof of Lemma 5.7)
carries over without changes to this case. Thus, we obtain a Q-operator in this case as well,
for which we will use the same notation. Moreover, the condition λm+1 /∈{−2, −3, ..., −n−1}
becomes vacuous in this case because all λi’s are assumed to be dominant integral.
It is clear that the resulting operator is the restriction of the Q-operator acting on the
tensor product of contragredient Verma modules with dominant integral weights (which is
described in Theorem 5.12) to the tensor product of the corresponding ﬁnite-dimensional
representations under the embedding (5.19).
Consider now the ﬁnite-dimensional case with H given by formula (5.4). Let L(µ) be
a monodromy-free PGL2-oper corresponding via Theorem 5.3 to a set of joint eigenvalues
µ = {µi} of the Gaudin Hamiltonians acting on H. Formula (4.6) implies that the eigenvalue
β(x, x) of the Hecke operator Hx,x corresponding to the PGL2-oper L(µ) is, up to scaling
by an x-independent constant, given by
β(x, x) ∼|Φ(x)|2Im
Z x
x0
Φ−2(z)dz, Im(x) ≥0,
where Φ is deﬁned by (5.14), and the same expression with a minus sign if Im(x) < 0. Here
the lower limit x0 of integration can be any point of X(R); recall from Subsection 5.6 that
if the oper is monodromy-free then the imaginary part of the integral is independent on the
choice of this point.
Thus, again up to a constant,
Hx,x ∼
m
Y
i=0
|x −ti|−λiQ(x)†Q(x)Im
Z x
x0
Q−2(z)
m
Y
i=0
(z −ti)λidz, Im(x) > 0,
Hx,x ∼Q(x)†Q(x)Im
Z x
x0
Q−2(z)
m
Y
i=0
(z −ti)λidz, Im(x) > 0.
Thus we see that the Hecke operator can be expressed in a rather direct way in terms of
Baxter’s Q-operator of the Gaudin model.
5.8. Analytic Langlands correspondence for discrete series representations. Con-
sider now another example of the analytic Langlands correspondence in the setting of the
Gaudin model, which involves discrete series representations of SL2(R). As in Subsection
5.6, we take F = R, X = P1 with the standard real structure and real ramiﬁcation points

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
61
t0, ..., tm+1 ∈R, but now set Gσ to be the split real group SL2(R). So this setting is some-
what diﬀerent from the one of Subsection 5.6, where we deal with compact groups; they are
related by analytic continuation in highest weights.
Let Vi = b∆(−ri) be the completion of the Verma module for 0 ≤i ≤m, and Vm+1 =
b∆(−rm+1)∗, where ri ∈Z≥1. So Vi is a holomorphic discrete series representation for all
0 ≤i ≤m, while Vm+1 is an antiholomorphic discrete series representation.31 Then
HV0,...,Vm+1 = Hom(∆(−rm+1), ∆(−r0) ⊗... ⊗∆(−rm))
= (∆(−r0) ⊗... ⊗∆(−rm))n+
−rm+1.
So the Hilbert space is ﬁnite dimensional in this case. It is non-zero if and only if
(5.25)
rm+1 −
m
X
i=0
ri = 2n,
where n is a non-negative integer. It is easy to see that the Gaudin operators Gi are self-
adjoint, and hence diagonalizable, in this case.
Theorem 5.13. For all real {ti} and all {ri ∈Z≥1} the Gaudin Hamiltonians are diago-
nalizable on HV0,...,Vm+1 with simple joint spectrum and there is a one-to-one correspondence
between the set of their joint eigenvalues and the set of PGL2-opers on P1 with regular
singularities and residues ̟(−ri + 1) at ti, i = 0, . . . , m + 1, and solvable monodromy.
Proof. According to Theorem 5.6, this statement holds for generic collections {ti} and {λi =
−ri}. However, Corollary 2.4.6 of [V] implies that in the case that all ri’s are positive (so that
all λi’s are negative) and all ti’s are real, the Bethe vectors vw corresponding to the solutions
w = {w1, . . . , wn} (with n deﬁned by formula (5.25)) of the Bethe Ansatz equations (5.7)
form a basis of eigenvectors of the Gaudin Hamiltonians. As before, for each such solution w,
denote by µ = {µi} the corresponding set of joint eigenvalues of the Gaudin Hamiltonians
{Gi}. Then the PGL2-oper L(µ) = ∂2
x −v(x) given by formula (5.16) (with λi = −ri)
is equal to the Miura transformation (5.9) of u(x) given by formula (5.10). Equivalently,
equation L(µ)Φ = 0 has a solution Φ given by formula (5.20) with
(5.26)
Q(x) =
n
Y
j=1
(x −wj).
This shows that all opers L(µ) corresponding to the joint eigenvalues µ of the Gaudin
Hamiltonians have solvable monodromy representation.
Suppose that the joint spectrum of the Gaudin Hamiltonians is not simple. Then there
are two diﬀerent solutions w1 and w2 of the Bethe Ansatz equations (5.7) such that the
corresponding joint eigenvalues coincide; that is, µ1 = µ2 and so L(µ1) = L(µ2). But then
equation L(µ1)Φ = 0 has two diﬀerent solutions Φ1 and Φ2 of the form (5.20) with the
monic polynomials Q1(x) and Q2(x) of degree n of the form (5.26) corresponding to w1 and
w2. Therefore, Φ = Φ1 −Φ2 is also a solution of L(µ1)Φ = 0, such that the corresponding
polynomial Q(x) = Q1(x) −Q2(x) is non-zero and has degree 0 ≤k ≤n −1.
It follows from our condition (5.25) that near tm+1 = ∞, any solution of the equa-
tion L(µ1)Φ = 0 has the expansion (up to a non-zero scalar) either yrm/2(1 + O(y)) or
y(−rm+1+2)/2(1 + O(y)), where y = x−1. Therefore, if L(µ1)Φ = 0 has a solution of the form
31More precisely, the representations b∆(−1), b∆(−1)∗are limit of discrete series representations.

62
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
(5.20) with Q(x) of degree 0 ≤k ≤n −1, then rm+1 = n −k + 1. But this is impossible be-
cause (5.25) also implies that rm+1 > 2n. This shows that the joint spectrum of the Gaudin
Hamiltonians is simple.
Conversely, suppose that a PGL2-oper L(µ) = ∂2
x −v(x) has regular singularities with
residues ̟(−ri + 1) at ti, i = 0, . . . , m + 1, where ri ∈Z≥1, i = 0, . . . , m + 1. Then the
ri’s must satisfy equation (5.25), which implies that rm+1 /∈{2, 3, ..., n + 1}. Therefore, by
Lemma 5.7, for all {ti}, the PGL2-oper L(µ) is equal to the Miura transformation (5.9)
of u(x) given by formula (5.10) with λi = −ri, with all wj’s being distinct and diﬀerent
from the ti’s. But then the set of numbers w = {wj} appearing in u(x) must satisfy Bethe
Ansatz equations (5.7), so the corresponding Bethe vector vw is an eigenvector of the Gi’s
with the eigenvalues µi’s. Since we know from above that these vectors form an eigenbasis,
this completes the proof.
□
Remark 5.14. 1. We hope that this statement can be proved within the framework of the
analytic Langlands correspondence, using the results of of Subsection 4.3.
2. The above argument showing the simplicity of the joint spectrum of the Gaudin Hamil-
tonians can also be used to prove the simplicity of the joint spectrum of the Gaudin Hamil-
tonians in the setting of Subsection 5.6.
3. The above proof shows that the statement of Theorem 5.13 remains true if the ri’s are
arbitrary positive real numbers constrained by equation (5.25). If ri is not an integer, one
cannot deﬁne an action of SL(2, R) on a completion of ∆(−ri). But it can be interpreted
as a unitary representation of the universal cover of SL(2, R), and according to Remark
2.22, such representations can also included into the framework of the analytic Langlands
correspondence.
5.9. Chiral analytic Langlands correspondence. In this subsection we consider another
setting in which the analytic Langlands correspondence can be linked to a particular Gaudin
model. Let F = C, X = P1 with ramiﬁcation points t0, ..., tm, tm+1 = ∞, and suppose that
the representations Vj of G are holomorphic. Then in the deﬁnition of the Hecke operator
Hx,λ we may replace the integral
R
Zλ,x(P ) ψ(Q)dQdQ over the complex variety Zλ,x(P) by
the “contour” integral
R
C ψ(Q)dQ, where C ⊂Zλ,x(P) is a real cycle, and by Cauchy’s
theorem the result is stable under deformations of C.
Since Vj are not Hermitian, the
corresponding space H will not carry a Hermitian form, but we may still consider eigenvectors
and eigenvalues of Hecke operators (in the spirit of Remark 2.37).
Admittedly, there are very few holomorphic irreducible representations of G (only the
ﬁnite dimensional ones), but we may in fact take Vj to be certain representations of the Lie
algebra g = LieG which do not necessarily integrate to G. We call this setting the chiral
analytic Langlands correspondence.
Let us show how it works in an example with
G = SL2.
For λ ∈C let ∆(λ), ∇(λ) be the Verma and contragredient Verma modules over g with
highest weight λ. For 0 ≤i ≤m take Vi := ∇(λi), and let Vm+1 = ∆(λm+1)∗be the graded
dual of ∆(λm+1), i.e., the contragredient Verma module with lowest weight −λm+1. Assume
that Pm
i=0 λi −λm+1 = 2n and that λm+1 = r −1, where n, r ∈Z≥0. Then the space
H := Hom(V ∗
m+1, V0 ⊗... ⊗Vm) = Hom(∆(r −1), ∇(λ0) ⊗... ⊗∇(λm))
has dimension
 n+m
m

; it is the space of singular vectors in V0 ⊗... ⊗Vm of weight r −1. We
realize ∇(λ) as C[y] with the action of g given by (3.1). Then the space H is realized as

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
63
the space of homogeneous polynomials of degree n in y0, ..., ym which are invariant under
simultaneous translations. Consider also the space
H′ := Hom(∆(−r −1), ∇(λ0) ⊗... ⊗∇(λm))
of dimension
 n+r+m
m

; it is the space of homogeneous polynomials of y0, ..., ym of degree n+r.
Then we can deﬁne the (modiﬁed) chiral Hecke operator Hchir
x
: H →H′ by analogy with
(2.6), replacing integration over C by contour integration:
(5.27)
(Hchir
x
ψ)(y0, ..., ym) =
I
ψ
t0 −x
s −y0
, ..., tm −x
s −ym
 m
Y
j=0
(s −yj)λjds,
where
H
f(s)ds denotes the residue of f(s)ds at ∞. Note that this residue is well deﬁned
since Pm
i=0 λi = n + r −1 ∈Z, hence the integrand is single-valued near ∞. So this formula
makes sense even though the g-modules Vi do not integrate to G.
Note that we have an inclusion ι : ∆(−r −1) ֒→∆(r −1), so we have the restriction
operator R : H →H′.
Lemma 5.15. Under suitable normalization of ι, we have
(Rψ)(y0, ..., ym) =
I
ψ

1
s −y0
, ...,
1
s −ym
 m
Y
j=0
(s −yj)λjds.
Proof. The proof is similar to the proof of Lemma 2.26. We have
Rψ = ∆m+1( fr
r! )ψ =
I
∆m+1(exp(s−1f)ψ)sr−1ds.
The 1-parameter group generated by f ∈sl2 consists of fractional linear transformations
z 7→
z
tz+1. Therefore
Rψ =
I
ψ
 y0s
s −y0
, ...,
yms
s −ym

sr−1−P
j λj
m
Y
j=0
(s −yj)λjds =
I
ψ

1
s −y0
, ...,
1
s −ym
 m
Y
j=0
(s −yj)λjds.
□
By Lemma 5.15, Hchir
x
∼xnR, x →∞. Also it is easy to show that Hchir
x
satisﬁes the
universal oper equation of Proposition 3.7(i) (the proof is the same as for Hx), hence it
commutes with Gaudin Hamiltonians. So the discussion of Section 5.2 implies
Proposition 5.16. The chiral Hecke operator is the composition of the restriction operator
and the Baxter Q-operator:
Hchir
x
= RQ(x).

64
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
5.10. Inﬁnite dimensional generalizations, including principal series. The above
discussion shows that tamely ramiﬁed analytic Langlands correspondence in genus 0 may
be viewed as a generalization of the Gaudin model in which we can consider the action of
Gaudin Hamiltonians on tensor products of any admissible representations of a real reductive
group G, so that the space of states can be inﬁnite dimensional. For instance, in the case
G = SL2 and F = R (Subsection 5.2), we may replace ﬁnite dimensional representations
Vi of SU(2) by principal series representations Vi of SL2(R) (taking the real locus X(R) =
RP1 ⊂X(C) = CP1 to be real rather than quaternionic). Then the Gaudin operators {Gi}
act as self-adjoint unbounded strongly commuting operators on the Hilbert space
H := MultSL2(R)(V∗
m+1, V0 ⊗... ⊗Vm).
So the spectral problem for {Gi} becomes analytic and can no longer be solved by algebraic
Bethe Ansatz. Nevertheless, the description of the spectrum of the operators {Gi} in terms
of monodromy-free opers (see Theorem 5.5) can be generalized: the spectrum is parametrized
(at least conjecturally) by the set of balanced opers with prescribed residues, as explained
in Subsection 4.3.2. Namely, we have the following result.
Theorem 5.17. The set of joint joint eigenvalues µi of the Gaudin operators Gi on the
Hilbert space MultSL2(R)(V∗
m+1, V0 ⊗... ⊗Vm) is in one-to-one correspondence with the set of
Λ-balanced opers on P1 of the form
L(µ) = ∂2
x −
m
X
i=0
λi(λi + 2)
4(x −ti)2 −
m
X
i=0
µi
x −ti
,
subject to the equations
(5.28)
m
X
i=0
µi = 0,
m
X
i=0
tiµi = λm+1(λm+1 + 2)
4
−
m
X
i=0
λi(λi + 2)
4
,
where λj are the parameters of the principal series representations Vj := L2(RP1, |K|−
λj
2 )
and Λ = (Λ0, ..., Λm+1), Λj = −ie
πiλj
2 .
Indeed, this follows from the fact that the Gaudin operators {Gi} strongly commute with
Hecke operators, hence have the same spectral decomposition, and the latter is described in
Subsection 4.3.2.
Similarly, one can generalize to the inﬁnite dimensional case the setting of Subsection 5.8.
Namely, we may consider the situation when Vi = b∆(−ri), 0 ≤i ≤p, and Vi = b∆(−ri)∗for
p + 1 ≤i ≤m + 1, i.e., we have p holomorphic discrete series representations and m −p + 1
antiholomorphic ones. Then the Hilbert space H is inﬁnite dimensional if 1 ≤p ≤m −1, so
the problem is again no longer algebraic. Since discrete series representations are composition
factors of (non-unitary) principal series representations, one can presumably generalize the
analysis of Subsection 4.3.2 to describe the spectrum in this case, but we will not discuss
this here.
5.11. Double Gaudin model. The discussion of the analytic Langlands correspondence
for a group G on P1 with parabolic points over C in Subsection 3.3 can be framed as a
“double” of the Gaudin model for the Lie algebra g in which we combine holomorphic and
anti-holomorphic degrees of freedom.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
65
For concreteness, consider the case of SL2.
Then we associate to the points ti, i =
0, 1, . . . , m + 1, with tm+1 = ∞as before (these are the parabolic points) spherical unitary
principal series representations of SL2(C), which are completions of spherical Harish-
Chandra bimodules, i.e., spaces of ﬁnite type linear maps between Verma modules for
sl2. We have two commuting actions of the Lie algebra sl2(C) on such representations (by
left and right multiplications), which we can view as holomorphic and anti-holomorphic.
Therefore, on such representations act not only the above Gaudin Hamiltonians Gi but also
their complex conjugates Gi. Hence it is natural to form the generating series S(x) given by
formula (3.4) and its complex conjugate S(x).
We have proved in [EFK2, EFK3] that the Hecke operator Hx (which is a section of
K−1/2 ⊗K
−1/2 on P1) satisﬁes a system of two second-order diﬀerential equations (3.5), see
Corollary 3.9.
The corresponding eigenvalues of the Hecke operators are single-valued C∞solutions of
this system with S(x) and S(x) replaced by the corresponding eigenvalues v(x) and v(x).
As explained in Subsection 3.1, such single-valued solutions exist if and only if the oper
∂2
x −v(x), where v(z) is given by formula (5.16), has real monodromy, and such opers are
called real opers. Theorem 3.10 implies the following result.
Theorem 5.18. If {µi} is the set of joint eigenvalues of the Gaudin operators {Gi} on the
Hilbert space (2.9) then the PGL2-oper
L(µ) = ∂2
x −
m
X
i=0
λi(λi + 2)
4(x −ti)2 −
m
X
i=0
µi
x −ti
on P1 satisﬁes equations (5.28) and has real monodromy. The corresponding eigenvalues of
Gi are equal to µi.
Moreover, we conjecture that there is a one-to-one correspondence between the spectrum of
Gaudin operators {Gi} on this Hilbert space and the set of such opers. This is an extension of
a conjecture from [EFK3] from the case when all λi = −1 to the case when λi ∈−1+R√−1.
In the case when m = 3 or 4 it is proved in the same way as in [EFK3].
5.12. q-deformation of the Gaudin model. The q-deformation of this Gaudin model is
known as the XXZ model. The role of the aﬃne Kac-Moody algebra bsl2 is now played by the
corresponding quantum aﬃne algebra Uq(bsl2).32 In particular, the role of the representations
Vλk attached to the points tk is now played by the corresponding evaluation representations
of Uq(bsl2), and the role of the space H given by (5.4) is played by the space Hq in which we
replace each Vλk by the corresponding evaluation representation (see [FH] for more details).
The role of the generating function S(x) of the Gaudin Hamiltonians given by formula (3.4)
is now played by the transfer-matrix T(z) associated to the two-dimensional evaluation
representation of Uq(bsl2) corresponding to z (see [FH]).
The q-deformation of the Hecke operator Hz is now closely related to the transfer-matrix
H(z) corresponding to an inﬁnite-dimensional representation of a Borel subalgebra of Uq(bsl2)
called prefundamental, see [FH]. Just as in the q = 1 case, it is equal to the product of a
32There is also an intermediate deformation called the XXX model, which preserves the classical sl2
symmetry; its full symmetry algebra is the (doubled) Yangian Y (sl2), which is a degeneration of Uq(bsl2).
The material of this subsection applies mutatis mutandis to the XXX model.

66
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
scalar factor that depends only on the values of {tk} and {λk} and an operator Q(z) acting on
Hq whose eigenvalues are polynomials in z. The latter is is known as Baxter’s Q-operator.
Moreover, there is an analogue of the second-order diﬀerential equation (3.5).
It is a
second-order diﬀerence equation
(5.29)
(D2 −DT(z) + 1)H(z) = 0,
where D is a shift operator, (D · f)(z) := f(zq2), i.e., D := q2z∂.
If we write T(z) =
2 + h2z2S(z) + . . ., where q = eℏ, expand equation (5.29) in a power series in ℏ, divide by ℏ2
and set ℏ= 0 (i.e. q = 1), we obtain equation (3.5). In this sense, equation (5.29) is indeed
a q-deformation of equation (3.5).
The second-order diﬀerence operator in the RHS of (5.29) is known as a q-oper for the
group SL2. The notion of a q-oper has been deﬁned for an arbitrary simple Lie group in
[FKSZ].
Relation (5.29) can be interpreted as a relation in the Grothendieck ring of a certain
category of representations of a Borel subalgebra of Uq(bsl2), see e.g. [FH]. It is often written
in the form
(5.30)
T(z) = H(zq2)
H(z) + H(zq−2)
H(z)
,
and it can be further rewritten as a q-diﬀerence equation on Q(z) known as the Baxter
TQ-relation:
(5.31)
T(z) = A(z)Q(zq2)
Q(z) + D(z)Q(zq−2)
Q(z)
(here A(z) and D(z) are functions that only depend on the parameters {tk} and {λk} of Hq,
see e.g. [FH], formula (1.1)). It has been conjectured by Baxter and proved in [FH] that the
eigenvalues of Q(z) on Hq are polynomials whose roots satisfy a q-deformation of the Bethe
Ansatz equations (5.7) (see [FH], Section 5.6).
At the level of the eigenvalues, we obtain that the Baxter TQ-relation (5.31) expressing the
eigenvalues of T(z) on Hq is a q-deformation of the Miura transformation (5.9) expressing
the eigenvalues of S(z) on H. This was one of the key observations of [FR] (Section 1.3
and Remark 6), see also [F1] (Section 6.8). (Moreover, both maps preserve natural Poisson
structures [FR].)
An insight of the present paper is that Baxter’s Q-operator Q(z) may be viewed as a
q-deformation of an operator closely related to the Hecke operator Hz of the tamely ramiﬁed
analytic Langlands correspondence for SL2 on P1.
There is a similar statement for an
arbitrary simple algebraic group G. This opens the door to the investigation of q-deformation
of the analytic Langlands correspondence (which we expect to exist in the ramiﬁed setting
in genus 0 and 1).
5.13. q-deformation of the double Gaudin model. In conclusion, let us speculate what
this q-deformation of the analytic Langlands correspondence should look like for F = C and
G = SL2 in the case of X = P1 with parabolic structures. As we explained in Subsection
5.11, for q = 1 this is the double Gaudin model.
In the undeformed situation (with twists) we place at the parabolic points the spherical
unitary principal series representations of SL2(C), which are completions of spherical Harish-
Chandra bimodules, on which we have an action of the Gaudin Hamiltonians Gi and their

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
67
complex conjugates Gi.
Hence it is natural to form the generating series S(z) given by
formula (3.4) and its complex conjugate S(z).
As shown in Subsection 3.3 (following [EFK2, EFK3]), the Hecke operator Hz satisﬁes the
following system of two second-order diﬀerential equations:
(5.32)
(∂2
z −S(z))Hz = 0,
(∂
2
z −S(z))Hz = 0.
Such a solution exists if and only if the corresponding oper has real monodromy, and such
opers are called real opers. Locally, the Hecke eigenvalue can be written in the form
(5.33)
Ψ0(z)Ψ1(z) + Ψ1(z)Ψ0(z),
where Ψ0(z) and Ψ1(z) are two linearly independent local solutions of equation (5.13) (see
[EFK3]).
In light of the discussion of the previous subsection, we expect that the q-deformation of
this picture for 0 < q < 1 should look as follows. We also expect that a similar picture exists
for F = R, and also for elliptic curves.
1. The spherical unitary principal series representations of SL2(C) should be replaced by
their q-analogs deﬁned in [Pu]; they are completions of spherical Harish-Chandra Uq(sl2)-
bimodules, which are spaces of ﬁnite maps between Verma modules for Uq(sl2).
2. We should view these as bimodules over Uq(bsl2) via the evaluation homomorphism.
Then we can deﬁne the transfer-matrices T(z) and T(z) which are the q-analogues of S(z)
and S(z).
3. The Hecke operator Hz should be given by a suitable q-deformation of the formulas of
Subsection 2.16.4 satisfying the following universal q-oper equations:
(5.34)
(D2 −DT(z) + 1)Hz = 0,
(D
2 −DT(z) + 1)Hz = 0,
where D := q2z∂, D := q2z∂.
The challenge is to make sense of the system (5.34) which at the outset is only well-deﬁned
if the eigenvalues of Hz extend to analytic functions in z and z (viewed as independent
variables). We may also consider the setting where q = eℏand ℏis a formal variable, in
which this analytic subtlety disappears. Finally, we need to identify the property of the
solutions of (5.34) that is a q-analogue of the existence of a single-valued C∞solution of the
oper equations.
Answering this question should lead us to the notion of a real q-oper. We leave this
interesting topic for a future paper.
References
[ABV]
J. Adams, D. Barbasch, and D. Vogan, The Langlands Classiﬁcation and Irreducible Characters for
Real Reductive Groups, Progress in Math. 104, Birkh¨auser Boston, 1992.
[BS]
D. Baraglia and L. Schaposnik, Higgs bundles and (A,B,A)-Branes, Commun. Math. Phys. 331
(2014) 1271-1300, arXiv:1305.4638.
[BK1]
A. Braverman and D. Kazhdan, Some examples of Hecke algebras for two-dimensional local ﬁelds,
Nagoya Math. Journal 184 (2006) 57–84, arXiv:math/0510538.
[BK2]
A. Braverman and D. Kazhdan, Automorphic functions on moduli spaces of bundles on curves over
local ﬁelds: a survey, to appear in Proceedings of ICM-2022, arXiv:2112.08139.
[BKP1] A. Braverman, D. Kazhdan, and A. Polishchuk, Automorphic functions for nilpotent extensions of
curves over ﬁnite ﬁelds, arXiv:2303.16259.
[BKP2] A. Braverman, D. Kazhdan, and A. Polishchuk, Hecke operators for curves over non-archimedean
local ﬁelds and related ﬁnite rings, arXiv:2305.09595.

68
PAVEL ETINGOF, EDWARD FRENKEL, AND DAVID KAZHDAN
[BT]
F. Bruhat and J. Tits, Groupes alg´ebriques sur un corps local. Chapitre III. Compl´ements et appli-
cations ´a la cohomologie galoisienne, Journal of Fac. Sci. Univ. Tokyo Section IA Math. 34 (1987)
671–698.
[BGH]
I. Biswas, O. Garcia-Prada, and J. Hurtubise, Pseudo-real principal G-bundles over a real curve,
Journal of London Math. Soc. 93 (2016) 47–64, arXiv:1502.00563.
[BD1]
A. Beilinson and V. Drinfeld, Quantization of Hitchin’s integrable system and Hecke eigensheaves,
https://math.uchicago.edu/~drinfeld/langlands/QuantizationHitchin.pdf
[BD2]
A. Beilinson and V. Drinfeld, Opers, arXiv:math/0501398.
[Br]
L. Breen, Notes on 1- and 2-gerbes, in Towards Higher Categories, John C. Baez, J. Peter May
(eds.), the IMA Volumes in Mathematics and its Applications, Springer New York, 2010, pp. 193–
237, arXiv:math/0611317.
[Ca]
W. Casselman, Introduction to the theory of induced representations of p-adic reductive groups,
https://personal.math.ubc.ca/~cass/research/pdf/p-adic-book.pdf
[D]
J. Dixmier, C*-algebras, North Holland, 2011.
[DM]
T. Deshpande and S. Mukhopadhyay, Crossed modular categories and the Verlinde formula for
twisted conformal blocks, Cambridge Journal of Math. 11 (2023) 159–297, arXiv:1909.10799.
[EF]
P. Etingof and E. Frenkel, in preparation.
[EFK1] P. Etingof, E. Frenkel, and D. Kazhdan, An analytic version of the Langlands correspondence for
complex curves, in Integrability, Quantization, and Geometry, Vol. II, Dedicated to the Memory of
Boris Dubrovin, S. Novikov, e.a. (eds.), Proc. Sympos. Pure Math. 103.2, pp. 137–202, Amer. Math.
Soc., Providence, RI, 2021, arXiv:1908.09677.
[EFK2] P. Etingof, E. Frenkel, and D. Kazhdan, Hecke operators and analytic Langlands correspondence
for curves over local ﬁelds, Duke Math. Journal 172 (2023) 2015–2071, arXiv:2103.01509.
[EFK3] P. Etingof, E. Frenkel, and D. Kazhdan, Analytic Langlands correspondence for PGL2 on P1 with
parabolic structures over local ﬁelds, Geom. Funct. Anal. 32 (2022) 725–831, arXiv:2106.05243.
[Fa]
G. Faltings, Real projective structures on Riemann surfaces, Compositio Math. 48 (1983) 223–269.
[FF]
B. Feigin and E. Frenkel, Aﬃne Kac-Moody algebras at the critical level and Gelfand-Dikii algebras,
Int. Journal of Mod. Phys. A7, Suppl. 1A (1992) 197–215.
[FFR]
B. Feigin, E. Frenkel, and N. Reshetikhin, Gaudin model, Bethe Ansatz and critical level, Commun.
Math. Phys. 166 (1994) 27–62, arXiv:hep-th/9402022.
[F1]
E. Frenkel, Aﬃne algebras, Langlands duality and Bethe Ansatz, in Proceedings of the International
Congress of Mathematical Physics, Paris, 1994, D. Iagolnitzer(ed.) , pp. 606–642, International Press,
Cambridge, 1995, arXiv:q-alg/9506003.
[F2]
E. Frenkel, Gaudin model and opers, in Inﬁnite Dimensional Algebras and Quantum Inte-
grable Systems, P. Kulish, e.a. (eds.), Progress in Math. 237, pp. 1–58, Birkh¨auser Basel, 2005,
arXiv:math/0407524.
[F3]
E. Frenkel, Langlands Correspondence for Loop Groups, Cambridge University Press, 2007.
[F4]
E. Frenkel, Is there an analytic theory of automorphic functions for complex algebraic curves?
SIGMA 16 (2020) 042, arXiv:1812.08160.
[FH]
E. Frenkel and D. Hernandez, Baxter’s relations and spectra of quantum integrable models, Duke
Math. Journal 164 (2015) 2407–2460, arXiv:1308.3444.
[FKSZ] E. Frenkel, P. Koroteev, D.S. Sage, and A.M. Zeitlin, q-opers, QQ-systems, and Bethe Ansatz,
Journal of European Math. Soc. (2023), arXiv:2002.07344.
[FR]
E. Frenkel and N. Reshetikhin, Quantum aﬃne algebras and deformations of the Virasoro and
W-algebras, Comm. Math. Phys. 178 (1996) 237–264, arXiv:q-alg/9505025.
[GW]
D. Gaiotto and E. Witten, Gauge theory and the analytic form of the geometric Langlands corre-
spondence, Ann. Henri Poincar´e (2022), arXiv:2107.01732.
[GKM] D. Gallo, M. Kapovich, and A. Marden, The monodromy groups of Schwarzian equations on closed
Riemann surfaces, Ann. Math. 151 (2000) 625–704.
[HK]
J. Hong, S. Kumar, Twisted conformal blocks and their dimension, arXiv:2207.09578.
[K]
M. Kneser, Lectures on Galois Cohomology of Classical Groups, Tata Inst. of Fund. Res., 1969.
[Ko]
M. Kontsevich, Notes on motives in ﬁnite characteristic, in Algebra, Arithmetic, and Geometry,
Vol. II, In Honor of Yu.I. Manin, Tschinkel, Y. and Zarhin, Y. (eds.), Progress in Math. 270, pp.
213–247, Birkh¨auser Boston, 2009, arXiv:math/0702206.

A GENERAL FRAMEWORK FOR THE ANALYTIC LANGLANDS CORRESPONDENCE
69
[L]
V. Laﬀorgue, Chtoucas pour les groupes r´eductifs et param´etrisation de Langlands globale, Journal
of AMS 31 (2018) 719–891.
[La]
R.P. Langlands, On analytic form of geometric theory of automorphic forms (in Russian), Preprint
http://publications.ias.edu/rpl/paper/2678
[Ma]
R. P. Martin, Tensor products for SL2(K), Trans. of AMS 239 (1978) 197–211.
[MTV] E. Mukhin, V. Tarasov, and A. Varchenko, Spaces of quasi-exponentials and representations of glN,
Journal of Phys. A 41 (2008) 194017.
[MV]
E. Mukhin and A. Varchenko, Multiple orthogonal polynomials and a counterexample to the Gaudin
Bethe Ansatz conjecture, Trans. of AMS 359 (2007) 5383–5418.
[Na]
M. A. Naimark, Decomposition of a tensorial product of irreducible representations of the proper
Lorentz group into irreducible representations, Trudy Moskov. Mat. Obgc. 8 (1959) 121–153.
[NRS]
N. Nekrasov, A. Rosly, and S. Shatashvili, Darboux coordinates, Yang-Yang functional, and gauge
theory, Nucl. Phys. B216 (2011) 69–93, arXiv:1103.3919.
[P]
L. Puk´anszky, On the Kronecker products of irreducible representations of the 2×2 real unimodular
group. I, Trans. of AMS 100 (1961) 116–152.
[Pu]
W. Pusz, Irreducible unitary representations of quantum Lorentz group, Comm. Math. Phys. 152
(1993) 591–626.
[Re]
J. Repka, Tensor products of unitary representations of SL2(R), Amer. Journal of Math. 100 (1978)
747–774.
[RV]
N. Reshetikhin and A. Varchenko, Quasiclassical asymptotics of solutions to the KZ equations, in
Geometry, Topology, and Physics, pp. 293–322, International Press, Cambridge, MA, 1995.
[R]
L. Rybnikov, A proof of the Gaudin Bethe Ansatz conjecture, Int. Math. Res. Notices, 22 (2020)
8766–8785, arXiv:1608.04625.
[SV]
I.B. Scherbak and A.N. Varchenko, Critical points of functions, sl2 representations, and Fuchsian
diﬀerential equations with only univalued solutions, Moscow Math. Journal 3 (2003) 621–645.
[S]
J.-P. Serre, Galois Cohomology, Springer Monographs in Mathematics, Springer Berlin, Heidelberg,
2001 (translation of Cohomologie Galoisienne, Lecture Notes in Math. 5, Springer Berlin, Heidelberg,
1964).
[Te]
J. Teschner, Quantisation conditions of the quantum Hitchin system and the real geometric Lang-
lands correspondence, in Geometry and Physics, Vol. I, In Honour of Nigel Hitchin, A. Dancer, e.a.
(eds.), pp. 347–375, Oxford University Press, 2018, arXiv:1707.07873.
[T]
N.Q. Thˇa´ng, On Galois cohomology of semisimple groups over local and global ﬁelds of positive
characteristic, I, Math. Z. 259 (2008) 457–470.
[V]
A. Varchenko, Critical points of the product of powers of linear functions and families of bases of
singular vectors, Compositio Math. 97 (1995) 385–401.
[Wi]
F. Williams, Tensor Products of Principal Series Representations, Lecture Notes in Math. 358,
Springer Berlin, Heidelberg, 1973.
[W]
E. Witten, Letter to the authors, March 2021.
[Z]
H. Zelaci, On very stability of principal G-bundles, Geometriae Dedicata 204 (2020) 165–173.
Department of Mathematics, MIT, Cambridge, MA 02139, USA
Department of Mathematics, University of California, Berkeley, CA 94720, USA
Einstein Institute of Mathematics, Edmond J. Safra Campus, Givaat Ram The Hebrew
University of Jerusalem, Jerusalem, 91904, Israel

